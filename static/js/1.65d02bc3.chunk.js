(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{1000:function(e,t,n){"use strict";n.d(t,"a",function(){return u});var r=n(15),a=n(35),o=n(0),i=n.n(o),c=n(98);function l(){var e=Object(r.a)(["\n      position: fixed;\n      bottom: 0;\n      width: 100%;\n  "]);return l=function(){return e},e}var s=a.default.div.withConfig({displayName:"ButtonStrip__StyledButtonStrip",componentId:"sc-4alr49-0"})(["margin:0;margin-bottom:1rem;text-align:center;position:sticky;bottom:1rem;"," div.strip{background-color:#d4d4d4;position:relative;top:3.2rem;z-index:0;height:1.6rem;width:100%;}button{margin:1rem;padding:0.8rem 1.6rem;z-index:1;position:relative;}"],Object(c.d)(l())),u=function(e){var t=e.children;return i.a.createElement(s,null,i.a.createElement("div",{className:"strip"}),t)}},1008:function(e,t,n){"use strict";n.d(t,"a",function(){return o});n(1087);var r=n(924),a=(n(0),n(97),n(133)),o=(n(982),function(){Object(a.a)(),Object(r.d)();return null})},1049:function(e,t,n){"use strict";n.d(t,"a",function(){return f});var r=n(72),a=(n(392),n(68)),o=n(0),i=n.n(o),c=n(897),l=n(894),s=n(895),u=n(896),d=n(219),m=n(23),f=function(){var e=Object(m.b)().order;return Object(a.useObserver)(function(){return i.a.createElement(c.a,{isOpen:e.hasErrors,toggle:e.clearErrors,className:"modal__container"},i.a.createElement(l.a,{toggle:e.clearErrors,tag:s.a,className:"modal__header"},i.a.createElement("span",null,i.a.createElement(r.Trans,{id:"Order can not be completed"}))),i.a.createElement(u.a,{className:"modal__body"},i.a.createElement("div",{className:"modal__body__content"},e.hasErrors&&e.submitErrors.map(function(e,t){return i.a.createElement("div",{key:t},e)})),i.a.createElement("div",{className:"modal__body__button__line"},i.a.createElement("div",{className:"modal__body__button__strip"}),i.a.createElement(d.a,{className:"modal__body__button",color:"primary",onClick:e.clearErrors},i.a.createElement(r.Trans,{id:"I understand"})),"/>")))})}},1050:function(e,t,n){"use strict";n.d(t,"a",function(){return m});var r=n(35),a=n(72),o=n(68),i=n(0),c=n.n(i),l=n(23),s=n(124),u=n(221),d=r.default.div.withConfig({displayName:"OrderGoPayModal__TextPadding",componentId:"e8hzje-0"})(["padding-bottom:2rem;"]),m=function(){var e=Object(l.b)().order;return Object(o.useObserver)(function(){return c.a.createElement(s.a,{isOpen:e.isGoPayChecking,headerText:"GoPay platba"},c.a.createElement(d,null,c.a.createElement(a.Trans,{id:"Checking your GoPay payment, please wait..."})),c.a.createElement(u.a,{noMargin:!0}))})}},1051:function(e,t,n){"use strict";n.d(t,"a",function(){return g});var r=n(36),a=n(35),o=n(48),i=n(68),c=n(0),l=n.n(c),s=n(1416),u=n.n(s),d=n(1417),m=n.n(d),f=n(23),p=n(40),b=n(31),h=a.default.div.withConfig({displayName:"OrderFormTipInput__StyledOrderFormTipInput",componentId:"yjblkh-0"})(["margin:0.8rem 0 1.4rem 0;"]),g=Object(i.observer)(function(){var e=Object(f.b)(),t=e.order,n=e.cart,a=Object(p.r)(),i=Object(r.a)(a,1)[0];return Object(o.useReaction)(function(){return t.usingPaymentMethodWithTips?Number(t.tips):0},function(e){i({tips:e,orderId:t.orderId,withGoods:n.withGoods})}),t.usingPaymentMethodWithTips?l.a.createElement(h,null,l.a.createElement(u.a,null,l.a.createElement(m.a,{type:"select",value:t.tips,onChange:function(e){t.setTips(Number.parseInt(e.target.value,10))},disabled:t.disableInteraction,"data-testid":"orderTipsSelect"},l.a.createElement("option",{value:0},b.b._("Without tips")),l.a.createElement("option",{value:5},b.b._("Tips 5%")),l.a.createElement("option",{value:10},b.b._("Tips 10%")),l.a.createElement("option",{value:15},b.b._("Tips 15%")),l.a.createElement("option",{value:20},b.b._("Tips 20%")),l.a.createElement("option",{value:25},b.b._("Tips 25%"))))):null})},1053:function(e,t,n){"use strict";n.d(t,"a",function(){return E});var r=n(38),a=n.n(r),o=n(59),i=n(36),c=n(35),l=n(220),s=n(68),u=n(0),d=n.n(u),m=n(1432),f=n(1433),p=n(1427),b=n(23),h=n(97),g=n(40),v=n(222),_=n(31),y=c.default.div.withConfig({displayName:"OrderPromoInput__CodesPanel",componentId:"ucwmk-0"})(["margin-top:0.5rem;& button{margin-right:0.5rem;font-size:0.7rem;}"]),E=d.a.memo(function(){var e=Object(b.b)(),t=e.order,n=e.cart,r=Object(v.a)(),c=Object(i.a)(r,2),u=c[0],E=c[1],O=Object(g.H)({orderId:t.orderId},{skip:!t.orderId}),j=O.data,w=O.loading,C=Object(g.p)(),k=Object(i.a)(C,1)[0],I=Object(g.q)(),x=Object(i.a)(I,1)[0],N=d.a.useCallback(function(){var e=Object(o.a)(a.a.mark(function e(r){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.orderId){e.next=2;break}return e.abrupt("return");case 2:return e.abrupt("return",k({code:r,orderId:t.orderId,withGoods:n.withGoods}));case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),[]),S=function(){var e=Object(o.a)(a.a.mark(function e(r){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.orderId&&x({codeId:r,orderId:t.orderId,withGoods:n.withGoods});case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),T=Object(l.useOrderPromoCodes)({onCodeAdd:N,onCodeErrors:function(e,t){E(_.b._('Promo code "{code}" is invalid',{code:e}),d.a.createElement("div",null,t.map(function(e){return d.a.createElement("div",{key:e},e)})))},getValidatingMessage:function(e){return _.b._("Validating promo code {code}...",{code:e})}}),P=T.inputProps,M=T.inputRef,R=w?[]:j.order.promoCodes;return Object(s.useObserver)(function(){return d.a.createElement(m.a,null,u,d.a.createElement(f.a,null,d.a.createElement(p.a,Object.assign({innerRef:M,autoComplete:"off",placeholder:_.b._("Promo codes")},P,{disabled:P.disabled||t.disableInteraction}))),d.a.createElement(y,{"data-testid":"promoCodesPanel"},R.map(function(e){var n=e.id,r=e.code;return d.a.createElement(h.b,{key:n,role:"button",disabled:t.disableInteraction,onClick:function(){return S(n)}},"".concat(r," \u2716"))})))})})},1054:function(e,t,n){"use strict";n.d(t,"a",function(){return m});var r=n(48),a=n(924),o=n(0),i=n.n(o),c=n(225),l=n.n(c),s=n(97),u=n(40),d=n(133),m=function(e){var t=e.children,n=Object(a.d)(),o=Object(r.useRouterContext)().history,c=Object(d.a)(),m=Object(u.F)({orderId:c.orderId},{skip:!c.orderId}),f=m.data,p=m.loading;i.a.useEffect(function(){c.hasOrder&&!p&&f.order.orderStateCategory!==u.e.InCart&&o.replace("/")});var b=!p&&f.order.countWares>0&&c.isVamInitialized;return i.a.createElement(i.a.Fragment,null,i.a.createElement(s.a,{type:"submit",color:"primary",size:"md",disabled:!b||n.isSubmitting,"data-testid":"OrderSubmitButton"},n.isSubmitting?i.a.createElement(l.a,{name:"circle",fadeIn:"none",color:"#ccc"}):t))}},1055:function(e,t,n){"use strict";n.d(t,"a",function(){return d});var r=n(35),a=n(72),o=n(68),i=n(0),c=n.n(i),l=n(97),s=n(133),u=r.default.div.withConfig({displayName:"OrderTimeButtons__StyledOrderTimeButtons",componentId:"sc-14ao8bv-0"})(["margin:0 0 1.4rem 0;button{position:relative;padding-top:0.3rem;margin-bottom:0.2rem;height:2.8rem;}button:first-of-type{margin-right:0.8rem;}"]),d=function(){var e=Object(s.a)();return Object(o.useObserver)(function(){if(!e.delayedOrderEnabled)return null;var t=null!==e.deliverAt;return c.a.createElement(u,null,c.a.createElement(l.c,{"data-testid":"orderTimeButtonNow",selected:!t,disabled:e.disableInteraction,onClick:function(){return e.setDeliverAt(null)}},c.a.createElement(a.Trans,{id:"When possible"})),c.a.createElement(l.c,{"data-testid":"orderTimeButtonLater",selected:t,disabled:e.disableInteraction,onClick:e.openTimePicker},t?c.a.createElement(a.DateFormat,{value:e.deliverAt,format:{weekday:"long",hour:"numeric",minute:"numeric"}}):c.a.createElement(a.Trans,{id:"Choose time"})))})}},1056:function(e,t,n){"use strict";n.d(t,"a",function(){return g});var r=n(15),a=n(35),o=n(72),i=n(68),c=n(0),l=n.n(c),s=n(219),u=n(1425),d=n(23),m=n(98);function f(){var e=Object(r.a)(["\n    position: fixed;\n    top: 5rem;\n    font-size: 0.8rem;\n    "]);return f=function(){return e},e}function p(){var e=Object(r.a)(["\n    font-size: 0.9rem;\n    position: sticky;\n    bottom: 0;\n  "]);return p=function(){return e},e}var b=Object(a.default)(s.a).withConfig({displayName:"OrderFormStorageNotice__NoticeButton",componentId:"sc-1i7ezjr-0"})(["font-size:0.9rem;margin:0.2rem 1rem;padding:0.5em 1rem;"]),h=Object(a.default)(u.a).withConfig({displayName:"OrderFormStorageNotice__StorageNotice",componentId:"sc-1i7ezjr-1"})(["width:100%;z-index:5;",";",";padding:0.5rem 1rem;background-color:#d4eddadc;"],Object(m.c)(p()),Object(m.d)(f())),g=function(){var e=Object(d.b)().user;return Object(i.useObserver)(function(){return null!==e.rememberForm?null:l.a.createElement(h,{"data-testid":"OrderFormStorageNotice",className:"animated slideInUp"},l.a.createElement("p",null,l.a.createElement(o.Trans,{id:"This app is using secure storage for keeping filled form data. It's not cookies, these are stored in your browser only."})),l.a.createElement(b,{color:"success",size:"sm",onClick:e.setFormRememberYes,"data-testid":"orderFormStorageNotice__Yes"},l.a.createElement(o.Trans,{id:"Always remember"})),l.a.createElement(b,{color:"secondary",size:"sm",onClick:e.setFormRememberNo,"data-testid":"orderFormStorageNotice__No"},l.a.createElement(o.Trans,{id:"Do not store"})))})}},1057:function(e,t,n){"use strict";var r=n(35),a=n(932),o=n(48),i=n(68),c=n(0),l=n.n(c),s=n(23),u=n(115),d=n(38),m=n.n(d),f=n(135),p=n(59),b=n(36),h=n(40);var g=n(957),v=n(97),_=n(995),y=n(31),E=function(e){var t=e.enabled,n=e.onClick;return l.a.createElement(_.a,null,l.a.createElement(v.a,{color:"primary",disabled:!t,onClick:n,"data-testid":"AddressSubmit"},y.b._("Confirm address")))},O=n(72),j=n(1425),w=n(220),C=n(1427),k=n(153),I=n(391),x=n.n(I);var N=Object(i.observer)(function(e){var t=e.onSearch,n=e.inputProps,r=e.isVisible,a=Object(s.b)().location,o=l.a.useRef(null);l.a.useEffect(function(){r&&null!==o.current&&o.current.focus()},[r]);var i=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:300,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=l.a.useCallback(x()(e,t),[].concat(Object(k.a)(n),[e,t]));return l.a.useEffect(function(){return function(){r.clear()}},[r]),r}(t,2e3);l.a.useEffect(function(){return function(){return i.clear()}},[]);return l.a.createElement(C.a,Object.assign({className:Object(w.cn)({hidden:!r}),onChange:function(e){var t=e.target.value||"";a.setSearchValue(t),0===t.trim().length&&a.clearAddress(),i()},onKeyPress:function(e){"Enter"===e.key&&(i.clear(),t())},onFocus:function(){o.current.select()},value:a.searchValue,innerRef:o,"data-testid":"SearchInput"},n))}),S=n(222),T=Object(i.observer)(function(){var e=Object(s.b)().location,t=Object(S.a)(),n=Object(b.a)(t,2),r=n[0],a=n[1];if(!e.isGeolocationAvailable||e.isResolving)return null;return l.a.createElement(l.a.Fragment,null,r,l.a.createElement("div",{className:"gps",onClick:function(){e.log("geolocating..."),navigator.geolocation.getCurrentPosition(function(t){var n=t.coords,r=n.latitude,a=n.longitude;e.log("geolocated at coords %s, %s (acc: %s)",n.latitude,n.longitude,n.accuracy),e.setGeolocationPoint({latitude:r,longitude:a})},function(t){e.log("failed geolocation",t),e.disableGeolocation(),a(y.b._("Geolocation failed"),y.b._("Your browser does not support geolocation."))},{enableHighAccuracy:!0,maximumAge:6e4})}},l.a.createElement("span",{className:"flaticon-gps"})))}),P=n(225),M=n.n(P),R=function(e){var t=e.address,n=e.isVisible,r=e.isResolving,a=e.onValidClick;return l.a.createElement("div",{"data-testid":"ResolvedAddress",className:Object(w.cn)("resolved__address",{wait:r,hidden:!n}),onClick:r?void 0:a},r?l.a.createElement(M.a,{name:"ball-beat",fadeIn:"none"}):t)},A=n(15),F=n(219),D=n(11),z=new Map;function L(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.count,n=void 0===t?1:t,r=e.watchLocation,a=void 0!==r&&r,c=Object(s.b)(),u=c.map,d=c.location,m=Object(i.useLocalStore)(function(){return{results:null,phrase:d.searchValue,searching:!1,get url(){var e=["count=".concat(n),"lon=".concat(u.longitude),"lat=".concat(u.latitude),"zoom=".concat(u.zoom),"lang=cs,sk,en","enableCategories=1"];return"https://api.mapy.cz/suggest/?".concat(e.join("&"))}}}),p=l.a.useCallback(function(){if(0!==m.phrase.length){d.log("searching phrase: ".concat(m.phrase));var e="".concat(m.url,"&phrase=").concat(m.phrase);z.has(e)?m.results=z.get(e):(m.searching=!0,fetch(e).then(function(e){return e.json()}).then(function(t){var n=t.result.filter(G).map(V);z.set(e,n),m.results=n}).finally(function(){m.searching=!1}))}else m.results=null},[]),b=l.a.useRef(Object(I.debounce)(p,500)),h=l.a.useCallback(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d.searchValue;d.log("onSearch ".concat(e)),m.phrase=e.trim(),b.current.clear(),p()},[p]);return Object(o.useReaction)(function(){return d.searchValue},function(e){0===e.length&&(m.phrase="",m.results=null,b.current.clear())}),l.a.useEffect(function(){return Object(D.reaction)(function(){return m.url},function(){a&&b.current()})},[a]),Object(f.a)({},m,{onSearch:h})}function G(e){var t=e.userData,n=t.latitude,r=t.longitude;return n&&r}function V(e){var t=e.category,n=e.userData,r=n.id,a=n.latitude,o=n.longitude,i=n.suggestFirstRow,c=n.suggestSecondRow,l=[n.municipality,n.district,n.country,c].find(Boolean)||"";return{id:r,category:t,gps:{latitude:a,longitude:o},address:"".concat(i).concat(l?", ".concat(l):"")}}function B(){var e=Object(A.a)(["\n  position: absolute;\n  margin-top: 0.1rem;\n\n  > div,\n  button.hint:hover {\n    background-color: #ffffffaa;\n  }\n\n  > div {\n    display: flex;\n    flex-direction: column;\n    align-items: flex-start;\n    border: 1px solid transparent;\n    border-radius: 0.4rem;\n    padding: 0.375rem 0.75rem;\n    font-size: 1rem;\n    line-height: 1.5;\n    max-width: 25rem;\n    text-align: left;\n\n    & > p {\n      font-size: 0.8rem;\n      color: gray;\n    }\n\n    button {\n      &:hover,\n      &:hover:focus {\n        text-decoration: none;\n      }\n    }\n\n    button.done {\n      color: darkgray;\n    }\n  }\n\n  button.hint {\n    color: coral;\n    text-shadow: 0.5px 0.5px darkgray;\n    &:hover {\n      text-decoration: none;\n      transition: background-color 0.5s ease;\n    }\n  }\n"]);return B=function(){return e},e}var W=r.default.div(B()),H=Object(i.observer)(function(e){var t=Object(s.b)().location,n=Object(i.useLocalStore)(function(){return{open:!1}}),r=L({count:5,watchLocation:n.open}),a=r.results,c=r.searching,u=r.onSearch;if(Object(o.useReaction)(function(){return n.open},function(e){e&&u()}),Object(o.useReaction)(function(){return t.searchValue},function(){n.open=!1}),!t.hasSearchValue)return null;var d=a&&a.filter(function(e){return e.address!==t.address});return l.a.createElement(W,{className:Object(w.cn)("animated",{bounceInLeft:n.open,bounceIn:!n.open}),key:n.open.toString()},n.open?l.a.createElement("div",null,l.a.createElement("p",null,l.a.createElement(O.Trans,{id:"Hint: Try moving map around and zooming closer to your location to improve these results."})),c&&l.a.createElement("div",null,"..."),d&&d.map(function(e){return l.a.createElement(F.a,{size:"sm",color:"link",key:e.id,onClick:function(){t.setSearchResult(e),n.open=!1}},e.address)}),l.a.createElement(F.a,{size:"sm",color:"link",onClick:function(){n.open=!1},className:"done"},d&&0===d.length?l.a.createElement(O.Trans,{id:"No match for map location"}):l.a.createElement(O.Trans,{id:"I don't see anything useful here."}))):l.a.createElement(F.a,{className:"hint",color:"link",onClick:function(){n.open=!0}},l.a.createElement(O.Trans,{id:"Looking for a different address?"})))}),q=r.default.div.withConfig({displayName:"DeliveryAddressSearch__Styled",componentId:"sc-1lgdvur-0"})(["width:90%;min-width:14rem;margin:1rem auto;text-align:center;div.container{display:flex;border-radius:1rem;border:1px solid #d4d4d4;background-color:white;height:2.3rem;}input{height:auto;background:transparent;border:none;&:focus{box-shadow:initial;}&.hidden{display:none;}}div.gps{color:",";cursor:pointer;position:relative;top:0.2rem;}div.resolved__address{margin:0.4rem 0.7rem 0.4rem 0.7rem;font-size:1rem;color:green;width:100%;cursor:pointer;&.hidden{display:none;}&.wait{display:flex;justify-content:center;font-size:0.5rem;cursor:wait;}}.alert{pointer-events:none;margin-bottom:0;}"],function(e){return e.theme.secondary}),U=Object(i.observer)(function(){var e=Object(s.b)(),t=e.map,n=e.location,r=L(),a=r.results,o=r.searching,i=r.onSearch;return l.a.useEffect(function(){o&&n.setIsResolving(o)},[o]),l.a.useEffect(function(){if(null!==a){if(0===a.length)return n.log("no result from direct geocoder api"),void n.setAsNotResolved();var e=Object(b.a)(a,1)[0],r=e.category,o=e.gps,i=o.latitude,c=o.longitude;if(t.mapRef&&(t.log("panning to result gps ".concat(i," / ").concat(c)),t.mapRef.panTo(Object(u.b)(e.gps))),!r||!r.startsWith("address"))return n.log("result with category %s",r),void n.setAsNotAddress();n.log("found address ".concat(e.address)),n.latitude!==i&&n.longitude!==c&&n.resetResolution(),n.setSearchResult(e)}},[a]),l.a.createElement(q,null,l.a.createElement("div",{className:"container"},l.a.createElement(R,{address:n.address||"",isVisible:n.hasAddress,isResolving:n.isResolving,onValidClick:n.clearAddress}),l.a.createElement(N,{inputProps:{placeholder:y.b._("Type address or choose it from map"),autoComplete:"shipping street-address"},onSearch:i,isVisible:!(n.hasAddress||n.isResolving)}),l.a.createElement(T,null)),l.a.createElement(Y,null),l.a.createElement(H,null))});function Y(){var e=Object(s.b)().location;return e.hasResolutionResult?!1===e.isResolved?l.a.createElement(j.a,{color:"danger"},l.a.createElement(O.Trans,{id:"Address was not recognized."})):!1===e.isStreetAddress?l.a.createElement(j.a,{color:"warning"},l.a.createElement(O.Trans,{id:"Please enter address with house number."})):!1===e.inDeliveryLocation?l.a.createElement(j.a,{color:"warning"},l.a.createElement(O.Trans,{id:"Meal can't be delivered to your chosen address by any restaurant."})):null:null}var J=n(996),K=n(223);n.d(t,"a",function(){return Q});var Z=r.default.div.withConfig({displayName:"DeliveryMap__StyledDeliveryMap",componentId:"sc-6qnl5t-0"})([".delivery__map__address{position:absolute;top:0;left:2.3rem;right:2.3rem;}.delivery__map__submit{position:absolute;bottom:3rem;width:100%;}"]),Q=Object(i.observer)(function(e){var t=e.onConfirm,n=Object(s.b)(),r=n.map,c=n.location,d=n.business,v=function(){var e=Object(s.b)().location,t=Object(h.k)({fetchPolicy:"cache-first"}),n=Object(b.a)(t,1)[0];return l.a.useCallback(function(){var t=Object(p.a)(m.a.mark(function t(r){var a,o;return m.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.setIsResolving(!0),t.next=3,n(Object(f.a)({},e.resolutionTarget,r));case 3:a=t.sent,null!==(o=a.data)&&e.setResolutionResult(o.resolveLocation),e.setIsResolving(!1);case 7:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}(),[n])}(),_=function(e){c.resetResolution(),c.setSearchValue(""),c.setLocation(e)};Object(o.useWhen)(function(){return d.isValid},function(){c.hasLocation&&(c.log("resolving initial gps"),v(c.geoPoint))}),Object(o.useReaction)(function(){return c.geoPoint},function(e){e&&(c.log("resolving on gps change"),v(e))}),Object(o.useReaction)(function(){return r.clickPoint},function(e){e&&(c.log("resolve with clickpoint"),_(e),r.clearClickPoint())}),Object(g.a)(c.isDeliveryAddress?c.branchId:null),function(){var e=Object(s.b)().location,t=Object(h.B)({},{fetchPolicy:"cache-first",skip:e.hasAddress}),n=t.data,r=t.loading,a=Object(i.useAsObservableSource)({initial:r?null:n.location}),c=Object(J.a)();Object(o.useAutorun)(function(){e.geoPoint?(e.log("pan to user location",e.geoPoint),c(e.geoPoint)):e.geolocationPoint?(e.log("pan to geolocation",e.geolocationPoint),c(e.geolocationPoint)):a.initial&&a.initial.gpsCoordinates&&(e.log("pan to initial location",a.initial.gpsCoordinates),c(a.initial.gpsCoordinates))}),Object(o.useReaction)(function(){return e.geolocationPoint},function(e){e&&c(e)})}();var y=Object(K.a)(t).createDeliveryOrder;return l.a.createElement(Z,{"data-testid":"DeliverMap"},c.latLng?l.a.createElement(a.Marker,{position:c.latLng,draggable:!0,onDragEnd:function(e){var t=e.latLng;c.log("resolve with drag"),_(Object(u.c)(t))}}):null,l.a.createElement("div",{className:"delivery__map__address"},l.a.createElement(U,null)),l.a.createElement("div",{className:"delivery__map__submit"},l.a.createElement(E,{enabled:c.isDeliveryAddress,onClick:y})))})},1058:function(e,t,n){"use strict";var r=n(68),a=n(0),o=n.n(a),i=n(133),c=n(38),l=n.n(c),s=n(59),u=n(40),d=n(998),m=n(36),f=n(72),p=(n(392),n(84)),b=n(897),h=n(894),g=n(895),v=n(896),_=n(221),y=n(15),E=n(958),O=n(35),j=n(31),w=function(e){var t=e.minCount,n=e.maxCount,r=e.isValid,a="";if(0===t){if(!(n>0))return null;a=j.b._({id:"maximum {maxCount}",values:{maxCount:n}})}else if(0===n)a=j.b._({id:"minimum {minCount}",values:{minCount:t}});else if(t===n){var i=t;a=j.b._({id:"only {count}",values:{count:i}})}else a=j.b._({id:"minimum {minCount} and maximum {maxCount}",values:{minCount:t,maxCount:n}});var c={};return r||(c.color="red"),o.a.createElement("span",{style:c},"(",a,")")},C=n(99),k=n(999);function I(){var e=Object(y.a)(["\n  position: absolute;\n  left: -0.6rem;\n  top: -0.4rem;\n  width: 2rem;\n  height: 2rem;\n  border-radius: 1rem;\n  background: ",";\n\n  &:hover {\n    background: "," !important;\n  }\n  &:active {\n    background: "," !important;\n  }\n  & .rectangle {\n    width: 45%;\n    position: absolute;\n    top: 45%;\n    left: 30%;\n    height: 4px;\n    background: white;\n  }\n"]);return I=function(){return e},e}var x=O.default.div(I(),function(e){return e.theme.primary},function(e){return e.theme.primaryHover},function(e){return e.theme.primary}),N=function(e){var t=e.onClick,n=Object(C.a)(e,["onClick"]);return o.a.createElement(x,Object.assign({onClick:t,className:"animated bounceIn","data-testid":"SidedishRemoveButton"},n),o.a.createElement("div",{className:"rectangle"}))},S=O.default.div.withConfig({displayName:"SidedishCheckbox__StyledSidedishCheckbox",componentId:"jpxm3x-0"})(["display:inline-block;position:relative;& .name{float:left;text-align:left;white-space:normal;max-width:13rem;}& .price{font-weight:bold;float:right;}& .count{display:inline-block;margin-left:0.5rem;}"]),T=o.a.memo(function(e){var t=e.sidedish,n=e.count,r=e.canBeSelected,a=e.canBeRemoved,i=e.className,c=e.onAdd,l=e.onRemove,s=Object(C.a)(e,["sidedish","count","canBeSelected","canBeRemoved","className","onAdd","onRemove"]),u=o.a.useCallback(function(){r&&c()},[r,c]);return o.a.createElement(S,{className:i},o.a.createElement(k.a,Object.assign({onClick:u,disabled:!r,size:"xs",outline:!0,width:"17.5rem","data-testid":"sidedishCheckbox__".concat(t.id)},s),o.a.createElement("div",{className:"name"},t.nameLabel,o.a.createElement("span",{key:n,className:"animated heartBeat count"},n>1&&"".concat(n,"x"))),o.a.createElement("div",{className:"price"},t.price.formattedValue)),a&&o.a.createElement(N,{onClick:l}))});function P(){var e=Object(y.a)(["\n  margin-top: 1rem;\n\n  & .sidedish__picker__checkbox {\n    @media (max-width: 370px) {\n      width: 100%;\n    }\n  }\n\n  & .sidedish__picker__category {\n    font-size: 1rem;\n    font-weight: bold;\n    text-align: left;\n    margin: 0 0 0.2rem 0.2rem;\n  }\n"]);return P=function(){return e},e}var M=O.default.div(P()),R=function(e){var t=e.recipe,n=e.selection,r=e.onAdd,i=e.onRemove,c=Object(E.useSideDishValidator)(t.categories,n),l=c.canBeSelected,s=c.isCategoryValid;return o.a.createElement(M,{className:"food__sidedish__picker"},t.categories.map(function(e){return o.a.createElement(a.Fragment,{key:e.id},o.a.createElement("div",{className:"sidedish__picker__category"},e.nameLabel," ",o.a.createElement(w,{minCount:e.minCount,maxCount:e.maxCount,isValid:s(e)})),e.sideDishes.map(function(t){return o.a.createElement(T,{key:"".concat(t.id,"-").concat(e.id),sidedish:t,count:n.filter(function(e){return e===t.id}).length,isSelected:n.includes(t.id),canBeRemoved:n.includes(t.id),canBeSelected:l(e,t),onAdd:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(){return r(t.id)}),onRemove:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(){return i(t.id)}),className:"sidedish__picker__checkbox"})}))}))},A=n(220),F=n(97),D=o.a.memo(function(e){var t=e.selection,n=e.recipe,r=e.onConfirm,a=o.a.useState(!1),i=Object(m.a)(a,2),c=i[0],l=i[1],s=Object(E.useSideDishValidator)(n?n.categories:[],t).isCategoryValid;return o.a.createElement(F.a,{className:Object(A.cn)("modal__body__button","animated",{heartBeat:c}),disabled:c||!n||!n.categories.every(s),"data-testid":"CartOrderButton",onClick:function(){l(!0),r().catch(function(){l(!1)})}},j.b._("{0, plural, =0 {Order without sidedish} one {Order with this sidedish} other {Order with # sidedishes}}",{0:t.length}))}),z=[],L=function(e){var t=e.recipe,n=e.isLoading,r=e.initialSideDishes,a=void 0===r?z:r,i=e.onConfirm,c=e.onClose,u=o.a.useState([]),d=Object(m.a)(u,2),y=d[0],E=d[1];o.a.useEffect(function(){E(a)},[a]);var O=o.a.useCallback(function(){E([]),c()},[c]),j=function(){var e=Object(s.a)(l.a.mark(function e(){return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i(y);case 2:if(!e.sent){e.next=5;break}return O(),e.abrupt("return",!0);case 5:return e.abrupt("return",!1);case 6:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),w=function(e){E(function(t){return p.RM.append(e,t)})},C=function(e){E(function(t){return p.RM.remove(p.RM.indexOf(e,t),1,t)})};return o.a.createElement(b.a,{isOpen:null!==t,toggle:O,className:"modal__container",autoFocus:!0,backdrop:"static",fade:!1,"data-testid":"CartModal"},o.a.createElement(h.a,{toggle:O,tag:g.a,className:"modal__header"},o.a.createElement("span",null,o.a.createElement(f.Trans,{id:"Do you want to add something?"}))),o.a.createElement(v.a,{className:"modal__body"},o.a.createElement("div",{className:"modal__body__content"},n?o.a.createElement(_.a,null):t?o.a.createElement(o.a.Fragment,null,o.a.createElement("h3",{className:"modal__body__food__name"},t.nameLabel),o.a.createElement("span",{className:"modal__body__food_description"},t.descriptionLabel),o.a.createElement(R,{recipe:t,selection:y,onAdd:w,onRemove:C})):o.a.createElement(f.Trans,{id:"We sorry, but the item is unavailable at this moment."})),o.a.createElement("div",{className:"modal__body__button__line"},o.a.createElement("div",{className:"modal__body__button__strip"}),o.a.createElement(D,{recipe:t,selection:y,onConfirm:j}))))},G=Object(r.observer)(function(e){var t=e.orderId,n=Object(i.a)(),r=n.addToCartRecipeId,a=Object(u.y)({recipeId:r},{skip:null===t||null===r,fetchPolicy:"cache-first"}),c=a.data,m=a.loading,f=Object(d.a)(),p=o.a.useCallback(function(){var e=Object(s.a)(l.a.mark(function e(n){var a;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==t&&null!==r){e.next=2;break}return e.abrupt("return",!1);case 2:return e.next=4,f(r,n);case 4:return a=e.sent,e.abrupt("return",Boolean(a));case 6:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),[t,r]),b=o.a.useCallback(function(){n.addToCart(null)},[history]);return o.a.createElement(L,{recipe:m?null:c.recipe,onConfirm:p,onClose:b,isLoading:m})}),V=n(1064),B=n(23),W=Object(r.observer)(function(e){var t=e.orderId,n=Object(B.b)(),r=n.order,a=n.cart,i=r.changeCartItemId,c=Object(u.x)({itemId:i},{skip:null===t||null===i}),d=c.data,f=c.loading,b=Object(u.m)(),h=Object(m.a)(b,1)[0],g=o.a.useCallback(function(){var e=Object(s.a)(l.a.mark(function e(n){var r;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==t&&null!==i){e.next=2;break}return e.abrupt("return",!1);case 2:return e.next=4,h({itemId:i,sideDishes:n,orderId:t,withGoods:a.withGoods});case 4:return r=e.sent,e.abrupt("return",Boolean(r));case 6:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),[t,i]),v=o.a.useCallback(function(){r.changeCartItem(null)},[history]),_=o.a.useMemo(function(){return f?void 0:d.item.sideDishes.map(p.RM.path(["recipe","id"]))},[f,d]);return o.a.createElement(L,{recipe:f?null:d.item.recipe,initialSideDishes:_,onConfirm:g,onClose:v,isLoading:f})});n.d(t,"a",function(){return H});var H=Object(r.observer)(function(e){var t=e.isReadonly,n=void 0!==t&&t,r=Object(i.a)(),a=r.orderId;return o.a.createElement(o.a.Fragment,null,o.a.createElement(G,{orderId:a}),o.a.createElement(W,{orderId:a}),o.a.createElement(V.a,{orderId:a,isReadonly:n||r.disableInteraction}))})},1059:function(e,t,n){"use strict";var r=n(48),a=n(68),o=n(0),i=n.n(o),c=n(23),l=n(36),s=n(15),u=n(35),d=n(220),m=n(1001),f=n.n(m),p=n(1005),b=n(98);function h(){var e=Object(s.a)(["\n    flex-wrap: nowrap;\n    overflow-x: auto;\n    overflow-y: hidden;\n    box-shadow: inset -15px -5px 15px -14px rgba(0, 0, 0, 0.6);\n    margin: 0;\n    border-top-left-radius: 0;\n    background-color: #f3f3f3;\n    opacity: 0.94;\n  "]);return h=function(){return e},e}function g(){var e=Object(s.a)(["\n    flex-wrap: wrap;\n  "]);return g=function(){return e},e}var v=u.default.div.withConfig({displayName:"CategoryNavigator__StyledCategoryNavigator",componentId:"wpfto8-0"})(["background-color:#d4d4d4;border-top-left-radius:0.6rem;padding:0.7rem 0.5rem 0 0.2rem;position:sticky;top:0;z-index:1;user-select:none;display:flex;"," "," a.link{text-align:center;color:#595959 !important;display:inline-block;min-width:4rem;cursor:pointer;margin:0 0.2rem;&:hover,&.active{color:#5ca651 !important;border-color:#5ca651;}}div.circle{background-color:white;border:1px solid #595959;border-radius:2rem;width:2.6rem;height:2.6rem;margin:0 auto;padding:0;&:hover,a.link.active > &{border-color:#5ca651;}& span::before,& span::after{margin:0;padding:0;font-size:1.7rem;}}div.description{font-size:0.9rem;margin-top:0.2rem;max-width:5rem;}"],Object(b.c)(g()),Object(b.d)(h())),_=function(e){var t=e.categories,n=Object(o.useState)(0),r=Object(l.a)(n,2),a=r[0],c=r[1];return i.a.createElement(v,{"data-testid":"CategoryNavigator"},0===t.length?null:t.map(function(e,t){return i.a.createElement(f.a.Link,{to:e.nameLabel,key:e.id,className:Object(d.cn)("link",{active:a===t}),onSetActive:function(){return c(t)},offset:-168,smooth:!0,spy:!0,title:e.nameLabel},i.a.createElement("div",{className:"circle"},i.a.createElement("span",{className:"flaticon-".concat(e.pictogram)})),i.a.createElement("div",{className:"description"},i.a.createElement(p.a,{lines:2},e.nameLabel)))}))},y=n(72),E=n(221),O=n(998);function j(){var e=Object(s.a)(["margin: 1rem 0 0.4rem 1rem;"]);return j=function(){return e},e}var w=u.default.div.withConfig({displayName:"FoodCategory__FoodCategoryStyled",componentId:"sc-1bpyym5-0"})(["color:#474747;display:block;font-size:1.6rem;& a{text-decoration:none;}"]),C=Object(u.default)("h3").withConfig({displayName:"FoodCategory__FoodCategoryTitleStyled",componentId:"sc-1bpyym5-1"})(["",";"],Object(b.d)(j())),k=i.a.memo(function(e){var t=e.category,n=e.children;return i.a.createElement(f.a.Element,{name:t.nameLabel},i.a.createElement(w,null,i.a.createElement(C,null,t.nameLabel),n))}),I=(n(1081),n(40)),x=n(133);function N(){var e=Object(s.a)(["\n    left: -0.6rem;\n    top: -0.7rem;\n  "]);return N=function(){return e},e}var S=u.default.div.withConfig({displayName:"FoodMenuItem__FoodMenuItemStyled",componentId:"sc-1uxwtjp-0"})(["padding:1rem 0.5rem 0.3rem 1.1rem;border:1px solid #d5d5d5 !important;margin:0 0 0.4rem 0;border-radius:0.8rem;cursor:pointer;position:relative;min-height:6rem;user-select:none;&:hover{background-color:#c9e8d7;}background-color:",";h4{font-size:1rem;font-weight:700;color:#404040;margin-bottom:0.1rem;margin-right:6rem;}p{color:#666666;margin:0.6rem 0 0 0;font-size:0.9rem;max-height:2.5rem;-webkit-line-clamp:2;overflow:hidden;}& div.presence{background-color:",";float:left;position:absolute;left:-1.2rem;padding:0.4rem 0.6rem;color:white;border-radius:1.8rem;font-size:0.9rem;",";}"],function(e){return e.isActive?"#b3ebcc":"white"},function(e){return e.theme.secondary},Object(b.d)(N())),T=u.default.img.withConfig({displayName:"FoodMenuItem__FoodMenuItemImage",componentId:"sc-1uxwtjp-1"})(["width:6rem;height:6rem;display:block;float:left;margin:-1.05rem 1rem 0 -1.2rem;border-radius:0.8rem 0 0 0.8rem;object-fit:cover;"]),P=u.default.div.withConfig({displayName:"FoodMenuItem__FoodMenuItemPriceCorner",componentId:"sc-1uxwtjp-2"})(["border-top-width:1.8rem;border-top-style:solid;border-top-color:"," !important;position:absolute;right:4.799rem;top:1rem;width:0;height:0;border-left:1.8rem solid transparent;"],function(e){return e.theme.primary}),M=u.default.div.withConfig({displayName:"FoodMenuItem__FoodMenuItemPrice",componentId:"sc-1uxwtjp-3"})(["background-color:"," !important;position:absolute;right:0;top:1rem;width:4.8rem;height:1.8rem;padding:0.12rem 0.7rem 0.3rem 0rem;font-weight:500;font-size:1.1rem;color:white;text-align:right;overflow:hidden;white-space:nowrap;"],function(e){return e.theme.primary}),R=i.a.memo(function(e){var t=e.recipe,n=e.presence,r=e.onAddToCart,o=Object(x.a)(),c=t.sideDishCount>0,s=i.a.useCallback(function(){r(t.id,c)},[c,r]),u=Object(I.i)({fetchPolicy:"cache-first"}),m=Object(l.a)(u,1)[0],f=i.a.useCallback(function(){c&&m({recipeId:t.id})},[c,m]),b=i.a.useRef(-1);return Object(a.useObserver)(function(){return i.a.createElement(S,{onClick:s,onMouseEnter:f,isActive:o.lastActiveRecipeId===t.id,"data-testid":"foodMenuItem__".concat(t.id)},t.image&&i.a.createElement(T,{src:t.image,alt:t.nameLabel}),i.a.createElement(P,null),i.a.createElement(M,{"data-testid":"foodMenuItem__Price__".concat(t.id)},t.price.formattedValue),function(){var e=n.get(t.id);if(!e)return b.current=-1,null;var r=Object(d.cn)("presence","animated",{pulse:e>1||b.current>0,zoomIn:1===e&&0===b.current||-1===b.current});return b.current=e,i.a.createElement("div",{key:e,className:r},"".concat(e,"x"))}(),i.a.createElement("h4",{title:t.nameLabel},i.a.createElement(p.a,{lines:2,"data-testid":"foodMenuItem__Name__".concat(t.id)},t.nameLabel)),i.a.createElement("p",null,i.a.createElement(p.a,{lines:2,"data-testid":"foodMenuItem__Description__".concat(t.id)},t.descriptionLabel)))})}),A=n(11);function F(){var e=Object(s.a)(["\n      margin: 0 0.7rem 1rem 0.7rem;\n      padding: 0 0 4rem 0;\n    "]);return F=function(){return e},e}function D(){var e=Object(s.a)(["\n      margin: 0 1.4rem 1rem 1.6rem;\n      padding: 2rem 0 2rem 0;\n    "]);return D=function(){return e},e}function z(){var e=Object(s.a)(["\n    background: #eee9e7;\n    background-size: cover;\n    background-attachment: scroll;\n  "]);return z=function(){return e},e}function L(){var e=Object(s.a)(["background: white;"]);return L=function(){return e},e}var G=u.default.div.withConfig({displayName:"FoodMenu__StyledFoodMenu",componentId:"sc-1ynjjri-0"})(["border-radius:0 0 0.6rem 0.6rem;",";",";& > div{",";",";}"],Object(b.c)(L()),Object(b.d)(z()),Object(b.c)(D()),Object(b.d)(F())),V=i.a.memo(function(e){var t=e.orderId,n=e.categories,r=e.isLoading,a=Object(c.b)(),o=a.order,s=a.config,u=a.user,d=function(e){var t=Object(I.A)({orderId:e},{skip:!e,fetchPolicy:"cache-only"}),n=t.data,r=t.loading,a=i.a.useState(function(){return A.observable.map()}),o=Object(l.a)(a,1)[0];return r||Object(A.runInAction)(function(){o.clear(),n.order.presence.forEach(function(e){var t=e.recipe.id;o.has(t)||o.set(t,0),o.set(t,o.get(t)+1)})}),o}(t),m=Object(O.a)(),f=i.a.useCallback(function(e,t){o.disableInteraction||(d.size>=s.orderItemsMax?u.showOrderLimit():t?o.addToCart(e):(o.setUsedRecipeId(e),m(e)))},[m]);return i.a.createElement(G,{"data-testid":"FoodMenu"},i.a.createElement("div",null,r?i.a.createElement(E.a,{noMargin:!0}):0===n.length?i.a.createElement("h3",null,i.a.createElement(y.Trans,{id:"Food menu is empty. We are sorry."})):i.a.createElement(i.a.Fragment,null,n.map(function(e){return i.a.createElement(k,{key:e.id,category:e},e.recipes.map(function(e){return i.a.createElement(R,{key:e.id,recipe:e,presence:d,onAddToCart:f})}))}))))}),B=n(957),W=n(124),H=n(31),q=function(){var e=Object(c.b)().user;return Object(a.useObserver)(function(){return i.a.createElement(W.a,{isOpen:!e.orderLimitAlertHidden,onClose:e.hideOrderLimit,headerText:H.b._("Limit has been reached")},H.b._("The maximum number of items in the order has been reached"))})};n.d(t,"a",function(){return U});var U=Object(a.observer)(function(){var e=Object(c.b)(),t=e.order,n=e.user,a=Object(B.a)(t.branchId),o=a.data,l=a.loading,s=a.refetch;Object(r.useReaction)(function(){return n.language},function(){return s()});var u=i.a.useMemo(function(){return l?[]:o.wareCategories.filter(function(e){return e.recipes.length>0})},[l,o]);return i.a.createElement(i.a.Fragment,null,i.a.createElement(q,null),i.a.createElement(_,{categories:u}),i.a.createElement(V,{orderId:t.orderId,categories:u,isLoading:l}))})},1060:function(e,t,n){"use strict";var r=n(0),a=n.n(r),o=n(1432),i=n(937),c=n(31),l=function(){return a.a.createElement(o.a,null,a.a.createElement(i.a,{name:"email",type:"email",autoComplete:"email",placeholder:c.b._("E-mail")}))},s=n(1433),u=function(){return a.a.createElement(o.a,null,a.a.createElement(s.a,null,a.a.createElement(i.a,{name:"firstname",autoComplete:"given-name",placeholder:c.b._("First name")}),a.a.createElement(i.a,{name:"lastname",autoComplete:"family-name",placeholder:c.b._("Last name")})))},d=n(1434),m=function(){var e=c.b._("eg. ingredients change, company...");return a.a.createElement(o.a,null,a.a.createElement(i.a,{name:"note",type:"textarea",placeholder:c.b._("Note"),title:e,errorForceDisplay:!0}),a.a.createElement(d.a,null,e))},f=n(981),p=function(){var e="Mobile Safari"===new f.UAParser(window.navigator.userAgent).getBrowser().name;return a.a.createElement(o.a,null,a.a.createElement(s.a,null,a.a.createElement(i.a,{name:"phonePrefix",autoComplete:e?"off":"tel-country-code",placeholder:"Prefix"}),a.a.createElement(i.a,{name:"phone",type:"tel",autoComplete:"tel-national",placeholder:c.b._("Phone"),style:{width:"55%"}})))};n.d(t,"a",function(){return b});var b=function(){return a.a.createElement(a.a.Fragment,null,a.a.createElement(u,null),a.a.createElement(p,null),a.a.createElement(l,null),a.a.createElement(m,null))}},1061:function(e,t,n){"use strict";var r=n(36),a=n(72),o=(n(392),n(12)),i=n(84),c=n(136),l=n(68),s=n(0),u=n.n(s),d=n(897),m=n(894),f=n(895),p=n(896),b=n(23),h=n(97),g=n(40),v=n(31),_=n(35),y=n(129);function E(e,t,n){var r=Object(c.startOfMinute)(function(e,t){return Object(c.addMinutes)(function(e,t){return Object(c.subMinutes)(e,Object(c.getMinutes)(e)%t)}(e,t),t)}(e,n)),a=[],o=Object(c.endOfMinute)(Object(c.subMinutes)(t,1));do{a.push(r),r=Object(c.addMinutes)(r,n)}while(r<=o);return a}var O=n(99),j=n(999),w=n(227),C=_.default.div.withConfig({displayName:"TimePickerButton__Time",componentId:"c3eeou-0"})(["font-size:1.2rem;"]),k=function(e){var t=e.time,n=Object(O.a)(e,["time"]);return u.a.createElement(j.a,Object.assign({size:"xs",outline:!0,width:"10rem","data-testid":"timePickerButton__".concat(t.getTime())},n),u.a.createElement(C,null,Object(w.b)(t)))},I=_.default.div.withConfig({displayName:"TimePicker__TimePickerContainer",componentId:"sc-1341ije-0"})(["margin-top:1rem;"]),x=_.default.div.withConfig({displayName:"TimePicker__TimePickerDay",componentId:"sc-1341ije-1"})(["font-size:1rem;font-weight:bold;text-align:left;margin:0 0 0.2rem 0.2rem;"]),N=function(e){var t=e.minDate,n=e.maxDate,o=e.minuteStep,i=e.onStepChange,l=e.initialTime,d=e.filterIntervals,m=void 0===d?[]:d,f=u.a.useMemo(function(){var e=E(t,n,o);return m.length?e.filter(function(e){return m.some(Object(y.isWithinInterval)(e))}):e},[t,n,o,m]),p=u.a.useMemo(function(){return Object(c.eachDayOfInterval)({start:t,end:n})},[t,n]),b=u.a.useState(0),h=Object(r.a)(b,2),g=h[0],v=h[1];return u.a.useEffect(function(){l&&v(Object(c.closestIndexTo)(l,f))},[l]),u.a.useEffect(function(){i(f[g])},[]),u.a.createElement(I,null,p.map(function(e){return u.a.createElement(s.Fragment,{key:e.getDate()},u.a.createElement(x,null,u.a.createElement(a.DateFormat,{value:e,format:{month:"long",day:"numeric",weekday:"long"}})),f.map(function(t,n){return Object(c.isEqual)(e,Object(c.startOfDay)(t))?u.a.createElement(k,{key:t.getTime(),time:t,isSelected:n===g,canBeSelected:!0,onClick:function(){v(n),i(t)}}):null}))}))};n.d(t,"a",function(){return S});var S=Object(l.observer)(function(){var e=Object(b.b)(),t=Object(b.b)(),n=t.order,l=t.cart,s=Object(g.I)({branchId:n.branchId},{skip:!e.initialized||!n.branchId}),_=s.data,y=s.loading,E=Object(g.o)(),O=Object(r.a)(E,1)[0],j=u.a.useRef(n.deliverAt);u.a.useEffect(function(){_&&_.companyBranch&&_.companyBranch.delayedDeliveryEnabled&&n.enableDelayedOrder()},[_]);var w=n.usingDeliveryOrderMethod?v.b._("Deliver at what time?"):v.b._("When you will pickup the order?");return u.a.createElement(d.a,{isOpen:n.timePickerOpen,toggle:n.closeTimePicker,className:"modal__container",autoFocus:!0,backdrop:"static",fade:!1},u.a.createElement(m.a,{toggle:n.closeTimePicker,tag:f.a,className:"modal__header"},u.a.createElement("span",null,w)),u.a.createElement(p.a,{className:"modal__body"},u.a.createElement("div",{className:"modal__body__content"},function(){if(y)return null;var e=function(){var e=_.companyBranch;return e.isOpen||!e.willOpenAt?new Date:new Date(e.willOpenAt)}(),t=function(){var e=_.companyBranch;if(e.isOpen&&e.willCloseAt)return new Date(e.willCloseAt);var t=e.businessHours.find(i.RM.propEq("closed",!1));return t?new Date(t.closeAt):null}();if(null===t||Object(c.isAfter)(e,t))return u.a.createElement(a.Trans,{id:"It's not possible to pick a specific order time at this moment."});var r=function(){var e=_.companyBranch,t=e.defaultDeliveryTime,r=e.defaultPickupTime;return n.usingDeliveryOrderMethod?t:n.usingPickupOrderMethod?r:0}();return u.a.createElement(N,{minuteStep:15,minDate:Object(c.addMinutes)(e,r),maxDate:Object(c.addMinutes)(t,r),initialTime:j.current,filterIntervals:_.companyBranch.businessHours.filter(i.RM.propEq("closed",!0)).map(function(e){return{start:new Date(e.openAt),end:new Date(e.closeAt)}}),onStepChange:function(e){return j.current=e}})}()),u.a.createElement("div",{className:"modal__body__button__line"},u.a.createElement("div",{className:"modal__body__button__strip"}),u.a.createElement(h.a,{onClick:function(){var e=j.current;O({orderId:n.orderId,deliverAt:e&&Object(o.isoDate)(e),withGoods:l.withGoods}),n.setDeliverAt(e),n.closeTimePicker()},size:"md",className:"modal__body__button"},u.a.createElement(a.Trans,{id:"Confirm time"})))))})},1062:function(e,t,n){"use strict";var r=n(36),a=n(72),o=n(48),i=n(220),c=n(924),l=n(0),s=n.n(l),u=n(40),d=n(133),m=n(35),f=n(68),p=n(1427),b=n(219),h=n(1428),g=(n(99),m.default.div.withConfig({displayName:"FormCheckbox__StyledFormCheckbox",componentId:"sc-915kzt-0"})(["display:flex;margin-bottom:0.5rem;input{-webkit-appearance:none;-moz-appearance:none;background-color:white;border:1px solid;border-color:#c5c5c5;width:2rem;height:2rem;min-width:2rem;border-radius:0.25rem;position:relative;margin:0;outline:none;&:checked{background-color:white;}&:checked:after{content:'\\2714';font-size:2rem;position:absolute;top:-0.5rem;left:0.1rem;color:#1d1d1d;overflow:hidden;}&.is-invalid{border-color:red;}}label{margin:0 0 0 0.8rem;vertical-align:top;}"])),v=n(31),_=m.default.div.withConfig({displayName:"OrderAgreementBox__StyledOrderAgreementBox",componentId:"zpwcdo-0"})(["button{padding:0 0.5rem;font-size:0.8rem;min-width:5rem;color:darkgray;}div.description{font-size:0.8rem !important;color:darkgray;margin:0.5rem 0 0.5rem 0;& .row{margin:0;}}"]),y=Object(f.observer)(function(e){var t=e.agreement,n=e.isValid,r=e.isCollapsed,a=e.titleNode,o=e.descriptionNode,i=e.inputProps,c=e.buttonProps,l=Object(d.a)(),u="agreement-".concat(t.id);return s.a.createElement(_,null,s.a.createElement(g,null,s.a.createElement(p.a,Object.assign({},i,{id:u,type:"checkbox",disabled:l.disableInteraction,invalid:!n,onInvalid:function(e){n||e.target.setCustomValidity(v.b._("Please check this box if you want to proceed."))},onClick:function(e){e.target.setCustomValidity("")},"data-testid":"OrderAgreement".concat(t.isMandatory?"Mandatory":"")})),s.a.createElement("label",{htmlFor:u},a,t.isMandatory&&" * "),s.a.createElement(b.a,Object.assign({},c,{color:"link"}),r?v.b._("More...").toLocaleLowerCase():v.b._("Less").toLocaleLowerCase())),s.a.createElement(h.a,{isOpen:!r,className:"description"},o))});n.d(t,"a",function(){return O});var E=[],O=function(){var e=Object(d.a)(),t=Object(c.d)(),n=s.a.useState(b),l=Object(r.a)(n,2),m=l[0],f=l[1],p=Object(o.useDebounceCallback)(f,2e3);function b(){var n=t.values,r=n.firstname,a=n.lastname,o=n.phonePrefix,i=n.phone;return{input:{orderId:e.orderId,firstname:r,lastname:a,phone:"".concat(o.trim()).concat(i.trim())}}}s.a.useEffect(function(){return p(b()),function(){return p.clear()}},[t.values]);var h=Object(u.G)(m),g=h.data,v=h.errors,_=h.loading,O=s.a.useRef(E),j=v&&v.length>0;_||j||(O.current=g.agreements),s.a.useEffect(function(){O.current.length>0&&e.initVam()});var w=Object(i.useVamAgreements)(O.current),C=w.state,k=w.renderVamAgreements;return Object(o.useAutorun)(function(){t.setFieldValue("agreements",Array.from(C.confirmedAgreements))}),s.a.useEffect(function(){return t.registerField("agreements",{validate:function(){return O.current.some(function(e){return e.isMandatory&&!C.confirmedAgreements.has(e.id)})?"mandatory":""}}),function(){return t.unregisterField("agreements")}},[]),j?s.a.createElement(a.Trans,{id:"Failed retrieving company agreements. Please try again later or contact us."}):k({AgreementBox:y})}},1063:function(e,t,n){"use strict";var r=n(35),a=n(72),o=n(84),i=n(0),c=n.n(i),l=n(40),s=n(68),u=n(97),d=n(133),m=function(e){var t=e.orderMethod,n=e.onChange,r=e.children,a=Object(d.a)();return Object(s.useObserver)(function(){return c.a.createElement(u.c,{selected:a.orderMethod===t,onClick:function(){a.useOrderMethod(t),n(a)},"data-testid":"orderMethod-".concat(t),"data-testselected":a.orderMethod===t},r)})};n.d(t,"a",function(){return p});var f=r.default.div.withConfig({displayName:"OrderMethod__StyledOrderMethod",componentId:"lyg5h5-0"})(["padding:0.2rem;& button{font-size:1.3rem;margin:0.3rem 1rem 0.3rem 1rem;padding:0.3rem 1.2rem;height:2.7rem;line-height:1rem;white-space:nowrap;span:before{margin:0 0.8rem 0 0;font-size:2rem;font-weight:initial;}}"]),p=function(e){var t=e.onChange,n=void 0===t?o.RM.identity:t;return c.a.createElement(f,null,c.a.createElement(m,{orderMethod:l.a.Messenger,onChange:n},c.a.createElement("span",{className:"flaticon-transport"}),c.a.createElement(a.Trans,{id:"I want to deliver"})),c.a.createElement(m,{orderMethod:l.a.Pickup,onChange:n},c.a.createElement("span",{className:"flaticon-restaurant"}),c.a.createElement(a.Trans,{id:"I'll pick up"})))}},1064:function(e,t,n){"use strict";var r=n(72),a=(n(1073),n(958)),o=n(11),i=n(68),c=n(0),l=n.n(c),s=n(370),u=n(23),d=n(97),m=n(1e3),f=n(98),p=n(40),b=n(135),h=n(36),g=n(12),v=n(48),_=n(84);n.d(t,"a",function(){return y});var y=function(e){var t=e.orderId,n=e.isReadonly,c=Object(s.b)(),y=l.a.useMemo(E,[]),O=function(){var e=Object(u.b)(),t=e.order,n=e.cart,r=Object(g.useApolloClient)(),a=Object(v.useRouterContext)().history,o=l.a.useCallback(function(e){t.changeCartItem(e)},[]),i=Object(p.t)(),c=Object(h.a)(i,1)[0],s=l.a.useCallback(function(e){var t={itemId:e,withGoods:n.withGoods,withPresence:n.withPresence};c(t,{optimisticResponse:f(t),context:{noBatch:!0}})},[]),d=l.a.useCallback(function(){a.push("/confirm")},[]),m=l.a.useCallback(function(){a.push("/order")},[]);return{cartModel:n,onItemEdit:o,onItemRemove:s,onPlaceOrder:d,onChangeOrder:m};function f(e){var a=r.readQuery({query:p.h,variables:{orderId:t.orderId,withGoods:n.withGoods,withPresence:n.withPresence}},!0);if(a){var o=_.RM.reject(Object(_.idPropEq)(e.itemId));return{__typename:"Mutation",remove:Object(b.a)({},a.order,{countWares:a.order.countWares-1,totalSum:Object(b.a)({},a.order.totalSum,{value:-1}),items:e.withGoods?o(a.order.items):a.order.items,presence:e.withPresence?o(a.order.presence):a.order.presence})}}}}(),j=O.cartModel,w=O.onItemEdit,C=O.onItemRemove,k=O.onPlaceOrder,I=O.onChangeOrder,x=l.a.useCallback(function(){return l.a.createElement(m.a,null,l.a.createElement(d.a,{onClick:n?I:k},n?l.a.createElement(r.Trans,{id:"Change order"}):l.a.createElement(r.Trans,{id:"Place order"})))},[k,n]),N=l.a.useCallback(function(){return l.a.createElement(r.Trans,{id:"Accessing your order"})},[]),S=Object(a.useCartSystem)({colors:{primary:c.primary,sumRowBg:c.primary,sumRowText:"white",mobileSummaryItemCount:c.secondary},labels:y,isReadonly:n,mobileBreakpoint:f.e,backgroundImage:c.backgroundCart,onItemEdit:w,onItemRemove:C,renderMobileSubmit:x,renderGoodsLoading:N});l.a.useEffect(function(){return Object(o.autorun)(function(){j.updateDisplay(S.store.isMobile,S.store.showGoods)})},[]);var T=Object(u.b)();return Object(i.useObserver)(function(){var e=Object(p.w)({orderId:t,withGoods:j.withGoods,withPresence:j.withPresence},{skip:!T.initialized||!t,context:{noBatch:!0}}),n=e.data,r=e.loading;return l.a.useEffect(function(){r||(S.updateSummary(n.order),j.withGoods&&S.updateGoods(n.order))}),S.renderCart()})};function E(){return{noSideDish:l.a.createElement(r.Trans,{id:"Without sidedish"}),noCost:l.a.createElement(r.Trans,{id:"For free"}),cartSumHeader:function(e){return l.a.createElement(r.Trans,{id:"In the cart you have goods for {totalPrice}",values:{totalPrice:e}})},emptyCart:l.a.createElement(r.Trans,{id:"Cart is empty"}),totalDiscount:l.a.createElement(r.Trans,{id:"Total discount"}),coverPrice:l.a.createElement(r.Trans,{id:"Covers"}),transportFee:l.a.createElement(r.Trans,{id:"Delivery"}),totalSum:l.a.createElement(r.Trans,{id:"Total"}),tip:l.a.createElement(r.Trans,{id:"Tip"}),minimalOrderPrice:function(e){return l.a.createElement(r.Trans,{id:"Minimal price of order is {price}",values:{price:e}})}}}},1065:function(e,t,n){"use strict";var r=n(35),a=n(72),o=n(0),i=n.n(o),c=n(40),l=n(68),s=n(23),u=n(97),d=Object(l.observer)(function(e){var t=e.children,n=e.paymentMethod,r=Object(s.b)().order,a=r.paymentMethod===n;return i.a.createElement(u.c,{disabled:r.disableInteraction,selected:a,onClick:function(){r.setPaymentMethod(n)},"data-testid":"orderPaymentMethod-".concat(n)},i.a.createElement(m,{show:a}),t)});function m(e){return e.show?i.a.createElement("span",{className:"flaticon-mark order__payment__method__button__checked"}):i.a.createElement("div",{className:"order__payment__method__button__unchecked"})}n.d(t,"a",function(){return p});var f=r.default.div.withConfig({displayName:"OrderPaymentMethod__StyledOrderPaymentMethod",componentId:"sc-12kj5sm-0"})(["margin:0 0 1.4rem 0;span::before{margin-left:0;margin-right:0.5rem;}button{position:relative;padding-top:0.3rem;margin-bottom:0.2rem;height:2.8rem;}button:first-of-type{margin-right:0.8rem;}.order__payment__method__button__unchecked{width:1.75rem;height:1.4rem;margin:0;display:inline-block;}"]),p=i.a.memo(function(){return i.a.createElement(f,null,i.a.createElement(d,{paymentMethod:c.f.Gopay},i.a.createElement("span",{className:"flaticon-credit-card"},i.a.createElement(a.Trans,{id:"Pay by card"}))),i.a.createElement(d,{paymentMethod:c.f.Cash},i.a.createElement("span",{className:"flaticon-money"},i.a.createElement(a.Trans,{id:"Pay by cash"}))))})},1066:function(e,t,n){},1070:function(e,t,n){},1073:function(e,t,n){},1081:function(e,t,n){},925:function(e,t,n){"use strict";n.d(t,"a",function(){return i}),n.d(t,"b",function(){return c}),n.d(t,"c",function(){return l});var r=n(0),a=n.n(r),o=n(1424),i=function(e){var t=e.children;return a.a.createElement(o.a,{className:"pl-sm-0",sm:"12",md:"12",lg:"10",xl:"8"},t)},c=function(e){var t=e.children;return a.a.createElement(o.a,{className:"pl-sm-0",sm:"8",md:"8",lg:"6",xl:"5"},t)},l=function(e){var t=e.children;return a.a.createElement(o.a,{className:"pl-sm-0",sm:"4",md:"4",lg:"4",xl:"3"},t)}},937:function(e,t,n){"use strict";n.d(t,"b",function(){return f}),n.d(t,"a",function(){return p});var r=n(36),a=n(99),o=n(924),i=n(68),c=n(0),l=n.n(c),s=n(1429),u=n(1427),d=n(1430),m=n(133),f="<hidden>",p=Object(i.observer)(function(e){var t=e.name,n=e.label,i=e.type,c=void 0===i?"text":i,p=e.errorForceDisplay,b=void 0!==p&&p,h=Object(a.a)(e,["name","label","type","errorForceDisplay"]),g=Object(m.a)(),v=Object(o.b)(t,c),_=Object(r.a)(v,2),y=_[0],E=_[1],O=l.a.createElement(s.a,{for:t,hidden:!n},h.placeholder||n),j=b||E.touched;return l.a.createElement(l.a.Fragment,null,O,l.a.createElement(u.a,Object.assign({},h,y,{id:t,type:c,valid:E.touched&&!E.error,invalid:j&&Boolean(E.error),disabled:g.disableInteraction})),j&&E.error!==f?l.a.createElement(d.a,{valid:!1,tooltip:!1},E.error):null)})},938:function(e,t,n){"use strict";n.d(t,"a",function(){return o});var r=n(48),a=n(136);function o(e){var t=e.status,n=e.updateInterval,o=void 0===n?30*r.SECOND:n,c=e.openSoonThresholdInMinutes,l=void 0===c?30:c,s=e.closeSoonThresholdInMinutes,u=void 0===s?30:s,d=Object(r.useNow)();Object(r.useTimer)({interval:o,enabled:o>0});var m=d(),f=t.isOpen,p=t.willCloseAt,b=t.willOpenAt,h=b?Object(a.differenceInMinutes)(b,m):0,g=p?Object(a.differenceInMinutes)(p,m):0;return{decision:f?p&&g<=0?"Closed":i(p,u,m)?"ClosingSoon":"Open":b&&h<=0?"Open":i(b,l,m)?"OpeningSoon":"Closed",openingIn:h,closingIn:g}}function i(e,t,n){return!!e&&Math.abs(Object(a.differenceInMinutes)(e,n))<=t}},939:function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n(48),a=n(23),o=n(133);function i(){var e=Object(a.b)(),t=Object(o.a)(),n=Object(r.useRouterContext)().history;Object(r.useWhen)(function(){return e.initialized},function(){t.hasOrder||n.push("/")})}},953:function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n(0),a=n.n(r),o=n(31),i=function(e){var t=e.address;if(!t||!t.location)return a.a.createElement("span",null,o.b._("Unknown address"));var n=t.location;return a.a.createElement("span",null,"".concat(n.street," ").concat(n.houseNumber,",\n ").concat(n.city))}},954:function(e,t,n){"use strict";n.d(t,"a",function(){return c});var r=n(99),a=n(35),o=n(0),i=n.n(o),c=function(e){var t=e.imageName,n=(e.fallbackColor,e.fixed),o=void 0!==n&&n,c=e.size,l=void 0===c?"inherit":c,s=e.children,u=e.component,d=void 0===u?"div":u,m=Object(r.a)(e,["imageName","fallbackColor","fixed","size","children","component"]);return i.a.createElement(Object(a.default)(d).withConfig({displayName:"BackgroundThemed",componentId:"sc-1ju94id-0"})(["background-image:",";background-attachment:",";background-repeat:no-repeat;background-position:left top;background-size:",";"],function(e){return"url(".concat(e.theme[t],")")},function(e){return o?"fixed":"inherit"},function(e){return l}),m,s)};t.b=c},955:function(e,t,n){"use strict";n.d(t,"a",function(){return o});var r=n(23),a=n(40);function o(e){var t=Object(r.b)().business;return Object(a.J)({branchSpecific:!t.isBrand||!!e,brandId:t.brandId,branchId:e||t.branchId},{skip:!t.isValid,fetchPolicy:"cache-first",context:{noBatch:!0}})}},956:function(e,t,n){"use strict";n.d(t,"a",function(){return p});var r=n(72),a=n(932),o=n(22),i=n(68),c=n(0),l=n.n(c),s=n(23),u=n(32),d=n(221),m=function(e){return{streetViewControl:!1,mapTypeControl:!1,fullscreenControl:!1,clickableIcons:!1,draggableCursor:"default",minZoom:10,zoomControlOptions:{position:e?google.maps.ControlPosition.RIGHT_CENTER:google.maps.ControlPosition.RIGHT_TOP}}},f=["places"],p=Object(i.observer)(function(e){var t=e.model,n=e.isMobile,i=void 0!==n&&n,c=e.children,p=Object(s.b)().user,b=Object(a.useLoadScript)({id:"script-loader",version:"weekly",googleMapsApiKey:u.a.googleMapsApi,libraries:f,language:p.language}),h=b.isLoaded,g=b.loadError,v=b.url,_=!window.location.search.includes("disableMap"),y=Reflect.has(window,"google");return g||h&&!y?(o.Sentry.withScope(function(e){e.setExtras({googleMapUrl:v}),o.Sentry.captureException(g)}),l.a.createElement("h2",null,l.a.createElement(r.Trans,{id:"Cannot load map right now. Please try again later."}))):h?_?l.a.createElement(a.GoogleMap,{zoom:t.zoom,center:t.center,onCenterChanged:t.updatePosition,onZoomChanged:t.updateZoom,onClick:t.onClick,onLoad:t.setMapRef,onUnmount:function(){return t.setMapRef(null)},options:m(i),mapContainerStyle:{borderRadius:"0 0 0.5rem 0.5rem",overflow:"hidden",height:i?"100%":"calc(100% - 3.75rem)"}},"function"===typeof c?c():c):l.a.createElement(a.MapContext.Provider,{value:new google.maps.Map(document.createElement("div"))},"function"===typeof c?c():c):l.a.createElement(d.a,{noMargin:!0})})},957:function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n(48),a=n(23),o=n(40);function i(e){var t=Object(a.b)().user,n=Object(o.z)({branchId:e},{skip:!e,fetchPolicy:"cache-first"});return Object(r.useReaction)(function(){return t.language},function(){n.refetch()}),n}},982:function(e,t,n){"use strict";var r=n(38),a=n.n(r),o=n(59),i=n(36),c=n(12),l=n(48),s=n(22),u=n(924),d=n(0),m=n.n(d),f=n(1431),p=n(1286),b=n(937),h=n(40),g=n(133),v=n(31),_=n(1414),y=n(23),E=n(222);var O=n(1049),j=n(391),w=n(155),C=n.n(w),k=n(11),I=n(32),x="".concat(I.a.persistenceKey,"_orderForm"),N=function(e){s.Sentry.withScope(function(t){t.setTag("persistence",x),s.Sentry.captureException(e)})},S=Object(j.debounce)(function(e,t){C.a.setItem(x,{firstname:e.firstname,lastname:e.lastname,email:e.email,phonePrefix:e.phonePrefix,phone:e.phone,note:e.note}),t()},3e3),T=m.a.memo(function(){var e=Object(y.b)().user,t=Object(u.d)(),n=function(n){Object.keys(n).forEach(function(e){var r=n[e];t.setFieldValue(e,r),t.setFieldTouched(e,!0)}),e.setMemoryApplied(),e.log("applied order form memory")};return m.a.useEffect(function(){C.a.getItem(x).catch(N).then(function(t){t?n(t):Object(k.when)(function(){return e.root.initialized},function(){n(function(e){e.log("using legacy memory");var t=e.firstname,n=e.lastname,r=e.email,a=e.phone,o=e.phonePrefix,i=e.note;return{firstname:t,lastname:n,email:r,phone:a,phonePrefix:o,note:i,agreements:[]}}(e.root.order))})})},[]),m.a.useEffect(function(){e.shouldRememberForm&&e.memoryApplied&&S(t.values,function(){e.log("written order form memory")})},[t.values]),null});var P=n(1050),M=n(1061);n.d(t,"a",function(){return R}),n.d(t,"b",function(){return A});var R=50,A=function(e){var t=e.children,n=Object(g.a)(),r=Object(l.useRouterContext)().history,c=function(){var e=Object(y.b)(),t=e.order,n=e.business,r=Object(l.useRouterContext)().history,c=Object(E.a)(),s=Object(i.a)(c,2),u=s[0],d=s[1],m=Object(h.j)({fetchPolicy:"no-cache"}),f=Object(i.a)(m,1)[0],p=Object(_.useGoPay)(Object(o.a)(a.a.mark(function e(){var n,r,o,i=arguments;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>0&&void 0!==i[0]?i[0]:t.orderId,r=i.length>1?i[1]:void 0,n){e.next=4;break}return e.abrupt("return",null);case 4:return t.goPayStatusCheck(!0),e.next=7,f({orderId:n},{context:{invalidateWithToken:r}});case 7:return o=e.sent,t.goPayStatusCheck(!1),e.abrupt("return",o.data?o.data.status:null);case 10:case"end":return e.stop()}},e)})),{onError:function(e){var t=n.branch.phone;d(v.b._("Payment status check has failed"),e.length?e.join("<br />"):v.b._("We were unable to verify status of your payment. Please contact operator using number {phone}",{phone:t}))},onFinish:function(){r.replace("/finish")}});return{paymentErrorModal:u,executeGoPayPayment:p.executeGoPayPayment,paymentProcessing:p.paymentLoading}}(),d=c.executeGoPayPayment,j=c.paymentErrorModal,w=Object(h.u)(),C=Object(i.a)(w,1)[0],k=m.a.useMemo(function(){return p.object().shape({firstname:p.string().required(b.b),lastname:p.string().required(b.b),phonePrefix:p.string().required(b.b),phone:p.string().required(b.b).matches(/\d+/,v.b._("Only numbers allowed for phone")),email:p.string().required(b.b).email(v.b._("Invalid email format")),note:p.string().notRequired().max(R,function(e){var t=e.value;return v.b._("Maximum length is {NOTE_MAX_LENGTH, plural, other {# characters}}. Typed {0, plural, one {# character} other {# characters}}",{0:t.length,NOTE_MAX_LENGTH:R})})})},[]),I=m.a.useCallback(function(){var e=Object(o.a)(a.a.mark(function e(t){var o,i,c,l,u;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n.submitStarted(),o=F(t,n),e.next=4,C(o);case 4:if(i=e.sent){e.next=8;break}return n.submitFailed(),e.abrupt("return");case 8:if(c=i.submitOrder,l=c.userErrors,u=c.gopayUrl,!l.length){e.next=12;break}return n.submitFailed(l),e.abrupt("return");case 12:if(n.submitFinished(),n.paymentMethod!==h.f.Cash){e.next=16;break}return r.replace("/finish"),e.abrupt("return");case 16:n.paymentMethod===h.f.Gopay?u?d(u):(s.Sentry.withScope(function(e){e.setExtras({variables:o}),s.Sentry.captureMessage("No gopayUrl received for GoPay payment")}),n.submitFailed()):(s.Sentry.withScope(function(e){e.setExtras({variables:o}),s.Sentry.captureMessage("Unknown payment mode ".concat(n.paymentMethod))}),n.submitFailed());case 17:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),[]),x=Object(u.c)({initialValues:{firstname:"",lastname:"",email:"",phone:"",phonePrefix:"",note:"",agreements:[]},validationSchema:k,onSubmit:I});return m.a.useEffect(function(){n.root.cart.setOrderSubmitting(x.isSubmitting)},[x.isSubmitting]),Object(l.useAutorun)(function(){var e=n.defaultPhonePrefix;e&&n.root.user.memoryApplied&&0===x.values.phonePrefix.length&&(x.setFieldValue("phonePrefix",e),x.setFieldTouched("phonePrefix",!0))}),m.a.createElement(m.a.Fragment,null,j,m.a.createElement(u.a,{value:x},m.a.createElement(M.a,null),m.a.createElement(P.a,null),m.a.createElement(O.a,null),m.a.createElement(T,null),m.a.createElement(f.a,{onSubmit:x.handleSubmit},t)))};function F(e,t){return t.log(e),{orderId:t.orderId,customer:{firstName:e.firstname,lastName:e.lastname,emails:[{email:e.email}],phones:[{phone:"".concat(e.phonePrefix).concat(e.phone)}]},note:e.note,tips:t.tips,paymentGate:t.paymentMethod,deliverAt:t.deliverAt&&Object(c.isoDate)(t.deliverAt),agreements:e.agreements}}},984:function(e,t,n){},986:function(e,t,n){"use strict";n.d(t,"a",function(){return l});var r=n(220),a=n(68),o=n(0),i=n.n(o),c=n(23),l=Object(a.observer)(function(e){var t=e.className,n=Object(c.b)(),a=n.business,o=n.user;return a.isValid?i.a.createElement(r.LanguagePicker,{availableLanguages:a.branch.supportedLanguages,selectedLanguage:o.language,onChange:function(e){e!==o.language&&(o.selectLanguage(e),setTimeout(function(){window.location.reload()},300))},className:t,backgroundColor:"white",arrowColor:"#5A5A5A"}):null})},987:function(e,t,n){"use strict";n.d(t,"a",function(){return d});var r=n(72),a=n(68),o=n(0),i=n.n(o),c=n(23),l=n(124),s=n(938),u=n(31),d=function(e){var t=e.status,n=Object(c.b)().user,o=Object(s.a)({status:t,updateInterval:0}),d=o.decision,m=o.openingIn;return Object(a.useObserver)(function(){return i.a.createElement(l.a,{isOpen:("Closed"===d||"OpeningSoon"===d)&&!n.closingTimeAlertHidden,onClose:n.hideClosingTime,headerText:u.b._("We are closed right now")},u.b._("We're sorry, but we do not accept new orders at this time."),"OpeningSoon"===d&&i.a.createElement(r.Trans,{id:"You can prepare your order because we are {openingIn, plural, one {opening in 1 minute} other {opening in # minutes}} !",values:{openingIn:m}}))})}},988:function(e,t,n){"use strict";n.d(t,"a",function(){return i});n(1066);var r=n(393),a=n(0),o=n.n(a),i=function(){return o.a.createElement(o.a.Fragment,null,o.a.createElement("img",{src:Object(r.getLogo)("doveze"),className:"shop__header__icons__doveze","data-testid":"ShopHeaderIcons__AppLogo",alt:"logo Doveze.cz"}),o.a.createElement("img",{src:Object(r.getLogo)("mastercard"),className:"shop__header__icons__commerce",alt:"MasterCard"}),o.a.createElement("img",{src:Object(r.getLogo)("visa"),className:"shop__header__icons__commerce","data-testid":"ShopHeaderIcons__VisaLogo",alt:"VISA"}),o.a.createElement("img",{src:Object(r.getLogo)("gopay"),className:"shop__header__icons__gopay",alt:"GoPay","data-testid":"ShopHeaderIcons__GoPayLogo"}))}},989:function(e,t,n){"use strict";n.d(t,"a",function(){return f});var r=n(135),a=n(35),o=n(72),i=n(136),c=n(0),l=n.n(c),s=n(23),u=n(938),d=a.default.span.withConfig({displayName:"ShopStatusDisplay__StatusDisplayOpen",componentId:"ul92ph-0"})(["font-style:italic;color:#0f9849;"]),m=a.default.span.withConfig({displayName:"ShopStatusDisplay__StatusDisplayClosed",componentId:"ul92ph-1"})(["font-style:italic;color:#b40000;"]),f=function(e){var t=e.status,n=e.deliveryTime,r=e.pickupTime,a=Object(s.b)().order,i=Object(u.a)({status:t}),c=i.decision,f=i.openingIn,b=i.closingIn;if(!t)return null;if(!1===t.isOpen){if(!t.willOpenAt)return l.a.createElement(m,null,l.a.createElement(o.Trans,{id:"We are closed until further notice"}));var h=t.businessHours[0];if(h&&h.closedNote)return l.a.createElement(m,null,h.closedNote)}switch(c){case"Open":var g;return a.usingDeliveryOrderMethod&&t.defaultDeliveryTimeEnabled&&(g=l.a.createElement(o.Trans,{id:"We are delivering in {deliveryTime} minutes",values:{deliveryTime:n}})),a.usingPickupOrderMethod&&t.defaultPickupTimeEnabled&&(g=l.a.createElement(o.Trans,{id:"We can prepare your order in {pickupTime} minutes",values:{pickupTime:r}})),l.a.createElement(d,{"data-testid":"statusDisplayOpen"},g);case"OpeningSoon":return l.a.createElement(m,null,l.a.createElement(o.Trans,{id:"{openingIn, plural, one {Opening in 1 minute} other {Opening in # minutes}}",values:{openingIn:f}}));case"ClosingSoon":return l.a.createElement(d,null,l.a.createElement(o.Trans,{id:"{closingIn, plural, one {Closing in 1 minute} other {Closing in # minutes}}",values:{closingIn:b}}));case"Closed":return l.a.createElement(m,null,t.willOpenAt?l.a.createElement(o.Trans,{id:"We will open at {0}",values:{0:p(t.willOpenAt)}}):l.a.createElement(o.Trans,{id:"Closed"}))}};function p(e){var t=new Date(e),n=new Date,a={hour:"numeric",minute:"numeric"};return Object(i.isSameDay)(t,n)||(a=Object(r.a)({},a,{weekday:"long"})),l.a.createElement(o.DateFormat,{value:t,format:a})}},990:function(e,t,n){"use strict";n.d(t,"a",function(){return m});var r=n(35),a=n(72),o=n(0),i=n.n(o),c=n(157),l=n(219),s=n(97),u=n(98),d=r.default.div.withConfig({displayName:"FinishViewFooter__CenteredButtonContainer",componentId:"sc-1yzqtn3-0"})(["text-align:center;"]),m=function(e){var t=e.finish,n=t.androidApp,r=t.iosApp,o=function(){return i.a.createElement(c.b,{to:"/"},i.a.createElement(s.a,{className:"finish__view__submit__line__button"},i.a.createElement(a.Trans,{id:"Back to home page"})))};return i.a.createElement(i.a.Fragment,null,i.a.createElement(u.a,null,(n||r)&&i.a.createElement("div",{className:"finish__view__apps__propagation"},i.a.createElement("div",{className:"finish__view__apps__propagation__header"},i.a.createElement(a.Trans,{id:"What about mobile app?"})),i.a.createElement("div",{className:"finish__view__apps__propagation__description"},i.a.createElement(a.Trans,{id:"We have prepared mobile app, so you could order from anywhere!"})),n&&i.a.createElement("a",{href:n.url},i.a.createElement(l.a,{className:"finish__view__apps__propagation__button",color:"secondary"},"Google Play")),r&&i.a.createElement("a",{href:r.url},i.a.createElement(l.a,{className:"finish__view__apps__propagation__button",color:"secondary"},"App Store"))),i.a.createElement(d,null,o())),i.a.createElement(u.b,null,i.a.createElement("div",{className:"finish__view__submit__line",style:{textAlign:"center"}},i.a.createElement("div",{className:"finish__view__submit__line__strip"}),o())))}},991:function(e,t,n){"use strict";n.d(t,"a",function(){return s});var r=n(0),a=n.n(r),o=n(23),i=n(221),c=n(40),l=n(939),s=function(e){var t=e.render,n=Object(o.b)().order;Object(l.a)();var r=Object(c.E)({branchId:n.branchId,orderId:n.orderId}),s=r.data;return r.loading?a.a.createElement(i.a,null):t(s)}},992:function(e,t,n){"use strict";n.d(t,"a",function(){return f});var r=n(35),a=n(72),o=n(84),i=n(0),c=n.n(i),l=n(40),s=n(31),u=r.default.div.withConfig({displayName:"FinishViewOrder__HeaderThemed",componentId:"s65dzo-0"})(["background-color:",";"],function(e){return e.theme.primary}),d=r.default.div.withConfig({displayName:"FinishViewOrder__PriceThemed",componentId:"s65dzo-1"})(["background-color:",";"],function(e){return e.theme.primary}),m=r.default.div.withConfig({displayName:"FinishViewOrder__PriceCornerThemed",componentId:"s65dzo-2"})(["border-top-color:"," !important;"],function(e){return e.theme.primary}),f=function(e){var t=e.order;return c.a.createElement(c.a.Fragment,null,c.a.createElement(u,{className:"finish__view__header"},c.a.createElement("div",{className:"finish__view__header__inner"},c.a.createElement("span",{className:"flaticon-transport-1 finish__view__header__icon"}),c.a.createElement("h3",null,c.a.createElement(a.Trans,{id:"It's done! Thank you :-)"})))),c.a.createElement("h4",null,c.a.createElement(a.Trans,{id:"Your order was successfully accepted!"})," ",function(e){var t=e.orderPayments;if(t.some(p(l.g.Cash)))return s.b._("You will pay at pickup.");if(t.some(p(l.g.Credit)))return s.b._("You have payed.");return null}(t)),c.a.createElement("div",{className:"finish__view__items"},c.a.createElement("div",{className:"finish__view__items__look__to"},c.a.createElement(a.Trans,{id:"You can look forward to:"})),t.items.map(function(e){return c.a.createElement(b,Object.assign({key:e.id},e))}),c.a.createElement(m,{className:"finish__view__items__price__corner"}),c.a.createElement(d,{className:"finish__view__items__price"},function(e){var t=e.orderPayments;e.totalSum;if(t.some(p(l.g.Cash)))return s.b._("Total cost to be payed:");if(t.some(p(l.g.Credit)))return s.b._("Total cost payed:");return null}(t)," ",c.a.createElement("b",null,t.totalSum.formattedValue))))},p=function(e){return function(t){return t.paymentMethod.paymentType.enum===e}};function b(e){var t=e.recipe,n=e.sideDishes;return c.a.createElement("div",null,c.a.createElement("b",null,t.nameLabel),n.length?" + ".concat(n.map(o.RM.path(["recipe","nameLabel"])).join(",")):null)}},993:function(e,t,n){"use strict";n.d(t,"a",function(){return l});var r=n(35),a=n(72),o=n(0),i=n.n(o),c=r.default.a.withConfig({displayName:"FinishViewSupport__PhoneNumberLinkStyled",componentId:"sc-1y14w99-0"})(["color:inherit;text-decoration:none;&:hover{text-decoration:underline;}"]),l=function(e){var t=e.branch;return i.a.createElement("div",{className:"finish__view__support"},i.a.createElement("h4",null,i.a.createElement(a.Trans,{id:"Any question? Do you have a problem? Call:"})),i.a.createElement("span",{className:"flaticon-technology finish__view__support__icon"}),i.a.createElement("span",{className:"finish__view__support__phone"},i.a.createElement(c,{href:"tel:".concat(t.phone)},t.phone)))}},995:function(e,t,n){"use strict";n(1070);var r=n(0),a=n.n(r);t.a=function(e){var t=e.children;return a.a.createElement("div",{className:"button__stripe"},a.a.createElement("div",{className:"button__stripe__bar"}),a.a.createElement("div",{className:"button__stripe__button"},t))}},996:function(e,t,n){"use strict";n.d(t,"a",function(){return l});var r=n(932),a=n(0),o=n.n(a),i=n(23),c=n(115);function l(){var e=Object(i.b)().map,t=Object(r.useGoogleMap)(),n=o.a.useRef(null);return function(r){var a=n.current;(!a||a.latitude!==r.latitude&&a.longitude!==r.longitude)&&function(r){if(t){var a=Object(c.b)(r);e.log("panning to %j",a),t.panTo(a),n.current=r}else e.log("cannot pan map as ref is not available")}(r)}}},997:function(e,t,n){"use strict";n.d(t,"a",function(){return s});var r=n(35),a=n(932),o=n(0),i=n.n(o),c=n(115),l=r.default.div.withConfig({displayName:"MapBranchMarker__StyledPickupMapMarker",componentId:"sc-18o5u5p-0"})(["cursor:pointer;color:white;opacity:0.5;&::before{font-size:1.3rem;margin:0;padding:0.5rem;background-color:#ff0000;border-radius:1rem;}"]),s=function(e){var t=e.branch,n=e.onClick;return i.a.createElement(a.OverlayView,{position:Object(c.a)(t.gps),mapPaneName:a.OverlayView.OVERLAY_MOUSE_TARGET,getPixelPositionOffset:function(e,t){return{x:0===e?-12:-e/2,y:0===t?-12:-t/2}}},i.a.createElement(l,{className:"flaticon-restaurant","data-testid":"PickupMapMarker",title:t.name,onClick:n}))}},998:function(e,t,n){"use strict";n.d(t,"a",function(){return d});var r=n(135),a=n(153),o=n(36),i=n(12),c=n(23),l=n(40),s=1,u=[];function d(){var e=Object(c.b)(),t=e.order,n=e.cart,d=Object(i.useApolloClient)(),m=Object(l.l)({context:{noBatch:!0}}),f=Object(o.a)(m,1)[0];return function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:u,a={orderId:t.orderId,recipeId:e,sideDishes:r,withGoods:n.withGoods,withPresence:n.withPresence};return f(a,{optimisticResponse:p(a)})};function p(e){var t=d.readQuery({query:l.h,variables:{orderId:e.orderId,withGoods:n.withGoods,withPresence:n.withPresence}},!0);if(t){var o="-".concat(s++);return{__typename:"Mutation",add:Object(r.a)({},t.order,{countWares:t.order.countWares+1,totalSum:Object(r.a)({},t.order.totalSum,{value:-1}),items:function(){if(!n.withGoods)return t.order.items;var r=d.readFragment({id:"Recipe-".concat(e.recipeId),fragment:l.b,fragmentName:"FRecipe"},!0);return r?[].concat(Object(a.a)(t.order.items),[{__typename:"OrderRecipe",automatic:!1,id:o,price:{__typename:"PriceConverted",formattedValue:"???",value:-1},recipe:r,sideDishes:[]}]):t.order.items}(),presence:n.withPresence?[].concat(Object(a.a)(t.order.presence),[{__typename:"OrderRecipe",id:o,recipe:{__typename:"Recipe",id:e.recipeId}}]):t.order.presence})}}}}},999:function(e,t,n){"use strict";n.d(t,"a",function(){return s});var r=n(99),a=n(35),o=n(0),i=n.n(o),c=n(219),l=Object(a.default)(function(e){e.isSelected,e.width;var t=Object(r.a)(e,["isSelected","width"]);return i.a.createElement(c.a,t)}).withConfig({displayName:"PickerButton__PickerButtonStyled",componentId:"sc-19g322n-0"})(["border-radius:0.6rem;margin:0.5rem;background-color:"," !important;color:"," !important;&:hover{border-color:"," !important;}width:",";@media (max-width:370px){width:100%;}&.btn-outline-secondary{color:#2e2e2e;border-color:#d4d4d4;}&.btn-outline-secondary.active{color:white;}"],function(e){return e.isSelected?e.theme.tertiary:"transparent"},function(e){return e.isSelected?e.theme.tertiaryText:"initial"},function(e){return e.theme.tertiaryHover},function(e){return e.width}),s=function(e){var t=e.isSelected,n=(e.onSelect,e.children),a=Object(r.a)(e,["isSelected","onSelect","children"]);return i.a.createElement(l,Object.assign({isSelected:t},a),n)}}}]);
//# sourceMappingURL=1.65d02bc3.chunk.js.map