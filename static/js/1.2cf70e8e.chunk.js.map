{"version":3,"sources":["common/ColStyle.tsx","hooks/useShopStatus.ts","common/ShopAddress.tsx","common/BackgroundThemed.tsx","common/BaseMap.tsx","segments/map/atoms/MapPanning.tsx","common/LanguagePicker.tsx","segments/shop/ShopClosingTimeModal.tsx","segments/shop/ShopHeaderIcons.tsx","segments/shop/ShopStatusDisplay.tsx","segments/finish/FinishViewFooter.tsx","segments/finish/FinishViewLoader.tsx","segments/finish/FinishViewOrder.tsx","segments/finish/FinishViewSupport.tsx","segments/destination/OrderMethod.tsx","common/ButtonStripe.tsx","hooks/useAddToCart.ts","common/PickerButton.tsx","segments/orderForm/OrderSubmitLine.tsx","segments/orderForm/OrderFormStorageNotice.tsx","segments/orderForm/OrderErrorModal.tsx","segments/orderForm/OrderFormAutoFill.tsx","segments/orderForm/OrderNoteInput.tsx","segments/orderForm/OrderFormTipInput.tsx","segments/orderForm/OrderPaymentButton.tsx","segments/orderForm/OrderGoPayModal.tsx","segments/sidedishPicker/CategoryValidationMessage.tsx","segments/sidedishPicker/SidedishRemoveButton.tsx","segments/sidedishPicker/SidedishCheckbox.tsx","segments/sidedishPicker/SidedishPicker.tsx","segments/cart/CartOrderButton.tsx","segments/cart/CartModal.tsx","segments/cart/AddToCartModal.tsx","segments/cart/ChangeCartModal.tsx","segments/cart/CartView.tsx","segments/foodMenu/CategoryNavigator.tsx","segments/foodMenu/FoodCategory.tsx","segments/foodMenu/FoodMenuItem.tsx","segments/foodMenu/FoodMenu.tsx","segments/foodMenu/hooks/useFoodMenuPresence.ts","segments/foodMenu/OrderLimitModal.tsx","segments/foodMenu/FoodMenuView.tsx","segments/destination/GeolocationButton.tsx","segments/destination/ResolvedAddress.tsx","segments/destination/SearchInput.tsx","segments/destination/AddressInput.tsx","segments/map/AddressSubmit.tsx","segments/map/DeliveryMapPanning.tsx","segments/map/DeliveryMap.tsx","common/FormTextInput.tsx","segments/orderForm/OrderEmailInput.tsx","segments/orderForm/OrderNameInput.tsx","segments/orderForm/OrderPhoneInput.tsx","segments/orderForm/OrderPromoInput.tsx","segments/orderForm/OrderTimeButtons.tsx","segments/orderForm/OrderFormInputs.tsx","segments/timePicker/createTimeSteps.ts","segments/timePicker/TimePickerButton.tsx","segments/timePicker/TimePicker.tsx","segments/orderForm/OrderTimePicker.tsx","segments/orderForm/OrderFormSetup.tsx","segments/orderForm/hooks/useOrderPayment.ts","segments/cart/CartSystem.tsx","segments/cart/hooks/useCartControl.ts","common/FormInputCheckbox.tsx","segments/orderForm/OrderAgreements.tsx"],"names":["__webpack_require__","d","__webpack_exports__","ColStyle","ColStyleLeft","ColStyleRight","react__WEBPACK_IMPORTED_MODULE_0__","react__WEBPACK_IMPORTED_MODULE_0___default","n","reactstrap__WEBPACK_IMPORTED_MODULE_1__","_ref","children","a","createElement","className","sm","md","lg","xl","_ref2","_ref3","useShopStatus","_speedlo_hooks__WEBPACK_IMPORTED_MODULE_0__","date_fns__WEBPACK_IMPORTED_MODULE_1__","status","_ref$updateInterval","updateInterval","SECOND","_ref$openSoonThreshol","openSoonThresholdInMinutes","_ref$closeSoonThresho","closeSoonThresholdInMinutes","getNow","useNow","useTimer","interval","enabled","now","isOpen","willCloseAt","willOpenAt","openingIn","differenceInMinutes","closingIn","decision","isSoon","time","threshold","Math","abs","ShopAddress","_i18n__WEBPACK_IMPORTED_MODULE_1__","address","location","_","concat","street","houseNumber","city","BackgroundThemed","imageName","_ref$fixed","fallbackColor","fixed","_ref$size","size","_ref$component","component","otherProps","Object","D_workspace_deepvision_doveze_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectWithoutProperties__WEBPACK_IMPORTED_MODULE_0__","React","styled","withConfig","displayName","componentId","props","theme","libraries","BaseMap","model","_React$useState","useState","_React$useState2","D_workspace_deepvision_doveze_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__","isLoaded","setLoaded","react__WEBPACK_IMPORTED_MODULE_3___default","_react_google_maps_api__WEBPACK_IMPORTED_MODULE_1__","id","googleMapsApiKey","appConfig","googleMapsApi","version","onLoad","mobx_react_lite__WEBPACK_IMPORTED_MODULE_2__","zoom","center","onCenterChanged","updatePosition","onZoomChanged","updateZoom","onClick","setMapRef","options","streetViewControl","mapTypeControl","fullscreenControl","zoomControlOptions","position","google","maps","ControlPosition","RIGHT_TOP","mapContainerStyle","borderRadius","overflow","height","MapPanning","mobx__WEBPACK_IMPORTED_MODULE_0__","mobx_react_lite__WEBPACK_IMPORTED_MODULE_1__","map","gps","useDisposable","autorun","isReady","panToLocation","StyledLanguagePicker","LangPick","_templateObject","LanguagePicker","observer","_useRoot","useRoot","business","user","isValid","availableLanguages","branch","supportedLanguages","selectedLanguage","language","onChange","selectLanguage","window","reload","backgroundColor","arrowColor","ShopClosingTimeModal","_lingui_react__WEBPACK_IMPORTED_MODULE_0__","react__WEBPACK_IMPORTED_MODULE_2__","react__WEBPACK_IMPORTED_MODULE_2___default","_app_useRoot__WEBPACK_IMPORTED_MODULE_3__","_common_AlertModal__WEBPACK_IMPORTED_MODULE_4__","_hooks_useShopStatus__WEBPACK_IMPORTED_MODULE_5__","_i18n__WEBPACK_IMPORTED_MODULE_6__","_useShopStatus","useObserver","closingTimeAlertHidden","onClose","hideClosingTime","headerText","values","ShopHeaderIcons","_speedlo_assets__WEBPACK_IMPORTED_MODULE_1__","Fragment","src","getLogo","data-testid","alt","StatusDisplayOpen","span","StatusDisplayClosed","ShopStatusDisplay","deliveryTime","pickupTime","order","react__WEBPACK_IMPORTED_MODULE_4___default","_lingui_react__WEBPACK_IMPORTED_MODULE_2__","closestBH","businessHours","closedNote","timingDisplay","usingDeliveryOrderMethod","defaultDeliveryTimeEnabled","usingPickupOrderMethod","defaultPickupTimeEnabled","0","formatOpenTime","openAt","openAtDate","Date","nowDate","format","hour","minute","isSameDay","D_workspace_deepvision_doveze_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread__WEBPACK_IMPORTED_MODULE_0__","weekday","value","CenteredButtonContainer","div","FinishViewFooter","_ref$finish","finish","androidApp","iosApp","_common_Responsive__WEBPACK_IMPORTED_MODULE_5__","_lingui_react__WEBPACK_IMPORTED_MODULE_1__","href","url","reactstrap__WEBPACK_IMPORTED_MODULE_3__","color","_common_Buttons__WEBPACK_IMPORTED_MODULE_4__","to","toLocaleUpperCase","style","textAlign","FinishViewLoader","react_router_dom__WEBPACK_IMPORTED_MODULE_1__","_app_useRoot__WEBPACK_IMPORTED_MODULE_2__","_common_Pacman__WEBPACK_IMPORTED_MODULE_3__","_graph_generated__WEBPACK_IMPORTED_MODULE_4__","render","hasOrder","_useQOrderFinish","useQOrderFinish","branchId","orderId","data","loading","HeaderThemed","primary","PriceThemed","PriceCornerThemed","FinishViewOrder","_ref4","_ref5","orderPayments","some","hasMethod","PaymentTypeEnum","Cash","_i18n__WEBPACK_IMPORTED_MODULE_5__","Credit","getPaymentInfo","items","item","OrderItem","assign","key","_ref6","totalSum","getPaymentPrice","formattedValue","paymentType","payment","paymentMethod","enum","_ref7","recipe","sideDishes","nameLabel","length","RM","path","join","PhoneNumberLinkStyled","FinishViewSupport","phone","OrderMethod","_speedlo_tools__WEBPACK_IMPORTED_MODULE_1__","react__WEBPACK_IMPORTED_MODULE_3__","_app_useRoot__WEBPACK_IMPORTED_MODULE_4__","_common_Buttons__WEBPACK_IMPORTED_MODULE_5__","_graph_generated__WEBPACK_IMPORTED_MODULE_6__","_i18n__WEBPACK_IMPORTED_MODULE_7__","OrderMethodButton","orderModel","orderMethod","onPrefetch","selected","onMouseEnter","useOrderMethod","data-testselected","DeliveryTypeEnum","Messenger","identity","Pickup","prefetchPickup","react__WEBPACK_IMPORTED_MODULE_1__","react__WEBPACK_IMPORTED_MODULE_1___default","ButtonStripe","counter","NO_SIDEDISHES","useAddToCart","cartModel","cart","client","useApolloClient","_useMAddToCart","useMAddToCart","context","noBatch","addToCart","D_workspace_deepvision_doveze_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_2__","recipeId","arguments","undefined","variables","withGoods","withPresence","optimisticResponse","makeOptimisticResponse","current","readQuery","query","QCartDocument","__typename","add","countWares","readFragment","fragment","FRecipeFragmentDoc","fragmentName","D_workspace_deepvision_doveze_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_1__","automatic","price","addItem","presence","PickerButtonStyled","isSelected","width","tertiary","tertiaryText","tertiaryHover","PickerButton","onSelect","buttonProps","OrderSubmitLine","_speedlo_ui__WEBPACK_IMPORTED_MODULE_1__","_common_Buttons__WEBPACK_IMPORTED_MODULE_3__","_ref$canSubmit","canSubmit","isSubmitting","cn","heartBeat","disabled","NoticeButton","Button","StorageNotice","Alert","mediaDesktop","mediaMobile","_templateObject2","OrderFormStorageNotice","_useQOrderForm","useQOrderForm","skip","rememberForm","setFormRememberYes","setFormRememberNo","OrderErrorModal","reactstrap__WEBPACK_IMPORTED_MODULE_4__","hasErrors","toggle","clearErrors","tag","Container","submitErrors","error","idx","OrderFormAutoFill","_hooks_useOrderModel__WEBPACK_IMPORTED_MODULE_3__","onFill","useOrderModel","MAX_LENGTH","OrderNoteInput","react_form__WEBPACK_IMPORTED_MODULE_2__","_i18n__WEBPACK_IMPORTED_MODULE_4__","isTooLong","trim","OrderNoteInputValidator","ingredientsDescription","field","validate","fieldApi","type","placeholder","title","e","setValue","target","onBlur","setTouched","valid","invalid","Boolean","TipContainer","OrderFormTipInput","_useMOrderTipUpdate","useMOrderTipUpdate","updateTip","useEffect","tips","usingPaymentMethodWithTips","Number","reactstrap_lib_FormGroup__WEBPACK_IMPORTED_MODULE_6___default","react_form__WEBPACK_IMPORTED_MODULE_5__","reactstrap_lib_Input__WEBPACK_IMPORTED_MODULE_7___default","setTips","_i18n__WEBPACK_IMPORTED_MODULE_10__","OrderPaymentButton","react_form__WEBPACK_IMPORTED_MODULE_1__","method","setPaymentMethod","Checkmark","show","TextPadding","OrderGoPayModal","_common_AlertModal__WEBPACK_IMPORTED_MODULE_5__","isGoPayChecking","_common_Pacman__WEBPACK_IMPORTED_MODULE_6__","noMargin","CategoryValidationMessage","minCount","maxCount","message","i18n","count","react_default","StyledSidedishRemoveButton","primaryHover","SidedishRemoveButton","objectWithoutProperties","StyledSidedishCheckbox","SidedishCheckbox","memo","sidedish","canBeSelected","canBeRemoved","onAdd","onRemove","useCallback","outline","SidedishRemoveButton_SidedishRemoveButton","StyledSidedishPicker","SidedishPicker_templateObject","SidedishPicker","selection","_useSideDishValidator","useSideDishValidator","categories","isCategoryValid","category","react","CategoryValidationMessage_CategoryValidationMessage","filter","i","includes","_onAdd","apply","this","toString","_onRemove","CartOrderButton","onConfirm","slicedToArray","isConfirming","setConfirming","Buttons","every","catch","EMPTY_SELECTION","CartModal","isLoading","_ref$initialSideDishe","initialSideDishes","updateSelection","onCloseModal","onConfirmAndClose","asyncToGenerator","regenerator_default","mark","_callee","wrap","_context","prev","next","sent","abrupt","stop","onAddSidedish","sidedishId","sel","append","onRemoveSidedish","remove","indexOf","reactstrap_es","autoFocus","backdrop","fade","_lingui_react","Pacman","descriptionLabel","SidedishPicker_SidedishPicker","AddToCartModal","addToCartRecipeId","_useQCartRecipe","useQCartRecipe","fetchPolicy","executeAddToCart","result","_x","history","CartModal_CartModal","ChangeCartModal","itemId","changeCartItemId","_useQCartItem","useQCartItem","_useMChangeCartItem","useMChangeCartItem","changeItem","changeCartItem","sideDishesSelection","useMemo","CartView","_ref$isReadonly","isReadonly","CartSystem","StyledCategoryNavigator","CategoryNavigator","_useState","_useState2","activeCategoryIndex","setActiveCategoryIndex","modules_default","Link","active","onSetActive","offset","smooth","spy","pictogram","Truncate","lines","FoodCategoryStyled","FoodCategoryTitleStyled","FoodCategory_templateObject","Element","name","FoodMenuItemStyled","isActive","secondary","FoodMenuItem_templateObject","FoodMenuItemImage","img","FoodMenuItemPriceCorner","FoodMenuItemPrice","FoodMenuItem","onAddToCart","hasSideDishes","sideDishCount","prefetchFood","previousPresence","useRef","lastActiveRecipeId","image","recipePresence","get","pulse","zoomIn","renderPresence","StyledFoodMenu","FoodMenu_templateObject","FoodMenu_templateObject2","_templateObject3","_templateObject4","config","_useQFoodMenuCartPres","useQFoodMenuCartPresence","observable","runInAction","clear","forEach","has","set","useFoodMenuPresence","hasSideDish","orderItemsMax","showOrderLimit","setUsedRecipeId","foodMenu_FoodCategory","recipes","foodMenu_FoodMenuItem","OrderLimitModal","AlertModal","orderLimitAlertHidden","hideOrderLimit","FoodMenuView","_useQFoodMenu","useQFoodMenu","wareCategories","cat","OrderLimitModal_OrderLimitModal","segments_foodMenu_CategoryNavigator","foodMenu_FoodMenu","GeolocationButton","_ref2$isVisible","isVisible","addonType","ResolvedAddress","isResolving","onValidClick","dist_default","fadeIn","SearchInput","state","onSearch","debounce","_this","ev","setState","onKeyPress","inputRef","onInputMount","ref","setFocus","nextProps","isSearching","focus","inputProps","isHidden","address__input__hidden","innerRef","Component","AddressInputStyled","AddressInputBoxStyled","AddressInput","destination_ResolvedAddress","hasAddress","clearAddress","destination_SearchInput","autoComplete","withUserAddress","destination_GeolocationButton","attemptGeolocation","isGeolocationAvailable","hasFinishedSearch","isResolved","NoMouseAlert","isStreetAddress","inDeliveryLocation","renderErrorMessage","AddressSubmit","DeliveryMapPanning","useQInitialDeliveryLocation","reaction","clickPoint","withUserLocation","clearClickPoint","panToGps","useFullComputed","geoPoint","logMap","geolocationPoint","gpsCoordinates","DeliveryMap","onSubmit","setBranch","createDeliveryOrder","when","validateUserLocation","DeliveryMapPanning_DeliveryMapPanning","latLng","lib","draggable","onDragEnd","latLngToGps","AddressInput_AddressInput","AddressSubmit_AddressSubmit","isDeliveryAddress","prefetchFoodMenu","FormTextInput","_ref$showFeedback","showFeedback","es","touched","emailRx","OrderEmailInputValidator","email","test","OrderEmailInput","FormTextInput_FormTextInput","OrderNameInput","OrderPhoneInputValidator","OrderPhonePrefixInputValidator","OrderPhoneInput","isMobileSafari","UAParser","navigator","userAgent","getBrowser","CodesPanel","OrderPromoInput","_useAlertModal","useAlertModal","_useAlertModal2","errorModal","showError","_useQOrderPromoCodes","useQOrderPromoCodes","_useMOrderPromoAdd","useMOrderPromoAdd","addCodeMutation","_useMOrderPromoRemove","useMOrderPromoRemove","removeCodeMutation","onCodeAdd","code","onCodeRemove","_callee2","codeId","_context2","_x2","_useOrderPromoCodes","useOrderPromoCodes","onCodeErrors","errors","msg","getValidatingMessage","codes","promoCodes","role","OrderTimeButtons","delayedOrderEnabled","deliverAt","setDeliverAt","openTimePicker","OrderFormInputs_OrderFormInputs","OrderFormInputs","OrderNameInput_OrderNameInput","OrderPhoneInput_OrderPhoneInput","OrderEmailInput_OrderEmailInput","OrderTimeButtons_OrderTimeButtons","createTimeSteps","start","end","minuteStep","startOfMinute","addMinutes","subMinutes","getMinutes","timeClampDown","timeClampUp","steps","endMinute","endOfMinute","push","Time","TimePickerButton","node_modules_react_default","getTime","formatTime","TimePickerContainer","TimePickerDay","TimePicker","minDate","maxDate","onStepChange","initialTime","_ref$filterIntervals","filterIntervals","allSteps","step","isWithinInterval","days","eachDayOfInterval","stepIdx","setStepIdx","closestIndexTo","day","node_modules_react","getDate","month","isEqual","startOfDay","TimePickerButton_TimePickerButton","OrderTimePicker","_useQOrderTimePicker","useQOrderTimePicker","_useMOrderDeliveryTim","useMOrderDeliveryTime","updateOrder","selectedTime","isoDate","closeTimePicker","renderModalContent","companyBranch","getStartTime","nextBusinessHour","find","propEq","closeAt","getEndTime","isAfter","minuteOffset","_data$companyBranch","defaultDeliveryTime","defaultPickupTime","getMinuteOffset","TimePicker_TimePicker","bhour","delayedDeliveryEnabled","enableDelayedOrder","header","timePickerOpen","getDefaultFormValues","firstname","lastname","phonePrefix","note","agreements","OrderFormSetup","useRouterContext","isVamInitialized","initVam","_useMSubmitOrder","useMSubmitOrder","_useMSubmitOrder2","submitOrder","_useOrderPayment","paymentErrorModal","alertPaymentError","_useGoPay","useGoPay","userToken","_args","goPayStatusCheck","QOrderPaymentStatusDocument","invalidateWithToken","onError","onFinish","replace","executeGoPayPayment","paymentProcessing","paymentLoading","useOrderPayment","useDebounceCallback","formState","formApi","logOrder","updateVam","mergeFormAgreements","_result$submitOrder","userErrors","gopayUrl","rememberFormValues","getSubmitVariables","submitFailed","PaymentGateEnum","Gopay","Sentry","withScope","scope","setExtras","captureMessage","_x3","formApiRef","defaultPhonePrefix","setPrefix","prefix","r","getValue","dispose","setTimeout","fireImmediately","defaultValues","validateOnMount","submitForm","formValue","agreement","formAgreement","objectSpread","isConfirmed","useTheme","labels","getCartLabels","_useCartControl","onItemEdit","_useMRemoveCartItem","useMRemoveCartItem","removeItem","onItemRemove","makeOptimisticRemove","onPlaceOrder","onChangeOrder","rejectItem","reject","idPropEq","useCartControl","renderMobileSubmit","renderGoodsLoading","useCartSystem","colors","sumRowBg","sumRowText","mobileSummaryItemCount","mobileBreakpoint","backgroundImage","backgroundCart","updateDisplay","store","isMobile","showGoods","_useQCart","useQCart","updateSummary","updateGoods","renderCart","noSideDish","noCost","cartSumHeader","totalPrice","emptyCart","totalDiscount","coverPrice","transportFee","tip","minimalOrderPrice","CheckboxContainerStyled","CheckboxStyled","Input","LabelStyled","FormInputCheckbox","_ref2$defaultValue","defaultValue","checked","ButtonStyled","GdprAgreementStyled","OrderAgreements","descOpen","array","toggleId","display","hideConfirmed","FormInputCheckbox_FormInputCheckbox","isMandatory","dangerouslySetInnerHTML","__html","description","toLocaleLowerCase"],"mappings":"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","file":"static/js/1.2cf70e8e.chunk.js","sourcesContent":["import React from 'react'\nimport { Col } from 'reactstrap'\n\nexport const ColStyle = ({ children }) => (\n  <Col className=\"pl-sm-0\" sm=\"12\" md=\"12\" lg=\"10\" xl=\"8\">\n    {children}\n  </Col>\n)\n\nexport const ColStyleLeft = ({ children }) => (\n  <Col className=\"pl-sm-0\" sm=\"8\" md=\"8\" lg=\"6\" xl=\"5\">\n    {children}\n  </Col>\n)\n\nexport const ColStyleRight = ({ children }) => (\n  <Col className=\"pl-sm-0\" sm=\"4\" md=\"4\" lg=\"4\" xl=\"3\">\n    {children}\n  </Col>\n)\n","import { SECOND, useNow, useTimer } from '@speedlo/hooks'\nimport { differenceInMinutes } from 'date-fns'\n\nimport { FCompanyBranchStatusFragment } from '../graph/generated'\n\nexport type TStatus = FCompanyBranchStatusFragment\n\nexport type TStatusDecision = 'Open' | 'Closed' | 'ClosingSoon' | 'OpeningSoon'\n\ninterface IProps {\n  status: TStatus\n  updateInterval?: number\n  openSoonThresholdInMinutes?: number\n  closeSoonThresholdInMinutes?: number\n  onRefresh?(): void\n}\n\nexport interface IShopStatus {\n  decision: TStatusDecision\n  openingIn: number\n  closingIn: number\n}\n\nexport function useShopStatus({\n  status,\n  updateInterval = 30 * SECOND,\n  openSoonThresholdInMinutes = 30,\n  closeSoonThresholdInMinutes = 30,\n}: IProps) {\n  const getNow = useNow()\n\n  useTimer({\n    interval: updateInterval,\n    enabled: updateInterval > 0,\n  })\n\n  const now = getNow()\n  const { isOpen, willCloseAt, willOpenAt } = status\n\n  let decision: TStatusDecision\n\n  const openingIn = willOpenAt ? differenceInMinutes(willOpenAt, now) : 0\n  const closingIn = willCloseAt ? differenceInMinutes(willCloseAt, now) : 0\n\n  if (isOpen) {\n    if (willCloseAt && closingIn <= 0) {\n      decision = 'Closed'\n    } else {\n      decision = isSoon(willCloseAt, closeSoonThresholdInMinutes, now)\n        ? 'ClosingSoon'\n        : 'Open'\n    }\n  } else {\n    if (willOpenAt && openingIn <= 0) {\n      decision = 'Open'\n    } else {\n      decision = isSoon(willOpenAt, openSoonThresholdInMinutes, now)\n        ? 'OpeningSoon'\n        : 'Closed'\n    }\n  }\n\n  const shopStatus: IShopStatus = {\n    decision,\n    openingIn,\n    closingIn,\n  }\n  return shopStatus\n}\n\nfunction isSoon(time: Maybe<string>, threshold: number, now: Date) {\n  return time ? Math.abs(differenceInMinutes(time, now)) <= threshold : false\n}\n","import React from 'react'\n\nimport { FAddressFragment } from '../graph/generated'\nimport { i18n } from '../i18n'\n\ninterface IProps {\n  address: Maybe<FAddressFragment>\n}\n\nexport const ShopAddress: React.FC<IProps> = ({ address }) => {\n  if (!address || !address.location) {\n    return <span>{i18n.t`Unknown address`}</span>\n  }\n  const { location } = address\n  return (\n    <span>{`${location.street} ${location.houseNumber},\\n ${\n      location.city\n    }`}</span>\n  )\n}\n","import React from 'react'\nimport styled from 'styled-components/macro'\n\ninterface IProps {\n  imageName: string\n  className?: string\n  fallbackColor?: string\n  fixed?: boolean\n  size?: 'cover' | 'contain' | 'inherit'\n  children?: any\n  component?: any\n}\n\nexport const BackgroundThemed: React.FC<IProps> = ({\n  imageName,\n  fallbackColor = '#5b453c',\n  fixed = false,\n  size = 'inherit',\n  children,\n  component = 'div',\n  ...otherProps\n}) =>\n  React.createElement(\n    styled(component)`\n      background-image: ${props => `url(${props.theme[imageName]})`};\n      background-attachment: ${props => (fixed ? 'fixed' : 'inherit')};\n      background-repeat: no-repeat;\n      background-position: left top;\n      background-size: ${props => size};\n    `,\n    otherProps,\n    children,\n  )\n\nexport default BackgroundThemed\n","import { GoogleMap, LoadScript } from '@react-google-maps/api'\nimport { Observer } from 'mobx-react-lite'\nimport React from 'react'\n\nimport { appConfig } from '../config'\nimport { TMapModel } from '../models/MapModel'\n\ninterface IBaseMapProps {\n  model: TMapModel\n}\n\nconst getMapOptions = (): google.maps.MapOptions => {\n  return {\n    streetViewControl: false,\n    mapTypeControl: false,\n    fullscreenControl: false,\n    zoomControlOptions: {\n      position: google.maps.ControlPosition.RIGHT_TOP,\n    },\n  }\n}\n\nconst libraries = ['places']\n\nexport const BaseMap: React.FC<IBaseMapProps> = ({ model, children }) => {\n  const [isLoaded, setLoaded] = React.useState(false)\n\n  const renderMap = () => (\n    <Observer>\n      {() => (\n        <GoogleMap\n          zoom={model.zoom}\n          center={model.center}\n          onCenterChanged={model.updatePosition}\n          onZoomChanged={model.updateZoom}\n          onClick={model.onClick}\n          onLoad={model.setMapRef}\n          options={getMapOptions()}\n          mapContainerStyle={{\n            borderRadius: '0 0 0.5rem 0.5rem',\n            overflow: 'hidden',\n            height: 'calc(100% - 3.75rem)',\n          }}\n        >\n          {children}\n        </GoogleMap>\n      )}\n    </Observer>\n  )\n\n  return (\n    <LoadScript\n      id=\"script-loader\"\n      googleMapsApiKey={appConfig.googleMapsApi!}\n      libraries={libraries}\n      version=\"weekly\"\n      onLoad={() => setLoaded(true)}\n    >\n      {isLoaded ? renderMap() : null}\n    </LoadScript>\n  )\n}\n","import { autorun } from 'mobx'\nimport { useDisposable } from 'mobx-react-lite'\nimport React from 'react'\n\nimport { GeoPoint } from '../../../helpers/gps'\nimport { TMapModel } from '../../../models/MapModel'\n\ninterface IProps {\n  gps?: Maybe<GeoPoint>\n  map: TMapModel\n}\n\nexport const MapPanning: React.FC<IProps> = ({ map, gps }) => {\n  useDisposable(\n    () =>\n      autorun(() => {\n        if (map.isReady && gps) {\n          map.panToLocation(gps)\n        }\n      }),\n    [gps],\n  )\n  return null\n}\n","import { LanguagePicker as LangPick } from '@speedlo/ui'\nimport { observer } from 'mobx-react-lite'\nimport React from 'react'\nimport styled from 'styled-components'\n\nimport { useRoot } from '../app/useRoot'\n\ninterface IProps {\n  className?: string\n}\n\nconst StyledLanguagePicker = styled(LangPick)`\n  display: inline-block;\n\n  & .arrow {\n    order: 0 !important;\n  }\n`\n\nexport const LanguagePicker = observer<IProps>(({ className }) => {\n  const { business, user } = useRoot()\n  if (!business.isValid) {\n    return null\n  }\n  return (\n    <StyledLanguagePicker\n      availableLanguages={business.branch!.supportedLanguages}\n      selectedLanguage={user.language}\n      onChange={language => {\n        if (language !== user.language) {\n          user.selectLanguage(language)\n          window.location.reload()\n        }\n      }}\n      className={className}\n      backgroundColor=\"white\"\n      arrowColor=\"#5A5A5A\"\n    />\n  )\n})\n","import { Plural, Trans } from '@lingui/react'\nimport { useObserver } from 'mobx-react-lite'\nimport React from 'react'\n\nimport { useRoot } from '../../app/useRoot'\nimport { AlertModal } from '../../common/AlertModal'\nimport { FCompanyBranchStatusFragment } from '../../graph/generated'\nimport { useShopStatus } from '../../hooks/useShopStatus'\nimport { i18n } from '../../i18n'\n\ninterface IProps {\n  status: FCompanyBranchStatusFragment\n}\n\nexport const ShopClosingTimeModal: React.FC<IProps> = ({ status }) => {\n  const { user } = useRoot()\n  const { decision, openingIn } = useShopStatus({\n    status,\n    // Do not want update here as it would be showing modal every time :)\n    updateInterval: 0,\n  })\n  return useObserver(() => (\n    <AlertModal\n      isOpen={\n        (decision === 'Closed' || decision === 'OpeningSoon') &&\n        !user.closingTimeAlertHidden\n      }\n      onClose={user.hideClosingTime}\n      headerText={i18n.t`We are closed right now`}\n    >\n      {i18n.t`We're sorry, but we do not accept new orders at this time.`}\n      {decision === 'OpeningSoon' && (\n        <Trans>\n          You can prepare your order because we are{' '}\n          <Plural\n            value={openingIn}\n            one=\"opening in 1 minute\"\n            other=\"opening in # minutes\"\n          />\n          !\n        </Trans>\n      )}\n    </AlertModal>\n  ))\n}\n","import './ShopHeaderIcons.css'\n\nimport { getLogo } from '@speedlo/assets'\nimport React from 'react'\n\nexport const ShopHeaderIcons = () => (\n  <>\n    <img\n      src={getLogo('doveze')}\n      className=\"shop__header__icons__doveze\"\n      data-testid=\"ShopHeaderIcons__AppLogo\"\n      alt=\"logo Doveze.cz\"\n    />\n    <img\n      src={getLogo('mastercard')}\n      className=\"shop__header__icons__commerce\"\n      alt=\"MasterCard\"\n    />\n    <img\n      src={getLogo('visa')}\n      className=\"shop__header__icons__commerce\"\n      data-testid=\"ShopHeaderIcons__VisaLogo\"\n      alt=\"VISA\"\n    />\n    <img\n      src={getLogo('gopay')}\n      className=\"shop__header__icons__gopay\"\n      alt=\"GoPay\"\n      data-testid=\"ShopHeaderIcons__GoPayLogo\"\n    />\n  </>\n)\n","import { DateFormat, Plural, Trans } from '@lingui/react'\nimport { isSameDay } from 'date-fns'\nimport React from 'react'\nimport styled from 'styled-components/macro'\n\nimport { useRoot } from '../../app/useRoot'\nimport { FCompanyBranchStatusFragment } from '../../graph/generated'\nimport { useShopStatus } from '../../hooks/useShopStatus'\n\ninterface IProps {\n  status: FCompanyBranchStatusFragment\n  deliveryTime: number\n  pickupTime: number\n}\n\nexport const StatusDisplayOpen = styled.span`\n  font-style: italic;\n  color: #0f9849;\n`\n\nexport const StatusDisplayClosed = styled.span`\n  font-style: italic;\n  color: #b40000;\n`\n\nexport const ShopStatusDisplay: React.FC<IProps> = ({\n  status,\n  deliveryTime,\n  pickupTime,\n}) => {\n  const { order } = useRoot()\n  const { decision, openingIn, closingIn } = useShopStatus({\n    status,\n  })\n\n  if (!status) {\n    return null\n  }\n\n  if (status.isOpen === false) {\n    if (!status.willOpenAt) {\n      return (\n        <StatusDisplayClosed>\n          <Trans>We are closed until further notice</Trans>\n        </StatusDisplayClosed>\n      )\n    }\n    const closestBH = status.businessHours[0]\n    if (closestBH && closestBH.closedNote) {\n      return <StatusDisplayClosed>{closestBH.closedNote}</StatusDisplayClosed>\n    }\n  }\n\n  switch (decision) {\n    case 'Open':\n      let timingDisplay\n      if (order.usingDeliveryOrderMethod && status.defaultDeliveryTimeEnabled) {\n        timingDisplay = (\n          <Trans>We are delivering in {deliveryTime} minutes</Trans>\n        )\n      }\n      if (order.usingPickupOrderMethod && status.defaultPickupTimeEnabled) {\n        timingDisplay = (\n          <Trans>We can prepare your order in {pickupTime} minutes</Trans>\n        )\n      }\n      return (\n        <StatusDisplayOpen data-testid=\"statusDisplayOpen\">\n          {timingDisplay}\n        </StatusDisplayOpen>\n      )\n    case 'OpeningSoon':\n      return (\n        <StatusDisplayClosed>\n          <Plural\n            value={openingIn}\n            one=\"Opening in 1 minute\"\n            other=\"Opening in # minutes\"\n          />\n        </StatusDisplayClosed>\n      )\n    case 'ClosingSoon':\n      return (\n        <StatusDisplayOpen>\n          <Plural\n            value={closingIn}\n            one=\"Closing in 1 minute\"\n            other=\"Closing in # minutes\"\n          />\n        </StatusDisplayOpen>\n      )\n    case 'Closed':\n      return (\n        <StatusDisplayClosed>\n          {status.willOpenAt ? (\n            <Trans>We will open at {formatOpenTime(status.willOpenAt)}</Trans>\n          ) : (\n            <Trans>Closed</Trans>\n          )}\n        </StatusDisplayClosed>\n      )\n  }\n}\n\nexport function formatOpenTime(openAt: string) {\n  const openAtDate = new Date(openAt)\n  const nowDate = new Date()\n  let format: Intl.DateTimeFormatOptions = {\n    hour: 'numeric',\n    minute: 'numeric',\n  }\n  if (!isSameDay(openAtDate, nowDate)) {\n    format = {\n      ...format,\n      weekday: 'long',\n    }\n  }\n  return <DateFormat value={openAtDate} format={format} />\n}\n","import { Trans } from '@lingui/macro'\nimport React from 'react'\nimport { Button } from 'reactstrap'\nimport styled from 'styled-components/macro'\n\nimport { PrimaryRoutedButton } from '../../common/Buttons'\nimport { Desktop, Mobile } from '../../common/Responsive'\nimport { QOrderFinishQuery } from '../../graph/generated'\nimport { i18n } from '../../i18n'\n\ninterface IProps {\n  finish: QOrderFinishQuery\n}\nconst CenteredButtonContainer = styled.div`\n  text-align: center;\n`\n\nexport const FinishViewFooter: React.FC<IProps> = ({\n  finish: { androidApp, iosApp },\n}) => (\n  <>\n    <Desktop>\n      {(androidApp || iosApp) && (\n        <div className=\"finish__view__apps__propagation\">\n          <div className=\"finish__view__apps__propagation__header\">\n            <Trans>What about mobile app?</Trans>\n          </div>\n          <div className=\"finish__view__apps__propagation__description\">\n            <Trans>\n              We have prepared mobile app, so you could order from anywhere!\n            </Trans>\n          </div>\n\n          {androidApp && (\n            <a href={androidApp.url}>\n              <Button\n                className=\"finish__view__apps__propagation__button\"\n                color=\"secondary\"\n              >\n                Google Play\n              </Button>\n            </a>\n          )}\n\n          {iosApp && (\n            <a href={iosApp.url}>\n              <Button\n                className=\"finish__view__apps__propagation__button\"\n                color=\"secondary\"\n              >\n                App Store\n              </Button>\n            </a>\n          )}\n        </div>\n      )}\n      <CenteredButtonContainer>\n        <PrimaryRoutedButton\n          to=\"/\"\n          className=\"finish__view__submit__line__button\"\n          data-testid=\"finishViewFooterBackButton\"\n        >\n          {i18n.t`Back to home page`.toLocaleUpperCase()}\n        </PrimaryRoutedButton>\n      </CenteredButtonContainer>\n    </Desktop>\n\n    <Mobile>\n      <div\n        className=\"finish__view__submit__line\"\n        style={{ textAlign: 'center' }}\n      >\n        <div className=\"finish__view__submit__line__strip\" />\n        <PrimaryRoutedButton\n          to=\"/\"\n          className=\"finish__view__submit__line__button\"\n          data-testid=\"finishViewFooterBackButton\"\n        >\n          {i18n.t`Back to home page`.toLocaleUpperCase()}\n        </PrimaryRoutedButton>\n      </div>\n    </Mobile>\n  </>\n)\n","import React from 'react'\nimport { Redirect } from 'react-router-dom'\n\nimport { useRoot } from '../../app/useRoot'\nimport Pacman from '../../common/Pacman'\nimport { QOrderFinishQuery, useQOrderFinish } from '../../graph/generated'\n\ninterface IProps {\n  render(result: QOrderFinishQuery): ReactNode\n}\n\nexport const FinishViewLoader: React.FC<IProps> = ({ render }) => {\n  const { order } = useRoot()\n  if (!order.hasOrder) {\n    return <Redirect to=\"/\" />\n  }\n\n  const { data, loading } = useQOrderFinish({\n    branchId: order.branchId!,\n    orderId: order.orderId!,\n  })\n\n  if (loading) {\n    return <Pacman />\n  }\n\n  return render(data)\n}\n","import { Trans } from '@lingui/macro'\nimport { RM } from '@speedlo/tools'\nimport React from 'react'\nimport styled from 'styled-components/macro'\n\nimport {\n  FOrderFinishedFragment,\n  FOrderFinishedItems,\n  FOrderFinishedOrderPayments,\n  PaymentTypeEnum,\n} from '../../graph/generated'\nimport { i18n } from '../../i18n'\n\ninterface IProps {\n  order: FOrderFinishedFragment\n}\n\nconst HeaderThemed = styled.div`\n  background-color: ${({ theme }) => theme.primary};\n`\n\nconst PriceThemed = styled.div`\n  background-color: ${({ theme }) => theme.primary};\n`\n\nconst PriceCornerThemed = styled.div`\n  border-top-color: ${({ theme }) => theme.primary} !important;\n`\n\nexport const FinishViewOrder: React.FC<IProps> = ({ order }) => (\n  <>\n    <HeaderThemed className=\"finish__view__header\">\n      <div className=\"finish__view__header__inner\">\n        <span className=\"flaticon-transport-1 finish__view__header__icon\" />\n        <h3>\n          <Trans>It's done! Thank you :-)</Trans>\n        </h3>\n      </div>\n    </HeaderThemed>\n    <h4>\n      <Trans>Your order was successfully accepted!</Trans>{' '}\n      {getPaymentInfo(order)}\n    </h4>\n    <div className=\"finish__view__items\">\n      <div className=\"finish__view__items__look__to\">\n        <Trans>You can look forward to:</Trans>\n      </div>\n      {order.items.map(item => (\n        <OrderItem key={item.id} {...item} />\n      ))}\n      <PriceCornerThemed className=\"finish__view__items__price__corner\" />\n      <PriceThemed className=\"finish__view__items__price\">\n        {getPaymentPrice(order)} <b>{order.totalSum.formattedValue}</b>\n      </PriceThemed>\n    </div>\n  </>\n)\n\nconst hasMethod = (paymentType: PaymentTypeEnum) => (\n  payment: FOrderFinishedOrderPayments,\n) => payment.paymentMethod.paymentType.enum === paymentType\n\nfunction getPaymentInfo({ orderPayments }: FOrderFinishedFragment) {\n  if (orderPayments.some(hasMethod(PaymentTypeEnum.Cash))) {\n    return i18n.t`You will pay at pickup.`\n  }\n  if (orderPayments.some(hasMethod(PaymentTypeEnum.Credit))) {\n    return i18n.t`You have payed.`\n  }\n  return null\n}\n\nfunction getPaymentPrice({ orderPayments, totalSum }: FOrderFinishedFragment) {\n  if (orderPayments.some(hasMethod(PaymentTypeEnum.Cash))) {\n    return i18n.t`Total cost to be payed:`\n  }\n  if (orderPayments.some(hasMethod(PaymentTypeEnum.Credit))) {\n    return i18n.t`Total cost payed:`\n  }\n  return null\n}\n\nfunction OrderItem({ recipe, sideDishes }: FOrderFinishedItems) {\n  return (\n    <div>\n      <b>{recipe.nameLabel}</b>\n      {sideDishes.length\n        ? ` + ${sideDishes.map(RM.path(['recipe', 'nameLabel'])).join(',')}`\n        : null}\n    </div>\n  )\n}\n","import { Trans } from '@lingui/macro'\nimport React from 'react'\nimport styled from 'styled-components/macro'\n\nimport { QOrderFinishCompanyBranch } from '../../graph/generated'\n\ninterface IProps {\n  branch: QOrderFinishCompanyBranch\n}\n\nconst PhoneNumberLinkStyled = styled.a`\n  color: inherit;\n  text-decoration: none;\n  &:hover {\n    text-decoration: underline;\n  }\n`\n\nexport const FinishViewSupport: React.FC<IProps> = ({ branch }) => (\n  <div className=\"finish__view__support\">\n    <h4>\n      <Trans>Any question? Do you have a problem? Call:</Trans>\n    </h4>\n    <span className=\"flaticon-technology finish__view__support__icon\" />\n    <span className=\"finish__view__support__phone\">\n      <PhoneNumberLinkStyled href={`tel:${branch.phone}`}>\n        {branch.phone}\n      </PhoneNumberLinkStyled>\n    </span>\n  </div>\n)\n","import './OrderMethod.css'\n\nimport { RM } from '@speedlo/tools'\nimport { useObserver } from 'mobx-react-lite'\nimport React from 'react'\n\nimport { useRoot } from '../../app/useRoot'\nimport { SelectButtonThemed } from '../../common/Buttons'\nimport { DeliveryTypeEnum } from '../../graph/generated'\nimport { i18n } from '../../i18n'\nimport { TOrderModel } from '../../models/OrderModel'\n\ninterface IProps {\n  onChange?(order: TOrderModel): void\n}\n\ninterface IButtonProps {\n  orderModel: TOrderModel\n  orderMethod: DeliveryTypeEnum\n  onChange(order: TOrderModel): void\n  onPrefetch?(): void\n}\n\nconst OrderMethodButton: React.FC<IButtonProps> = ({\n  orderModel,\n  orderMethod,\n  onChange,\n  onPrefetch,\n  children,\n}) => {\n  return useObserver(() => (\n    <SelectButtonThemed\n      selected={orderModel.orderMethod === orderMethod}\n      onMouseEnter={onPrefetch}\n      onClick={() => {\n        orderModel.useOrderMethod(orderMethod)\n        onChange(orderModel)\n      }}\n      data-testid={`orderMethod-${orderMethod}`}\n      data-testselected={orderModel.orderMethod === orderMethod}\n    >\n      {children}\n    </SelectButtonThemed>\n  ))\n}\n\nexport const OrderMethod: React.FC<IProps> = ({ onChange }) => {\n  const { order } = useRoot()\n  return (\n    <div className=\"order__method\">\n      <OrderMethodButton\n        orderModel={order}\n        orderMethod={DeliveryTypeEnum.Messenger}\n        onChange={onChange || RM.identity}\n      >\n        <span className=\"flaticon-transport\" />\n        {i18n.t`I want to deliver`.toLocaleUpperCase()}\n      </OrderMethodButton>\n      <OrderMethodButton\n        orderModel={order}\n        orderMethod={DeliveryTypeEnum.Pickup}\n        onChange={onChange || RM.identity}\n        onPrefetch={order.prefetchPickup}\n      >\n        <span className=\"flaticon-restaurant\" />\n        {i18n.t`I'll pick up`.toLocaleUpperCase()}\n      </OrderMethodButton>\n    </div>\n  )\n}\n","import './ButtonStripe.css'\n\nimport React from 'react'\n\nconst ButtonStripe: React.FC = ({ children }) => (\n  <div className=\"button__stripe\">\n    <div className=\"button__stripe__bar\" />\n    <div className=\"button__stripe__button\">{children}</div>\n  </div>\n)\n\nexport default ButtonStripe\n","import { useApolloClient } from '@speedlo/graphql'\n\nimport { useRoot } from '../app/useRoot'\nimport {\n  FCartGoodsItems,\n  FCartPresencePresence,\n  FRecipeFragment,\n  FRecipeFragmentDoc,\n  MAddToCartMutation,\n  MAddToCartVariables,\n  QCartDocument,\n  QCartQuery,\n  QCartVariables,\n  useMAddToCart,\n} from '../graph/generated'\n\nlet counter = 1\n\nconst NO_SIDEDISHES = []\n\nexport function useAddToCart() {\n  const { order, cart: cartModel } = useRoot()\n  const client = useApolloClient()\n\n  const [addToCart] = useMAddToCart({\n    context: { noBatch: true },\n  })\n\n  const executeAddToCart = (\n    recipeId: ID,\n    sideDishes: RoA<ID> = NO_SIDEDISHES,\n  ) => {\n    const variables: MAddToCartVariables = {\n      orderId: order.orderId!,\n      recipeId,\n      sideDishes,\n      withGoods: cartModel.withGoods,\n      withPresence: cartModel.withPresence,\n    }\n    return addToCart(variables, {\n      optimisticResponse: makeOptimisticResponse(variables),\n    })\n  }\n\n  return executeAddToCart\n\n  function makeOptimisticResponse(\n    variables: MAddToCartVariables,\n  ): MAddToCartMutation | undefined {\n    const current = client.readQuery<QCartQuery, QCartVariables>(\n      {\n        query: QCartDocument,\n        variables: {\n          orderId: variables.orderId,\n          withGoods: cartModel.withGoods,\n          withPresence: cartModel.withPresence,\n        },\n      },\n      true,\n    )\n    if (!current) {\n      return undefined\n    }\n    const id = `-${counter++}`\n    const addPresence = (): RoA<FCartPresencePresence> => {\n      if (!cartModel.withPresence) {\n        return current.order.presence\n      }\n      return [\n        ...current.order.presence,\n        {\n          __typename: 'OrderRecipe',\n          id,\n          recipe: {\n            __typename: 'Recipe',\n            id: variables.recipeId,\n          },\n        },\n      ]\n    }\n    const addItem = (): RoA<FCartGoodsItems> => {\n      if (!cartModel.withGoods) {\n        return current.order.items\n      }\n      const recipe = client.readFragment<FRecipeFragment>(\n        {\n          id: `Recipe-${variables.recipeId}`,\n          fragment: FRecipeFragmentDoc,\n          fragmentName: 'FRecipe',\n        },\n        true,\n      )\n      if (!recipe) {\n        return current.order.items\n      }\n      return [\n        ...current.order.items,\n        {\n          __typename: 'OrderRecipe',\n          automatic: false,\n          id,\n          price: {\n            __typename: 'PriceConverted',\n            formattedValue: '???',\n            value: -1,\n          },\n          recipe,\n          sideDishes: [],\n        },\n      ]\n    }\n    return {\n      __typename: 'Mutation',\n      add: {\n        ...current.order,\n        countWares: current.order.countWares + 1,\n        totalSum: {\n          ...current.order.totalSum,\n          value: -1,\n        },\n        items: addItem(),\n        presence: addPresence(),\n      },\n    }\n  }\n}\n","import React from 'react'\nimport { Button, ButtonProps } from 'reactstrap'\nimport styled from 'styled-components/macro'\n\ninterface IProps extends ButtonProps {\n  isSelected: boolean\n  width: string\n}\n\nconst PickerButtonStyled = styled(({ isSelected, width, ...props }) => (\n  <Button {...props} />\n))`\n  border-radius: 0.6rem;\n  margin: 0.5rem;\n  background-color: ${props =>\n    props.isSelected ? props.theme.tertiary : 'transparent'} !important;\n  color: ${props =>\n    props.isSelected ? props.theme.tertiaryText : 'initial'} !important;\n  &:hover {\n    border-color: ${({ theme }) => theme.tertiaryHover} !important;\n  }\n  width: ${props => props.width};\n  @media (max-width: 370px) {\n    width: 100%;\n  }\n  &.btn-outline-secondary {\n    color: #2e2e2e;\n    border-color: #d4d4d4;\n  }\n  &.btn-outline-secondary.active {\n    color: white;\n  }\n`\n\nexport const PickerButton: React.FC<IProps> = ({\n  isSelected,\n  onSelect,\n  children,\n  ...buttonProps\n}) => {\n  return (\n    <PickerButtonStyled isSelected={isSelected} {...buttonProps}>\n      {children}\n    </PickerButtonStyled>\n  )\n}\n","import './OrderSubmitLine.css'\n\nimport { cn } from '@speedlo/ui'\nimport React from 'react'\n\nimport { PrimaryButton } from '../../common/Buttons'\n\ninterface IProps {\n  onClick(): void\n  canSubmit: boolean\n  isSubmitting: boolean\n  children: ReactNode\n}\n\nexport const OrderSubmitLine: React.FC<IProps> = ({\n  onClick,\n  canSubmit = false,\n  isSubmitting,\n  children,\n}) => {\n  const className = cn(\n    'order__form__submit__line__button',\n    'animated',\n    'infinite',\n    { heartBeat: isSubmitting },\n  )\n  return (\n    <div className=\"order__form__submit__line\">\n      <div className=\"order__form__submit__line__strip\" />\n      <PrimaryButton\n        className={className}\n        color=\"primary\"\n        size=\"md\"\n        onClick={onClick}\n        disabled={!canSubmit || isSubmitting}\n        data-testid=\"orderSubmitButton\"\n      >\n        {children}\n      </PrimaryButton>\n    </div>\n  )\n}\n","import { Trans } from '@lingui/macro'\nimport { observer } from 'mobx-react-lite'\nimport React from 'react'\nimport { Alert, Button } from 'reactstrap'\nimport styled from 'styled-components/macro'\n\nimport { useRoot } from '../../app/useRoot'\nimport { mediaDesktop, mediaMobile } from '../../common/Responsive'\nimport { useQOrderForm } from '../../graph/generated'\n\ninterface IProps {}\n\nconst NoticeButton = styled(Button)`\n  font-size: 0.9rem;\n  margin: 0.2rem 1rem;\n  padding: 0.5em 1rem;\n`\n\nconst StorageNotice = styled(Alert)`\n  width: 100%;\n  z-index: 5;\n  ${mediaDesktop`\n    font-size: 0.9rem;\n    position: sticky;\n    bottom: 0;\n  `};\n  ${mediaMobile`\n    position: fixed;\n    top: 5rem;\n    font-size: 0.8rem;\n    `};\n  padding: 0.5rem 1rem;\n  background-color: #d4eddadc;\n`\n\nexport const OrderFormStorageNotice: React.FC<IProps> = observer(() => {\n  const { order: orderModel, user } = useRoot()\n  const { data, loading } = useQOrderForm(\n    {\n      orderId: orderModel.orderId!,\n    },\n    {\n      skip: !orderModel.hasOrder || user.rememberForm !== null,\n    },\n  )\n\n  if (loading) {\n    return null\n  }\n\n  if (data.order.countWares === 0 || user.rememberForm !== null) {\n    return null\n  }\n\n  return (\n    <StorageNotice data-testid=\"orderFormStorageNotice\">\n      <p>\n        <Trans>\n          This app is using secure storage for keeping filled form data. It's\n          not cookies, these are stored in your browser only.\n        </Trans>\n      </p>\n\n      <NoticeButton\n        color=\"success\"\n        size=\"sm\"\n        onClick={user.setFormRememberYes}\n        data-testid=\"orderFormStorageNotice__Yes\"\n      >\n        <Trans>Always remember</Trans>\n      </NoticeButton>\n      <NoticeButton\n        color=\"secondary\"\n        size=\"sm\"\n        onClick={user.setFormRememberNo}\n        data-testid=\"orderFormStorageNotice__No\"\n      >\n        <Trans>Do not store</Trans>\n      </NoticeButton>\n    </StorageNotice>\n  )\n})\n","import '../../common/Modal.css'\n\nimport { Trans } from '@lingui/macro'\nimport { useObserver } from 'mobx-react-lite'\nimport React from 'react'\nimport { Button, Container, Modal, ModalBody, ModalHeader } from 'reactstrap'\n\nimport { useRoot } from '../../app/useRoot'\n\nexport const OrderErrorModal: React.FC = () => {\n  const { order } = useRoot()\n  return useObserver(() => (\n    <Modal\n      isOpen={order.hasErrors}\n      toggle={order.clearErrors}\n      className=\"modal__container\"\n    >\n      <ModalHeader\n        toggle={order.clearErrors}\n        tag={Container}\n        className=\"modal__header\"\n      >\n        <span>\n          <Trans>Order can not be completed</Trans>\n        </span>\n      </ModalHeader>\n      <ModalBody className=\"modal__body\">\n        <div className=\"modal__body__content\">\n          {order.hasErrors &&\n            order.submitErrors!.map((error, idx) => (\n              <div key={idx}>{error}</div>\n            ))}\n        </div>\n        <div className=\"modal__body__button__line\">\n          <div className=\"modal__body__button__strip\" />\n          <Button\n            className=\"modal__body__button\"\n            color=\"primary\"\n            onClick={order.clearErrors}\n          >\n            <Trans>I understand</Trans>\n          </Button>\n          />\n        </div>\n      </ModalBody>\n    </Modal>\n  ))\n}\n","import { fakerCZ } from '@speedlo/testing/dist/faker'\nimport React from 'react'\n\nimport { SecondaryButton } from '../../common/Buttons'\nimport { PaymentGateEnum } from '../../graph/generated'\nimport { useOrderModel } from '../../hooks/useOrderModel'\nimport { IOrderFormState } from './OrderFormSetup'\nimport { MAX_LENGTH } from './OrderNoteInput'\n\ninterface IProps {\n  onFill(values: IOrderFormState): void\n}\n\nexport const OrderFormAutoFill: React.FC<IProps> = ({ onFill }) => {\n  const orderModel = useOrderModel()\n  if (process.env.REACT_APP_STAGE === 'prod') {\n    return null\n  }\n  return (\n    <SecondaryButton\n      style={{ marginBottom: '0.5rem' }}\n      onClick={() => {\n        onFill({\n          firstname: fakerCZ.name.firstName(),\n          lastname: fakerCZ.name.lastName(),\n          email: fakerCZ.internet.email(),\n          phone: fakerCZ.phone.phoneNumberFormat(0).replace(/\\s/g, ''),\n          phonePrefix: '+420',\n          note: fakerCZ.lorem.sentence().slice(0, MAX_LENGTH - 1),\n          tips: '',\n          payment: orderModel.payment as PaymentGateEnum,\n          agreements: [],\n        })\n      }}\n    >\n      Autofill form [DEV ONLY]\n    </SecondaryButton>\n  )\n}\n","import { Plural, Trans } from '@lingui/react'\nimport React from 'react'\nimport { Field } from 'react-form'\nimport { FormFeedback, FormGroup, FormText, Input } from 'reactstrap'\n\nimport { i18n } from '../../i18n'\n\nexport const MAX_LENGTH = 50\nconst isTooLong = value => value && value.trim().length > MAX_LENGTH\n\nconst OrderNoteInputValidator = value =>\n  isTooLong(value) ? i18n.t`Note is too long` : null\n\nexport const OrderNoteInput: React.FC = () => {\n  const ingredientsDescription = i18n.t`eg. ingredients change, company...`\n  return (\n    <Field\n      field=\"note\"\n      validate={OrderNoteInputValidator}\n      render={fieldApi => (\n        <FormGroup>\n          <Input\n            type=\"textarea\"\n            placeholder={i18n.t`Note`}\n            title={ingredientsDescription}\n            value={fieldApi.value}\n            onChange={e => fieldApi.setValue(e.target.value)}\n            onBlur={() => fieldApi.setTouched(true)}\n            valid={!fieldApi.error}\n            invalid={Boolean(fieldApi.error)}\n            data-testid=\"orderNoteInput\"\n          />\n          <FormText>{ingredientsDescription}</FormText>\n          {isTooLong(fieldApi.value) ? (\n            <FormFeedback>\n              <Trans>\n                Maximum length is{' '}\n                <Plural value={MAX_LENGTH} other=\"# characters\" />. Typed{' '}\n                <Plural\n                  value={fieldApi.value.length}\n                  one=\"# char\"\n                  other=\"# chars\"\n                />\n              </Trans>\n            </FormFeedback>\n          ) : null}\n        </FormGroup>\n      )}\n    />\n  )\n}\n","import { autorun } from 'mobx'\nimport { useObserver } from 'mobx-react-lite'\nimport React from 'react'\nimport { Field } from 'react-form'\nimport FormGroup from 'reactstrap/lib/FormGroup'\nimport Input from 'reactstrap/lib/Input'\nimport styled from 'styled-components/macro'\n\nimport { useRoot } from '../../app/useRoot'\nimport { useMOrderTipUpdate } from '../../graph/generated'\nimport { i18n } from '../../i18n'\n\nconst TipContainer = styled.div`\n  margin-top: 0.8rem;\n`\n\nexport const OrderFormTipInput = () => {\n  const { order, cart } = useRoot()\n  const [updateTip] = useMOrderTipUpdate()\n\n  React.useEffect(\n    () =>\n      autorun(() => {\n        const tips = order.usingPaymentMethodWithTips ? Number(order.tips) : 0\n        updateTip({\n          tips,\n          orderId: order.orderId!,\n          withGoods: cart.withGoods,\n        })\n      }),\n    [],\n  )\n\n  return useObserver(() => {\n    if (!order.usingPaymentMethodWithTips) {\n      return null\n    }\n    return (\n      <TipContainer>\n        <FormGroup>\n          <Field\n            field=\"tips\"\n            render={fieldApi => (\n              <Input\n                type=\"select\"\n                value={fieldApi.value}\n                onChange={e => {\n                  const { value } = e.target\n                  fieldApi.setValue(value)\n                  order.setTips(value)\n                }}\n                onBlur={() => {\n                  fieldApi.setTouched(true)\n                }}\n                data-testid=\"orderTipsSelect\"\n              >\n                <option value=\"\">{i18n.t`Without tips`}</option>\n                <option value=\"5\">{i18n.t`Tips 5%`}</option>\n                <option value=\"10\">{i18n.t`Tips 10%`}</option>\n                <option value=\"15\">{i18n.t`Tips 15%`}</option>\n                <option value=\"20\">{i18n.t`Tips 20%`}</option>\n                <option value=\"25\">{i18n.t`Tips 25%`}</option>\n              </Input>\n            )}\n          />\n        </FormGroup>\n      </TipContainer>\n    )\n  })\n}\n","import React from 'react'\nimport { Field } from 'react-form'\n\nimport { useRoot } from '../../app/useRoot'\nimport { SelectButtonThemed } from '../../common/Buttons'\nimport { PaymentGateEnum } from '../../graph/types'\n\nexport interface IPaymentButtonProps {\n  method: PaymentGateEnum\n  disabled?: boolean\n}\n\nexport const OrderPaymentButton: React.FC<IPaymentButtonProps> = ({\n  children,\n  disabled,\n  method,\n}) => {\n  const { order: orderModel } = useRoot()\n  return (\n    <Field\n      field=\"payment\"\n      render={fieldApi => (\n        <SelectButtonThemed\n          disabled={disabled}\n          selected={fieldApi.value === method}\n          onClick={() => {\n            fieldApi.setValue(method)\n            orderModel.setPaymentMethod(method)\n          }}\n          data-testid={`orderPaymentMethod-${method}`}\n        >\n          <Checkmark show={fieldApi.value === method} />\n          {children}\n        </SelectButtonThemed>\n      )}\n    />\n  )\n}\n\nfunction Checkmark({ show }: { show: boolean }) {\n  return show ? (\n    <span className=\"flaticon-mark order__payment__method__button__checked\" />\n  ) : (\n    <div className=\"order__payment__method__button__unchecked\" />\n  )\n}\n","import { Trans } from '@lingui/macro'\nimport { useObserver } from 'mobx-react-lite'\nimport React from 'react'\nimport styled from 'styled-components/macro'\n\nimport { useRoot } from '../../app/useRoot'\nimport { AlertModal } from '../../common/AlertModal'\nimport Pacman from '../../common/Pacman'\n\nconst TextPadding = styled.div`\n  padding-bottom: 2rem;\n`\n\nexport const OrderGoPayModal: React.FC = () => {\n  const { order: orderModel } = useRoot()\n  return useObserver(() => (\n    <AlertModal isOpen={orderModel.isGoPayChecking} headerText=\"GoPay platba\">\n      <TextPadding>\n        <Trans>Checking your GoPay payment, please wait...</Trans>\n      </TextPadding>\n      <Pacman noMargin={true} />\n    </AlertModal>\n  ))\n}\n","import { t } from '@lingui/macro'\nimport React, { CSSProperties } from 'react'\n\nimport { i18n } from '../../i18n'\n\ninterface IProps {\n  minCount: number\n  maxCount: number\n  isValid: boolean\n}\n\nexport const CategoryValidationMessage: React.FC<IProps> = ({\n  minCount,\n  maxCount,\n  isValid,\n}) => {\n  let message = ''\n  if (minCount === 0) {\n    if (maxCount > 0) {\n      message = i18n._(t`maximum ${maxCount}`)\n    } else {\n      return null\n    }\n  } else if (maxCount === 0) {\n    message = i18n._(t`minimum ${minCount}`)\n  } else if (minCount === maxCount) {\n    const count = minCount\n    message = i18n._(t`only ${count}`)\n  } else {\n    message = i18n._(t`minimum ${minCount} and maximum ${maxCount}`)\n  }\n  const style: CSSProperties = {}\n  if (!isValid) {\n    style.color = 'red'\n  }\n  return (\n    <span style={style}>\n      {'('}\n      {message}\n      {')'}\n    </span>\n  )\n}\n","import React from 'react'\nimport styled from 'styled-components'\n\ninterface IProps {\n  onClick(): void\n}\n\nconst StyledSidedishRemoveButton = styled.div`\n  position: absolute;\n  left: -0.6rem;\n  top: -0.4rem;\n  width: 2rem;\n  height: 2rem;\n  border-radius: 1rem;\n  background: ${({ theme }) => theme.primary};\n\n  &:hover {\n    background: ${({ theme }) => theme.primaryHover} !important;\n  }\n  &:active {\n    background: ${({ theme }) => theme.primary} !important;\n  }\n  & .rectangle {\n    width: 45%;\n    position: absolute;\n    top: 45%;\n    left: 30%;\n    height: 4px;\n    background: white;\n  }\n`\nexport const SidedishRemoveButton: React.FC<IProps> = ({\n  onClick,\n  ...props\n}) => {\n  return (\n    <StyledSidedishRemoveButton\n      onClick={onClick}\n      className=\"animated bounceIn\"\n      data-testid=\"SidedishRemoveButton\"\n      {...props}\n    >\n      <div className=\"rectangle\" />\n    </StyledSidedishRemoveButton>\n  )\n}\n","import React from 'react'\nimport { ButtonProps } from 'reactstrap'\nimport styled from 'styled-components/macro'\n\nimport { PickerButton } from '../../common/PickerButton'\nimport { FRecipeDetailSideDishes } from '../../graph/generated'\nimport { SidedishRemoveButton } from './SidedishRemoveButton'\n\ninterface IProps extends ButtonProps {\n  sidedish: FRecipeDetailSideDishes\n  count: number\n  isSelected: boolean\n  canBeSelected: boolean\n  canBeRemoved: boolean\n  onAdd(): void\n  onRemove(): void\n}\n\nconst StyledSidedishCheckbox = styled.div`\n  display: inline-block;\n  position: relative;\n\n  & .name {\n    float: left;\n    text-align: left;\n    white-space: normal;\n    max-width: 13rem;\n  }\n\n  & .price {\n    font-weight: bold;\n    float: right;\n  }\n\n  & .count {\n    display: inline-block;\n    margin-left: 0.5rem;\n  }\n`\n\nexport const SidedishCheckbox = React.memo<IProps>(\n  ({\n    sidedish,\n    count,\n    canBeSelected,\n    canBeRemoved,\n    className,\n    onAdd,\n    onRemove,\n    ...buttonProps\n  }) => {\n    const onClick = React.useCallback(() => {\n      if (canBeSelected) {\n        onAdd()\n      }\n    }, [canBeSelected, onAdd])\n    return (\n      <StyledSidedishCheckbox className={className}>\n        <PickerButton\n          onClick={onClick}\n          disabled={!canBeSelected}\n          size=\"xs\"\n          outline={true}\n          width=\"17.5rem\"\n          data-testid={`sidedishCheckbox__${sidedish.id}`}\n          {...buttonProps}\n        >\n          <div className=\"name\">\n            {sidedish.nameLabel}\n            <span key={count} className=\"animated heartBeat count\">\n              {count > 1 && `${count}x`}\n            </span>\n          </div>\n          <div className=\"price\">{sidedish.price.formattedValue}</div>\n        </PickerButton>\n        {canBeRemoved && <SidedishRemoveButton onClick={onRemove} />}\n      </StyledSidedishCheckbox>\n    )\n  },\n)\n","import { useSideDishValidator } from '@speedlo/cart'\nimport React, { Fragment } from 'react'\nimport styled from 'styled-components'\n\nimport { FRecipeDetailFragment } from '../../graph/generated'\nimport { CategoryValidationMessage } from './CategoryValidationMessage'\nimport { SidedishCheckbox } from './SidedishCheckbox'\n\ninterface IProps {\n  recipe: FRecipeDetailFragment\n  selection: ReadonlyArray<ID>\n  onAdd(item: ID): void\n  onRemove(item: ID): void\n}\n\nconst StyledSidedishPicker = styled.div`\n  margin-top: 1rem;\n\n  & .sidedish__picker__checkbox {\n    @media (max-width: 370px) {\n      width: 100%;\n    }\n  }\n\n  & .sidedish__picker__category {\n    font-size: 1rem;\n    font-weight: bold;\n    text-align: left;\n    margin: 0 0 0.2rem 0.2rem;\n  }\n`\n\nexport const SidedishPicker: React.FC<IProps> = ({\n  recipe,\n  selection,\n  onAdd,\n  onRemove,\n}) => {\n  const { canBeSelected, isCategoryValid } = useSideDishValidator(\n    recipe.categories,\n    selection,\n  )\n\n  return (\n    <StyledSidedishPicker className=\"food__sidedish__picker\">\n      {recipe.categories.map(category => (\n        <Fragment key={category.id}>\n          <div className=\"sidedish__picker__category\">\n            {category.nameLabel}{' '}\n            <CategoryValidationMessage\n              minCount={category.minCount}\n              maxCount={category.maxCount}\n              isValid={isCategoryValid(category)}\n            />\n          </div>\n          {category.sideDishes.map(sidedish => (\n            <SidedishCheckbox\n              key={`${sidedish.id}-${category.id}`}\n              sidedish={sidedish}\n              count={selection.filter(i => i === sidedish.id).length}\n              isSelected={selection.includes(sidedish.id)}\n              canBeRemoved={selection.includes(sidedish.id)}\n              canBeSelected={canBeSelected(category, sidedish)}\n              onAdd={() => onAdd(sidedish.id)}\n              onRemove={() => onRemove(sidedish.id)}\n              className=\"sidedish__picker__checkbox\"\n            />\n          ))}\n        </Fragment>\n      ))}\n    </StyledSidedishPicker>\n  )\n}\n","import { useSideDishValidator } from '@speedlo/cart'\nimport { cn } from '@speedlo/ui'\nimport React from 'react'\n\nimport { PrimaryButton } from '../../common/Buttons'\nimport { FRecipeDetailFragment } from '../../graph/generated'\nimport { i18n } from '../../i18n'\n\ninterface IProps {\n  selection: ReadonlyArray<ID>\n  recipe: Maybe<FRecipeDetailFragment>\n  onConfirm(): Promise<boolean>\n}\n\nexport const CartOrderButton = React.memo<IProps>(\n  ({ selection, recipe, onConfirm }) => {\n    const [isConfirming, setConfirming] = React.useState(false)\n    const { isCategoryValid } = useSideDishValidator(\n      recipe ? recipe.categories : [],\n      selection,\n    )\n\n    return (\n      <PrimaryButton\n        className={cn('modal__body__button', 'animated', {\n          heartBeat: isConfirming,\n        })}\n        disabled={\n          isConfirming || !recipe || !recipe.categories.every(isCategoryValid)\n        }\n        data-testid=\"CartOrderButton\"\n        onClick={() => {\n          setConfirming(true)\n          onConfirm().catch(() => {\n            setConfirming(false)\n          })\n        }}\n      >\n        {i18n\n          .plural({\n            value: selection.length,\n            0: 'Order without sidedish',\n            one: 'Order with this sidedish',\n            other: 'Order with # sidedishes',\n          })\n          .toLocaleUpperCase()}\n      </PrimaryButton>\n    )\n  },\n)\n","import '../../common/Modal.css'\n\nimport { Trans } from '@lingui/macro'\nimport { RM } from '@speedlo/tools'\nimport React from 'react'\nimport { Container, Modal, ModalBody, ModalHeader } from 'reactstrap'\n\nimport Pacman from '../../common/Pacman'\nimport { FRecipeDetailFragment } from '../../graph/generated'\nimport { SidedishPicker } from '../sidedishPicker/SidedishPicker'\nimport { CartOrderButton } from './CartOrderButton'\n\ninterface IProps {\n  recipe: Maybe<FRecipeDetailFragment>\n  isLoading: boolean\n  initialSideDishes?: ID[]\n  onConfirm(selection: ID[]): Promise<boolean>\n  onClose(): void\n}\n\nconst EMPTY_SELECTION = []\n\nexport const CartModal: React.FC<IProps> = ({\n  recipe,\n  isLoading,\n  initialSideDishes = EMPTY_SELECTION,\n  onConfirm,\n  onClose,\n}) => {\n  const [selection, updateSelection] = React.useState([] as string[])\n\n  React.useEffect(() => {\n    updateSelection(initialSideDishes)\n  }, [initialSideDishes])\n\n  const onCloseModal = React.useCallback(() => {\n    updateSelection([])\n    onClose()\n  }, [onClose])\n\n  const onConfirmAndClose = async () => {\n    if (await onConfirm(selection)) {\n      onCloseModal()\n      return true\n    }\n    return false\n  }\n\n  const onAddSidedish = (sidedishId: ID) => {\n    updateSelection(sel => {\n      return RM.append(sidedishId, sel)\n    })\n  }\n\n  const onRemoveSidedish = (sidedishId: ID) => {\n    updateSelection(sel => {\n      return RM.remove(RM.indexOf(sidedishId, sel), 1, sel)\n    })\n  }\n\n  const renderBody = () => {\n    if (isLoading) {\n      return <Pacman />\n    }\n    if (!recipe) {\n      return (\n        <Trans>We sorry, but the item is unavailable at this moment.</Trans>\n      )\n    }\n    return (\n      <>\n        <h3 className=\"modal__body__food__name\">{recipe.nameLabel}</h3>\n        <span className=\"modal__body__food_description\">\n          {recipe.descriptionLabel}\n        </span>\n        <SidedishPicker\n          recipe={recipe}\n          selection={selection}\n          onAdd={onAddSidedish}\n          onRemove={onRemoveSidedish}\n        />\n      </>\n    )\n  }\n\n  return (\n    <Modal\n      isOpen={recipe !== null}\n      toggle={onCloseModal}\n      className=\"modal__container\"\n      autoFocus={true}\n      backdrop=\"static\"\n      fade={false}\n      data-testid=\"CartModal\"\n    >\n      <ModalHeader\n        toggle={onCloseModal}\n        tag={Container}\n        className=\"modal__header\"\n      >\n        <span>\n          <Trans>Do you want to add something?</Trans>\n        </span>\n      </ModalHeader>\n      <ModalBody className=\"modal__body\">\n        <div className=\"modal__body__content\">{renderBody()}</div>\n        <div className=\"modal__body__button__line\">\n          <div className=\"modal__body__button__strip\" />\n          <CartOrderButton\n            recipe={recipe}\n            selection={selection}\n            onConfirm={onConfirmAndClose}\n          />\n        </div>\n      </ModalBody>\n    </Modal>\n  )\n}\n","import { observer } from 'mobx-react-lite'\nimport React from 'react'\n\nimport { useQCartRecipe } from '../../graph/generated'\nimport { useAddToCart } from '../../hooks/useAddToCart'\nimport { useOrderModel } from '../../hooks/useOrderModel'\nimport { CartModal } from './CartModal'\n\ninterface IProps {\n  orderId: MaybeID\n}\n\nexport const AddToCartModal = observer<IProps>(({ orderId }) => {\n  const orderModel = useOrderModel()\n\n  const recipeId = orderModel.addToCartRecipeId\n\n  const { data, loading } = useQCartRecipe(\n    {\n      recipeId: recipeId!,\n    },\n    { skip: orderId === null || recipeId === null, fetchPolicy: 'cache-first' },\n  )\n\n  const executeAddToCart = useAddToCart()\n\n  const onConfirm = React.useCallback(\n    async sideDishes => {\n      if (orderId === null || recipeId === null) {\n        return false\n      }\n      const result = await executeAddToCart(recipeId, sideDishes)\n      return Boolean(result)\n    },\n    [orderId, recipeId],\n  )\n\n  const onClose = React.useCallback(() => {\n    orderModel.addToCart(null)\n  }, [history])\n\n  return (\n    <CartModal\n      recipe={loading ? null : data.recipe}\n      onConfirm={onConfirm}\n      onClose={onClose}\n      isLoading={loading}\n    />\n  )\n})\n","import { RM } from '@speedlo/tools'\nimport { observer } from 'mobx-react-lite'\nimport React from 'react'\n\nimport { useRoot } from '../../app/useRoot'\nimport { useMChangeCartItem, useQCartItem } from '../../graph/generated'\nimport { CartModal } from './CartModal'\n\ninterface IProps {\n  orderId: MaybeID\n}\n\nexport const ChangeCartModal = observer<IProps>(({ orderId }) => {\n  const { order: orderModel, cart: cartModel } = useRoot()\n\n  const itemId = orderModel.changeCartItemId\n\n  const { data, loading } = useQCartItem(\n    {\n      itemId: itemId!,\n    },\n    { skip: orderId === null || itemId === null },\n  )\n\n  const [changeItem] = useMChangeCartItem()\n\n  const onConfirm = React.useCallback(\n    async sideDishes => {\n      if (orderId === null || itemId === null) {\n        return false\n      }\n      const result = await changeItem({\n        itemId,\n        sideDishes,\n        orderId,\n        withGoods: cartModel.withGoods,\n      })\n      return Boolean(result)\n    },\n    [orderId, itemId],\n  )\n\n  const onClose = React.useCallback(() => {\n    orderModel.changeCartItem(null)\n  }, [history])\n\n  const sideDishesSelection = React.useMemo(\n    () =>\n      loading\n        ? undefined\n        : (data.item.sideDishes.map(RM.path(['recipe', 'id'])) as string[]),\n    [loading, data],\n  )\n\n  return (\n    <CartModal\n      recipe={loading ? null : data.item.recipe}\n      initialSideDishes={sideDishesSelection}\n      onConfirm={onConfirm}\n      onClose={onClose}\n      isLoading={loading}\n    />\n  )\n})\n","import { observer } from 'mobx-react-lite'\nimport React from 'react'\n\nimport { useOrderModel } from '../../hooks/useOrderModel'\nimport { AddToCartModal } from './AddToCartModal'\nimport { CartSystem } from './CartSystem'\nimport { ChangeCartModal } from './ChangeCartModal'\n\ninterface IProps {\n  isReadonly?: boolean\n}\n\nexport const CartView = observer<IProps>(({ isReadonly = false }) => {\n  const orderModel = useOrderModel()\n  const orderId = orderModel.orderId\n  return (\n    <>\n      <AddToCartModal orderId={orderId} />\n      <ChangeCartModal orderId={orderId} />\n      <CartSystem orderId={orderId} isReadonly={isReadonly} />\n    </>\n  )\n})\n","import './CategoryNavigator.css'\n\nimport { cn } from '@speedlo/ui'\nimport React, { useState } from 'react'\nimport Scroll from 'react-scroll'\nimport Truncate from 'react-truncate'\nimport styled from 'styled-components/macro'\n\nimport { mediaDesktop, mediaMobile } from '../../common/Responsive'\nimport { FFoodMenuCategoryFragment } from '../../graph/generated'\n\ninterface IProps {\n  categories: ReadonlyArray<FFoodMenuCategoryFragment>\n}\n\nconst StyledCategoryNavigator = styled.div`\n  background-color: #d4d4d4;\n  border-top-left-radius: 0.6rem;\n  padding: 0.7rem 0.5rem 0 0.2rem;\n  position: sticky;\n  top: 0;\n  z-index: 1;\n  user-select: none;\n  display: flex;\n  ${mediaDesktop`\n    flex-wrap: wrap;\n  `}\n  ${mediaMobile`\n    flex-wrap: nowrap;\n    overflow-x: auto;\n    overflow-y: hidden;\n    box-shadow: inset -15px -5px 15px -14px rgba(0, 0, 0, 0.6);\n    margin: 0;\n    border-top-left-radius: 0;\n    background-color: #f3f3f3;\n    opacity: 0.94;\n  `}\n`\n\nconst CategoryNavigator: React.FC<IProps> = ({ categories }) => {\n  const [activeCategoryIndex, setActiveCategoryIndex] = useState(0)\n  return (\n    <StyledCategoryNavigator data-testid=\"CategoryNavigator\">\n      {categories.length === 0\n        ? null\n        : categories.map((category, idx) => (\n            <Scroll.Link\n              to={category.nameLabel}\n              key={category.id}\n              className={cn('category__navigator__scroll__link', {\n                active: activeCategoryIndex === idx,\n              })}\n              onSetActive={() => setActiveCategoryIndex(idx)}\n              offset={-168}\n              smooth={true}\n              spy={true}\n              data-testid={`categoryNavigatorScrollLink__${category.id}`}\n            >\n              <div className=\"category__navigator__scroll__link__circle\">\n                <span className={`flaticon-${category.pictogram}`} />\n              </div>\n              <div className=\"category__navigator__scroll__link__description\">\n                <Truncate lines={2}>{category.nameLabel}</Truncate>\n              </div>\n            </Scroll.Link>\n          ))}\n    </StyledCategoryNavigator>\n  )\n}\n\nexport default CategoryNavigator\n","import React from 'react'\nimport Scroll from 'react-scroll'\nimport styled from 'styled-components/macro'\n\nimport { mediaMobile } from '../../common/Responsive'\nimport { FFoodMenuCategoryFragment } from '../../graph/generated'\n\ninterface IProps {\n  category: FFoodMenuCategoryFragment\n}\n\nconst FoodCategoryStyled = styled.div`\n  color: #474747;\n  display: block;\n  font-size: 1.6rem;\n  & a {\n    text-decoration: none;\n  }\n`\n\nconst FoodCategoryTitleStyled = styled('h3')`\n  ${mediaMobile`margin: 1rem 0 0.4rem 1rem;`};\n`\n\nconst FoodCategory: React.FC<IProps> = ({ category, children }) => (\n  <Scroll.Element name={category.nameLabel}>\n    <FoodCategoryStyled>\n      <FoodCategoryTitleStyled>{category.nameLabel}</FoodCategoryTitleStyled>\n      {children}\n    </FoodCategoryStyled>\n  </Scroll.Element>\n)\n\nexport default React.memo(FoodCategory)\n","import './FoodMenuItem.css'\n\nimport { cn } from '@speedlo/ui'\nimport { useObserver } from 'mobx-react-lite'\nimport React from 'react'\nimport Truncate from 'react-truncate'\nimport styled from 'styled-components/macro'\n\nimport { mediaMobile } from '../../common/Responsive'\nimport { FFoodMenuRecipeFragment } from '../../graph/generated'\nimport { useOrderModel } from '../../hooks/useOrderModel'\nimport { TFoodMenuPresence } from './hooks/useFoodMenuPresence'\n\ninterface IProps {\n  recipe: FFoodMenuRecipeFragment\n  presence: TFoodMenuPresence\n  onAddToCart(recipeId: ID, hasSideDish: boolean): void\n}\n\nconst FoodMenuItemStyled = styled.div`\n  padding: 1rem 0.5rem 0.3rem 1.1rem;\n  border: 1px solid #d5d5d5 !important;\n  margin: 0 0 0.4rem 0;\n  border-radius: 0.8rem;\n  cursor: pointer;\n  position: relative;\n  min-height: 6rem;\n  user-select: none;\n  &:hover {\n    background-color: #c9e8d7;\n  }\n  background-color: ${({ isActive }: { isActive: boolean }) =>\n    isActive ? '#b3ebcc' : 'white'};\n  h4 {\n    font-size: 1rem;\n    font-weight: 700;\n    color: #404040;\n    margin-bottom: 0.1rem;\n    margin-right: 6rem;\n  }\n  p {\n    color: #666666;\n    margin: 0.6rem 0 0 0;\n    font-size: 0.9rem;\n    max-height: 2.5rem;\n    -webkit-line-clamp: 2;\n    overflow: hidden;\n  }\n\n  & div.presence {\n    background-color: ${({ theme }) => theme.secondary};\n    float: left;\n    position: absolute;\n    left: -1.2rem;\n    padding: 0.4rem 0.6rem;\n    color: white;\n    border-radius: 1.8rem;\n    font-size: 0.9rem;\n    ${mediaMobile`\n    left: -0.6rem;\n    top: -0.7rem;\n  `};\n  }\n`\nconst FoodMenuItemImage = styled.img`\n  width: 6rem;\n  height: 6rem;\n  display: block;\n  float: left;\n  margin: -1.05rem 1rem 0 -1.2rem;\n  border-radius: 0.8rem 0 0 0.8rem;\n  object-fit: cover;\n`\n\nconst FoodMenuItemPriceCorner = styled.div`\n  border-top-width: 1.8rem;\n  border-top-style: solid;\n  border-top-color: ${({ theme }) => theme.primary} !important;\n  position: absolute;\n  right: 4.799rem;\n  top: 1rem;\n  width: 0;\n  height: 0;\n  border-left: 1.8rem solid transparent;\n`\n\nconst FoodMenuItemPrice = styled.div`\n  background-color: ${({ theme }) => theme.primary} !important;\n  position: absolute;\n  right: 0;\n  top: 1rem;\n  width: 4.8rem;\n  height: 1.8rem;\n  padding: 0.12rem 0.7rem 0.3rem 0rem;\n  font-weight: 500;\n  font-size: 1.1rem;\n  color: white;\n  text-align: right;\n  overflow: hidden;\n  white-space: nowrap;\n`\n\nconst FoodMenuItem = React.memo<IProps>(({ recipe, presence, onAddToCart }) => {\n  const orderModel = useOrderModel()\n\n  const hasSideDishes = recipe.sideDishCount > 0\n\n  const onClick = React.useCallback(() => {\n    onAddToCart(recipe.id, hasSideDishes)\n  }, [hasSideDishes, onAddToCart])\n\n  const onMouseEnter = React.useCallback(() => {\n    if (hasSideDishes) {\n      orderModel.prefetchFood(recipe.id)\n    }\n  }, [hasSideDishes])\n\n  const previousPresence = React.useRef(-1)\n\n  const renderPresence = () => {\n    const recipePresence = presence.get(recipe.id)\n    if (!recipePresence) {\n      previousPresence.current = -1\n      return null\n    }\n    const className = cn('presence', 'animated', {\n      pulse: recipePresence > 1 || previousPresence.current > 0,\n      zoomIn:\n        (recipePresence === 1 && previousPresence.current === 0) ||\n        previousPresence.current === -1,\n    })\n    previousPresence.current = recipePresence\n    return (\n      <div\n        key={recipePresence}\n        className={className}\n      >{`${recipePresence}x`}</div>\n    )\n  }\n\n  return useObserver(() => (\n    <FoodMenuItemStyled\n      onClick={onClick}\n      onMouseEnter={onMouseEnter}\n      isActive={orderModel.lastActiveRecipeId === recipe.id}\n      data-testid={`foodMenuItem__${recipe.id}`}\n    >\n      {recipe.image && (\n        <FoodMenuItemImage src={recipe.image} alt={recipe.nameLabel} />\n      )}\n\n      <FoodMenuItemPriceCorner />\n      <FoodMenuItemPrice data-testid={`foodMenuItem__Price__${recipe.id}`}>\n        {recipe.price.formattedValue}\n      </FoodMenuItemPrice>\n      {renderPresence()}\n      <h4>\n        <Truncate lines={2} data-testid={`foodMenuItem__Name__${recipe.id}`}>\n          {recipe.nameLabel}\n        </Truncate>\n      </h4>\n      <p>\n        <Truncate\n          lines={2}\n          data-testid={`foodMenuItem__Description__${recipe.id}`}\n        >\n          {recipe.descriptionLabel}\n        </Truncate>\n      </p>\n    </FoodMenuItemStyled>\n  ))\n})\n\nexport default FoodMenuItem\n","import { Trans } from '@lingui/macro'\nimport React from 'react'\nimport styled from 'styled-components/macro'\n\nimport { useRoot } from '../../app/useRoot'\nimport Pacman from '../../common/Pacman'\nimport { mediaDesktop, mediaMobile } from '../../common/Responsive'\nimport { QFoodMenuWareCategories } from '../../graph/generated'\nimport { useAddToCart } from '../../hooks/useAddToCart'\nimport FoodCategory from './FoodCategory'\nimport FoodMenuItem from './FoodMenuItem'\nimport { useFoodMenuPresence } from './hooks/useFoodMenuPresence'\n\ninterface IProps {\n  orderId: MaybeID\n  categories: ReadonlyArray<QFoodMenuWareCategories>\n  isLoading: boolean\n}\n\nconst StyledFoodMenu = styled.div`\n  border-radius: 0 0 0.6rem 0.6rem;\n  ${mediaDesktop`background: white;`};\n  ${mediaMobile`\n    background: #eee9e7;\n    background-size: cover;\n    background-attachment: scroll;\n  `};\n\n  & > div {\n    ${mediaDesktop`\n      margin: 0 1.4rem 1rem 1.6rem;\n      padding: 2rem 0 2rem 0;\n    `};\n    ${mediaMobile`\n      margin: 0 0.7rem 1rem 0.7rem;\n      padding: 0 0 4rem 0;\n    `};\n  }\n`\n\nconst FoodMenu: React.FC<IProps> = ({ orderId, categories, isLoading }) => {\n  const { order: orderModel, config, user } = useRoot()\n\n  const presence = useFoodMenuPresence(orderId)\n\n  const executeAddToCart = useAddToCart()\n  const onAddToCart = React.useCallback(\n    (recipeId: ID, hasSideDish: boolean) => {\n      if (presence.size >= config.orderItemsMax) {\n        user.showOrderLimit()\n      } else if (hasSideDish) {\n        // history.push(`/order/add/${recipeId}`)\n        orderModel.addToCart(recipeId)\n      } else {\n        orderModel.setUsedRecipeId(recipeId)\n        executeAddToCart(recipeId)\n      }\n    },\n    [executeAddToCart],\n  )\n\n  const render = () => {\n    if (isLoading) {\n      return <Pacman noMargin={true} />\n    }\n    if (categories.length === 0) {\n      return (\n        <h3>\n          <Trans>Food menu is empty. We are sorry.</Trans>\n        </h3>\n      )\n    }\n    return (\n      <>\n        {categories.map(category => (\n          <FoodCategory key={category.id} category={category}>\n            {category.recipes.map(recipe => (\n              <FoodMenuItem\n                key={recipe.id}\n                recipe={recipe}\n                presence={presence}\n                onAddToCart={onAddToCart}\n              />\n            ))}\n          </FoodCategory>\n        ))}\n      </>\n    )\n  }\n\n  return (\n    <StyledFoodMenu data-testid=\"FoodMenu\">\n      <div>{render()}</div>\n    </StyledFoodMenu>\n  )\n}\n\nexport default React.memo(FoodMenu)\n","import { observable, ObservableMap, runInAction } from 'mobx'\nimport React from 'react'\n\nimport { useQFoodMenuCartPresence } from '../../../graph/generated'\n\nexport function useFoodMenuPresence(orderId: MaybeID) {\n  const { data, loading } = useQFoodMenuCartPresence(\n    {\n      orderId: orderId!,\n    },\n    {\n      skip: !orderId,\n      fetchPolicy: 'cache-only',\n    },\n  )\n\n  const [presence] = React.useState(() => observable.map<ID, number>())\n\n  if (!loading) {\n    runInAction(() => {\n      presence.clear()\n      data.order.presence.forEach(({ recipe: { id } }) => {\n        if (!presence.has(id)) {\n          presence.set(id, 0)\n        }\n        presence.set(id, presence.get(id)! + 1)\n      })\n    })\n  }\n\n  return presence\n}\n\nexport type TFoodMenuPresence = ObservableMap<ID, number>\n","import { useObserver } from 'mobx-react-lite'\nimport React from 'react'\n\nimport { useRoot } from '../../app/useRoot'\nimport { AlertModal } from '../../common/AlertModal'\nimport { i18n } from '../../i18n'\n\nexport const OrderLimitModal: React.FC = () => {\n  const { user } = useRoot()\n  return useObserver(() => (\n    <AlertModal\n      isOpen={!user.orderLimitAlertHidden}\n      onClose={user.hideOrderLimit}\n      headerText={i18n.t`Limit has been reached`}\n    >\n      {i18n.t`The maximum number of items in the order has been reached`}\n    </AlertModal>\n  ))\n}\n","import { observer } from 'mobx-react-lite'\nimport React from 'react'\n\nimport { useRoot } from '../../app/useRoot'\nimport { useQFoodMenu } from '../../graph/generated'\nimport CategoryNavigator from './CategoryNavigator'\nimport FoodMenu from './FoodMenu'\nimport { OrderLimitModal } from './OrderLimitModal'\n\nexport const FoodMenuView = observer(() => {\n  const { order: orderModel } = useRoot()\n\n  const { data, loading } = useQFoodMenu(\n    {\n      branchId: orderModel.branchId!,\n    },\n    {\n      skip: !orderModel.branchId,\n      fetchPolicy: 'cache-first',\n    },\n  )\n\n  const categories = React.useMemo(\n    () =>\n      loading ? [] : data.wareCategories.filter(cat => cat.recipes.length > 0),\n    [loading, data],\n  )\n\n  return (\n    <>\n      <OrderLimitModal />\n      <CategoryNavigator categories={categories} />\n      <FoodMenu\n        orderId={orderModel.orderId}\n        categories={categories}\n        isLoading={loading}\n      />\n    </>\n  )\n})\n","import React from 'react'\nimport { InputGroupAddon } from 'reactstrap'\nimport styled from 'styled-components/macro'\n\ninterface IProps {\n  isVisible: boolean\n  onClick(): void\n}\n\nconst Container = styled.span`\n  color: ${({ theme }) => theme.secondary};\n  cursor: pointer;\n  position: absolute;\n  right: 0.4rem;\n  top: 0.15rem;\n`\n\nexport const GeolocationButton: React.FC<IProps> = ({\n  onClick,\n  isVisible = false,\n}) =>\n  isVisible ? (\n    <Container>\n      <InputGroupAddon addonType=\"append\" onClick={onClick}>\n        <span className=\"flaticon-gps\" />\n      </InputGroupAddon>\n    </Container>\n  ) : null\n\nexport default GeolocationButton\n","import React from 'react'\nimport Spinner from 'react-spinkit'\n\ninterface IProps {\n  address: string\n  isVisible: boolean\n  isResolving: boolean\n  onValidClick(): void\n}\n\nexport const ResolvedAddress: React.FC<IProps> = ({\n  address,\n  isVisible,\n  isResolving,\n  onValidClick,\n}) => {\n  if (isResolving) {\n    return (\n      <div className=\"address__input__box__resolved wait\">\n        <Spinner name=\"ball-beat\" fadeIn=\"none\" />\n      </div>\n    )\n  }\n  if (!isVisible) {\n    return null\n  }\n  return (\n    <div className=\"address__input__box__resolved\" onClick={onValidClick}>\n      {address}\n    </div>\n  )\n}\n\nexport default ResolvedAddress\n","import { cn } from '@speedlo/ui'\nimport debounce from 'debounce'\nimport React, { Component } from 'react'\nimport { Input, InputProps } from 'reactstrap'\n\ninterface IProps {\n  onSearch(search: string): void\n  isVisible: boolean\n  isSearching: boolean\n  inputProps: InputProps\n}\n\ninterface IState {\n  value: string\n}\n\nclass SearchInput extends Component<IProps, IState> {\n  state = { value: '' }\n  componentDidMount() {\n    this.setFocus()\n  }\n  componentDidUpdate(nextProps: IProps) {\n    if (nextProps.isVisible !== this.props.isVisible) {\n      this.setFocus()\n    }\n  }\n  onSearch = debounce(this.props.onSearch, 2000)\n  onChange = ev => {\n    const value = ev.target.value || ''\n    this.setState({ value })\n    this.onSearch(value.trim())\n  }\n  onKeyPress = ev => {\n    if (ev.key === 'Enter') {\n      this.onSearch.clear()\n      this.props.onSearch(this.state.value.trim())\n    }\n  }\n  inputRef: Maybe<HTMLInputElement> = null\n  onInputMount = (ref: HTMLInputElement) => {\n    this.inputRef = ref\n  }\n  isVisible() {\n    return this.props.isVisible !== false\n  }\n  isSearching() {\n    return this.props.isSearching !== false\n  }\n  setFocus() {\n    if (this.isVisible() && this.inputRef !== null) {\n      this.inputRef.focus()\n    }\n  }\n  render() {\n    const { inputProps } = this.props\n    const isHidden = !this.isVisible() || this.isSearching()\n    return (\n      <Input\n        className={cn({ address__input__hidden: isHidden })}\n        onChange={this.onChange}\n        onKeyPress={this.onKeyPress}\n        value={this.state.value}\n        innerRef={this.onInputMount}\n        autoFocus={true}\n        data-testid=\"SearchInput\"\n        {...inputProps}\n      />\n    )\n  }\n}\n\nexport default SearchInput\n","import './AddressInput.css'\n\nimport { Trans } from '@lingui/macro'\nimport { useObserver } from 'mobx-react-lite'\nimport React from 'react'\nimport { Alert, InputGroup } from 'reactstrap'\nimport styled from 'styled-components/macro'\n\nimport { useRoot } from '../../app/useRoot'\nimport { i18n } from '../../i18n'\nimport { TLocationModel } from '../../models/LocationModel'\nimport GeolocationButton from './GeolocationButton'\nimport ResolvedAddress from './ResolvedAddress'\nimport SearchInput from './SearchInput'\n\nconst AddressInputStyled = styled.div`\n  width: 90%;\n  min-width: 14rem;\n  margin: 1rem auto;\n  text-align: center;\n`\n\nconst AddressInputBoxStyled = styled.div`\n  border-radius: 1rem;\n  border: 1px solid #d4d4d4;\n  background-color: white;\n  height: 2.3rem;\n  overflow: hidden;\n  & input {\n    margin: 0.2rem 2rem 0.5rem 0.7rem;\n    background: transparent;\n    border: none;\n  }\n`\n\nexport const AddressInput: React.FC = () => {\n  const { location } = useRoot()\n  return useObserver(() => (\n    <AddressInputStyled>\n      <AddressInputBoxStyled>\n        <InputGroup size=\"sm\">\n          <ResolvedAddress\n            address={location.address || ''}\n            isVisible={location.hasAddress}\n            isResolving={location.isResolving}\n            onValidClick={location.clearAddress}\n          />\n          <SearchInput\n            inputProps={{\n              placeholder: i18n.t`Type address or choose it from map`,\n              autoComplete: 'shipping street-address',\n            }}\n            onSearch={location.withUserAddress}\n            isVisible={!location.hasAddress}\n            isSearching={location.isResolving}\n          />\n          <GeolocationButton\n            onClick={location.attemptGeolocation}\n            isVisible={location.isGeolocationAvailable && !location.isResolving}\n          />\n        </InputGroup>\n      </AddressInputBoxStyled>\n      {location.hasFinishedSearch ? renderErrorMessage(location) : null}\n    </AddressInputStyled>\n  ))\n}\n\nconst NoMouseAlert = styled(Alert)`\n  pointer-events: none;\n`\n\nfunction renderErrorMessage(location: TLocationModel) {\n  if (location.isResolved === false) {\n    return (\n      <NoMouseAlert color=\"danger\">\n        <Trans>Address was not recognized.</Trans>\n      </NoMouseAlert>\n    )\n  }\n  if (location.isStreetAddress === false) {\n    return (\n      <NoMouseAlert color=\"warning\">\n        <Trans>Please enter address with house number.</Trans>\n      </NoMouseAlert>\n    )\n  }\n  if (location.inDeliveryLocation === false) {\n    return (\n      <NoMouseAlert color=\"warning\">\n        <Trans>\n          Meal can't be delivered to your chosen address by any restaurant.\n        </Trans>\n      </NoMouseAlert>\n    )\n  }\n  return null\n}\n","import React from 'react'\n\nimport { PrimaryButton } from '../../common/Buttons'\nimport ButtonStripe from '../../common/ButtonStripe'\nimport { i18n } from '../../i18n'\n\ninterface IProps {\n  enabled: boolean\n  onClick(): void\n  onPrefetch(): void\n}\n\nexport const AddressSubmit: React.FC<IProps> = ({\n  enabled,\n  onClick,\n  onPrefetch,\n}) => (\n  <ButtonStripe>\n    <PrimaryButton\n      color=\"primary\"\n      disabled={!enabled}\n      onClick={onClick}\n      onMouseEnter={() => {\n        if (enabled) {\n          onPrefetch()\n        }\n      }}\n      data-testid=\"AddressSubmit\"\n    >\n      {i18n.t`Confirm address`.toLocaleUpperCase()}\n    </PrimaryButton>\n  </ButtonStripe>\n)\n\nexport default AddressSubmit\n","import { useFullComputed } from '@speedlo/hooks'\nimport { reaction } from 'mobx'\nimport { useDisposable, useObserver } from 'mobx-react-lite'\nimport React from 'react'\n\nimport { useRoot } from '../../app/useRoot'\nimport { useQInitialDeliveryLocation } from '../../graph/generated'\nimport { GeoPoint } from '../../helpers/gps'\nimport { logMap } from '../../helpers/logger'\nimport { MapPanning } from './atoms/MapPanning'\n\nexport const DeliveryMapPanning: React.FC = () => {\n  const { location, map } = useRoot()\n  const { data } = useQInitialDeliveryLocation()\n\n  useDisposable(() =>\n    reaction(\n      () => map.clickPoint,\n      clickPoint => {\n        if (clickPoint) {\n          location.withUserLocation(clickPoint)\n          map.clearClickPoint()\n        }\n      },\n    ),\n  )\n\n  const panToGps = useFullComputed(() => {\n    if (location.geoPoint) {\n      logMap('pan to user location', location.geoPoint)\n      return location.geoPoint\n    } else if (location.geolocationPoint) {\n      logMap('pan to geolocation', location.geolocationPoint)\n      return location.geolocationPoint\n    } else if (data && data.location) {\n      logMap('pan to initial location', data.location.gpsCoordinates)\n      return data.location.gpsCoordinates as GeoPoint\n    }\n    logMap('no pan location available')\n    return\n  }, [data])\n\n  return useObserver(() => <MapPanning gps={panToGps.get()} map={map} />)\n}\n","import './DeliveryMap.css'\n\nimport { Marker } from '@react-google-maps/api'\nimport { when } from 'mobx'\nimport { useDisposable, useObserver } from 'mobx-react-lite'\nimport React, { useCallback } from 'react'\n\nimport { useRoot } from '../../app/useRoot'\nimport { latLngToGps } from '../../helpers/gps'\nimport { AddressInput } from '../destination/AddressInput'\nimport { AddressSubmit } from './AddressSubmit'\nimport { DeliveryMapPanning } from './DeliveryMapPanning'\n\ninterface IProps {\n  onConfirm(): void\n}\n\nexport const DeliveryMap: React.FC<IProps> = ({ onConfirm }) => {\n  const { business, order, location } = useRoot()\n\n  const onSubmit = useCallback(async () => {\n    if (location.branchId) {\n      order.setBranch(location.branchId)\n    }\n    await order.createDeliveryOrder()\n    onConfirm()\n  }, [onConfirm])\n\n  useDisposable(() =>\n    when(() => business.isValid, location.validateUserLocation),\n  )\n\n  return useObserver(() => (\n    <>\n      <DeliveryMapPanning />\n      {location.latLng ? (\n        <Marker\n          position={location.latLng}\n          draggable={true}\n          onDragEnd={({ latLng }) => {\n            location.withUserLocation(latLngToGps(latLng))\n          }}\n        />\n      ) : null}\n      <div className=\"delivery__map__address\">\n        <AddressInput />\n      </div>\n      <div className=\"delivery__map__submit\">\n        <AddressSubmit\n          enabled={location.isDeliveryAddress}\n          onClick={onSubmit}\n          onPrefetch={() => {\n            if (location.branchId) {\n              order.prefetchFoodMenu(location.branchId)\n            }\n          }}\n        />\n      </div>\n    </>\n  ))\n}\n","import React from 'react'\nimport { Field, FieldProps } from 'react-form'\nimport { FormFeedback, Input, InputProps } from 'reactstrap'\n\ninterface IProps\n  extends Omit<FieldProps<string>, 'render' | 'children'>,\n    Omit<InputProps, 'defaultValue'> {\n  showFeedback?: boolean\n}\n\nexport const FormTextInput: React.FC<IProps> = ({\n  field,\n  validate,\n  showFeedback = false,\n  ...inputProps\n}) => (\n  <Field\n    field={field}\n    validate={validate}\n    render={fieldApi => (\n      <>\n        <Input\n          {...inputProps}\n          value={fieldApi.value}\n          onChange={e => fieldApi.setValue(e.target.value)}\n          onBlur={() => fieldApi.setTouched(true)}\n          invalid={fieldApi.touched && Boolean(fieldApi.error)}\n        />\n        {showFeedback && <FormFeedback>{fieldApi.error}</FormFeedback>}\n      </>\n    )}\n  />\n)\n","import React from 'react'\nimport { FormGroup } from 'reactstrap'\n\nimport { FormTextInput } from '../../common/FormTextInput'\nimport { i18n } from '../../i18n'\n\nconst emailRx = /^(([^<>()\\[\\]\\.,;:\\s@\\\"]+(\\.[^<>()\\[\\]\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@(([^<>()[\\]\\.,;:\\s@\\\"]+\\.)+[^<>()[\\]\\.,;:\\s@\\\"]{2,})$/i\n\nexport const OrderEmailInputValidator = value => {\n  const email = value.trim()\n  if (email === '') {\n    return i18n.t`E-mail is mandatory`\n  }\n  if (!emailRx.test(email)) {\n    return i18n.t`E-mail format is not valid`\n  }\n  return null\n}\n\nexport const OrderEmailInput: React.FC = () => (\n  <FormGroup>\n    <FormTextInput\n      field=\"email\"\n      type=\"email\"\n      autoComplete=\"email\"\n      placeholder=\"E-mail\"\n      showFeedback={true}\n      validate={OrderEmailInputValidator}\n      data-testid=\"orderEmailInput\"\n    />\n  </FormGroup>\n)\n","import React from 'react'\nimport { FormGroup, InputGroup } from 'reactstrap'\n\nimport { FormTextInput } from '../../common/FormTextInput'\nimport { i18n } from '../../i18n'\n\nexport const OrderNameInput: React.FC = () => (\n  <FormGroup>\n    <InputGroup>\n      <FormTextInput\n        field=\"firstname\"\n        autoComplete=\"given-name\"\n        placeholder={i18n.t`First name`}\n        validate={value =>\n          value.trim() === '' ? i18n.t`First name is mandatory` : null\n        }\n        data-testid=\"orderNameInput__FirstName\"\n      />\n      <FormTextInput\n        field=\"lastname\"\n        autoComplete=\"family-name\"\n        placeholder={i18n.t`Last name`}\n        validate={value =>\n          value.trim() === '' ? i18n.t`Last name is mandatory` : null\n        }\n        data-testid=\"orderNameInput__LastName\"\n      />\n    </InputGroup>\n  </FormGroup>\n)\n","import React from 'react'\nimport { FormGroup, InputGroup } from 'reactstrap'\nimport { UAParser } from 'ua-parser-js'\n\nimport { FormTextInput } from '../../common/FormTextInput'\nimport { i18n } from '../../i18n'\n\nexport const OrderPhoneInputValidator = value =>\n  value.trim() === '' ? i18n.t`Phone is mandatory` : null\n\nexport const OrderPhonePrefixInputValidator = value =>\n  value.trim() === '' ? i18n.t`Phone prefix is mandatory` : null\n\nexport const OrderPhoneInput: React.FC = () => {\n  const agent = new UAParser(window.navigator.userAgent)\n  const isMobileSafari = agent.getBrowser().name === 'Mobile Safari'\n  return (\n    <FormGroup>\n      <InputGroup>\n        <FormTextInput\n          field=\"phonePrefix\"\n          autoComplete={isMobileSafari ? 'off' : 'tel-country-code'}\n          placeholder=\"+\"\n          validate={OrderPhonePrefixInputValidator}\n        />\n        <FormTextInput\n          field=\"phone\"\n          type=\"tel\"\n          autoComplete=\"tel-national\"\n          placeholder={i18n.t`Phone`}\n          validate={OrderPhoneInputValidator}\n          style={{ width: '55%' }}\n          data-testid=\"orderPhoneInput__Phone\"\n        />\n      </InputGroup>\n    </FormGroup>\n  )\n}\n","import { useOrderPromoCodes } from '@speedlo/ui'\nimport React from 'react'\nimport { FormGroup, Input, InputGroup } from 'reactstrap'\nimport styled from 'styled-components/macro'\n\nimport { useRoot } from '../../app/useRoot'\nimport { SecondaryButton } from '../../common/Buttons'\nimport {\n  useMOrderPromoAdd,\n  useMOrderPromoRemove,\n  useQOrderPromoCodes,\n} from '../../graph/generated'\nimport { useAlertModal } from '../../hooks/useAlertModal'\nimport { i18n } from '../../i18n'\n\nconst CodesPanel = styled.div`\n  margin-top: 0.5rem;\n  & button {\n    margin-right: 0.5rem;\n    font-size: 0.7rem;\n  }\n`\n\nexport const OrderPromoInput = React.memo(() => {\n  const { order, cart } = useRoot()\n  const [errorModal, showError] = useAlertModal()\n\n  const { data, loading } = useQOrderPromoCodes(\n    { orderId: order.orderId! },\n    { skip: !order.orderId },\n  )\n  const [addCodeMutation] = useMOrderPromoAdd()\n  const [removeCodeMutation] = useMOrderPromoRemove()\n\n  const onCodeAdd = React.useCallback(async (code: string) => {\n    if (!order.orderId) {\n      return\n    }\n    return addCodeMutation({\n      code,\n      orderId: order.orderId,\n      withGoods: cart.withGoods,\n    })\n  }, [])\n\n  const onCodeRemove = async (codeId: ID) => {\n    if (order.orderId) {\n      removeCodeMutation({\n        codeId,\n        orderId: order.orderId,\n        withGoods: cart.withGoods,\n      })\n    }\n  }\n\n  const onCodeErrors = (code, errors) => {\n    showError(\n      i18n.t`Promo code \"${code}\" is invalid`,\n      <div>\n        {errors.map(msg => (\n          <div key={msg}>{msg}</div>\n        ))}\n      </div>,\n    )\n  }\n\n  const { inputProps, inputRef } = useOrderPromoCodes({\n    onCodeAdd,\n    onCodeErrors,\n    getValidatingMessage: code => i18n.t`Validating promo code ${code}...`,\n  })\n\n  const codes = loading ? [] : data.order.promoCodes\n\n  return (\n    <FormGroup>\n      {errorModal}\n      <InputGroup>\n        <Input\n          innerRef={inputRef}\n          autoComplete=\"off\"\n          placeholder={i18n.t`Promo codes`}\n          {...inputProps}\n        />\n      </InputGroup>\n      <CodesPanel data-testid=\"promoCodesPanel\">\n        {codes.map(({ id, code }) => (\n          <SecondaryButton\n            key={id}\n            role=\"button\"\n            onClick={() => onCodeRemove(id)}\n          >\n            {`${code} ✖`}\n          </SecondaryButton>\n        ))}\n      </CodesPanel>\n    </FormGroup>\n  )\n})\n","import './OrderPaymentMethod.css'\n\nimport { DateFormat, Trans } from '@lingui/react'\nimport { useObserver } from 'mobx-react-lite'\nimport React from 'react'\n\nimport { useRoot } from '../../app/useRoot'\nimport { SelectButtonThemed } from '../../common/Buttons'\n\nexport const OrderTimeButtons: React.FC = () => {\n  const { order } = useRoot()\n\n  return useObserver(() => {\n    if (!order.delayedOrderEnabled) {\n      return null\n    }\n    return (\n      <div className=\"order__payment__method\">\n        <SelectButtonThemed\n          data-testid=\"orderTimeButtonNow\"\n          selected={order.deliverAt === undefined}\n          onClick={() => order.setDeliverAt(undefined)}\n        >\n          <Trans>When possible</Trans>\n        </SelectButtonThemed>\n        <SelectButtonThemed\n          data-testid=\"orderTimeButtonLater\"\n          selected={order.deliverAt !== undefined}\n          onClick={order.openTimePicker}\n        >\n          {order.deliverAt ? (\n            <DateFormat\n              value={order.deliverAt}\n              format={{ weekday: 'long', hour: 'numeric', minute: 'numeric' }}\n            />\n          ) : (\n            <Trans>Choose time</Trans>\n          )}\n        </SelectButtonThemed>\n      </div>\n    )\n  })\n}\n","import React from 'react'\n\nimport { OrderEmailInput } from './OrderEmailInput'\nimport { OrderNameInput } from './OrderNameInput'\nimport { OrderNoteInput } from './OrderNoteInput'\nimport { OrderPhoneInput } from './OrderPhoneInput'\nimport { OrderPromoInput } from './OrderPromoInput'\nimport { OrderTimeButtons } from './OrderTimeButtons'\n\nexport const OrderFormInputs = () => (\n  <>\n    <OrderNameInput />\n    <OrderPhoneInput />\n    <OrderEmailInput />\n    <OrderNoteInput />\n    <OrderTimeButtons />\n    <OrderPromoInput />\n  </>\n)\n","import {\n  addMinutes,\n  endOfMinute,\n  getMinutes,\n  startOfMinute,\n  subMinutes,\n} from 'date-fns'\n\nexport function createTimeSteps(start: Date, end: Date, minuteStep: number) {\n  let current = startOfMinute(timeClampUp(start, minuteStep))\n  const steps: Date[] = []\n  const endMinute = endOfMinute(subMinutes(end, 1))\n  do {\n    steps.push(current)\n    current = addMinutes(current, minuteStep)\n  } while (current <= endMinute)\n  return steps\n}\n\nexport function timeClampUp(time: Date, minuteStep: number) {\n  return addMinutes(timeClampDown(time, minuteStep), minuteStep)\n}\n\nexport function timeClampDown(time: Date, minuteStep: number) {\n  return subMinutes(time, getMinutes(time) % minuteStep)\n}\n","import React from 'react'\nimport { ButtonProps } from 'reactstrap'\nimport styled from 'styled-components/macro'\n\nimport { PickerButton } from '../../common/PickerButton'\nimport { formatTime } from '../../helpers/formats'\n\ninterface IProps extends ButtonProps {\n  time: Date\n  isSelected: boolean\n  canBeSelected: boolean\n}\n\nconst Time = styled.div`\n  font-size: 1.2rem;\n`\n\nexport const TimePickerButton: React.FC<IProps> = ({\n  time,\n  ...buttonProps\n}) => (\n  <PickerButton\n    size=\"xs\"\n    outline={true}\n    width=\"10rem\"\n    data-testid={`timePickerButton__${time.getTime()}`}\n    {...buttonProps}\n  >\n    <Time>{formatTime(time)}</Time>\n  </PickerButton>\n)\n","import { DateFormat } from '@lingui/macro'\nimport {\n  closestIndexTo,\n  eachDayOfInterval,\n  isEqual,\n  startOfDay,\n} from 'date-fns'\nimport { isWithinInterval } from 'date-fns/fp'\nimport React, { Fragment } from 'react'\nimport styled from 'styled-components/macro'\n\nimport { createTimeSteps } from './createTimeSteps'\nimport { TimePickerButton } from './TimePickerButton'\n\ninterface IProps {\n  minDate: Date\n  maxDate: Date\n  minuteStep: number\n  onStepChange(step: Date): void\n  initialTime?: Date\n  filterIntervals?: Interval[]\n}\n\nconst TimePickerContainer = styled.div`\n  margin-top: 1rem;\n`\n\nconst TimePickerDay = styled.div`\n  font-size: 1rem;\n  font-weight: bold;\n  text-align: left;\n  margin: 0 0 0.2rem 0.2rem;\n`\n\nexport const TimePicker: React.FC<IProps> = ({\n  minDate,\n  maxDate,\n  minuteStep,\n  onStepChange,\n  initialTime,\n  filterIntervals = [],\n}) => {\n  const steps = React.useMemo(() => {\n    const allSteps = createTimeSteps(minDate, maxDate, minuteStep)\n    if (filterIntervals.length) {\n      return allSteps.filter(step =>\n        filterIntervals.some(isWithinInterval(step)),\n      )\n    }\n    return allSteps\n  }, [minDate, maxDate, minuteStep, filterIntervals])\n\n  const days = React.useMemo(() => {\n    return eachDayOfInterval({ start: minDate, end: maxDate })\n  }, [minDate, maxDate])\n\n  const [stepIdx, setStepIdx] = React.useState(0)\n\n  React.useEffect(() => {\n    if (initialTime) {\n      setStepIdx(closestIndexTo(initialTime, steps))\n    }\n  }, [initialTime])\n\n  React.useEffect(() => {\n    onStepChange(steps[stepIdx])\n  }, [])\n\n  return (\n    <TimePickerContainer>\n      {days.map(day => (\n        <Fragment key={day.getDate()}>\n          <TimePickerDay>\n            <DateFormat\n              value={day}\n              format={{ month: 'long', day: 'numeric', weekday: 'long' }}\n            />\n          </TimePickerDay>\n          {steps.map((step, idx) =>\n            isEqual(day, startOfDay(step)) ? (\n              <TimePickerButton\n                key={step.getTime()}\n                time={step}\n                isSelected={idx === stepIdx}\n                canBeSelected={true}\n                onClick={() => {\n                  setStepIdx(idx)\n                  onStepChange(step)\n                }}\n              />\n            ) : null,\n          )}\n        </Fragment>\n      ))}\n    </TimePickerContainer>\n  )\n}\n","import '../../common/Modal.css'\n\nimport { Trans } from '@lingui/macro'\nimport { isoDate } from '@speedlo/graphql'\nimport { RM } from '@speedlo/tools'\nimport { addMinutes, isAfter } from 'date-fns'\nimport { useObserver } from 'mobx-react-lite'\nimport React from 'react'\nimport { Container, Modal, ModalBody, ModalHeader } from 'reactstrap'\n\nimport { useRoot } from '../../app/useRoot'\nimport { PrimaryButton } from '../../common/Buttons'\nimport {\n  useMOrderDeliveryTime,\n  useQOrderTimePicker,\n} from '../../graph/generated'\nimport { i18n } from '../../i18n'\nimport { TimePicker } from '../timePicker/TimePicker'\n\nexport const OrderTimePicker: React.FC = () => {\n  const { order, cart } = useRoot()\n\n  const { data, loading } = useQOrderTimePicker({ branchId: order.branchId! })\n\n  const [updateOrder] = useMOrderDeliveryTime()\n\n  const selectedTime = React.useRef<Date | undefined>(order.deliverAt)\n  const onConfirmAndClose = () => {\n    const time = selectedTime.current\n    updateOrder({\n      orderId: order.orderId!,\n      deliverAt: time && isoDate(time),\n      withGoods: cart.withGoods,\n    })\n    order.setDeliverAt(time)\n    order.closeTimePicker()\n  }\n\n  const getStartTime = () => {\n    const { companyBranch } = data\n    const openAt =\n      companyBranch.isOpen || !companyBranch.willOpenAt\n        ? new Date()\n        : new Date(companyBranch.willOpenAt)\n    return openAt\n  }\n\n  const getEndTime = () => {\n    const { companyBranch } = data\n    if (companyBranch.isOpen && companyBranch.willCloseAt) {\n      return new Date(companyBranch.willCloseAt)\n    }\n    const nextBusinessHour = companyBranch.businessHours.find(\n      RM.propEq('closed', false),\n    )\n    return nextBusinessHour ? new Date(nextBusinessHour.closeAt) : null\n  }\n\n  const getFilterIntervals = (): Interval[] => {\n    const { companyBranch } = data\n    return companyBranch.businessHours\n      .filter(RM.propEq('closed', true))\n      .map(bhour => ({\n        start: new Date(bhour.openAt),\n        end: new Date(bhour.closeAt),\n      }))\n  }\n\n  const getMinuteOffset = () => {\n    const { defaultDeliveryTime, defaultPickupTime } = data.companyBranch\n\n    if (order.usingDeliveryOrderMethod) {\n      return defaultDeliveryTime\n    }\n    if (order.usingPickupOrderMethod) {\n      return defaultPickupTime\n    }\n\n    return 0\n  }\n\n  const renderModalContent = () => {\n    if (loading) {\n      return null\n    }\n\n    const minDate = getStartTime()\n    const maxDate = getEndTime()\n    if (maxDate === null || isAfter(minDate, maxDate)) {\n      return (\n        <Trans>\n          It's not possible to pick a specific order time at this moment.\n        </Trans>\n      )\n    }\n\n    const minuteOffset = getMinuteOffset()\n\n    return (\n      <TimePicker\n        minuteStep={15}\n        minDate={addMinutes(minDate, minuteOffset)}\n        maxDate={addMinutes(maxDate, minuteOffset)}\n        initialTime={selectedTime.current}\n        filterIntervals={getFilterIntervals()}\n        onStepChange={time => (selectedTime.current = time)}\n      />\n    )\n  }\n\n  React.useEffect(() => {\n    if (\n      data &&\n      data.companyBranch &&\n      data.companyBranch.delayedDeliveryEnabled\n    ) {\n      order.enableDelayedOrder()\n    }\n  }, [data])\n\n  const header = order.usingDeliveryOrderMethod\n    ? i18n.t`Deliver at what time?`\n    : i18n.t`When you will pickup the order?`\n\n  return useObserver(() => (\n    <Modal\n      isOpen={order.timePickerOpen}\n      toggle={order.closeTimePicker}\n      className=\"modal__container\"\n      autoFocus={true}\n      backdrop=\"static\"\n      fade={false}\n    >\n      <ModalHeader\n        toggle={order.closeTimePicker}\n        tag={Container}\n        className=\"modal__header\"\n      >\n        <span>{header}</span>\n      </ModalHeader>\n      <ModalBody className=\"modal__body\">\n        <div className=\"modal__body__content\">{renderModalContent()}</div>\n        <div className=\"modal__body__button__line\">\n          <div className=\"modal__body__button__strip\" />\n          <PrimaryButton\n            onClick={onConfirmAndClose}\n            size=\"md\"\n            className=\"modal__body__button\"\n          >\n            {i18n.t`Confirm time`.toLocaleUpperCase()}\n          </PrimaryButton>\n        </div>\n      </ModalBody>\n    </Modal>\n  ))\n}\n","import { useDebounceCallback, useRouterContext } from '@speedlo/hooks'\nimport { Sentry } from '@speedlo/sentry'\nimport { RM } from '@speedlo/tools'\nimport { autorun, reaction } from 'mobx'\nimport { useDisposable } from 'mobx-react-lite'\nimport React from 'react'\nimport { Form, IFormApi, IFormState } from 'react-form'\nimport { Form as StrapForm } from 'reactstrap'\n\nimport { useRoot } from '../../app/useRoot'\nimport { PaymentGateEnum, useMSubmitOrder } from '../../graph/generated'\nimport { logOrder } from '../../helpers/logger'\nimport { TAgreement, TOrderModel } from '../../models/OrderModel'\nimport { useOrderPayment } from './hooks/useOrderPayment'\n\ninterface IProps {\n  render(\n    formApi: IFormApi & IFormState<IOrderFormState>,\n    isSubmitting: boolean,\n  ): ReactNode\n}\n\nexport interface IOrderFormState {\n  firstname: string\n  lastname: string\n  email: string\n  phonePrefix: string\n  phone: string\n  note: string\n  tips: string\n  payment: PaymentGateEnum\n  agreements: TAgreement[]\n}\n\nfunction getDefaultFormValues(orderModel: TOrderModel): IOrderFormState {\n  return {\n    firstname: orderModel.firstname,\n    lastname: orderModel.lastname,\n    email: orderModel.email,\n    phone: orderModel.phone,\n    phonePrefix: orderModel.phonePrefix,\n    note: orderModel.note,\n    tips: orderModel.tips,\n    payment: orderModel.payment as PaymentGateEnum,\n    agreements: [],\n  }\n}\n\nconst debounceInterval = 1500\n\nexport const OrderFormSetup: React.FC<IProps> = ({ render }) => {\n  const { order: orderModel } = useRoot()\n  const { history } = useRouterContext()\n\n  useDisposable(() =>\n    autorun(() => {\n      if (!orderModel.isVamInitialized) {\n        orderModel.initVam()\n      }\n    }),\n  )\n\n  const [submitOrder, { loading: isSubmitting }] = useMSubmitOrder()\n  const {\n    executeGoPayPayment,\n    paymentErrorModal,\n    paymentProcessing,\n  } = useOrderPayment()\n\n  const onChange = useDebounceCallback(\n    async (formState: IFormState<IOrderFormState>, formApi: IFormApi) => {\n      logOrder('onChange', formState)\n      await orderModel.updateVam(formState.values)\n      formApi.setValue(\n        'agreements',\n        mergeFormAgreements(formState.values.agreements, orderModel.agreements),\n      )\n    },\n    debounceInterval,\n  )\n\n  const onSubmit = React.useCallback(async (formState: IOrderFormState) => {\n    orderModel.rememberFormValues(formState)\n\n    const variables = orderModel.getSubmitVariables(formState)\n    const result = await submitOrder(variables)\n    if (result) {\n      const { userErrors, gopayUrl } = result.submitOrder\n      if (userErrors.length) {\n        orderModel.submitFailed(userErrors)\n        return\n      }\n\n      if (orderModel.payment === PaymentGateEnum.Cash) {\n        history.replace(`/finish`)\n      } else if (orderModel.payment === PaymentGateEnum.Gopay) {\n        if (gopayUrl) {\n          executeGoPayPayment(gopayUrl)\n        } else {\n          Sentry.withScope(scope => {\n            scope.setExtras({ variables })\n            Sentry.captureMessage('No gopayUrl received for GoPay payment')\n          })\n          orderModel.submitFailed()\n        }\n      } else {\n        Sentry.withScope(scope => {\n          scope.setExtras({ variables })\n          Sentry.captureMessage(`Unknown payment mode ${orderModel.payment}`)\n        })\n        orderModel.submitFailed()\n      }\n    } else {\n      orderModel.submitFailed()\n    }\n  }, [])\n\n  const formApiRef = React.useRef<IFormApi<IOrderFormState> | null>(null)\n\n  // Terrible hack to ensure default phone prefix to be used\n  // E2E Tests were failing otherwise\n  React.useEffect(() => {\n    const setPrefix = (prefix, r) => {\n      if (!prefix) {\n        return\n      }\n      if (formApiRef.current) {\n        formApiRef.current.setValue(\n          'phonePrefix',\n          formApiRef.current.getValue('phonePrefix') || prefix,\n        )\n        r.dispose()\n      } else {\n        setTimeout(() => setPrefix(prefix, r), 50)\n      }\n    }\n    return reaction(() => orderModel.defaultPhonePrefix, setPrefix, {\n      fireImmediately: true,\n    })\n  }, [])\n\n  return (\n    <>\n      {paymentErrorModal}\n      <Form\n        defaultValues={getDefaultFormValues(orderModel)}\n        validateOnMount={true}\n        onChange={onChange}\n        onSubmit={onSubmit}\n      >\n        {formApi => {\n          formApiRef.current = formApi\n          return (\n            <StrapForm onSubmit={formApi.submitForm}>\n              {render(formApi, isSubmitting || paymentProcessing)}\n            </StrapForm>\n          )\n        }}\n      </Form>\n    </>\n  )\n}\n\nfunction mergeFormAgreements(\n  formValue: TAgreement[],\n  agreements: TAgreement[],\n) {\n  return agreements.map(agreement => {\n    const formAgreement = formValue.find(RM.propEq('id', agreement.id))\n    if (formAgreement) {\n      return { ...agreement, isConfirmed: formAgreement.isConfirmed }\n    }\n    return agreement\n  })\n}\n","import { useApolloClient } from '@speedlo/graphql'\nimport { useRouterContext } from '@speedlo/hooks'\nimport { useGoPay } from '@speedlo/payments'\n\nimport { useRoot } from '../../../app/useRoot'\nimport {\n  QOrderPaymentStatusDocument,\n  QOrderPaymentStatusQuery,\n  QOrderPaymentStatusVariables,\n} from '../../../graph/generated'\nimport { useAlertModal } from '../../../hooks/useAlertModal'\nimport { i18n } from '../../../i18n'\n\nexport function useOrderPayment() {\n  const client = useApolloClient()\n  const { order: orderModel, business } = useRoot()\n  const { history } = useRouterContext()\n\n  const [paymentErrorModal, alertPaymentError] = useAlertModal()\n\n  const { executeGoPayPayment, paymentLoading: paymentProcessing } = useGoPay(\n    async (orderId = orderModel.orderId!, userToken) => {\n      if (!orderId) {\n        return null\n      }\n      orderModel.goPayStatusCheck(true)\n      const result = await client.query<\n        QOrderPaymentStatusQuery,\n        QOrderPaymentStatusVariables\n      >({\n        query: QOrderPaymentStatusDocument,\n        variables: {\n          orderId,\n        },\n        fetchPolicy: 'no-cache',\n        context: {\n          invalidateWithToken: userToken,\n        },\n      })\n      orderModel.goPayStatusCheck(false)\n      return result.data.status\n    },\n    {\n      onError(errors) {\n        const phone = business.branch!.phone\n        alertPaymentError(\n          i18n.t`Payment status check has failed`,\n          errors.length\n            ? errors.join('<br />')\n            : i18n.t`We were unable to verify status of your payment. Please contact operator using number ${phone}`,\n        )\n      },\n      onFinish() {\n        history.replace('/finish')\n      },\n    },\n  )\n\n  return { paymentErrorModal, executeGoPayPayment, paymentProcessing }\n}\n","import './CartView.css'\n\nimport { Trans } from '@lingui/macro'\nimport { CartLabels, useCartSystem } from '@speedlo/cart'\nimport { autorun } from 'mobx'\nimport { observer } from 'mobx-react-lite'\nimport React from 'react'\n\nimport { useTheme } from '../../app/ThemeSwitchProvider'\nimport { mobileBreakpoint } from '../../common/Responsive'\nimport { useQCart } from '../../graph/generated'\nimport { OrderSubmitLine } from '../orderForm/OrderSubmitLine'\nimport { useCartControl } from './hooks/useCartControl'\n\ninterface IProps {\n  orderId: MaybeID\n  isReadonly: boolean\n}\n\nexport const CartSystem = observer<IProps>(({ orderId, isReadonly }) => {\n  const theme = useTheme()\n  const labels = React.useMemo(getCartLabels, [])\n\n  const {\n    cartModel,\n    onItemEdit,\n    onItemRemove,\n    onPlaceOrder,\n    onChangeOrder,\n  } = useCartControl()\n\n  const renderMobileSubmit = React.useCallback(\n    () => (\n      <OrderSubmitLine\n        canSubmit={true}\n        isSubmitting={false}\n        onClick={isReadonly ? onChangeOrder : onPlaceOrder}\n      >\n        {isReadonly ? <Trans>Change order</Trans> : <Trans>Place order</Trans>}\n      </OrderSubmitLine>\n    ),\n    [onPlaceOrder, isReadonly],\n  )\n\n  const renderGoodsLoading = React.useCallback(\n    () => <Trans>Accessing your order</Trans>,\n    [],\n  )\n\n  const cart = useCartSystem({\n    colors: {\n      primary: theme.primary,\n      sumRowBg: theme.primary,\n      sumRowText: 'white',\n      mobileSummaryItemCount: theme.secondary,\n    },\n    labels,\n    isReadonly,\n    mobileBreakpoint,\n    backgroundImage: theme.backgroundCart,\n    onItemEdit,\n    onItemRemove,\n    renderMobileSubmit,\n    renderGoodsLoading,\n  })\n\n  React.useEffect(\n    () =>\n      autorun(() => {\n        cartModel.updateDisplay(cart.store.isMobile, cart.store.showGoods)\n      }),\n    [],\n  )\n\n  const { data, loading } = useQCart(\n    {\n      orderId: orderId!,\n      withGoods: cartModel.withGoods,\n      withPresence: cartModel.withPresence,\n    },\n    {\n      skip: !orderId,\n      fetchPolicy: 'cache-first',\n      context: {\n        noBatch: true,\n      },\n    },\n  )\n\n  React.useEffect(() => {\n    if (!loading) {\n      cart.updateSummary(data.order)\n      if (cartModel.withGoods) {\n        cart.updateGoods(data.order)\n      }\n    }\n  })\n\n  return cart.renderCart()\n})\n\nfunction getCartLabels(): CartLabels {\n  return {\n    noSideDish: <Trans>Without sidedish</Trans>,\n    noCost: <Trans>For free</Trans>,\n    cartSumHeader: totalPrice => (\n      <Trans>In the cart you have goods for {totalPrice}</Trans>\n    ),\n    emptyCart: <Trans>Cart is empty</Trans>,\n    totalDiscount: <Trans>Total discount</Trans>,\n    coverPrice: <Trans>Covers</Trans>,\n    transportFee: <Trans>Delivery</Trans>,\n    totalSum: <Trans>Total</Trans>,\n    tip: <Trans>Tip</Trans>,\n    minimalOrderPrice: price => (\n      <Trans>Minimal price of order is {price}</Trans>\n    ),\n  }\n}\n","import { useApolloClient } from '@speedlo/graphql'\nimport { useRouterContext } from '@speedlo/hooks'\nimport { idPropEq, RM } from '@speedlo/tools'\nimport React from 'react'\n\nimport { useRoot } from '../../../app/useRoot'\nimport {\n  MRemoveCartItemMutation,\n  MRemoveCartItemVariables,\n  QCartDocument,\n  QCartQuery,\n  QCartVariables,\n  useMRemoveCartItem,\n} from '../../../graph/generated'\n\nexport function useCartControl() {\n  const { order: orderModel, cart: cartModel } = useRoot()\n  const client = useApolloClient()\n  const { history } = useRouterContext()\n  const onItemEdit = React.useCallback((item: ID) => {\n    orderModel.changeCartItem(item)\n  }, [])\n\n  const [removeItem] = useMRemoveCartItem()\n\n  const onItemRemove = React.useCallback((item: ID) => {\n    const variables: MRemoveCartItemVariables = {\n      itemId: item,\n      withGoods: cartModel.withGoods,\n      withPresence: cartModel.withPresence,\n    }\n    removeItem(variables, {\n      optimisticResponse: makeOptimisticRemove(variables),\n      context: {\n        noBatch: true,\n      },\n    })\n  }, [])\n\n  const onPlaceOrder = React.useCallback(() => {\n    history.push('/confirm')\n  }, [])\n\n  const onChangeOrder = React.useCallback(() => {\n    history.push('/order')\n  }, [])\n\n  return { cartModel, onItemEdit, onItemRemove, onPlaceOrder, onChangeOrder }\n\n  function makeOptimisticRemove(\n    variables: MRemoveCartItemVariables,\n  ): MRemoveCartItemMutation | undefined {\n    const current = client.readQuery<QCartQuery, QCartVariables>(\n      {\n        query: QCartDocument,\n        variables: {\n          orderId: orderModel.orderId!,\n          withGoods: cartModel.withGoods,\n          withPresence: cartModel.withPresence,\n        },\n      },\n      true,\n    )\n    if (!current) {\n      return undefined\n    }\n    const rejectItem = RM.reject(idPropEq(variables.itemId))\n    return {\n      __typename: 'Mutation',\n      remove: {\n        ...current.order,\n        countWares: current.order.countWares - 1,\n        totalSum: {\n          ...current.order.totalSum,\n          value: -1,\n        },\n        items: variables.withGoods\n          ? rejectItem(current.order.items)\n          : current.order.items,\n        presence: variables.withPresence\n          ? rejectItem(current.order.presence)\n          : current.order.presence,\n      },\n    }\n  }\n}\n","import React from 'react'\nimport { Field, FieldType } from 'react-form'\nimport { Input } from 'reactstrap'\nimport styled from 'styled-components/macro'\n\ninterface IProps {\n  field: FieldType\n  defaultValue?: boolean\n  validate?(value: boolean): string | null\n}\n\nconst CheckboxContainerStyled = styled.div`\n  display: flex;\n  margin-bottom: 0.5rem;\n`\n\nconst CheckboxStyled = styled(Input)`\n  -webkit-appearance: none;\n  -moz-appearance: none;\n  background-color: white;\n  border: 1px solid;\n  border-color: ${({ invalid }: { invalid: boolean }) =>\n    invalid ? 'red' : '#c5c5c5'};\n  width: 2rem;\n  height: 2rem;\n  min-width: 2rem;\n  border-radius: 0.25rem;\n  position: relative;\n  margin: 0;\n  outline: none;\n  &:checked {\n    background-color: white;\n  }\n  &:checked:after {\n    content: '\\\\2714';\n    font-size: 2rem;\n    position: absolute;\n    top: -0.5rem;\n    left: 0.1rem;\n    color: #1d1d1d;\n    overflow: hidden;\n  }\n`\n\nconst LabelStyled = styled.div`\n  margin: 0 0 0 0.8rem;\n  vertical-align: top;\n`\n\nexport const FormInputCheckbox: React.FC<IProps> = ({\n  field,\n  defaultValue = false,\n  validate,\n  children,\n  ...props\n}) => (\n  <Field field={field} defaultValue={defaultValue} validate={validate}>\n    {fieldApi => (\n      <CheckboxContainerStyled>\n        <CheckboxStyled\n          type=\"checkbox\"\n          value={fieldApi.value}\n          onChange={checked => fieldApi.setValue(checked.target.checked)}\n          invalid={fieldApi.touched && Boolean(fieldApi.error)}\n          {...props}\n        />\n        <LabelStyled>{children}</LabelStyled>\n      </CheckboxContainerStyled>\n    )}\n  </Field>\n)\n","import { observable } from 'mobx'\nimport { useObserver } from 'mobx-react-lite'\nimport React, { useCallback, useRef } from 'react'\nimport { Button, Collapse } from 'reactstrap'\nimport styled from 'styled-components/macro'\n\nimport { useRoot } from '../../app/useRoot'\nimport { FormInputCheckbox } from '../../common/FormInputCheckbox'\nimport { i18n } from '../../i18n'\nimport { TAgreement } from '../../models/OrderModel'\n\nconst ButtonStyled = styled(Button)`\n  padding: 0 0.5rem;\n  font-size: 0.8rem;\n  color: darkgray;\n`\n\nconst GdprAgreementStyled = styled.div`\n  font-size: 0.8rem !important;\n  color: darkgray;\n  margin: 0.5rem 0 0.5rem 0;\n  & .row {\n    margin: 0;\n  }\n`\n\nconst hideConfirmed = (agreement: TAgreement) => {\n  if (agreement.isConfirmed) {\n    // it's necessary to hide confirmed agreements like this\n    // because react-form already has validation errors stored\n    // for mandatory ones and is unable to forget it by not rendering field\n    return { style: { display: 'none' } }\n  }\n  return {}\n}\n\nexport const OrderAgreements: React.FC = () => {\n  const descOpen = useRef(observable.array<ID>([])).current\n  const toggleId = useCallback(\n    (id: ID) => () => {\n      if (descOpen.includes(id)) {\n        descOpen.remove(id)\n      } else {\n        descOpen.push(id)\n      }\n    },\n    [],\n  )\n  const { order } = useRoot()\n  return useObserver(() => (\n    <>\n      {order.agreements.map((agreement, idx) => (\n        <div key={agreement.id} {...hideConfirmed(agreement)}>\n          <FormInputCheckbox\n            field={['agreements', idx, 'isConfirmed']}\n            validate={checked =>\n              agreement.isMandatory && !(agreement.isConfirmed || checked)\n                ? 'Agreement is mandatory'\n                : null\n            }\n            data-testid={`orderAgreement__Check__${agreement.id}`}\n          >\n            <span dangerouslySetInnerHTML={{ __html: agreement.name }} />\n            {agreement.isMandatory && ' * '}\n            {agreement.description && (\n              <>\n                <ButtonStyled\n                  color=\"link\"\n                  onClick={toggleId(agreement.id)}\n                  data-testid={`orderAgreement__MoreButton__${agreement.id}`}\n                >\n                  {descOpen.includes(agreement.id)\n                    ? i18n.t`Less`.toLocaleLowerCase()\n                    : i18n.t`More...`.toLocaleLowerCase()}\n                </ButtonStyled>\n                <Collapse isOpen={descOpen.includes(agreement.id)}>\n                  <GdprAgreementStyled\n                    data-testid={`orderAgreement__Info__${agreement.id}`}\n                    dangerouslySetInnerHTML={{\n                      __html: agreement.description,\n                    }}\n                  />\n                </Collapse>\n              </>\n            )}\n          </FormInputCheckbox>\n        </div>\n      ))}\n    </>\n  ))\n}\n"],"sourceRoot":""}