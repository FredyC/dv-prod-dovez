{"version":3,"sources":["common/Responsive.tsx","graph/types.ts","helpers/ramda.ts","graph/index.ts","helpers/gps.ts","segments/cart/CartView.graphql.ts","segments/foodMenu/FoodMenuView.graphql.ts","segments/mobile/MobileCart.graphql.ts","helpers/logger.ts","models/BaseModel.ts","graph/fragments.graphql.ts","helpers/sentry.ts","common/Buttons.tsx","helpers/formats.ts","segments/map/PickupMap.graphql.ts","models/OrderModel.graphql.ts","index.tsx","config.ts","common/WithRoot.tsx","common/Pacman.tsx","app/App.tsx","common/ErrorContainer.tsx","common/PageTitle.tsx","app/ResetPersistenceButton.tsx","common/RouteButton.tsx","app/Router.tsx","common/ThemeSwitchProvider.tsx","createClient.ts","i18n.tsx","graph/buildQuery.tsx","graph/errorHandler.ts","helpers/offline.ts","locale lazy /^/.*/messages/.js$/ groupOptions: {} namespace object","models/RootModel.ts","helpers/persistModel.ts","models/AuthModel.ts","models/BusinessModel.ts","models/BannerModel.ts","models/BusinessModel.graphql.ts","models/ThemeModel.ts","models/ThemeModel.graphql.ts","models/ConfigModel.ts","models/LocationModel.ts","models/LocationModel.graphql.ts","models/MapModel.ts","models/OrderModel.ts","helpers/gopay.ts","graph/buildMutation.tsx","models/UserModel.ts"],"names":["_react","_interopRequireDefault","__webpack_require__","_reactResponsive","_styledComponents","Desktop","props","default","createElement","_extends","minWidth","Mobile","maxAspectRatio","maxWidth","screen","minAspectRatio","children","mobile","desktop","Fragment","className","args","css","CompanyTypeEnum","AddressTypeEnum","CurrencyEnum","OrderStateCategoryTargetEnum","OrderStateCategoryEnum","WeekDayEnum","AllergenEnum","WarePriceTypeEnum","AvailabilityTypeEnum","FieldStateEnum","LanguageEnum","ShiftUserStateEnum","DeviceStateEnum","DeviceTypeEnum","OrderBillingTypeEnum","DeliveryTypeEnum","OrderRecipeStateEnum","OrderOnlineStateEnum","OrderOriginEnum","PaymentGateEnum","PaymentTypeEnum","OrderStateEnum","ZoneTypeEnum","WareUnitEnum","WareCategoryTypeEnum","WareRequirementEnum","MobilePlatformEnum","SubscriptionActionType","SettingTypeEnum","exports","RM","_interopRequireWildcard","_buildMutation","_buildQuery","gps","lat","Number","latitude","lng","longitude","latLng","_graphqlTag","_graph","_fragments","OrderFragment","CartItemFragment","PriceFragment","CartViewQuery","QueryCartView","buildQuery","FoodMenuQuery","CartPresenceFragment","FoodMenuCartPresenceQuery","QueryFoodMenuCartPresence","QueryFoodMenu","_FoodMenuView","OrderMobileFragment","MobileCartQuery","QueryMobileCart","_debug","logMain","logMap","logDebug","logGraph","logError","logAuth","logRouting","logPersist","logOrder","logSentry","logLang","_mobxStateTree","BaseModel","types","model","views","self","log","name","getPath","trim","getType","env","getEnv","client","root","getRoot","JsonAddressFragment","AddressFragment","GeoPointFragment","RecipeFragment","CompanyBranchStatusFragment","PromoCodeFragment","_ravenJs","_verror","_config","_logger","_ramda","cb","sentryDSN","appConfig","config","environment","install","context","userId","token","setUserContext","isGuest","setExtraContext","error","info","isSetup","captureException","extra","showReportDialog","errors","data","captureBreadcrumb","category","level","message","Object","assign","forEach","err","Error","userErrors","filter","propEq","length","lastEventId","title","head","meta","VError","cause","_reactstrap","_Responsive","_RouteButton","PrimaryButton","Button","withConfig","displayName","themeProp","SecondaryButton","PrimaryRoutedButton","RouteButton","MobileHeaderButton","_a","isConfirm","theme","__rest","primary","SelectButtonThemed","selected","mediaDesktop","tertiary","unselected","mediaMobile","tertiaryText","unselectedText","tertiaryHover","unselectedHover","_fp","formatTime","format","parseTime","parse","address","street","houseNumber","city","state","PickupBranchFragment","PickupMapBrandQuery","PickupMapBranchQuery","QueryPickupMapBrand","QueryPickupMapBranch","_CartView","_MobileCart","CartRecipeFragment","OrderCartForRecipeQuery","OrderCartForItemQuery","CreateOrderFragment","CreatePickupOrderMutation","CreateDeliveryOrderMutation","AddToOrderMutation","AddToOrderMobileMutation","ChangeOrderItemMutation","RemoveOrderItemMutation","SubmitOrderMutation","OrderPaymentStatusQuery","VamStatusQuery","_tools","_reactApollo","_reactApolloHooks","_reactDom","_App","_Router","_Pacman","_ThemeSwitchProvider","_WithRoot","_createClient","_sentry","_i18n","_RootModel","createApolloClient","createRootModel","Main","Suspense","fallback","RootProvider","value","ApolloProvider","I18nManager","Router","installSentry","render","document","getElementById","serviceWorker","register","onUpdate","sw","setTimeout","window","confirm","i18n","_","postMessage","navigator","addEventListener","event","location","reload","fallbackLanguage","supportedLanguages","endpoint","persistenceKey","NODE_ENV","PUBLIC_URL","REACT_APP_LOCAL_ENDPOINT","REACT_APP_STAGE","REACT_APP_LOCAL_KEY","redirectOnFail","pageTitleSuffix","_mobxReact","rootContext","createContext","undefined","useRoot","useContext","observe","Observer","Provider","_reactSpinkit","noMargin","style","display","alignSelf","justifyContent","data-testid","marginTop","_react2","_ErrorContainer","_PageTitle","_ResetPersistenceButton","LandscapeMessage","div","DesktopApp","lazy","Promise","all","e","then","t","bind","MobileApp","ErrorContainer","prod","PageTitle","MobileLandscape","Trans","id","ResetPersistenceButton","ErrorBoundaryContainer","ProductionErrorBoundary","dispatchErrorReporting","reportRenderingError","DeveloperErrorBoundary","_reactDocumentTitle","WithRoot","business","isValid","branch","brand","_reactRouterDom","to","replace","buttonProps","Link","_mobxReactLite","useObserver","BrowserRouter","basename","routerBasePath","key","loaded","ThemeProvider","cache","_apolloCacheInmemory","InMemoryCache","dataIdFromObject","o","__typename","loggingLink","_apolloLinkLog","enabled","httpLink","_apolloLinkBatchHttp","BatchHttpLink","uri","credentials","retryLink","_apolloLinkRetry","RetryLink","delay","initial","max","Infinity","jitter","attempts","retryIf","_operation","offlineLink","_apolloLinkQueue","_mobx","autorun","_offline","isNetworkOnline","open","close","createOfflineLink","errorLink","_errorHandler","createErrorLink","link","_apolloLink","ApolloLink","from","_apolloClient","ApolloClient","_core","_hooks","detector","setupI18n","changeLanguage","lang","includes","catalog","load","[object Object]","loadCatalog","activate","detectLanguage","languages","LocaleResolver","UrlDetector","NavigatorDetector","LanguageOnlyTransformer","getLocales","join","find","loc","isReady","setReady","useState","language","useAsyncEffect","__awaiter","I18nProvider","query","renderFragment","renderLoading","renderError","Query","result","loading","reportError","_apolloLinkError","errorHandler","graphQLErrors","networkError","operation","reportFailingQuery","operationName","variables","map","locations","path","onError","isOnline","change","oldValue","newValue","observable","box","onLine","set","get","./cs/messages.js","./de/messages.js","./en-dev/messages.js","./en/messages.js","./pl/messages.js","./sk/messages.js","webpackAsyncContext","req","ids","resolve","code","keys","module","RootModel","create","fetch","geolocation","init","_persistModel","_AuthModel","_BaseModel","_BusinessModel","_ConfigModel","_LocationModel","_MapModel","_OrderModel","_UserModel","named","auth","optional","AuthModel","BusinessModel","ConfigModel","MapModel","order","OrderModel","LocationModel","user","UserModel","persistedModels","actions","initialSnapshot","getSnapshot","snapshot","applySnapshot","attachAuthLinkToClient","persistModel","queryBusiness","checkPaymentStatus","modelName","stateKey","writeState","_localforage","setItem","getItem","removeItem","onSnapshot","_apolloLinkContext","maybeNull","string","getClientHeaders","Authorization","identifyGuest","fetching","authLink","setContext","fetchToken","authenticate","String","headers","concat","preProcessSnapshot","url","Accept","response","json","_types","_BannerModel","_ThemeModel","ThemeModel","banners","BannerModel","volatile","isBrand","isMobileApp","country","orderOrigin","Web","branchId","companyId","company","brandId","requestedCode","REACT_APP_BUSINESS_CODE","URL","href","searchParams","codeParam","lookup","knownBasePath","orderCancel","BusinessLookupQuery","updateFromLookup","stylesQuery","queryStyles","setSentryContext","has","_dateFns","identifier","closedAt","maybe","Date","installedAt","shouldBeVisible","differenceInDays","Boolean","CompanyBranchFragment","_color","storeLogo","storeLogoMobile","backgroundCart","secondary","secondaryHover","calcHoverColor","styles","active","main","mainSecondary","CompanyBranchStyleQuery","applyStyle","companyBranch","inputColor","lighten","hsl","orderItemsMax","_formats","_gps","number","searchValue","isOpen","isResolved","isStreetAddress","inDeliveryLocation","geolocationDisabled","geolocationPoint","isResolving","isGeolocationAvailable","hasLocation","hasAddress","isDeliveryAddress","hasFinishedSearch","geoPoint","this","resolutionTarget","gpsToLatLng","finalAddress","formatAddress","isValidAddress","setLocation","gpsCoordinates","resolver","vars","setIsResolving","ResolveLocationQuery","setResolutionResult","resolveLocation","clearAddress","userLocation","point","getCurrentPosition","coords","accuracy","useGeolocationResult","disableGeolocation","alert","enableHighAccuracy","maximumAge","LocationResolutionFragment","GPSCzechia","zoom","mapRef","clickPoint","center","ref","getZoom","getCenter","radiusMeters","panTo","ev","latLngToGps","_gopay","_PickupMap","orderId","orderMethod","Messenger","payment","Gopay","deliverAt","firstname","lastname","email","phone","phonePrefix","note","isSubmitting","isGoPayChecking","submitErrors","agreements","lastActiveRecipeId","isVamInitialized","timePickerOpen","hasOrder","fragmentOrderId","usingDeliveryOrderMethod","usingPickupOrderMethod","Pickup","hasErrors","defaultPhonePrefix","getSubmitVariables","formValues","customer","firstName","lastName","emails","phones","paymentGate","toISOString","prop","method","overrideThemeForBranch","checking","Array","isArray","recipeId","fetchPolicy","status","values","shouldRememberForm","mutate","mutation","orderCreated","initVam","sideDishes","current","readFragment","fragment","fragmentName","recipe","optimisticResponse","createOrderRecipe","countWares","items","price","formattedValue","automatic","itemId","destroyOrderRecipe","item","input","useAgreements","vamStatus","vamFailed","submitOrder","rememberFormValues","refetchQueries","submitFailed","submitResult","finishOrder","Cash","submitFinished","gopayUrl","executeGoPayPayment","goPayStatusCheck","paymentStatus","queryPaymentStatus","isSuccess","parsedUrl","when","checkDelay","clearTimeout","orderPaid","search","pathname","toString","scriptUrl","embedScriptSandbox","embedScript","_scriptjs","loadScript","options","gatewayUrl","inline","getOptions","checkout","Mutation","rememberForm","boolean","closingTimeAlertHidden","orderLimitAlertHidden"],"mappings":"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","file":"static/js/main.745b3fb0.chunk.js","sourcesContent":["import React from 'react'\nimport ReactResponsive from 'react-responsive'\nimport { css } from 'styled-components'\n\nexport const Desktop = props => <ReactResponsive {...props} minWidth={768} />\nexport const Mobile = props => (\n  <ReactResponsive {...props} maxAspectRatio=\"14/9\" maxWidth={767} />\n)\nexport const MobileLandscape = props => (\n  <ReactResponsive\n    {...props}\n    screen={true}\n    minAspectRatio=\"14/9\"\n    maxWidth={767}\n  />\n)\n\ninterface IResponsiveProps {\n  desktop: string\n  mobile: string\n}\n\nexport const Responsive: React.SFC<IResponsiveProps> = ({\n  children,\n  mobile,\n  desktop,\n}) => (\n  <>\n    <Desktop className={desktop} children={children} />\n    <Mobile className={mobile} children={children} />\n  </>\n)\n\nexport const mediaDesktop = (...args) => css`\n  @media (min-width: ${768 / 16}em) {\n    // @ts-ignore\n    ${css(...args)};\n  }\n`\n\nexport const mediaMobile = (...args) => css`\n  @media (max-width: ${767 / 16}em) {\n    // @ts-ignore\n    ${css(...args)};\n  }\n`\n","export interface InputOrderIndex {\n  readonly companyBranches?: ReadonlyArray<string> | null\n\n  readonly user?: string | null\n\n  readonly orderStatesAND?: ReadonlyArray<OrderStateEnum> | null\n\n  readonly orderStatesOR?: ReadonlyArray<OrderStateEnum> | null\n\n  readonly orderStateCategoriesOR?: ReadonlyArray<OrderStateCategoryEnum> | null\n\n  readonly orderStateCategoryTarget?: OrderStateCategoryTargetEnum | null\n\n  readonly currency?: CurrencyEnum | null\n\n  readonly location?: InputLocationIndex | null\n\n  readonly stateChangeSince?: string | null\n\n  readonly includeOldFinished?: boolean | null\n}\n\nexport interface InputLocationIndex {\n  readonly tableNumber?: number | null\n}\n\nexport interface InputPaginationParams {\n  readonly fromIndex: number\n\n  readonly toIndex: number\n}\n\nexport interface InputVamStatus {\n  readonly email?: string | null\n\n  readonly phone?: string | null\n\n  readonly firstname?: string | null\n\n  readonly lastname?: string | null\n\n  readonly orderId: string\n}\n\nexport interface InputOrderRecipeCreate {\n  readonly order: string\n\n  readonly recipe: string\n\n  readonly orderRecipeState?: OrderRecipeStateEnum | null\n\n  readonly parent?: string | null\n\n  readonly sideDishes?: ReadonlyArray<string> | null\n\n  readonly associatedRecipes?: ReadonlyArray<string> | null\n\n  readonly amount?: number | null\n}\n\nexport interface InputOrderRecipeUpdate {\n  readonly order?: string | null\n\n  readonly recipe?: string | null\n\n  readonly orderRecipeState?: string | null\n\n  readonly parent?: string | null\n\n  readonly sideDishes?: ReadonlyArray<string> | null\n}\n\nexport interface InputOrderDeliveryCreate {\n  readonly companyBranch?: string | null\n\n  readonly brand?: string | null\n\n  readonly orderOrigin: OrderOriginEnum\n\n  readonly gps: InputGeoPointCreate\n\n  readonly deliveryType?: DeliveryTypeEnum | null\n}\n\nexport interface InputGeoPointCreate {\n  readonly latitude: number\n\n  readonly longitude: number\n}\n\nexport interface InputExternalOrderCreate {\n  readonly companyBranch: string\n\n  readonly orderOrigin: OrderOriginEnum\n\n  readonly deliverAt: string\n\n  readonly gps?: InputGeoPointCreate | null\n\n  readonly warePriceType?: WarePriceTypeEnum | null\n\n  readonly deliveryType?: DeliveryTypeEnum | null\n\n  readonly orderRecipes?: ReadonlyArray<InputOrderRecipeCreates> | null\n\n  readonly customer?: InputCustomerCreate | null\n}\n\nexport interface InputOrderRecipeCreates {\n  readonly recipe: string\n\n  readonly sideDishes?: ReadonlyArray<string> | null\n\n  readonly associatedRecipes?: ReadonlyArray<string> | null\n\n  readonly amount?: number | null\n}\n\nexport interface InputCustomerCreate {\n  readonly firstName?: string | null\n\n  readonly lastName?: string | null\n\n  readonly emails?: ReadonlyArray<InputEmailCreate> | null\n\n  readonly phones?: ReadonlyArray<InputPhoneCreate> | null\n}\n\nexport interface InputEmailCreate {\n  readonly email: string\n\n  readonly description?: string | null\n\n  readonly default?: boolean | null\n}\n\nexport interface InputPhoneCreate {\n  readonly phone: string\n\n  readonly description?: string | null\n\n  readonly default?: boolean | null\n}\n\nexport interface InputOrderCreate {\n  readonly companyBranch: string\n\n  readonly orderOrigin: OrderOriginEnum\n\n  readonly warePriceType: WarePriceTypeEnum\n\n  readonly deliveryType?: DeliveryTypeEnum | null\n\n  readonly language?: LanguageEnum | null\n\n  readonly customer: InputCustomerCreate\n\n  readonly gps?: InputGeoPointCreate | null\n\n  readonly notification?: InputNotificationCreate | null\n\n  readonly note?: string | null\n\n  readonly deliverAt?: string | null\n\n  readonly location?: InputLocationCreate | null\n\n  readonly callEventId?: string | null\n}\n\nexport interface InputNotificationCreate {\n  readonly sms?: string | null\n\n  readonly chrome?: { [key: string]: string | number } | null\n\n  readonly firebase?: { [key: string]: string | number } | null\n}\n\nexport interface InputLocationCreate {\n  readonly tableNumber?: number | null\n}\n\nexport interface InputOrderPickupCreate {\n  readonly companyBranch: string\n\n  readonly orderOrigin: OrderOriginEnum\n}\n\nexport interface InputOrderPaymentMethodsCreate {\n  readonly paymentType: PaymentTypeEnum\n\n  readonly paymentGate: PaymentGateEnum\n\n  readonly price: InputCurrencyCreate\n}\n\nexport interface InputCurrencyCreate {\n  readonly value: number\n\n  readonly currency?: CurrencyEnum | null\n}\n\nexport interface InputOrderFinish {\n  readonly customer?: InputCustomerCreate | null\n  /** payment method used to finalize order */\n  readonly paymentMethod?: PaymentTypeEnum | null\n  /** payment gate used to finalize order */\n  readonly paymentGate?: PaymentGateEnum | null\n\n  readonly deliverAt?: string | null\n\n  readonly note?: string | null\n\n  readonly confirmedAgreements?: ReadonlyArray<string> | null\n}\n\nexport interface InputOrderUpdate {\n  readonly deliveryType?: DeliveryTypeEnum | null\n\n  readonly language?: LanguageEnum | null\n\n  readonly customer?: InputCustomerCreate | null\n\n  readonly gps?: InputGeoPointCreate | null\n\n  readonly notification?: InputNotificationCreate | null\n\n  readonly note?: string | null\n\n  readonly deliverAt?: string | null\n\n  readonly location?: InputLocationCreate | null\n\n  readonly warePriceType?: WarePriceTypeEnum | null\n}\n\nexport interface InputAvailabilityCreate {\n  readonly availabilityType?: string | null\n\n  readonly dateFrom?: string | null\n\n  readonly timeFrom?: string | null\n\n  readonly dateTo?: string | null\n\n  readonly timeTo?: string | null\n\n  readonly available?: boolean | null\n\n  readonly periodic?: boolean | null\n\n  readonly weekDay?: WeekDayEnum | null\n}\n\nexport interface InputAvailabilityUpdate {\n  readonly availabilityType?: string | null\n\n  readonly dateFrom?: string | null\n\n  readonly timeFrom?: string | null\n\n  readonly dateTo?: string | null\n\n  readonly timeTo?: string | null\n\n  readonly available?: boolean | null\n\n  readonly periodic?: boolean | null\n\n  readonly weekDay?: WeekDayEnum | null\n}\n\nexport interface InputBusinessHourCreate {\n  readonly weekDay: WeekDayEnum\n\n  readonly openAt: string\n\n  readonly closeAt: string\n\n  readonly smsLabel?: InputLabelCreate | null\n\n  readonly webLabel?: InputLabelCreate | null\n}\n\nexport interface InputLabelCreate {\n  readonly translations: ReadonlyArray<InputLabelTranslation>\n\n  readonly enabled?: boolean | null\n}\n\nexport interface InputLabelTranslation {\n  readonly language: LanguageEnum\n\n  readonly content: string\n}\n\nexport interface InputBusinessHourSpecificDateCreate {\n  readonly companyBranch: string\n\n  readonly openAt?: string | null\n\n  readonly closeAt?: string | null\n\n  readonly specificDate: string\n\n  readonly closed?: boolean | null\n\n  readonly smsLabel?: InputLabelCreate | null\n\n  readonly webLabel?: InputLabelCreate | null\n\n  readonly closedNote?: string | null\n}\n\nexport interface InputCompanyBranchCreate {\n  readonly currencies?: ReadonlyArray<CurrencyEnum> | null\n\n  readonly name: string\n\n  readonly enabled?: boolean | null\n\n  readonly brand: string\n\n  readonly internalNumber: string\n}\n\nexport interface InputCompanyCreate {\n  readonly name: string\n\n  readonly number: string\n\n  readonly vatIdent: string\n\n  readonly account: string\n\n  readonly companyType: CompanyTypeEnum\n}\n\nexport interface InputIngredientCreate {\n  readonly recipe: string\n\n  readonly stockItem: string\n\n  readonly quantity: number\n}\n\nexport interface InputLabelUpdate {\n  readonly translations?: ReadonlyArray<InputLabelTranslation> | null\n\n  readonly enabled?: boolean | null\n}\n\nexport interface InputOrderPaymentMethodCreate {\n  readonly order: string\n\n  readonly paymentMethod: string\n\n  readonly price: InputCurrencyCreate\n}\n\nexport interface InputPaymentMethodIndex {\n  readonly companyBranch: string\n\n  readonly orderOrigin: OrderOriginEnum\n\n  readonly warePriceType: WarePriceTypeEnum\n\n  readonly paymentType: PaymentTypeEnum\n\n  readonly paymentGate: PaymentGateEnum\n\n  readonly enabled?: boolean | null\n}\n\nexport interface InputPromoCodeIndex {\n  readonly companyBranch?: string | null\n\n  readonly enabled?: boolean | null\n}\n\nexport interface InputRecipeCreate {\n  readonly companyBranch: string\n\n  readonly nameLabel: string\n\n  readonly descriptionLabel?: string | null\n\n  readonly internalNote?: string | null\n\n  readonly wareCategoryType: WareCategoryTypeEnum\n\n  readonly enabled?: boolean | null\n\n  readonly ingredients?: ReadonlyArray<InputRecipeIngredient> | null\n\n  readonly wareCategories?: ReadonlyArray<string> | null\n\n  readonly sideDishCategories?: ReadonlyArray<string> | null\n\n  readonly availabilities?: ReadonlyArray<InputAvailabilityCreate> | null\n\n  readonly video?: string | null\n\n  readonly code?: string | null\n\n  readonly ware?: string | null\n\n  readonly prices: ReadonlyArray<InputRecipePriceCreate>\n\n  readonly associatedRecipes?: ReadonlyArray<InputRecipeRelationCreate> | null\n}\n\nexport interface InputRecipeIngredient {\n  readonly stockItem: string\n\n  readonly quantity: number\n}\n\nexport interface InputRecipePriceCreate {\n  readonly warePriceType: WarePriceTypeEnum\n\n  readonly price: InputCurrencyCreate\n\n  readonly vat: string\n}\n\nexport interface InputRecipeRelationCreate {\n  readonly associatedRecipe: string\n\n  readonly warePriceType: WarePriceTypeEnum\n}\n\nexport interface InputRecipeUpdate {\n  readonly ware?: string | null\n\n  readonly nameLabel?: string | null\n\n  readonly descriptionLabel?: string | null\n\n  readonly enabled?: boolean | null\n\n  readonly internalNote?: string | null\n\n  readonly video?: string | null\n\n  readonly code?: string | null\n\n  readonly ingredients?: ReadonlyArray<InputRecipeIngredient> | null\n\n  readonly wareCategories?: ReadonlyArray<string> | null\n\n  readonly sideDishCategories?: ReadonlyArray<string> | null\n\n  readonly prices?: ReadonlyArray<InputRecipePriceCreate> | null\n\n  readonly associatedRecipes?: ReadonlyArray<InputRecipeRelationCreate> | null\n}\n\nexport interface InputShiftCreate {\n  readonly companyBranch: string\n\n  readonly beginAt: string\n\n  readonly endAt: string\n\n  readonly capacity?: number | null\n\n  readonly placeCode: string\n}\n\nexport interface InputStockItemCreate {\n  readonly companyBranch: string\n\n  readonly wareUnit: WareUnitEnum\n\n  readonly label: string\n\n  readonly code: string\n\n  readonly allowNegative: FieldStateEnum\n\n  readonly plu?: string | null\n\n  readonly quantity?: number | null\n\n  readonly allergens?: ReadonlyArray<AllergenEnum> | null\n\n  readonly note?: string | null\n}\n\nexport interface InputStockItemUpdate {\n  readonly quantity?: number | null\n\n  readonly label?: string | null\n\n  readonly code?: string | null\n\n  readonly plu?: string | null\n\n  readonly wareUnit?: WareUnitEnum | null\n\n  readonly allergens?: ReadonlyArray<AllergenEnum> | null\n\n  readonly note?: string | null\n\n  readonly allowNegative?: FieldStateEnum | null\n}\n\nexport interface InputTransportationDeviceCreate {\n  readonly companyBranch: string\n\n  readonly deviceType: string\n\n  readonly deviceState: string\n\n  readonly idNumber: string\n}\n\nexport interface InputUserUpdate {\n  readonly language?: LanguageEnum | null\n}\n\nexport interface InputWareCategoryCreate {\n  readonly companyBranch: string\n\n  readonly wareCategoryType: WareCategoryTypeEnum\n\n  readonly pictogram?: string | null\n\n  readonly nameLabel: string\n\n  readonly internalNoteLabel?: string | null\n\n  readonly wareRequirement?: WareRequirementEnum | null\n\n  readonly enabled?: boolean | null\n\n  readonly public?: boolean | null\n\n  readonly availabilities?: ReadonlyArray<InputAvailabilityCreate> | null\n\n  readonly maxRecipesCount?: number | null\n\n  readonly recipes?: ReadonlyArray<string> | null\n}\n\nexport interface InputWareCategoryUpdate {\n  readonly companyBranch?: string | null\n\n  readonly pictogram?: string | null\n\n  readonly nameLabel?: string | null\n\n  readonly internalNoteLabel?: string | null\n\n  readonly wareRequirement?: WareRequirementEnum | null\n\n  readonly wareCategoryType?: WareCategoryTypeEnum | null\n\n  readonly enabled?: boolean | null\n\n  readonly public?: boolean | null\n\n  readonly maxRecipesCount?: number | null\n\n  readonly recipes?: ReadonlyArray<string> | null\n}\n\nexport interface InputWareCreate {\n  readonly companyBranch: string\n\n  readonly nameLabel: InputLabelCreate\n\n  readonly descriptionLabel: InputLabelCreate\n\n  readonly code?: string | null\n\n  readonly internalCode?: string | null\n\n  readonly enabled?: boolean | null\n\n  readonly availabilities?: ReadonlyArray<InputAvailabilityCreate> | null\n}\n\nexport interface InputWareUpdate {\n  readonly code?: string | null\n\n  readonly internalCode?: string | null\n\n  readonly companyBranch?: string | null\n\n  readonly nameLabel?: InputLabelUpdate | null\n\n  readonly descriptionLabel?: InputLabelUpdate | null\n\n  readonly enabled?: boolean | null\n}\n\nexport interface InputZoneCreate {\n  readonly companyBranch: string\n\n  readonly name?: string | null\n\n  readonly zoneType?: ZoneTypeEnum | null\n\n  readonly zoneColor?: string | null\n\n  readonly enabled?: boolean | null\n\n  readonly geoPolygon?: ReadonlyArray<InputGeoPointCreate> | null\n\n  readonly availability?: InputAvailabilityCreate | null\n\n  readonly priceRangeRules?: ReadonlyArray<PriceRangeRuleCreate> | null\n\n  readonly minimalOrderPrice?: InputCurrencyCreate | null\n}\n\nexport interface PriceRangeRuleCreate {\n  readonly price: InputCurrencyCreate\n\n  readonly toPrice: InputCurrencyCreate\n}\n\nexport interface InputZoneUpdate {\n  readonly companyBranch?: string | null\n\n  readonly name?: string | null\n\n  readonly zoneColor?: string | null\n\n  readonly enabled?: boolean | null\n\n  readonly geoPolygon?: ReadonlyArray<InputGeoPointCreate> | null\n\n  readonly availability?: InputAvailabilityUpdate | null\n\n  readonly priceRangeRules?: ReadonlyArray<PriceRangeRuleCreate> | null\n\n  readonly minimalOrderPrice?: InputCurrencyCreate | null\n}\n/** Possible company types */\nexport enum CompanyTypeEnum {\n  Client = 'CLIENT',\n  Affiliate = 'AFFILIATE',\n  Brand = 'BRAND',\n}\n/** Possible address types */\nexport enum AddressTypeEnum {\n  Business = 'BUSINESS',\n  Premises = 'PREMISES',\n  MainAddress = 'MAIN_ADDRESS',\n}\n/** Possible currency types */\nexport enum CurrencyEnum {\n  Czk = 'CZK',\n  Hop = 'HOP',\n  Eur = 'EUR',\n  Usd = 'USD',\n}\n/** Possible order state category targets */\nexport enum OrderStateCategoryTargetEnum {\n  Backend = 'BACKEND',\n  FeAdmin = 'FE_ADMIN',\n}\n/** Possible order state categories */\nexport enum OrderStateCategoryEnum {\n  Payment = 'PAYMENT',\n  Notification = 'NOTIFICATION',\n  Reclamation = 'RECLAMATION',\n  Delivery = 'DELIVERY',\n  Cancel = 'CANCEL',\n  Main = 'MAIN',\n  Production = 'PRODUCTION',\n  NewOrders = 'NEW_ORDERS',\n  Preparing = 'PREPARING',\n  OnWay = 'ON_WAY',\n  Finished = 'FINISHED',\n  ReadyToDeliver = 'READY_TO_DELIVER',\n  InCart = 'IN_CART',\n  Bills = 'BILLS',\n}\n/** Possible week day types */\nexport enum WeekDayEnum {\n  Monday = 'MONDAY',\n  Tuesday = 'TUESDAY',\n  Wednesday = 'WEDNESDAY',\n  Thursday = 'THURSDAY',\n  Friday = 'FRIDAY',\n  Saturday = 'SATURDAY',\n  Sunday = 'SUNDAY',\n}\n/** Possible allergens */\nexport enum AllergenEnum {\n  CerealsWithGlutten = 'CEREALS_WITH_GLUTTEN',\n  Shellfish = 'SHELLFISH',\n  Egg = 'EGG',\n  Fish = 'FISH',\n  Peanut = 'PEANUT',\n  Soybeans = 'SOYBEANS',\n  Milk = 'MILK',\n  Nut = 'NUT',\n  Celery = 'CELERY',\n  Mustard = 'MUSTARD',\n  Sesame = 'SESAME',\n  Sulfurous = 'SULFUROUS',\n  Lupin = 'LUPIN',\n  Molluscs = 'MOLLUSCS',\n}\n/** Possible ware price types */\nexport enum WarePriceTypeEnum {\n  Delivery = 'DELIVERY',\n  Inhouse = 'INHOUSE',\n}\n/** Possible availability types */\nexport enum AvailabilityTypeEnum {\n  Main = 'MAIN',\n}\n/** Enum values of field */\nexport enum FieldStateEnum {\n  Default = 'DEFAULT',\n  Enabled = 'ENABLED',\n  Disabled = 'DISABLED',\n}\n/** Possible language */\nexport enum LanguageEnum {\n  Cs = 'CS',\n  Sk = 'SK',\n  En = 'EN',\n}\n/** Possible shift user states */\nexport enum ShiftUserStateEnum {\n  Accepted = 'ACCEPTED',\n  Rejected = 'REJECTED',\n  WaitingForResponse = 'WAITING_FOR_RESPONSE',\n  Unresolved = 'UNRESOLVED',\n}\n/** Possible device states */\nexport enum DeviceStateEnum {\n  Working = 'WORKING',\n  Broken = 'BROKEN',\n  Busy = 'BUSY',\n  Free = 'FREE',\n}\n/** Possible device types */\nexport enum DeviceTypeEnum {\n  Car = 'CAR',\n  Plane = 'PLANE',\n  Dron = 'DRON',\n}\n/** Possible order billing types */\nexport enum OrderBillingTypeEnum {\n  PriceSum = 'PRICE_SUM',\n  Commission = 'COMMISSION',\n  Fee = 'FEE',\n  RewardResult = 'REWARD_RESULT',\n  Affiliate = 'AFFILIATE',\n}\n/** Possible delivery types */\nexport enum DeliveryTypeEnum {\n  Pickup = 'PICKUP',\n  Messenger = 'MESSENGER',\n  Dron = 'DRON',\n  Mail = 'MAIL',\n}\n/** Possible order recipe states */\nexport enum OrderRecipeStateEnum {\n  Fresh = 'FRESH',\n  Preparing = 'PREPARING',\n  Cooked = 'COOKED',\n  Canceled = 'CANCELED',\n  Completed = 'COMPLETED',\n}\n/** Possible order online states */\nexport enum OrderOnlineStateEnum {\n  Created = 'CREATED',\n  Pending = 'PENDING',\n  Paid = 'PAID',\n  Canceled = 'CANCELED',\n  Completed = 'COMPLETED',\n}\n/** Possible order origins */\nexport enum OrderOriginEnum {\n  Web = 'WEB',\n  DameJidlo = 'DAME_JIDLO',\n  MobilAndroid = 'MOBIL_ANDROID',\n  MobilIos = 'MOBIL_IOS',\n  Staff = 'STAFF',\n  Wifi = 'WIFI',\n  Baker = 'BAKER',\n  WebPartner = 'WEB_PARTNER',\n  Enigoo = 'ENIGOO',\n  Mpizza = 'MPIZZA',\n  Minisite = 'MINISITE',\n  AffiliatePizzaRozvoz = 'AFFILIATE_PIZZA_ROZVOZ',\n  AffiliateRozvozPizzyZdarma = 'AFFILIATE_ROZVOZ_PIZZY_ZDARMA',\n  AffiliateRozvozJidla = 'AFFILIATE_ROZVOZ_JIDLA',\n  CallCenter = 'CALL_CENTER',\n}\n/** Possible payment gates */\nexport enum PaymentGateEnum {\n  Gopay = 'GOPAY',\n  Paypal = 'PAYPAL',\n  Credit = 'CREDIT',\n  Cash = 'CASH',\n}\n/** Possible payment types */\nexport enum PaymentTypeEnum {\n  Cash = 'CASH',\n  Credit = 'CREDIT',\n  Voucher = 'VOUCHER',\n}\n/** Possible order states */\nexport enum OrderStateEnum {\n  InCart = 'IN_CART',\n  Received = 'RECEIVED',\n  InProgress = 'IN_PROGRESS',\n  Finished = 'FINISHED',\n  Reclamation = 'RECLAMATION',\n  ReclamationHandled = 'RECLAMATION_HANDLED',\n  Unpaid = 'UNPAID',\n  Paid = 'PAID',\n  ByCreditCard = 'BY_CREDIT_CARD',\n  Refund = 'REFUND',\n  ShouldBePaid = 'SHOULD_BE_PAID',\n  CustomerNotified = 'CUSTOMER_NOTIFIED',\n  New = 'NEW',\n  Online = 'ONLINE',\n  Evaluated = 'EVALUATED',\n  NotEvaluated = 'NOT_EVALUATED',\n  Shown = 'SHOWN',\n  Accepted = 'ACCEPTED',\n  ReadyToProduce = 'READY_TO_PRODUCE',\n  InProduce = 'IN_PRODUCE',\n  Made = 'MADE',\n  ReadyToDeliver = 'READY_TO_DELIVER',\n  OnWay = 'ON_WAY',\n  StuckOnRoad = 'STUCK_ON_ROAD',\n  Late = 'LATE',\n  Delivered = 'DELIVERED',\n  Cause = 'CAUSE',\n  Handover = 'HANDOVER',\n  WaitingForCustomer = 'WAITING_FOR_CUSTOMER',\n  CustomerDidNotCome = 'CUSTOMER_DID_NOT_COME',\n  DeliverRejected = 'DELIVER_REJECTED',\n  CancelOnWay = 'CANCEL_ON_WAY',\n  Canceled = 'CANCELED',\n  BranchCancel = 'BRANCH_CANCEL',\n  CustomerCancel = 'CUSTOMER_CANCEL',\n  BillPassed = 'BILL_PASSED',\n  BillPrinted = 'BILL_PRINTED',\n  KitchenTicketPrinted = 'KITCHEN_TICKET_PRINTED',\n}\n/** Possible zone types */\nexport enum ZoneTypeEnum {\n  Area = 'AREA',\n  Table = 'TABLE',\n  Sector = 'SECTOR',\n}\n/** Possible ware unit types */\nexport enum WareUnitEnum {\n  Kilogram = 'KILOGRAM',\n  Gram = 'GRAM',\n  Litre = 'LITRE',\n  Piece = 'PIECE',\n}\n/** Possible ware category types */\nexport enum WareCategoryTypeEnum {\n  Main = 'MAIN',\n  SideDish = 'SIDE_DISH',\n  Cover = 'COVER',\n  Mixin = 'MIXIN',\n}\n/** Possible ware requirement types */\nexport enum WareRequirementEnum {\n  NoLimit = 'NO_LIMIT',\n  Optional = 'OPTIONAL',\n  MaxOne = 'MAX_ONE',\n  Mandatory = 'MANDATORY',\n}\n/** Possible mobile plantforms */\nexport enum MobilePlatformEnum {\n  Android = 'ANDROID',\n  Ios = 'IOS',\n}\n/** Possible action types of subscription */\nexport enum SubscriptionActionType {\n  Create = 'CREATE',\n  Update = 'UPDATE',\n  Destroy = 'DESTROY',\n  Remove = 'REMOVE',\n}\n/** Possible setting types */\nexport enum SettingTypeEnum {\n  Confirmation = 'CONFIRMATION',\n  AdminOrderListing = 'ADMIN_ORDER_LISTING',\n  Rules = 'RULES',\n  Url = 'URL',\n  Graphic = 'GRAPHIC',\n  Options = 'OPTIONS',\n}\n\n/** Date in format YYYY-MM-DD */\nexport type Date = string\n\n/** Time without date (HH:MM:SS) */\nexport type Time = string\n\n/** Date in format iso 8601 format */\nexport type DateTime = string\n\n/** Data in json format */\nexport type Json = { [key: string]: string | number }\n\n// ====================================================\n// Documents\n// ====================================================\n\nexport namespace GBusinessLookup {\n  export type Variables = {\n    readonly code?: string | null\n    readonly url?: string | null\n  }\n\n  export type Query = {\n    readonly __typename?: 'Query'\n\n    readonly lookup: Lookup\n  }\n\n  export type Lookup = {\n    readonly __typename?: 'CompanyBrandLookUp'\n\n    readonly branch: Branch | null\n\n    readonly isBrand: boolean\n\n    readonly isMobileApp: boolean\n\n    readonly knownBasePath: string\n\n    readonly orderOrigin: OrderOriginEnum\n  }\n\n  export type Branch = GCompanyBranch.Fragment\n}\n\nexport namespace GResolveLocation {\n  export type Variables = {\n    readonly brandId?: string | null\n    readonly branchId?: string | null\n    readonly address?: string | null\n    readonly latitude?: number | null\n    readonly longitude?: number | null\n  }\n\n  export type Query = {\n    readonly __typename?: 'Query'\n\n    readonly resolveLocation: ResolveLocation\n  }\n\n  export type ResolveLocation = GLocationResolution.Fragment\n}\n\nexport namespace GOrderCartForRecipe {\n  export type Variables = {\n    readonly recipeId: string\n  }\n\n  export type Query = {\n    readonly __typename?: 'Query'\n\n    readonly recipe: Recipe\n  }\n\n  export type Recipe = GCartRecipe.Fragment\n}\n\nexport namespace GOrderCartForItem {\n  export type Variables = {\n    readonly itemId: string\n  }\n\n  export type Query = {\n    readonly __typename?: 'Query'\n\n    readonly item: Item\n  }\n\n  export type Item = {\n    readonly __typename?: 'OrderRecipe'\n\n    readonly id: string\n\n    readonly recipe: Recipe\n\n    readonly sideDishes: ReadonlyArray<SideDishes>\n  }\n\n  export type Recipe = GCartRecipe.Fragment\n\n  export type SideDishes = {\n    readonly __typename?: 'OrderRecipe'\n\n    readonly id: string\n\n    readonly recipe: _Recipe\n  }\n\n  export type _Recipe = {\n    readonly __typename?: 'Recipe'\n\n    readonly id: string\n  }\n}\n\nexport namespace GCreatePickupOrder {\n  export type Variables = {\n    readonly branchId: string\n    readonly orderOrigin: OrderOriginEnum\n  }\n\n  export type Mutation = {\n    readonly __typename?: 'Mutation'\n\n    readonly order: Order\n  }\n\n  export type Order = GCreateOrder.Fragment\n}\n\nexport namespace GCreateDeliveryOrder {\n  export type Variables = {\n    readonly brandId?: string | null\n    readonly branchId?: string | null\n    readonly gps: InputGeoPointCreate\n    readonly orderOrigin: OrderOriginEnum\n  }\n\n  export type Mutation = {\n    readonly __typename?: 'Mutation'\n\n    readonly order: Order\n  }\n\n  export type Order = GCreateOrder.Fragment\n}\n\nexport namespace GAddToOrder {\n  export type Variables = {\n    readonly orderId: string\n    readonly recipeId: string\n    readonly sideDishes?: ReadonlyArray<string> | null\n  }\n\n  export type Mutation = {\n    readonly __typename?: 'Mutation'\n\n    readonly createOrderRecipe: CreateOrderRecipe\n  }\n\n  export type CreateOrderRecipe = GOrder.Fragment\n}\n\nexport namespace GAddToOrderMobile {\n  export type Variables = {\n    readonly orderId: string\n    readonly recipeId: string\n    readonly sideDishes?: ReadonlyArray<string> | null\n  }\n\n  export type Mutation = {\n    readonly __typename?: 'Mutation'\n\n    readonly createOrderRecipe: CreateOrderRecipe\n  }\n\n  export type CreateOrderRecipe = GOrderMobile.Fragment\n}\n\nexport namespace GChangeOrderItem {\n  export type Variables = {\n    readonly orderId: string\n    readonly itemId: string\n    readonly sideDishes?: ReadonlyArray<string> | null\n  }\n\n  export type Mutation = {\n    readonly __typename?: 'Mutation'\n\n    readonly updateOrderRecipe: UpdateOrderRecipe\n  }\n\n  export type UpdateOrderRecipe = GOrder.Fragment\n}\n\nexport namespace GRemoveOrderItem {\n  export type Variables = {\n    readonly itemId: string\n  }\n\n  export type Mutation = {\n    readonly __typename?: 'Mutation'\n\n    readonly destroyOrderRecipe: DestroyOrderRecipe\n  }\n\n  export type DestroyOrderRecipe = GOrder.Fragment\n}\n\nexport namespace GSubmitOrder {\n  export type Variables = {\n    readonly orderId: string\n    readonly customer?: InputCustomerCreate | null\n    readonly note?: string | null\n    readonly paymentGate: PaymentGateEnum\n    readonly deliverAt?: string | null\n    readonly agreements?: ReadonlyArray<string> | null\n  }\n\n  export type Mutation = {\n    readonly __typename?: 'Mutation'\n\n    readonly finishOrder: FinishOrder\n  }\n\n  export type FinishOrder = {\n    readonly __typename?: 'FinishedOrder'\n\n    readonly userErrors: ReadonlyArray<string>\n\n    readonly gopayUrl: string | null\n  }\n}\n\nexport namespace GOrderPaymentStatus {\n  export type Variables = {\n    readonly orderId: string\n  }\n\n  export type Query = {\n    readonly __typename?: 'Query'\n\n    readonly status: Status\n  }\n\n  export type Status = {\n    readonly __typename?: 'OrderOnlinePaymentStatus'\n\n    readonly isSuccess: boolean\n\n    readonly userErrors: ReadonlyArray<string>\n  }\n}\n\nexport namespace GVamStatus {\n  export type Variables = {\n    readonly input: InputVamStatus\n  }\n\n  export type Query = {\n    readonly __typename?: 'Query'\n\n    readonly vamStatus: ReadonlyArray<VamStatus>\n  }\n\n  export type VamStatus = {\n    readonly __typename?: 'VAMAgreement'\n\n    readonly id: string\n\n    readonly name: string\n\n    readonly description: string\n\n    readonly isConfirmed: boolean\n\n    readonly isMandatory: boolean\n  }\n}\n\nexport namespace GCompanyBranchStyle {\n  export type Variables = {\n    readonly branchId: string\n  }\n\n  export type Query = {\n    readonly __typename?: 'Query'\n\n    readonly companyBranch: CompanyBranch\n  }\n\n  export type CompanyBranch = {\n    readonly __typename?: 'CompanyBranch'\n\n    readonly id: string\n\n    readonly styles: Styles\n  }\n\n  export type Styles = {\n    readonly __typename?: 'GraphicStyle'\n\n    readonly active: string\n\n    readonly main: string\n\n    readonly mainSecondary: string\n\n    readonly storeLogo: string\n\n    readonly storeLogoMobile: string\n\n    readonly backgroundCart: string\n  }\n}\n\nexport namespace GCartView {\n  export type Variables = {\n    readonly orderId: string\n  }\n\n  export type Query = {\n    readonly __typename?: 'Query'\n\n    readonly order: Order\n  }\n\n  export type Order = {\n    readonly __typename?: 'Order'\n\n    readonly deliveryType: DeliveryType | null\n  } & GOrder.Fragment\n\n  export type DeliveryType = {\n    readonly __typename?: 'DeliveryType'\n\n    readonly enum: DeliveryTypeEnum\n  }\n}\n\nexport namespace GFinishView {\n  export type Variables = {\n    readonly orderId: string\n    readonly branchId: string\n  }\n\n  export type Query = {\n    readonly __typename?: 'Query'\n\n    readonly order: Order\n\n    readonly companyBranch: CompanyBranch\n\n    readonly androidApp: AndroidApp | null\n\n    readonly iosApp: IosApp | null\n  }\n\n  export type Order = GFinishViewOrder.Fragment\n\n  export type CompanyBranch = {\n    readonly __typename?: 'CompanyBranch'\n\n    readonly id: string\n\n    readonly phone: string\n\n    readonly company: Company\n  }\n\n  export type Company = {\n    readonly __typename?: 'Company'\n\n    readonly id: string\n  }\n\n  export type AndroidApp = {\n    readonly __typename?: 'MobileApplicationSetting'\n\n    readonly url: string\n  }\n\n  export type IosApp = {\n    readonly __typename?: 'MobileApplicationSetting'\n\n    readonly url: string\n  }\n}\n\nexport namespace GFoodMenu {\n  export type Variables = {\n    readonly branchId: string\n  }\n\n  export type Query = {\n    readonly __typename?: 'Query'\n\n    readonly wareCategories: ReadonlyArray<WareCategories>\n  }\n\n  export type WareCategories = {\n    readonly __typename?: 'WareCategory'\n\n    readonly recipes: ReadonlyArray<Recipes>\n  } & GFoodMenuCategory.Fragment\n\n  export type Recipes = GFoodMenuRecipe.Fragment\n}\n\nexport namespace GFoodMenuCartPresence {\n  export type Variables = {\n    readonly orderId: string\n  }\n\n  export type Query = {\n    readonly __typename?: 'Query'\n\n    readonly order: Order\n  }\n\n  export type Order = {\n    readonly __typename?: 'Order'\n\n    readonly id: string\n  } & GCartPresence.Fragment\n}\n\nexport namespace GInitialLocation {\n  export type Variables = {}\n\n  export type Query = {\n    readonly __typename?: 'Query'\n\n    readonly initialLocation: InitialLocation\n  }\n\n  export type InitialLocation = {\n    readonly __typename?: 'AddressResolvedLocation'\n\n    readonly gpsCoordinates: GpsCoordinates | null\n  }\n\n  export type GpsCoordinates = {\n    readonly __typename?: 'GeoPoint'\n\n    readonly latitude: number\n\n    readonly longitude: number\n  }\n}\n\nexport namespace GPickupMapBrand {\n  export type Variables = {\n    readonly brandId: string\n  }\n\n  export type Query = {\n    readonly __typename?: 'Query'\n\n    readonly branches: ReadonlyArray<Branches>\n  }\n\n  export type Branches = GPickupBranch.Fragment\n}\n\nexport namespace GPickupMapBranch {\n  export type Variables = {\n    readonly branchId: string\n  }\n\n  export type Query = {\n    readonly __typename?: 'Query'\n\n    readonly branch: Branch\n  }\n\n  export type Branch = GPickupBranch.Fragment\n}\n\nexport namespace GMobileCart {\n  export type Variables = {\n    readonly orderId: string\n  }\n\n  export type Query = {\n    readonly __typename?: 'Query'\n\n    readonly order: Order\n  }\n\n  export type Order = GOrderMobile.Fragment\n}\n\nexport namespace GMobileShopStatus {\n  export type Variables = {\n    readonly branchId: string\n  }\n\n  export type Query = {\n    readonly __typename?: 'Query'\n\n    readonly branch: Branch\n  }\n\n  export type Branch = {\n    readonly __typename?: 'CompanyBranch'\n\n    readonly id: string\n  } & GCompanyBranchStatus.Fragment\n}\n\nexport namespace GMobileShopIntro {\n  export type Variables = {\n    readonly branchId: string\n  }\n\n  export type Query = {\n    readonly __typename?: 'Query'\n\n    readonly companyBranch: CompanyBranch\n  }\n\n  export type CompanyBranch = {\n    readonly __typename?: 'CompanyBranch'\n\n    readonly id: string\n\n    readonly headerText: string | null\n  }\n}\n\nexport namespace GSmartBanner {\n  export type Variables = {\n    readonly branchId: string\n    readonly platform: MobilePlatformEnum\n  }\n\n  export type Query = {\n    readonly __typename?: 'Query'\n\n    readonly app: App | null\n  }\n\n  export type App = {\n    readonly __typename?: 'MobileApplicationSetting'\n\n    readonly title: string\n\n    readonly url: string\n\n    readonly icon: string\n  }\n}\n\nexport namespace GOrderForm {\n  export type Variables = {\n    readonly orderId: string\n  }\n\n  export type Query = {\n    readonly __typename?: 'Query'\n\n    readonly order: Order\n  }\n\n  export type Order = {\n    readonly __typename?: 'Order'\n\n    readonly id: string\n\n    readonly countWares: number\n  }\n}\n\nexport namespace GOrderPromoCodes {\n  export type Variables = {\n    readonly orderId: string\n  }\n\n  export type Query = {\n    readonly __typename?: 'Query'\n\n    readonly order: Order\n  }\n\n  export type Order = {\n    readonly __typename?: 'Order'\n\n    readonly id: string\n\n    readonly promoCodes: ReadonlyArray<PromoCodes>\n  }\n\n  export type PromoCodes = GPromoCode.Fragment\n}\n\nexport namespace MAddOrderPromo {\n  export type Variables = {\n    readonly orderId: string\n    readonly code: string\n  }\n\n  export type Mutation = {\n    readonly __typename?: 'Mutation'\n\n    readonly addOrderPromoCode: AddOrderPromoCode\n  }\n\n  export type AddOrderPromoCode = {\n    readonly __typename?: 'OrderWithErrors'\n\n    readonly userErrors: ReadonlyArray<string>\n\n    readonly order: Order\n  }\n\n  export type Order = {\n    readonly __typename?: 'Order'\n\n    readonly id: string\n\n    readonly promoCodes: ReadonlyArray<PromoCodes>\n  }\n\n  export type PromoCodes = GPromoCode.Fragment\n}\n\nexport namespace MRemoveOrderPromo {\n  export type Variables = {\n    readonly orderId: string\n    readonly codeId: string\n  }\n\n  export type Mutation = {\n    readonly __typename?: 'Mutation'\n\n    readonly removeOrderPromoCode: RemoveOrderPromoCode\n  }\n\n  export type RemoveOrderPromoCode = {\n    readonly __typename?: 'Order'\n\n    readonly id: string\n\n    readonly promoCodes: ReadonlyArray<PromoCodes>\n  }\n\n  export type PromoCodes = GPromoCode.Fragment\n}\n\nexport namespace GOrderTimePicker {\n  export type Variables = {\n    readonly branchId: string\n  }\n\n  export type Query = {\n    readonly __typename?: 'Query'\n\n    readonly companyBranch: CompanyBranch\n  }\n\n  export type CompanyBranch = {\n    readonly __typename?: 'CompanyBranch'\n\n    readonly id: string\n\n    readonly isOpen: boolean\n\n    readonly businessHours: ReadonlyArray<BusinessHours>\n\n    readonly defaultDeliveryTime: number\n\n    readonly defaultPickupTime: number\n\n    readonly willOpenAt: string | null\n\n    readonly willCloseAt: string | null\n  }\n\n  export type BusinessHours = {\n    readonly __typename?: 'BusinessHour'\n\n    readonly id: string\n\n    readonly closeAt: string\n\n    readonly openAt: string\n\n    readonly closed: boolean\n  }\n}\n\nexport namespace GShopHeader {\n  export type Variables = {\n    readonly branchId: string\n  }\n\n  export type Query = {\n    readonly __typename?: 'Query'\n\n    readonly branch: Branch\n  }\n\n  export type Branch = {\n    readonly __typename?: 'CompanyBranch'\n\n    readonly id: string\n\n    readonly name: string\n\n    readonly phone: string\n\n    readonly homepageUrl: string | null\n\n    readonly headerText: string | null\n\n    readonly defaultDeliveryTime: number\n\n    readonly defaultPickupTime: number\n\n    readonly address: Address\n  } & GCompanyBranchStatus.Fragment\n\n  export type Address = GAddress.Fragment\n}\n\nexport namespace GJsonAddress {\n  export type Fragment = {\n    readonly __typename?: 'JsonAddress'\n\n    readonly street: string | null\n\n    readonly houseNumber: string | null\n\n    readonly city: string | null\n\n    readonly state: string | null\n  }\n}\n\nexport namespace GAddress {\n  export type Fragment = {\n    readonly __typename?: 'Address'\n\n    readonly id: string\n\n    readonly location: Location | null\n  }\n\n  export type Location = GJsonAddress.Fragment\n}\n\nexport namespace GGeoPoint {\n  export type Fragment = {\n    readonly __typename?: 'GeoPoint'\n\n    readonly latitude: number\n\n    readonly longitude: number\n  }\n}\n\nexport namespace GPrice {\n  export type Fragment = {\n    readonly __typename?: 'PriceConverted'\n\n    readonly value: number\n\n    readonly formattedValue: string\n  }\n}\n\nexport namespace GRecipe {\n  export type Fragment = {\n    readonly __typename?: 'Recipe'\n\n    readonly id: string\n\n    readonly nameLabel: string\n\n    readonly sideDishCount: number\n  }\n}\n\nexport namespace GCartItem {\n  export type Fragment = {\n    readonly __typename?: 'OrderRecipe'\n\n    readonly id: string\n\n    readonly automatic: boolean\n\n    readonly recipe: Recipe\n  }\n\n  export type Recipe = GRecipe.Fragment\n}\n\nexport namespace GCompanyBranchStatus {\n  export type Fragment = {\n    readonly __typename?: 'CompanyBranch'\n\n    readonly isOpen: boolean\n\n    readonly willOpenAt: string | null\n\n    readonly willCloseAt: string | null\n\n    readonly businessHours: ReadonlyArray<BusinessHours>\n  }\n\n  export type BusinessHours = {\n    readonly __typename?: 'BusinessHour'\n\n    readonly id: string\n\n    readonly openAt: string\n\n    readonly closeAt: string\n\n    readonly closed: boolean\n\n    readonly closedNote: string | null\n  }\n}\n\nexport namespace GPromoCode {\n  export type Fragment = {\n    readonly __typename?: 'PromoCode'\n\n    readonly id: string\n\n    readonly code: string\n  }\n}\n\nexport namespace GCompanyBranch {\n  export type Fragment = {\n    readonly __typename?: 'CompanyBranch'\n\n    readonly id: string\n\n    readonly code: string\n\n    readonly brand: Brand\n\n    readonly company: Company\n\n    readonly address: Address\n\n    readonly phone: string\n  }\n\n  export type Brand = {\n    readonly __typename?: 'Company'\n\n    readonly id: string\n\n    readonly name: string\n\n    readonly code: string\n  }\n\n  export type Company = {\n    readonly __typename?: 'Company'\n\n    readonly id: string\n  }\n\n  export type Address = {\n    readonly __typename?: 'Address'\n\n    readonly country: Country | null\n  }\n\n  export type Country = {\n    readonly __typename?: 'Country'\n\n    readonly phonePrefix: string\n  }\n}\n\nexport namespace GLocationResolution {\n  export type Fragment = {\n    readonly __typename?: 'AddressResolvedLocation'\n\n    readonly finalAddress: FinalAddress | null\n\n    readonly isResolved: boolean\n\n    readonly isValidAddress: boolean\n\n    readonly inDeliveryLocation: boolean\n\n    readonly gpsCoordinates: GpsCoordinates | null\n\n    readonly companyBranch: CompanyBranch | null\n  }\n\n  export type FinalAddress = GJsonAddress.Fragment\n\n  export type GpsCoordinates = {\n    readonly __typename?: 'GeoPoint'\n\n    readonly latitude: number\n\n    readonly longitude: number\n  }\n\n  export type CompanyBranch = {\n    readonly __typename?: 'CompanyBranch'\n\n    readonly id: string\n\n    readonly isOpen: boolean\n  }\n}\n\nexport namespace GCartRecipe {\n  export type Fragment = {\n    readonly __typename?: 'Recipe'\n\n    readonly id: string\n\n    readonly nameLabel: string\n\n    readonly descriptionLabel: string | null\n\n    readonly categories: ReadonlyArray<Categories>\n  }\n\n  export type Categories = {\n    readonly __typename?: 'WareCategory'\n\n    readonly id: string\n\n    readonly nameLabel: string\n\n    readonly minCount: number\n\n    readonly maxCount: number\n\n    readonly sideDishes: ReadonlyArray<SideDishes>\n  }\n\n  export type SideDishes = {\n    readonly __typename?: 'Recipe'\n\n    readonly id: string\n\n    readonly nameLabel: string\n\n    readonly price: Price\n  }\n\n  export type Price = GPrice.Fragment\n}\n\nexport namespace GCreateOrder {\n  export type Fragment = {\n    readonly __typename?: 'Order'\n\n    readonly id: string\n\n    readonly companyBranch: CompanyBranch\n  }\n\n  export type CompanyBranch = {\n    readonly __typename?: 'CompanyBranch'\n\n    readonly id: string\n  }\n}\n\nexport namespace GOrder {\n  export type Fragment = {\n    readonly __typename?: 'Order'\n\n    readonly id: string\n\n    readonly countWares: number\n\n    readonly items: ReadonlyArray<Items>\n\n    readonly coverPrice: CoverPrice\n\n    readonly transportFee: TransportFee\n\n    readonly discounts: ReadonlyArray<Discounts>\n\n    readonly totalDiscount: TotalDiscount\n\n    readonly totalSum: TotalSum\n  }\n\n  export type Items = {\n    readonly __typename?: 'OrderRecipe'\n\n    readonly price: Price\n\n    readonly sideDishes: ReadonlyArray<SideDishes>\n  } & GCartItem.Fragment\n\n  export type Price = GPrice.Fragment\n\n  export type SideDishes = GCartItem.Fragment\n\n  export type CoverPrice = GPrice.Fragment\n\n  export type TransportFee = GPrice.Fragment\n\n  export type Discounts = {\n    readonly __typename?: 'PriceWithDescription'\n\n    readonly code: string\n\n    readonly description: string\n\n    readonly price: _Price\n  }\n\n  export type _Price = GPrice.Fragment\n\n  export type TotalDiscount = GPrice.Fragment\n\n  export type TotalSum = GPrice.Fragment\n}\n\nexport namespace GFinishViewOrder {\n  export type Fragment = {\n    readonly __typename?: 'Order'\n\n    readonly id: string\n\n    readonly items: ReadonlyArray<Items>\n\n    readonly totalSum: TotalSum\n\n    readonly orderPayments: ReadonlyArray<OrderPayments>\n  }\n\n  export type Items = {\n    readonly __typename?: 'OrderRecipe'\n\n    readonly sideDishes: ReadonlyArray<SideDishes>\n  } & GCartItem.Fragment\n\n  export type SideDishes = GCartItem.Fragment\n\n  export type TotalSum = GPrice.Fragment\n\n  export type OrderPayments = {\n    readonly __typename?: 'OrderPaymentMethod'\n\n    readonly paymentMethod: PaymentMethod\n  }\n\n  export type PaymentMethod = {\n    readonly __typename?: 'PaymentMethod'\n\n    readonly paymentType: PaymentType\n  }\n\n  export type PaymentType = {\n    readonly __typename?: 'PaymentType'\n\n    readonly enum: PaymentTypeEnum\n  }\n}\n\nexport namespace GFoodMenuCategory {\n  export type Fragment = {\n    readonly __typename?: 'WareCategory'\n\n    readonly id: string\n\n    readonly nameLabel: string\n\n    readonly pictogram: string | null\n  }\n}\n\nexport namespace GFoodMenuRecipe {\n  export type Fragment = {\n    readonly __typename?: 'Recipe'\n\n    readonly id: string\n\n    readonly image: string | null\n\n    readonly nameLabel: string\n\n    readonly descriptionLabel: string | null\n\n    readonly price: Price\n\n    readonly sideDishCount: number\n  }\n\n  export type Price = GPrice.Fragment\n}\n\nexport namespace GCartPresence {\n  export type Fragment = {\n    readonly __typename?: 'Order'\n\n    readonly items: ReadonlyArray<Items>\n  }\n\n  export type Items = {\n    readonly __typename?: 'OrderRecipe'\n\n    readonly id: string\n\n    readonly recipe: Recipe\n  }\n\n  export type Recipe = {\n    readonly __typename?: 'Recipe'\n\n    readonly id: string\n  }\n}\n\nexport namespace GPickupBranch {\n  export type Fragment = {\n    readonly __typename?: 'CompanyBranch'\n\n    readonly id: string\n\n    readonly name: string\n\n    readonly gps: Gps\n\n    readonly address: Address\n\n    readonly pickupEnabled: boolean\n\n    readonly defaultDeliveryTime: number\n\n    readonly defaultPickupTime: number\n  } & GCompanyBranchStatus.Fragment\n\n  export type Gps = GGeoPoint.Fragment\n\n  export type Address = GAddress.Fragment\n}\n\nexport namespace GOrderMobile {\n  export type Fragment = {\n    readonly __typename?: 'Order'\n\n    readonly id: string\n\n    readonly totalSum: TotalSum\n\n    readonly countWares: number\n  } & GCartPresence.Fragment\n\n  export type TotalSum = GPrice.Fragment\n}\n","import * as RM from 'ramda'\n\nexport { RM }\n","import { buildMutation } from './buildMutation'\nimport { buildQuery } from './buildQuery'\n\nexport { buildQuery, buildMutation }\n","import { GGeoPoint } from '../graph/types'\n\nexport type GeoPoint = Omit<GGeoPoint.Fragment, '__typename'>\n\nexport const gpsToLatLng = (gps: GeoPoint): google.maps.LatLngLiteral => ({\n  lat: Number(gps.latitude),\n  lng: Number(gps.longitude),\n})\n\nexport const latLngToGps = (latLng: google.maps.LatLng): GeoPoint => ({\n  latitude: Number(latLng.lat()),\n  longitude: Number(latLng.lng()),\n})\n","import gql from 'graphql-tag'\n\nimport { buildQuery } from '../../graph'\nimport { CartItemFragment, PriceFragment } from '../../graph/fragments.graphql'\nimport { GCartView } from '../../graph/types'\n\nexport const OrderFragment = gql`\n  fragment GOrder on Order {\n    id\n    countWares\n    items {\n      ...GCartItem\n      price: priceWithSideDishes {\n        ...GPrice\n      }\n      sideDishes {\n        ...GCartItem\n      }\n    }\n    coverPrice {\n      ...GPrice\n    }\n    transportFee {\n      ...GPrice\n    }\n    discounts {\n      code\n      description\n      price {\n        ...GPrice\n      }\n    }\n    totalDiscount {\n      ...GPrice\n    }\n    totalSum {\n      ...GPrice\n    }\n  }\n  ${CartItemFragment}\n  ${PriceFragment}\n`\n\nexport const CartViewQuery = gql`\n  query GCartView($orderId: ID!) {\n    order(id: $orderId) {\n      ...GOrder\n      deliveryType {\n        enum\n      }\n    }\n  }\n  ${OrderFragment}\n`\n\nexport const QueryCartView = buildQuery<GCartView.Query, GCartView.Variables>(\n  CartViewQuery,\n)\n","import gql from 'graphql-tag'\n\nimport { buildQuery } from '../../graph/buildQuery'\nimport { PriceFragment } from '../../graph/fragments.graphql'\nimport { GFoodMenu, GFoodMenuCartPresence } from '../../graph/types'\n\nexport const FoodMenuQuery = gql`\n  query GFoodMenu($branchId: ID!) {\n    wareCategories(\n      wareCategoryType: MAIN\n      companyBranch: $branchId\n      enabled: true\n    ) {\n      ...GFoodMenuCategory\n      recipes(enabled: true, isAvailable: true) {\n        ...GFoodMenuRecipe\n      }\n    }\n  }\n\n  fragment GFoodMenuCategory on WareCategory {\n    id\n    nameLabel\n    pictogram\n  }\n\n  fragment GFoodMenuRecipe on Recipe {\n    id\n    image(width: 192, height: 192)\n    nameLabel\n    descriptionLabel\n    price {\n      ...GPrice\n    }\n    sideDishCount: sideDishesWareCategoriesCount\n  }\n\n  ${PriceFragment}\n`\n\nexport const CartPresenceFragment = gql`\n  fragment GCartPresence on Order {\n    items {\n      id\n      recipe {\n        id\n      }\n    }\n  }\n`\n\nexport const FoodMenuCartPresenceQuery = gql`\n  query GFoodMenuCartPresence($orderId: ID!) {\n    order(id: $orderId) {\n      id\n      ...GCartPresence\n    }\n  }\n  ${CartPresenceFragment}\n`\n\nexport const QueryFoodMenuCartPresence = buildQuery<\n  GFoodMenuCartPresence.Query,\n  GFoodMenuCartPresence.Variables\n>(FoodMenuCartPresenceQuery)\n\nexport const QueryFoodMenu = buildQuery<GFoodMenu.Query, GFoodMenu.Variables>(\n  FoodMenuQuery,\n)\n","import gql from 'graphql-tag'\n\nimport { buildQuery } from '../../graph'\nimport { PriceFragment } from '../../graph/fragments.graphql'\nimport { GMobileCart } from '../../graph/types'\nimport { CartPresenceFragment } from '../foodMenu/FoodMenuView.graphql'\n\nexport const OrderMobileFragment = gql`\n  fragment GOrderMobile on Order {\n    id\n    totalSum {\n      ...GPrice\n    }\n    countWares\n    ...GCartPresence\n  }\n  ${PriceFragment}\n  ${CartPresenceFragment}\n`\n\nexport const MobileCartQuery = gql`\n  query GMobileCart($orderId: ID!) {\n    order(id: $orderId) {\n      ...GOrderMobile\n    }\n  }\n  ${OrderMobileFragment}\n`\n\nexport const QueryMobileCart = buildQuery<\n  GMobileCart.Query,\n  GMobileCart.Variables\n>(MobileCartQuery)\n","import debug from 'debug'\n\nexport const logMain = debug('c2e:app')\nexport const logMap = debug('c2e:map')\nexport const logDebug = debug('c2e:debug')\nexport const logGraph = debug('c2e:graph')\nexport const logError = debug('c2e:error')\nexport const logAuth = debug('c2e:auth')\nexport const logRouting = debug('c2e:routing')\nexport const logPersist = debug('c2e:persist')\nexport const logOrder = debug('c2e:order')\nexport const logSentry = debug('c2e:sentry')\nexport const logLang = debug('c2e:lang')\n","import debug from 'debug'\nimport { getEnv, getPath, getRoot, getType, types } from 'mobx-state-tree'\n\nimport { IRootEnvironment, TRootModel } from './RootModel'\n\nexport const BaseModel = types.model().views(self => ({\n  get log() {\n    const name = getPath(self).trim() || getType(self).name\n    return debug(`c2e:model/${name}`)\n  },\n  get env() {\n    return getEnv<IRootEnvironment>(self)\n  },\n  get client() {\n    const { client } = getEnv<IRootEnvironment>(self)\n    return client\n  },\n  get root() {\n    return getRoot<TRootModel>(self)\n  },\n}))\n","import gql from 'graphql-tag'\n\nexport const JsonAddressFragment = gql`\n  fragment GJsonAddress on JsonAddress {\n    street\n    houseNumber\n    city\n    state\n  }\n`\n\nexport const AddressFragment = gql`\n  fragment GAddress on Address {\n    id\n    location {\n      ...GJsonAddress\n    }\n  }\n  ${JsonAddressFragment}\n`\n\nexport const GeoPointFragment = gql`\n  fragment GGeoPoint on GeoPoint {\n    latitude\n    longitude\n  }\n`\n\nexport const PriceFragment = gql`\n  fragment GPrice on PriceConverted {\n    value\n    formattedValue\n  }\n`\n\nexport const RecipeFragment = gql`\n  fragment GRecipe on Recipe {\n    id\n    nameLabel\n    sideDishCount: sideDishesWareCategoriesCount\n  }\n`\n\nexport const CartItemFragment = gql`\n  fragment GCartItem on OrderRecipe {\n    id\n    automatic\n    recipe {\n      ...GRecipe\n    }\n  }\n  ${RecipeFragment}\n`\n\nexport const CompanyBranchStatusFragment = gql`\n  fragment GCompanyBranchStatus on CompanyBranch {\n    isOpen\n    willOpenAt\n    willCloseAt\n    businessHours {\n      id\n      openAt\n      closeAt\n      closed\n      closedNote\n    }\n  }\n`\n\nexport const PromoCodeFragment = gql`\n  fragment GPromoCode on PromoCode {\n    id\n    code\n  }\n`\n","import { GraphQLError } from 'graphql'\nimport Raven from 'raven-js'\nimport { ErrorInfo } from 'react'\nimport { VError } from 'verror'\n\nimport { appConfig } from '../config'\nimport { logSentry } from './logger'\nimport { RM } from './ramda'\n\nexport const installSentry = cb => {\n  const { sentryDSN } = appConfig\n  if (sentryDSN) {\n    logSentry('enabled with DSN %s', sentryDSN)\n    Raven.config(sentryDSN, {\n      environment: process.env.REACT_APP_STAGE,\n    }).install()\n    Raven.context(cb)\n  } else {\n    cb()\n  }\n}\n\nexport const identifyGuest = (userId: string, token: string) => {\n  Raven.setUserContext({\n    isGuest: true,\n    userId,\n    token,\n  })\n}\n\nexport const setSentryContext = (context: object) => {\n  Raven.setExtraContext(context)\n}\n\nexport const reportRenderingError = (error: Error, info: ErrorInfo) => {\n  if (Raven.isSetup()) {\n    Raven.captureException(error, {\n      extra: info,\n    })\n    Raven.showReportDialog()\n  }\n}\n\nexport const reportFailingQuery = (\n  errors: ReadonlyArray<GraphQLError>,\n  data: object,\n) => {\n  Raven.captureBreadcrumb({\n    category: 'graphql',\n    level: 'debug',\n    message: 'query',\n    data: {\n      ...data,\n      errors,\n    },\n  })\n  errors.forEach(err => {\n    Raven.captureException(new Error(err.message), { extra: err })\n  })\n  const userErrors = errors.filter(RM.propEq('showToUser', true))\n  if (userErrors.length && Raven.lastEventId()) {\n    Raven.showReportDialog({\n      title: RM.head(userErrors)!.message,\n    })\n  }\n}\n\nexport const reportError = (error: Error, meta: object = {}) => {\n  let extra = {}\n  if (error instanceof VError) {\n    extra = {\n      cause: VError.cause(error),\n      ...VError.info(error),\n      ...meta,\n    }\n  }\n  Raven.captureException(error, { extra })\n  return error\n}\n","import React from 'react'\nimport { Button, ButtonProps } from 'reactstrap'\nimport styled, { css } from 'styled-components'\n\nimport { mediaDesktop, mediaMobile } from '../common/Responsive'\nimport { TThemeModel, TThemeModelProps } from '../models/ThemeModel'\nimport { RouteButton } from './RouteButton'\n\nexport const PrimaryButton = styled(Button)`\n  background-color: ${themeProp('secondary')};\n  border-color: ${themeProp('secondary')};\n  &:hover {\n    background-color: ${themeProp('secondaryHover')};\n    border-color: ${themeProp('secondaryHover')};\n  }\n  &:active {\n    background-color: #262626 !important;\n  }\n`\n\nPrimaryButton.displayName = 'PrimaryButton'\n\nexport const SecondaryButton = styled(Button)`\n  background-color: ${themeProp('tertiary')};\n  border-color: ${themeProp('tertiary')};\n  &:hover {\n    background-color: ${themeProp('tertiaryHover')};\n    border-color: ${themeProp('tertiaryHover')};\n  }\n`\n\nSecondaryButton.displayName = 'SecondaryButton'\n\nexport const PrimaryRoutedButton = styled(RouteButton)`\n  background-color: ${themeProp('secondary')};\n  border-color: ${themeProp('secondary')};\n  &:hover {\n    background-color: ${themeProp('secondaryHover')};\n    border-color: ${themeProp('secondaryHover')};\n  }\n`\n\nPrimaryRoutedButton.displayName = 'PrimaryRoutedButton'\n\ninterface IMobileHeaderButton {\n  isConfirm?: boolean\n  theme: TThemeModelProps\n}\n\nexport const MobileHeaderButton = styled(\n  ({ isConfirm, theme, ...props }: ButtonProps & IMobileHeaderButton) => (\n    <Button {...props} />\n  ),\n)`\n  background-color: ${({ isConfirm, theme }) =>\n    isConfirm ? theme.primary : 'white'};\n  color: ${({ isConfirm, theme }) => (isConfirm ? 'white' : theme.primary)};\n`\n\nMobileHeaderButton.displayName = 'MobileHeaderButton'\n\ninterface ISelectButtonThemed {\n  selected?: boolean\n  theme: TThemeModelProps\n}\n\nexport const SelectButtonThemed = styled(\n  ({ selected, theme, ...props }: ButtonProps & ISelectButtonThemed) => (\n    <Button {...props} />\n  ),\n)`\n  ${({ theme, selected }: ISelectButtonThemed) => css`\n    ${mediaDesktop`\n      background-color: ${selected ? theme.tertiary : theme.unselected}\n    `};\n    ${mediaMobile`\n    background-color: ${selected ? theme.tertiary : 'white'}`}\n    border-color: ${selected ? theme.tertiary : theme.unselected};\n    color: ${selected ? theme.tertiaryText : theme.unselectedText};\n    height: 3.7rem;\n    &:hover {\n      background-color: ${\n        selected ? theme.tertiaryHover : theme.unselectedHover\n      };\n      border-color: ${selected ? theme.tertiaryHover : theme.unselectedHover};\n      color: ${selected ? theme.tertiaryText : theme.unselectedText};\n    }\n  `};\n`\n\nSelectButtonThemed.displayName = 'SelectButtonThemed'\n\nfunction themeProp(name: keyof TThemeModelProps) {\n  return ({ theme }: { theme?: TThemeModel }) => theme![name] as string\n}\n","import { format, parse } from 'date-fns/fp'\n\nimport { GJsonAddress } from '../graph/types'\n\nexport const formatTime = format('H:mm')\n\nexport const parseTime = parse('HH:mm')\n\nexport const formatAddress = (address: GJsonAddress.Fragment) => {\n  if (!address.street) {\n    if (address.city) {\n      return `${address.city} ${address.houseNumber}`\n    }\n    return `${address.state}`\n  }\n  if (!address.houseNumber) {\n    return `${address.street}, ${address.city}`\n  }\n  return `${address.street} ${address.houseNumber}, ${address.city}`\n}\n","import gql from 'graphql-tag'\n\nimport { buildQuery } from '../../graph/buildQuery'\nimport {\n  AddressFragment,\n  CompanyBranchStatusFragment,\n  GeoPointFragment,\n} from '../../graph/fragments.graphql'\nimport { GPickupMapBranch, GPickupMapBrand } from '../../graph/types'\n\nconst PickupBranchFragment = gql`\n  fragment GPickupBranch on CompanyBranch {\n    id\n    name\n    gps {\n      ...GGeoPoint\n    }\n    address {\n      ...GAddress\n    }\n    pickupEnabled\n    defaultDeliveryTime\n    defaultPickupTime\n    ...GCompanyBranchStatus\n  }\n  ${CompanyBranchStatusFragment}\n  ${GeoPointFragment}\n  ${AddressFragment}\n`\n\nexport const PickupMapBrandQuery = gql`\n  query GPickupMapBrand($brandId: ID!) {\n    branches: companyBranches(brand: $brandId) {\n      ...GPickupBranch\n    }\n  }\n  ${PickupBranchFragment}\n`\n\nexport const PickupMapBranchQuery = gql`\n  query GPickupMapBranch($branchId: ID!) {\n    branch: companyBranch(id: $branchId) {\n      ...GPickupBranch\n    }\n  }\n  ${PickupBranchFragment}\n`\n\nexport const QueryPickupMapBrand = buildQuery<\n  GPickupMapBrand.Query,\n  GPickupMapBrand.Variables\n>(PickupMapBrandQuery)\n\nexport const QueryPickupMapBranch = buildQuery<\n  GPickupMapBranch.Query,\n  GPickupMapBranch.Variables\n>(PickupMapBranchQuery)\n","import gql from 'graphql-tag'\n\nimport { PriceFragment } from '../graph/fragments.graphql'\nimport { OrderFragment } from '../segments/cart/CartView.graphql'\nimport { OrderMobileFragment } from '../segments/mobile/MobileCart.graphql'\n\nconst CartRecipeFragment = gql`\n  fragment GCartRecipe on Recipe {\n    id\n    nameLabel\n    descriptionLabel\n    categories: sideDishesWareCategories {\n      id\n      nameLabel\n      minCount\n      maxCount\n      sideDishes {\n        id\n        nameLabel\n        price {\n          ...GPrice\n        }\n      }\n    }\n  }\n  ${PriceFragment}\n`\n\nexport const OrderCartForRecipeQuery = gql`\n  query GOrderCartForRecipe($recipeId: ID!) {\n    recipe(id: $recipeId) {\n      ...GCartRecipe\n    }\n  }\n  ${CartRecipeFragment}\n`\n\nexport const OrderCartForItemQuery = gql`\n  query GOrderCartForItem($itemId: ID!) {\n    item: orderRecipe(id: $itemId) {\n      id\n      recipe {\n        ...GCartRecipe\n      }\n      sideDishes {\n        id\n        recipe {\n          id\n        }\n      }\n    }\n  }\n  ${CartRecipeFragment}\n`\n\nconst CreateOrderFragment = gql`\n  fragment GCreateOrder on Order {\n    id\n    companyBranch {\n      id\n    }\n  }\n`\n\nexport const CreatePickupOrderMutation = gql`\n  mutation GCreatePickupOrder($branchId: ID!, $orderOrigin: OrderOriginEnum!) {\n    order: createPickupOrder(\n      order: { companyBranch: $branchId, orderOrigin: $orderOrigin }\n    ) {\n      ...GCreateOrder\n    }\n  }\n  ${CreateOrderFragment}\n`\n\nexport const CreateDeliveryOrderMutation = gql`\n  mutation GCreateDeliveryOrder(\n    $brandId: ID\n    $branchId: ID\n    $gps: InputGeoPointCreate!\n    $orderOrigin: OrderOriginEnum!\n  ) {\n    order: createDeliveryOrder(\n      order: {\n        brand: $brandId\n        companyBranch: $branchId\n        gps: $gps\n        orderOrigin: $orderOrigin\n      }\n    ) {\n      ...GCreateOrder\n    }\n  }\n  ${CreateOrderFragment}\n`\n\nexport const AddToOrderMutation = gql`\n  mutation GAddToOrder($orderId: ID!, $recipeId: ID!, $sideDishes: [ID!]) {\n    createOrderRecipe(\n      orderRecipe: {\n        order: $orderId\n        recipe: $recipeId\n        sideDishes: $sideDishes\n      }\n    ) {\n      ...GOrder\n    }\n  }\n  ${OrderFragment}\n`\n\nexport const AddToOrderMobileMutation = gql`\n  mutation GAddToOrderMobile(\n    $orderId: ID!\n    $recipeId: ID!\n    $sideDishes: [ID!]\n  ) {\n    createOrderRecipe(\n      orderRecipe: {\n        order: $orderId\n        recipe: $recipeId\n        sideDishes: $sideDishes\n      }\n    ) {\n      ...GOrderMobile\n    }\n  }\n  ${OrderMobileFragment}\n`\n\nexport const ChangeOrderItemMutation = gql`\n  mutation GChangeOrderItem($orderId: ID!, $itemId: ID!, $sideDishes: [ID!]) {\n    updateOrderRecipe(\n      id: $itemId\n      orderRecipe: { order: $orderId, sideDishes: $sideDishes }\n    ) {\n      ...GOrder\n    }\n  }\n  ${OrderFragment}\n`\n\nexport const RemoveOrderItemMutation = gql`\n  mutation GRemoveOrderItem($itemId: ID!) {\n    destroyOrderRecipe(id: $itemId) {\n      ...GOrder\n    }\n  }\n  ${OrderFragment}\n`\n\nexport const SubmitOrderMutation = gql`\n  mutation GSubmitOrder(\n    $orderId: ID!\n    $customer: InputCustomerCreate\n    $note: String\n    $paymentGate: PaymentGateEnum!\n    $deliverAt: DateTime\n    $agreements: [ID!]\n  ) {\n    finishOrder(\n      id: $orderId\n      order: {\n        confirmedAgreements: $agreements\n        customer: $customer\n        paymentGate: $paymentGate\n        note: $note\n        deliverAt: $deliverAt\n      }\n    ) {\n      userErrors\n      gopayUrl\n    }\n  }\n`\n\nexport const OrderPaymentStatusQuery = gql`\n  query GOrderPaymentStatus($orderId: ID!) {\n    status: orderOnlinePaymentStatus(id: $orderId) {\n      isSuccess\n      userErrors\n    }\n  }\n`\n\nexport const VamStatusQuery = gql`\n  query GVamStatus($input: InputVamStatus!) {\n    vamStatus(input: $input) {\n      id\n      name\n      description\n      isConfirmed\n      isMandatory\n    }\n  }\n`\n","import { serviceWorker } from '@speedlo/tools'\nimport React from 'react'\nimport { ApolloProvider } from 'react-apollo'\nimport { ApolloProvider as ApolloProviderHooks } from 'react-apollo-hooks'\nimport ReactDOM from 'react-dom'\n\nimport App from './app/App'\nimport { Router } from './app/Router'\nimport Pacman from './common/Pacman'\nimport ThemeSwitchProvider from './common/ThemeSwitchProvider'\nimport { RootProvider } from './common/WithRoot'\nimport { createApolloClient } from './createClient'\nimport { installSentry } from './helpers/sentry'\nimport { i18n, I18nManager } from './i18n'\nimport { createRootModel } from './models/RootModel'\n\nconst client = createApolloClient()\nconst root = createRootModel(client)\n\nconst Main = () => (\n  <React.Suspense fallback={<Pacman />}>\n    <RootProvider value={root}>\n      <ApolloProvider client={client}>\n        <ApolloProviderHooks client={client}>\n          <I18nManager>\n            <Router>\n              <ThemeSwitchProvider>\n                <App />\n              </ThemeSwitchProvider>\n            </Router>\n          </I18nManager>\n        </ApolloProviderHooks>\n      </ApolloProvider>\n    </RootProvider>\n  </React.Suspense>\n)\n\ninstallSentry(() => {\n  ReactDOM.render(<Main />, document.getElementById('root'))\n})\n\nserviceWorker.register({\n  onUpdate: (sw: ServiceWorker) => {\n    setTimeout(() => {\n      if (\n        window.confirm(\n          i18n.t`New version has been found. Do you want to reload application to apply it now?`,\n        )\n      ) {\n        sw.postMessage('apply-update')\n      }\n    }, 5000)\n  },\n})\n\nif (navigator.serviceWorker) {\n  navigator.serviceWorker.addEventListener('message', event => {\n    if (event.data === 'update-applied') {\n      location.reload()\n    }\n  })\n}\n","export const appConfig = {\n  fallbackLanguage: 'en',\n  supportedLanguages: ['cs', 'sk', 'en', 'pl', 'de'],\n  endpoint: process.env.REACT_APP_LOCAL_ENDPOINT,\n  persistenceKey: process.env.REACT_APP_LOCAL_KEY || 'client@local',\n  redirectOnFail: 'https://kdo.doveze.cz',\n  sentryDSN: null,\n  pageTitleSuffix: 'LOCAL',\n}\n\nif (process.env.REACT_APP_STAGE === 'dev') {\n  Object.assign(appConfig, {\n    endpoint: 'https://be.dev.admin.c2e.deep-vision.cloud',\n    persistenceKey: 'client@dev',\n    sentryDSN: 'https://31756c9e430d450eaf3a44af1c1cd0f2@sentry.io/1354460',\n    pageTitleSuffix: 'DEV',\n  })\n}\n\nif (process.env.REACT_APP_STAGE === 'prod') {\n  Object.assign(appConfig, {\n    endpoint: 'https://c2e-p1.deep-vision.cloud',\n    persistenceKey: 'client@prod',\n    sentryDSN: 'https://31756c9e430d450eaf3a44af1c1cd0f2@sentry.io/1354460',\n    pageTitleSuffix: 'Doveze.cz',\n  })\n}\n","import { Observer } from 'mobx-react'\nimport React, { useContext } from 'react'\n\nimport { TRootModel } from '../models/RootModel'\n\nexport const rootContext = React.createContext<TRootModel | undefined>(\n  undefined,\n)\n\ninterface IProps {\n  render(root: TRootModel): ReactNode\n  observe?: boolean\n}\n\nexport const useRoot = () => {\n  const root = useContext(rootContext)\n  if (!root) {\n    throw new Error('RootProvider missing in the tree')\n  }\n  return root\n}\n\nexport const WithRoot: React.FC<IProps> = ({ render, observe = false }) => {\n  const root = useRoot()\n  if (observe === true) {\n    return <Observer>{() => render(root)}</Observer>\n  }\n  return render(root)\n}\n\nexport const RootProvider = rootContext.Provider\n","import React from 'react'\nimport Spinner from 'react-spinkit'\n\nexport interface IProps {\n  noMargin?: boolean\n}\n\nconst Pacman: React.SFC<IProps> = ({ noMargin = false }) => (\n  <div\n    style={{\n      display: 'flex',\n      alignSelf: 'center',\n      justifyContent: 'center',\n    }}\n    data-testid=\"loader\"\n  >\n    <Spinner name=\"pacman\" style={noMargin ? {} : { marginTop: '45vh' }} />\n  </div>\n)\n\nexport default Pacman\n","import './App.css'\n\nimport { Trans } from '@lingui/react'\nimport React from 'react'\nimport styled from 'styled-components'\n\nimport { ErrorContainer } from '../common/ErrorContainer'\nimport { PageTitle } from '../common/PageTitle'\nimport { Desktop, Mobile, MobileLandscape } from '../common/Responsive'\nimport { ResetPersistenceButton } from './ResetPersistenceButton'\n\nconst LandscapeMessage = styled.div`\n  font-size: 1.1rem;\n  padding: 3rem;\n  vertical-align: center;\n`\n\nconst DesktopApp = React.lazy(() => import('./DesktopApp'))\nconst MobileApp = React.lazy(() => import('./MobileApp'))\n\nconst App = () => (\n  <ErrorContainer prod={process.env.NODE_ENV === 'production'}>\n    <PageTitle />\n    <Desktop>\n      <DesktopApp />\n    </Desktop>\n    <Mobile>\n      <MobileApp />\n    </Mobile>\n    <MobileLandscape>\n      <LandscapeMessage>\n        <Trans>\n          We know, you like space. Our app is optimised for desktop. Leave your\n          phone in portrait for now.\n        </Trans>\n      </LandscapeMessage>\n    </MobileLandscape>\n    <ResetPersistenceButton />\n  </ErrorContainer>\n)\n\nexport default App\n","import React from 'react'\n\nimport { reportRenderingError } from '../helpers/sentry'\n\ninterface IProps {\n  prod: boolean\n}\n\nexport const ErrorContainer: React.SFC<IProps> = ({\n  children,\n  prod = false,\n}) => {\n  let ErrorBoundaryContainer\n\n  if (prod) {\n    ErrorBoundaryContainer = require('react-error-guard')\n      .ProductionErrorBoundary\n    return (\n      <ErrorBoundaryContainer\n        dispatchErrorReporting={({ error, info }) => {\n          reportRenderingError(error, info)\n        }}\n      >\n        {children}\n      </ErrorBoundaryContainer>\n    )\n  } else {\n    ErrorBoundaryContainer = require('react-error-guard').DeveloperErrorBoundary\n    return <ErrorBoundaryContainer>{children}</ErrorBoundaryContainer>\n  }\n}\n","import React from 'react'\nimport DocumentTitle from 'react-document-title'\n\nimport { appConfig } from '../config'\nimport { WithRoot } from './WithRoot'\n\ninterface IProps {}\n\nexport const PageTitle: React.SFC<IProps> = props => (\n  <WithRoot\n    observe={true}\n    render={root => {\n      if (root.business.isValid) {\n        return (\n          <DocumentTitle\n            title={`${root.business.branch!.brand.name} - ${\n              appConfig.pageTitleSuffix\n            }`}\n          />\n        )\n      }\n      return <DocumentTitle title={appConfig.pageTitleSuffix} />\n    }}\n  />\n)\n","import React from 'react'\n\nimport { SecondaryButton } from '../common/Buttons'\nimport { useRoot } from '../common/WithRoot'\n\ninterface IProps {}\n\nexport const ResetPersistenceButton: React.FC<IProps> = props => {\n  const root = useRoot()\n  if (process.env.REACT_APP_STAGE === 'prod') {\n    return null\n  }\n  return (\n    <SecondaryButton\n      onClick={() => {\n        root.reset()\n        location.reload()\n      }}\n    >\n      Reset uživ. dat [DEV]\n    </SecondaryButton>\n  )\n}\n","import { LocationDescriptor } from 'history'\nimport React from 'react'\nimport { Link } from 'react-router-dom'\nimport { Button, ButtonProps } from 'reactstrap'\n\ninterface IProps extends ButtonProps {\n  to: LocationDescriptor\n  replace?: boolean\n}\n\nexport const RouteButton: React.SFC<IProps> = ({\n  to,\n  replace,\n  children,\n  ...buttonProps\n}) => (\n  <Link to={to} replace={replace}>\n    <Button {...buttonProps}>{children}</Button>\n  </Link>\n)\n","import { useObserver } from 'mobx-react-lite'\nimport React from 'react'\nimport { BrowserRouter } from 'react-router-dom'\n\nimport { useRoot } from '../common/WithRoot'\n\nexport const Router: React.FC = ({ children }) => {\n  const { business } = useRoot()\n  return useObserver(() =>\n    business.isValid ? (\n      <BrowserRouter\n        basename={business.routerBasePath}\n        key={business.routerBasePath}\n      >\n        {children}\n      </BrowserRouter>\n    ) : null,\n  )\n}\n","import { useObserver } from 'mobx-react-lite'\nimport React from 'react'\nimport { ThemeProvider } from 'styled-components'\n\nimport Pacman from './Pacman'\nimport { useRoot } from './WithRoot'\n\nconst ThemeSwitchProvider: React.FC = ({ children }) => {\n  const { business } = useRoot()\n  return useObserver(() =>\n    business.theme.loaded ? (\n      <ThemeProvider theme={{ ...business.theme }}>\n        {children as React.ReactChild}\n      </ThemeProvider>\n    ) : (\n      <Pacman />\n    ),\n  )\n}\n\nexport default ThemeSwitchProvider\n","import { InMemoryCache, NormalizedCacheObject } from 'apollo-cache-inmemory'\nimport { ApolloClient } from 'apollo-client'\nimport { ApolloLink } from 'apollo-link'\nimport { BatchHttpLink } from 'apollo-link-batch-http'\nimport createLogLink from 'apollo-link-log'\nimport QueueLink from 'apollo-link-queue'\nimport { RetryLink } from 'apollo-link-retry'\nimport { autorun } from 'mobx'\n\nimport { appConfig } from './config'\nimport { createErrorLink } from './graph/errorHandler'\nimport { logGraph } from './helpers/logger'\nimport { isNetworkOnline } from './helpers/offline'\n\nexport type GraphClient = ApolloClient<NormalizedCacheObject>\n\nexport function createApolloClient() {\n  const cache = new InMemoryCache({\n    dataIdFromObject: (o: { __typename?: string; id?: string }) => {\n      if (o.__typename != null && o.id != null) {\n        return `${o.__typename}-${o.id}`\n      }\n      return null\n    },\n  })\n\n  const loggingLink = createLoggingLink()\n  const httpLink = createHttpLink()\n  const retryLink = createRetryLink()\n  const offlineLink = createOfflineLink()\n  const errorLink = createErrorLink()\n\n  const link = ApolloLink.from([\n    loggingLink,\n    retryLink,\n    offlineLink,\n    errorLink,\n    httpLink,\n  ])\n\n  return new ApolloClient({ link, cache })\n}\n\nfunction createHttpLink() {\n  return new BatchHttpLink({\n    uri: `${appConfig.endpoint}/graphql`,\n    credentials: 'same-origin',\n  })\n}\n\nfunction createLoggingLink() {\n  return createLogLink({\n    enabled: process.env.REACT_APP_STAGE === 'dev',\n  })\n}\n\nfunction createRetryLink() {\n  return new RetryLink({\n    delay: {\n      initial: 300,\n      max: Infinity,\n      jitter: true,\n    },\n    attempts: {\n      max: 5,\n      retryIf: (error, _operation) => !!error,\n    },\n  })\n}\n\nfunction createOfflineLink() {\n  const offlineLink = new QueueLink()\n  autorun(() => {\n    if (isNetworkOnline()) {\n      logGraph('client is online')\n      offlineLink.open()\n    } else {\n      logGraph('client is offline')\n      offlineLink.close()\n    }\n  })\n  return offlineLink\n}\n","import { Catalog, setupI18n } from '@lingui/core'\nimport { I18nProvider } from '@lingui/react'\nimport { useAsyncEffect } from '@speedlo/hooks'\nimport * as detector from 'locales-detector'\nimport React, { useState } from 'react'\n\nimport Pacman from './common/Pacman'\nimport { appConfig } from './config'\nimport { logLang } from './helpers/logger'\n\nexport const i18n = setupI18n()\n\nexport const I18nManager: React.FC = ({ children }) => {\n  const [isReady, setReady] = useState(false)\n  const [language] = useState(detectLanguage)\n\n  useAsyncEffect(async () => {\n    await changeLanguage(language)\n    setReady(true)\n  })\n\n  if (isReady === false) {\n    return <Pacman />\n  }\n\n  return (\n    <I18nProvider language={language} i18n={i18n}>\n      {children}\n    </I18nProvider>\n  )\n}\n\nexport async function changeLanguage(lang: string) {\n  if (!appConfig.supportedLanguages.includes(lang)) {\n    logLang('language %s is not supported')\n    return false\n  }\n  await loadCatalog(lang)\n  i18n.activate(lang)\n  logLang('changed to %s', lang)\n  return true\n}\n\nexport function detectLanguage() {\n  const resolver = new detector.LocaleResolver(\n    [new detector.UrlDetector('lang'), new detector.NavigatorDetector()],\n    [new detector.LanguageOnlyTransformer()],\n  )\n  const languages: ReadonlyArray<string> = resolver.getLocales()\n  logLang('detected languages %s', languages.join('; '))\n  const supported = languages.find(loc =>\n    appConfig.supportedLanguages.includes(loc),\n  )\n  return supported || appConfig.fallbackLanguage\n}\n\nasync function loadCatalog(lang: string) {\n  let catalog: Catalog\n  if (process.env.NODE_ENV !== 'production') {\n    // prettier-ignore\n    catalog = await import(\n      /* webpackMode: \"lazy\", webpackChunkName: \"i18n-[index]\" */\n      `@lingui/loader!./locale/${lang}/messages.po`\n    )\n  } else {\n    // prettier-ignore\n    catalog = await import(\n      /* webpackMode: \"lazy\", webpackChunkName: \"i18n-[index]\" */\n      `./locale/${lang}/messages.js`\n    )\n  }\n  i18n.load({ [lang]: catalog })\n  logLang('loaded catalog %s', lang)\n}\n","import { DocumentNode } from 'graphql'\nimport React from 'react'\nimport { Query, QueryProps, QueryResult } from 'react-apollo'\nimport RedBox from 'redbox-react'\nimport { VError } from 'verror'\n\nimport Pacman from '../common/Pacman'\nimport { logError } from '../helpers/logger'\nimport { reportError } from '../helpers/sentry'\n\nexport function buildQuery<TData, TVariables>(query: DocumentNode) {\n  type TResult = QueryResult<TData, TVariables>\n  type TRenderProp<T> = (data: TData, result: TResult) => T\n  interface IProps\n    extends Omit<QueryProps<TData, TVariables>, 'query' | 'children'> {\n    render?: TRenderProp<ReactNode>\n    renderFragment?: TRenderProp<ReactNode[]>\n    renderLoading?: boolean | ((result: TResult) => ReactNode)\n    renderError?: boolean | ((result: TResult) => ReactNode)\n  }\n  const GQuery: React.SFC<IProps> = ({\n    render,\n    renderFragment,\n    renderLoading = true,\n    renderError = true,\n    children,\n    ...props\n  }) => (\n    <Query query={query} {...props}>\n      {result => {\n        if (result.loading || !result.data) {\n          if (typeof renderLoading === 'function') {\n            return renderLoading(result)\n          } else if (renderLoading === true) {\n            return <Pacman />\n          }\n        }\n        if (result.error) {\n          reportError(result.error)\n          logError(result.error)\n          if (typeof renderError === 'function') {\n            return renderError(result)\n          } else if (renderError === true) {\n            if (process.env.NODE_ENV === 'production') {\n              throw new VError(result.error, 'Query error')\n            }\n            return <RedBox error={result.error} />\n          } else {\n            return null\n          }\n        }\n        if (result.data) {\n          if (renderFragment) {\n            return <>{renderFragment(result.data, result)}</>\n          }\n          if (render) {\n            return render(result.data, result)\n          }\n        }\n        return children || null\n      }}\n    </Query>\n  )\n\n  return GQuery\n}\n","import { ErrorResponse, onError } from 'apollo-link-error'\nimport debug from 'debug'\n\nimport { reportFailingQuery } from '../helpers/sentry'\n\nconst log = debug('graph:error')\n\nexport const errorHandler = ({\n  graphQLErrors,\n  networkError,\n  operation,\n}: ErrorResponse) => {\n  if (graphQLErrors) {\n    reportFailingQuery(graphQLErrors, {\n      query: operation.operationName,\n      variables: operation.variables,\n    })\n    graphQLErrors.map(({ message, locations, path }) =>\n      log(\n        `[GraphQL error]: Message: ${message}, Location: ${locations}, Path: ${path}`,\n      ),\n    )\n  }\n  if (networkError) {\n    log(`[Network error]: ${networkError}`)\n  }\n}\n\nexport const createErrorLink = () => onError(errorHandler)\n","import { observable } from 'mobx'\n\nconst isOnline = observable.box(navigator.onLine)\n\nwindow.addEventListener('offline', () => isOnline.set(false))\nwindow.addEventListener('online', () => isOnline.set(true))\n\nexport const isNetworkOnline = () => isOnline.get()\nexport const isNetworkOffline = () => !isOnline.get()\n\nexport function whenGoingOnline(cb: () => void) {\n  return isOnline.observe(change => {\n    if (change.oldValue === false && change.newValue === true) {\n      cb()\n    }\n  })\n}\n","var map = {\n\t\"./cs/messages.js\": [\n\t\t879,\n\t\t5\n\t],\n\t\"./de/messages.js\": [\n\t\t880,\n\t\t6\n\t],\n\t\"./en-dev/messages.js\": [\n\t\t882,\n\t\t8\n\t],\n\t\"./en/messages.js\": [\n\t\t881,\n\t\t7\n\t],\n\t\"./pl/messages.js\": [\n\t\t883,\n\t\t9\n\t],\n\t\"./sk/messages.js\": [\n\t\t884,\n\t\t10\n\t]\n};\nfunction webpackAsyncContext(req) {\n\tvar ids = map[req];\n\tif(!ids) {\n\t\treturn Promise.resolve().then(function() {\n\t\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\t\te.code = 'MODULE_NOT_FOUND';\n\t\t\tthrow e;\n\t\t});\n\t}\n\treturn __webpack_require__.e(ids[1]).then(function() {\n\t\tvar id = ids[0];\n\t\treturn __webpack_require__.t(id, 7);\n\t});\n}\nwebpackAsyncContext.keys = function webpackAsyncContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackAsyncContext.id = 843;\nmodule.exports = webpackAsyncContext;","import {\n  applySnapshot,\n  getSnapshot,\n  Instance,\n  SnapshotIn,\n  types,\n} from 'mobx-state-tree'\n\nimport { GraphClient } from '../createClient'\nimport { logDebug } from '../helpers/logger'\nimport { persistModel } from '../helpers/persistModel'\nimport { AuthModel } from './AuthModel'\nimport { BaseModel } from './BaseModel'\nimport { BusinessModel } from './BusinessModel'\nimport { ConfigModel } from './ConfigModel'\nimport { LocationModel } from './LocationModel'\nimport { MapModel } from './MapModel'\nimport { OrderModel } from './OrderModel'\nimport { UserModel } from './UserModel'\n\nexport const RootModel = BaseModel.named('Root')\n  .props({\n    auth: types.optional(AuthModel, {}),\n    business: types.optional(BusinessModel, {}),\n    config: types.optional(ConfigModel, {}),\n    map: types.optional(MapModel, {}),\n    order: types.optional(OrderModel, {}),\n    location: types.optional(LocationModel, {}),\n    user: types.optional(UserModel, {}),\n  })\n  .views(self => ({\n    get persistedModels() {\n      return [\n        self.auth,\n        self.user,\n        self.business,\n        self.location,\n        self.order,\n        self.map,\n      ]\n    },\n  }))\n  .actions(self => {\n    let initialSnapshot\n    return {\n      afterCreate() {\n        const { business, map, ...snapshot } = getSnapshot(self)\n        initialSnapshot = snapshot\n      },\n      reset() {\n        logDebug(initialSnapshot)\n        applySnapshot(self, initialSnapshot)\n      },\n      init: async () => {\n        self.auth.attachAuthLinkToClient()\n        await Promise.all(self.persistedModels.map(persistModel))\n        await Promise.all([\n          self.business.queryBusiness(),\n          self.order.checkPaymentStatus(),\n        ])\n        initialSnapshot.business = getSnapshot(self.business)\n      },\n    }\n  })\n\nexport interface IRootEnvironment {\n  client: GraphClient\n  fetch: TFetch\n  geolocation: Geolocation\n}\n\nexport function createRootModel(client: GraphClient) {\n  const root = RootModel.create({}, {\n    client,\n    fetch: window.fetch,\n    geolocation: navigator.geolocation,\n  } as IRootEnvironment)\n  root.init()\n  return root\n}\n\nexport interface TRootModel extends Instance<typeof RootModel> {}\nexport interface TRootModelProps extends SnapshotIn<typeof RootModel> {}\n","import localforage from 'localforage'\nimport {\n  applySnapshot,\n  getSnapshot,\n  getType,\n  IStateTreeNode,\n  onSnapshot,\n} from 'mobx-state-tree'\n\nimport { appConfig } from '../config'\nimport { logPersist } from './logger'\n\nconst { persistenceKey } = appConfig\n\nexport async function persistModel(model: IStateTreeNode) {\n  const modelName = getType(model).name\n  const stateKey = `${persistenceKey}_${modelName}`\n\n  const writeState = snapshot => localforage.setItem(stateKey, snapshot)\n\n  try {\n    const state = await localforage.getItem(stateKey)\n    if (state !== null) {\n      applySnapshot(model, state)\n      logPersist('restored state %s', stateKey)\n    } else {\n      await writeState(getSnapshot(model))\n      logPersist('initialized state %s', stateKey)\n    }\n  } catch (err) {\n    logPersist('persistence failed', err)\n    localforage.removeItem(stateKey)\n  }\n\n  onSnapshot(model, writeState)\n}\n","import { setContext } from 'apollo-link-context'\nimport { Instance, SnapshotIn, types } from 'mobx-state-tree'\n\nimport { appConfig } from '../config'\nimport { logAuth } from '../helpers/logger'\nimport { identifyGuest } from '../helpers/sentry'\nimport { BaseModel } from './BaseModel'\n\nexport const AuthModel = BaseModel.named('Auth')\n  .props({\n    token: types.maybeNull(types.string),\n    userId: types.maybeNull(types.string),\n  })\n  .views(self => ({\n    get isValid() {\n      return self.token !== null\n    },\n    getClientHeaders() {\n      return {\n        Authorization: `Bearer ${self.token}`,\n      }\n    },\n  }))\n  .actions(self => ({\n    authenticate(token: string, userId: string) {\n      self.token = token\n      self.userId = userId\n      identifyGuest(userId, token)\n    },\n  }))\n  .actions(self => {\n    let fetching\n\n    const fetch = async () => {\n      if (!fetching) {\n        fetching = fetchToken()\n        const { token, userId } = await fetching\n        self.authenticate(token, String(userId))\n        fetching = null\n      }\n      return fetching\n    }\n\n    const authLink = setContext(async () => {\n      if (!self.token) {\n        await fetch()\n      }\n      return { headers: self.getClientHeaders() }\n    })\n\n    return {\n      attachAuthLinkToClient() {\n        self.client.link = authLink.concat(self.client.link)\n      },\n    }\n  })\n  .preProcessSnapshot(snapshot => {\n    if (snapshot.userId && snapshot.token) {\n      identifyGuest(snapshot.userId, snapshot.token)\n    }\n    return snapshot\n  })\n\nfunction fetchToken() {\n  const { endpoint } = appConfig\n  if (!endpoint) {\n    throw new Error('Missing endpoint in configuration.')\n  }\n  logAuth('retrieving guest token...')\n  const url = `${endpoint}/users/token?guest=true`\n  const options = {\n    headers: {\n      Accept: 'application/json',\n    },\n  }\n  logAuth('token retrieved')\n  return fetch(url, options).then(response => response.json())\n}\n\nexport interface TAuthModel extends Instance<typeof AuthModel> {}\nexport interface TAuthModelProps extends SnapshotIn<typeof AuthModel> {}\n","import { Instance, SnapshotIn, types } from 'mobx-state-tree'\n\nimport { appConfig } from '../config'\nimport {\n  GBusinessLookup,\n  GCompanyBranch,\n  OrderOriginEnum,\n} from '../graph/types'\nimport { logMain } from '../helpers/logger'\nimport { setSentryContext } from '../helpers/sentry'\nimport { BannerModel, TBannerModel } from './BannerModel'\nimport { BaseModel } from './BaseModel'\nimport { BusinessLookupQuery } from './BusinessModel.graphql'\nimport { ThemeModel } from './ThemeModel'\n\ntype TBranch = Omit<GCompanyBranch.Fragment, 'address'>\n\ninterface IVolatileProps {\n  isBrand: boolean\n  isMobileApp: boolean\n  branch: Maybe<TBranch>\n  country: Maybe<GCompanyBranch.Country>\n  orderOrigin: OrderOriginEnum\n  routerBasePath: string\n}\n\nexport const BusinessModel = BaseModel.named('Business')\n  .props({\n    code: types.maybeNull(types.string),\n    theme: types.optional(ThemeModel, {}),\n    banners: types.map(BannerModel),\n  })\n  .volatile<IVolatileProps>(() => ({\n    isBrand: false,\n    isMobileApp: false,\n    branch: null,\n    country: null,\n    orderOrigin: OrderOriginEnum.Web,\n    routerBasePath: '',\n  }))\n  .views(self => ({\n    get branchId() {\n      return self.branch && self.branch.id\n    },\n    get companyId() {\n      return self.branch && self.branch.company.id\n    },\n    get brandId() {\n      return self.branch && self.branch.brand.id\n    },\n    get isValid() {\n      return self.branch !== null\n    },\n    get requestedCode() {\n      // app can be built with a specific code for a purpose of mobile apps\n      let code = process.env.REACT_APP_BUSINESS_CODE || null\n      if (!code) {\n        // mostly used in DEV because it's not possible to use subdomains for\n        // business resolution ... use either code from url or stored one as fallback\n        const urlCode = readBusinessCodeFromUrl()\n        code = urlCode || self.code\n      }\n      return code\n    },\n  }))\n  .actions(self => ({\n    updateFromLookup(lookup: GBusinessLookup.Lookup) {\n      const {\n        isBrand,\n        isMobileApp,\n        knownBasePath,\n        orderOrigin,\n        branch,\n      } = lookup\n\n      if (!branch) {\n        return\n      }\n\n      self.isBrand = isBrand\n      self.isMobileApp = isMobileApp\n      self.branch = branch\n      self.country = branch.address.country || null\n      self.routerBasePath = knownBasePath\n      self.orderOrigin = orderOrigin\n\n      if (branch.id !== self.root.order.branchId) {\n        self.root.order.orderCancel()\n      }\n\n      if (process.env.REACT_APP_STAGE !== 'prod') {\n        // for non-prod enviroments we need to remember business code\n        // because its lost on redirects followed by a reload\n        self.code = isBrand ? self.branch.brand.code : self.branch.code\n      } else {\n        self.code = null\n      }\n    },\n    mockBranchData(branch: TBranch) {\n      self.branch = branch\n    },\n  }))\n  .actions(self => ({\n    queryBusiness: async () => {\n      const { data } = await self.client.query<GBusinessLookup.Query>({\n        query: BusinessLookupQuery,\n        variables: {\n          code: self.requestedCode,\n          url: window.location.href,\n        },\n      })\n\n      if (!(data && data.lookup && data.lookup.branch)) {\n        logMain('no business found, used code %s', self.requestedCode)\n        redirectAway()\n        return\n      }\n\n      self.updateFromLookup(data.lookup)\n\n      if (self.branchId) {\n        const stylesQuery = self.theme.queryStyles(self.branchId)\n        // no need to wait for styles if some were loaded previously\n        if (!self.theme.loaded) {\n          await stylesQuery\n        }\n      }\n\n      setSentryContext({\n        requestedCode: self.requestedCode,\n        branchId: self.branchId,\n        brandId: self.brandId,\n        companyId: self.companyId,\n        isBrand: self.isBrand,\n      })\n\n      logMain(\n        'identified branch %s, brand %s; company %s, isBrand: %s',\n        self.branchId,\n        self.brandId,\n        self.companyId,\n        self.isBrand,\n      )\n    },\n    overrideThemeForBranch(branchId: ID) {\n      self.theme.queryStyles(branchId)\n    },\n    ensureBannerForCurrentBranch(): TBannerModel {\n      const branchId = self.branchId!\n      if (!self.banners.has(branchId)) {\n        self.banners.set(branchId, { branchId: branchId })\n      }\n      return self.banners.get(branchId)!\n    },\n  }))\n\nconst codeParam = 'wac'\n\nfunction readBusinessCodeFromUrl() {\n  const parsedUrl = new window.URL(window.location.href)\n  return parsedUrl.searchParams.get(codeParam) || null\n}\n\nfunction redirectAway() {\n  if (process.env.NODE_ENV === 'production') {\n    window.location.replace(appConfig.redirectOnFail)\n  } else {\n    document.write('No business identified')\n  }\n}\n\nexport interface TBusinessModel extends Instance<typeof BusinessModel> {}\nexport interface TBusinessModelProps extends SnapshotIn<typeof BusinessModel> {}\n","import { differenceInDays } from 'date-fns'\nimport { Instance, SnapshotIn, types } from 'mobx-state-tree'\n\nimport { BaseModel } from './BaseModel'\n\nconst daysHidden = 15\nconst daysReminder = 90\n\nexport const BannerModel = BaseModel.named('Banner')\n  .props({\n    branchId: types.identifier,\n    closedAt: types.maybe(types.Date),\n    installedAt: types.maybe(types.Date),\n  })\n  .views(self => ({\n    get shouldBeVisible() {\n      if (self.root.business.isMobileApp) {\n        return false\n      }\n      if (\n        self.closedAt &&\n        differenceInDays(new Date(), self.closedAt) > daysHidden\n      ) {\n        return true\n      }\n      if (\n        self.installedAt &&\n        differenceInDays(new Date(), self.installedAt) > daysReminder\n      ) {\n        return true\n      }\n      // none of these has been set yet, banner should be visible\n      return !Boolean(self.closedAt || self.installedAt)\n    },\n  }))\n  .actions(self => ({\n    setInstalledNow() {\n      self.installedAt = new Date()\n    },\n    setClosedNow() {\n      self.closedAt = new Date()\n    },\n  }))\n\nexport interface TBannerModel extends Instance<typeof BannerModel> {}\nexport interface TBannerModelProps extends SnapshotIn<typeof BannerModel> {}\n","import gql from 'graphql-tag'\n\nexport const CompanyBranchFragment = gql`\n  fragment GCompanyBranch on CompanyBranch {\n    id\n    code: wac\n    brand {\n      id\n      name\n      code: wac\n    }\n    company {\n      id\n    }\n    address {\n      country {\n        phonePrefix\n      }\n    }\n    phone\n  }\n`\n\nexport const BusinessLookupQuery = gql`\n  query GBusinessLookup($code: String, $url: String) {\n    lookup: companyBranchLookUp(wac: $code, hostUrl: $url) {\n      branch: companyBranch {\n        ...GCompanyBranch\n      }\n      isBrand: isBrandWac\n      isMobileApp\n      knownBasePath\n      orderOrigin\n    }\n  }\n  ${CompanyBranchFragment}\n`\n","import Color from 'color'\nimport { Instance, SnapshotIn, types } from 'mobx-state-tree'\n\nimport { GCompanyBranchStyle } from '../graph/types'\nimport { BaseModel } from './BaseModel'\nimport { CompanyBranchStyleQuery } from './ThemeModel.graphql'\n\n// Fallback colors\nconst defaultPrimary = '#54984a'\nconst defaultSecondary = '#99230e'\nconst defaultTertiary = '#d9a700'\n\nexport const ThemeModel = BaseModel.named('Theme')\n  .props({\n    storeLogo: types.maybeNull(types.string),\n    storeLogoMobile: types.maybeNull(types.string),\n    backgroundCart: types.maybeNull(types.string),\n    primary: types.optional(types.maybeNull(types.string), defaultPrimary),\n    secondary: types.optional(types.maybeNull(types.string), defaultSecondary),\n    secondaryHover: types.optional(\n      types.maybeNull(types.string),\n      calcHoverColor(defaultSecondary),\n    ),\n    tertiary: types.optional(types.maybeNull(types.string), defaultTertiary),\n    tertiaryHover: types.optional(\n      types.maybeNull(types.string),\n      calcHoverColor(defaultTertiary),\n    ),\n    tertiaryText: 'white',\n    unselected: '#E5E5E5',\n    unselectedHover: '#EDEDED',\n    unselectedText: '#5A5A5A',\n    loaded: false,\n  })\n  .actions(self => ({\n    applyStyle(styles: GCompanyBranchStyle.Styles) {\n      Object.assign(self, {\n        primary: styles.active ? styles.active : defaultPrimary,\n        secondary: styles.main ? styles.main : defaultSecondary,\n        secondaryHover: calcHoverColor(\n          styles.main ? styles.main : defaultSecondary,\n        ),\n        tertiary: styles.mainSecondary ? styles.mainSecondary : defaultTertiary,\n        tertiaryHover: calcHoverColor(\n          styles.mainSecondary ? styles.mainSecondary : defaultTertiary,\n        ),\n        tertiaryText: 'white',\n        unselected: '#E5E5E5',\n        unselectedHover: '#EDEDED',\n        unselectedText: '#5A5A5A',\n        storeLogo: styles.storeLogo,\n        storeLogoMobile: styles.storeLogoMobile,\n        backgroundCart: styles.backgroundCart,\n      })\n      self.loaded = true\n    },\n  }))\n  .actions(self => ({\n    queryStyles: async (branchId: ID) => {\n      const { data } = await self.client.query<\n        GCompanyBranchStyle.Query,\n        GCompanyBranchStyle.Variables\n      >({\n        query: CompanyBranchStyleQuery,\n        variables: { branchId },\n      })\n      self.applyStyle(data.companyBranch.styles)\n      self.log('applied theme for branch %s', branchId)\n    },\n  }))\n\nfunction calcHoverColor(inputColor: string) {\n  return Color(inputColor)\n    .lighten(0.2)\n    .hsl()\n    .string()\n}\n\nexport interface TThemeModel extends Instance<typeof ThemeModel> {}\nexport interface TThemeModelProps extends SnapshotIn<typeof ThemeModel> {}\n","import gql from 'graphql-tag'\n\nexport const CompanyBranchStyleQuery = gql`\n  query GCompanyBranchStyle($branchId: ID!) {\n    companyBranch(id: $branchId) {\n      id\n      styles {\n        active\n        main\n        mainSecondary\n        storeLogo\n        storeLogoMobile\n        backgroundCart\n      }\n    }\n  }\n`\n","import { BaseModel } from './BaseModel'\n\nexport const ConfigModel = BaseModel.named('Config').props({\n  orderItemsMax: 50,\n})\n\nexport type TConfigModel = typeof ConfigModel.Type\nexport type TConfigModelProps = typeof ConfigModel.SnapshotType\n","import { Instance, SnapshotIn, types } from 'mobx-state-tree'\nimport { VError } from 'verror'\n\nimport { GResolveLocation } from '../graph/types'\nimport { formatAddress } from '../helpers/formats'\nimport { GeoPoint, gpsToLatLng } from '../helpers/gps'\nimport { i18n } from '../i18n'\nimport { BaseModel } from '../models/BaseModel'\nimport { ResolveLocationQuery } from './LocationModel.graphql'\n\ninterface IVolatileProps {\n  branchId: MaybeID\n  isOpen: boolean\n  isResolved: boolean\n  isStreetAddress: boolean\n  inDeliveryLocation: boolean\n  geolocationDisabled: boolean\n  geolocationPoint: Maybe<GeoPoint>\n  isResolving: boolean\n}\n\nexport const LocationModel = BaseModel.named('Location')\n  .props({\n    latitude: types.maybe(types.number),\n    longitude: types.maybe(types.number),\n    searchValue: types.maybe(types.string),\n    address: types.maybe(types.string),\n  })\n  .volatile<IVolatileProps>(self => ({\n    branchId: null,\n    isOpen: true,\n    isResolved: false,\n    isStreetAddress: false,\n    inDeliveryLocation: false,\n    geolocationDisabled: false,\n    geolocationPoint: null,\n    isResolving: false,\n  }))\n  .views(self => ({\n    get isGeolocationAvailable() {\n      return Boolean(self.env.geolocation && !self.geolocationDisabled)\n    },\n    get hasLocation() {\n      return self.latitude !== undefined || self.longitude !== undefined\n    },\n    get hasAddress() {\n      return Boolean(self.address)\n    },\n    get isDeliveryAddress() {\n      return self.isResolved && self.isStreetAddress && self.inDeliveryLocation\n    },\n    get hasFinishedSearch() {\n      return (\n        ((self.searchValue && self.searchValue.length > 0) || self.address) &&\n        !self.isResolving\n      )\n    },\n    get geoPoint() {\n      if (this.hasLocation) {\n        return {\n          latitude: self.latitude!,\n          longitude: self.longitude!,\n        }\n      }\n      return null\n    },\n    get resolutionTarget() {\n      const { business } = self.root\n      if (business.isBrand) {\n        return {\n          brandId: business.brandId!,\n        }\n      }\n      return {\n        branchId: business.branchId!,\n      }\n    },\n    get latLng() {\n      if (this.geoPoint) {\n        return gpsToLatLng(this.geoPoint)\n      }\n      return null\n    },\n  }))\n  .actions(self => ({\n    setLocation({ latitude, longitude }: any) {\n      self.latitude = latitude\n      self.longitude = longitude\n    },\n  }))\n  .actions(self => ({\n    setResolutionResult(result: GResolveLocation.ResolveLocation) {\n      const { finalAddress: address } = result\n      if (address) {\n        self.address = formatAddress(address)\n      }\n      self.branchId = result.companyBranch ? result.companyBranch.id : null\n      self.isResolved = result.isResolved\n      self.isStreetAddress = result.isValidAddress\n      self.inDeliveryLocation = result.inDeliveryLocation\n      if (result.isResolved) {\n        self.setLocation(result.gpsCoordinates)\n        self.log('resolved as %s', self.address)\n      } else {\n        self.log('not resolved')\n      }\n    },\n    setVolatileProps(props: Partial<IVolatileProps>) {\n      Object.assign(self, props)\n    },\n    disableGeolocation() {\n      self.geolocationDisabled = false\n    },\n    clearAddress() {\n      self.address = ''\n    },\n    setIsResolving(state: boolean) {\n      self.isResolving = state\n    },\n  }))\n  .actions(self => {\n    const resolver = async (vars?: Partial<GResolveLocation.Variables>) => {\n      self.setIsResolving(true)\n\n      const variables: GResolveLocation.Variables = {\n        ...self.resolutionTarget,\n        ...vars,\n      }\n      const { data } = await self.client.query<GResolveLocation.Query>({\n        query: ResolveLocationQuery,\n        variables,\n      })\n      if (data !== null) {\n        self.setResolutionResult(data.resolveLocation)\n      }\n      self.setIsResolving(false)\n    }\n    return {\n      validateUserLocation() {\n        if (self.hasLocation) {\n          self.log(\n            'validating stored user location %s, %s',\n            self.latitude,\n            self.longitude,\n          )\n          resolver({ latitude: self.latitude, longitude: self.longitude })\n        }\n      },\n      withUserAddress(address: string) {\n        self.searchValue = address\n        if (address === '') {\n          self.clearAddress()\n        } else {\n          self.log('resolving user address: %s', address)\n          resolver({ address })\n        }\n      },\n      withUserLocation(userLocation: GeoPoint) {\n        self.log('with user location: %j', userLocation)\n        self.latitude = userLocation.latitude\n        self.longitude = userLocation.longitude\n        resolver(userLocation)\n      },\n      useGeolocationResult(point: GeoPoint) {\n        self.geolocationPoint = point\n      },\n      attemptGeolocation() {\n        self.log('geolocating...')\n        self.env.geolocation.getCurrentPosition(\n          ({ coords }) => {\n            const { latitude, longitude } = coords\n            self.log(\n              'geolocated at coords %s, %s (acc: %s)',\n              coords.latitude,\n              coords.longitude,\n              coords.accuracy,\n            )\n            this.useGeolocationResult({ latitude, longitude })\n          },\n          err => {\n            self.log(new VError('failed geolocation', err))\n            self.disableGeolocation()\n            window.alert(i18n.t`Your browser does not support geolocation.`)\n          },\n          {\n            enableHighAccuracy: true,\n            maximumAge: 60 * 1000,\n          },\n        )\n      },\n    }\n  })\n\nexport interface TLocationModel extends Instance<typeof LocationModel> {}\nexport interface TLocationModelProps extends SnapshotIn<typeof LocationModel> {}\n","import gql from 'graphql-tag'\n\nimport { JsonAddressFragment } from '../graph/fragments.graphql'\n\nconst LocationResolutionFragment = gql`\n  fragment GLocationResolution on AddressResolvedLocation {\n    finalAddress {\n      ...GJsonAddress\n    }\n    isResolved\n    isValidAddress\n    inDeliveryLocation\n    gpsCoordinates {\n      latitude\n      longitude\n    }\n    companyBranch {\n      id\n      isOpen\n    }\n  }\n  ${JsonAddressFragment}\n`\n\nexport const ResolveLocationQuery = gql`\n  query GResolveLocation(\n    $brandId: ID\n    $branchId: ID\n    $address: String\n    $latitude: Float\n    $longitude: Float\n  ) {\n    resolveLocation(\n      brand: $brandId\n      companyBranch: $branchId\n      address: $address\n      latitude: $latitude\n      longitude: $longitude\n    ) {\n      ...GLocationResolution\n    }\n  }\n  ${LocationResolutionFragment}\n`\n","import { Instance, SnapshotIn, types } from 'mobx-state-tree'\nimport GoogleMap from 'react-google-maps/lib/components/GoogleMap'\n\nimport { GeoPoint, gpsToLatLng, latLngToGps } from '../helpers/gps'\nimport { BaseModel } from '../models/BaseModel'\n\ninterface IVolatileProps {\n  mapRef: Maybe<GoogleMap>\n  clickPoint: Maybe<GeoPoint>\n}\n\nexport const GPSCzechia = {\n  latitude: 49.8037633,\n  longitude: 15.4749126,\n}\n\nexport const MapModel = BaseModel.named('Map')\n  .props({\n    zoom: types.optional(types.number, 16),\n    latitude: types.optional(types.number, GPSCzechia.latitude),\n    longitude: types.optional(types.number, GPSCzechia.longitude),\n  })\n  .volatile<IVolatileProps>(self => ({\n    mapRef: null,\n    clickPoint: null,\n  }))\n  .views(self => ({\n    get isReady() {\n      return self.mapRef !== null\n    },\n    get center() {\n      return gpsToLatLng(self)\n    },\n  }))\n  .actions(self => ({\n    setMapRef(ref: Maybe<GoogleMap>) {\n      self.mapRef = ref\n    },\n    updateZoom() {\n      if (self.mapRef) {\n        self.zoom = self.mapRef.getZoom()\n      }\n    },\n    updatePosition() {\n      if (self.mapRef) {\n        const center = self.mapRef.getCenter()\n        self.latitude = center.lat()\n        self.longitude = center.lng()\n      }\n    },\n    panToLocation(gps: GeoPoint, radiusMeters: number = 2000) {\n      if (self.mapRef) {\n        // const bounds = getBounds([\n        //   computeDestinationPoint(gps, radiusMeters, 135), // SE corner\n        //   computeDestinationPoint(gps, radiusMeters, 315), // NW corner\n        // ])\n\n        // // @ts-ignore padding missing in types\n        // self.mapRef.panToBounds(\n        //   {\n        //     west: bounds.minLng,\n        //     east: bounds.maxLng,\n        //     north: bounds.minLat,\n        //     south: bounds.maxLat,\n        //   },\n        //   20,\n        // )\n        self.mapRef.panTo(gpsToLatLng(gps))\n      }\n    },\n    onClick(ev: google.maps.MouseEvent) {\n      self.clickPoint = latLngToGps(ev.latLng)\n    },\n    clearClickPoint() {\n      self.clickPoint = null\n    },\n  }))\n\nexport interface TMapModel extends Instance<typeof MapModel> {}\nexport interface TMapModelProps extends SnapshotIn<typeof MapModel> {}\n","import { when } from 'mobx'\nimport { Instance, SnapshotIn, types } from 'mobx-state-tree'\nimport { FetchResult } from 'react-apollo'\nimport { VError } from 'verror'\n\nimport { RecipeFragment } from '../graph/fragments.graphql'\nimport {\n  DeliveryTypeEnum,\n  GAddToOrder,\n  GChangeOrderItem,\n  GCreateDeliveryOrder,\n  GCreateOrder,\n  GCreatePickupOrder,\n  GOrder,\n  GOrderMobile,\n  GOrderPaymentStatus,\n  GRecipe,\n  GRemoveOrderItem,\n  GSubmitOrder,\n  GVamStatus,\n  PaymentGateEnum,\n} from '../graph/types'\nimport { executeGoPayPayment } from '../helpers/gopay'\nimport { logMain, logOrder } from '../helpers/logger'\nimport { RM } from '../helpers/ramda'\nimport { reportError } from '../helpers/sentry'\nimport { i18n } from '../i18n'\nimport { OrderFragment } from '../segments/cart/CartView.graphql'\nimport { FoodMenuQuery } from '../segments/foodMenu/FoodMenuView.graphql'\nimport {\n  PickupMapBranchQuery,\n  PickupMapBrandQuery,\n} from '../segments/map/PickupMap.graphql'\nimport { OrderMobileFragment } from '../segments/mobile/MobileCart.graphql'\nimport { IOrderFormState } from '../segments/orderForm/OrderFormSetup'\nimport { BaseModel } from './BaseModel'\nimport {\n  AddToOrderMobileMutation,\n  AddToOrderMutation,\n  ChangeOrderItemMutation,\n  CreateDeliveryOrderMutation,\n  CreatePickupOrderMutation,\n  OrderCartForRecipeQuery,\n  OrderPaymentStatusQuery,\n  RemoveOrderItemMutation,\n  SubmitOrderMutation,\n  VamStatusQuery,\n} from './OrderModel.graphql'\n\ninterface IVolatileProps {\n  isSubmitting: boolean\n  isGoPayChecking: boolean\n  submitErrors: Maybe<ReadonlyArray<string>>\n  agreements: TAgreement[]\n  lastActiveRecipeId: MaybeID\n  isVamInitialized: boolean\n  timePickerOpen: boolean\n}\n\nexport type TAgreement = GVamStatus.VamStatus\n\nexport const OrderModel = BaseModel.named('Order')\n  .props({\n    branchId: types.maybeNull(types.string),\n    orderId: types.maybeNull(types.string),\n    orderMethod: DeliveryTypeEnum.Messenger,\n    payment: PaymentGateEnum.Gopay,\n    deliverAt: types.maybe(types.Date),\n    firstname: '',\n    lastname: '',\n    email: '',\n    phone: '',\n    phonePrefix: '',\n    note: '',\n  })\n  .volatile<IVolatileProps>(self => ({\n    isSubmitting: false,\n    isGoPayChecking: false,\n    submitErrors: null,\n    agreements: [],\n    lastActiveRecipeId: null,\n    isVamInitialized: false,\n    timePickerOpen: false,\n  }))\n  .views(self => ({\n    get hasOrder() {\n      return self.orderId !== null\n    },\n    get fragmentOrderId() {\n      return `Order-${self.orderId}`\n    },\n    get usingDeliveryOrderMethod() {\n      return self.orderMethod === DeliveryTypeEnum.Messenger\n    },\n    get usingPickupOrderMethod() {\n      return self.orderMethod === DeliveryTypeEnum.Pickup\n    },\n    get hasErrors() {\n      return Boolean(self.submitErrors && self.submitErrors.length > 0)\n    },\n    get defaultPhonePrefix() {\n      if (self.root.business.isValid && self.root.business.country) {\n        return self.root.business.country.phonePrefix\n      }\n      return '+'\n    },\n    getSubmitVariables(formValues: IOrderFormState): GSubmitOrder.Variables {\n      return {\n        orderId: self.orderId!,\n        customer: {\n          firstName: formValues.firstname,\n          lastName: formValues.lastname,\n          emails: [{ email: formValues.email }],\n          phones: [{ phone: `${formValues.phonePrefix}${formValues.phone}` }],\n        },\n        note: formValues.note,\n        paymentGate: formValues.payment,\n        deliverAt: self.deliverAt ? self.deliverAt.toISOString() : null,\n        agreements: formValues.agreements\n          .filter(RM.propEq('isConfirmed', true))\n          .map(RM.prop('id'))\n          .filter(Boolean),\n      }\n    },\n  }))\n  .actions(self => ({\n    useOrderMethod(method: DeliveryTypeEnum) {\n      self.orderMethod = method\n    },\n    setBranch(branchId: ID) {\n      self.branchId = branchId\n    },\n    orderCreated(result: GCreateOrder.Fragment) {\n      self.orderId = result.id\n      self.branchId = result.companyBranch.id\n      self.deliverAt = undefined\n      self.root.business.overrideThemeForBranch(self.branchId)\n      logMain('order %s created for branch %s', self.orderId, self.branchId)\n    },\n    orderPaid(orderId: ID) {\n      if (self.orderId !== orderId) {\n        self.orderId = orderId\n        logMain('order %s replaced by %s due to successful payment status')\n      }\n    },\n    orderCancel() {\n      if (self.branchId || self.orderId) {\n        logMain(\n          'cancel order %s, was at branch %s',\n          self.root.order.orderId,\n          self.root.order.branchId,\n        )\n      }\n      self.orderId = null\n      self.branchId = null\n    },\n    submitFinished() {\n      self.isSubmitting = false\n    },\n    submitFailed(errors?: ReadonlyArray<string>) {\n      self.isSubmitting = false\n      self.submitErrors = errors || [\n        i18n.t`Error during sending order. Please try again later.`,\n      ]\n    },\n    vamFailed() {\n      self.submitErrors = [\n        i18n.t`Internal error during sending order. Order can not be finished right now. Our team was notified and is working on fix. Thank you for your understanding.`,\n      ]\n      self.isVamInitialized = false\n    },\n    clearErrors() {\n      self.submitErrors = null\n    },\n    goPayStatusCheck(checking: boolean) {\n      self.isGoPayChecking = checking\n    },\n    useAgreements(agreements: ReadonlyArray<TAgreement>) {\n      if (Array.isArray(agreements)) {\n        self.agreements = agreements\n      }\n      self.isVamInitialized = true\n    },\n    setUsedRecipeId(recipeId: ID) {\n      self.lastActiveRecipeId = recipeId\n    },\n    openTimePicker() {\n      self.timePickerOpen = true\n    },\n    closeTimePicker() {\n      self.timePickerOpen = false\n    },\n    setDeliverAt(deliverAt: Date | undefined) {\n      self.deliverAt = deliverAt\n    },\n    async queryPaymentStatus(\n      orderId: ID = self.orderId!,\n    ): Promise<GOrderPaymentStatus.Status | null> {\n      const variables: GOrderPaymentStatus.Variables = {\n        orderId,\n      }\n      try {\n        const result = await self.client.query<GOrderPaymentStatus.Query>({\n          fetchPolicy: 'no-cache',\n          query: OrderPaymentStatusQuery,\n          variables,\n        })\n        return result.data.status\n      } catch (err) {\n        logOrder('failed to verify payment status for order %s: ', orderId)\n        return null\n      }\n    },\n    rememberFormValues(values: IOrderFormState) {\n      if (self.root.user.shouldRememberForm) {\n        self.firstname = values.firstname\n        self.lastname = values.lastname\n        self.email = values.email\n        self.phone = values.phone\n        self.phonePrefix = values.phonePrefix\n        self.note = values.note\n      } else {\n        self.firstname = ''\n        self.lastname = ''\n        self.email = ''\n        self.phone = ''\n        self.phonePrefix = ''\n        self.note = ''\n      }\n    },\n  }))\n  .actions(self => ({\n    async createDeliveryOrder() {\n      const { business, location } = self.root\n      if (!location.geoPoint) {\n        return null\n      }\n      const variables: GCreateDeliveryOrder.Variables = {\n        gps: location.geoPoint,\n        orderOrigin: business.orderOrigin,\n        brandId: business.isBrand ? business.brandId : undefined,\n        branchId: business.isBrand ? undefined : business.branchId,\n      }\n      const { data } = await self.client.mutate({\n        fetchPolicy: 'no-cache',\n        mutation: CreateDeliveryOrderMutation,\n        variables,\n      })\n      const { order } = data as GCreateDeliveryOrder.Mutation\n      self.orderCreated(order)\n      // @ts-ignore method defined lower\n      self.initVam()\n      return self.orderId\n    },\n    async createPickupOrder(branchId: ID) {\n      const { business } = self.root\n      const variables: GCreatePickupOrder.Variables = {\n        branchId,\n        orderOrigin: business.orderOrigin,\n      }\n      const { data } = await self.client.mutate({\n        fetchPolicy: 'no-cache',\n        mutation: CreatePickupOrderMutation,\n        variables,\n      })\n      const { order } = data as GCreatePickupOrder.Mutation\n      self.orderCreated(order)\n      // @ts-ignore method defined lower\n      self.initVam()\n      return self.orderId\n    },\n    prefetchPickup() {\n      const { business } = self.root\n      if (business.isBrand) {\n        self.client.query({\n          query: PickupMapBrandQuery,\n          variables: { brandId: business.brandId },\n        })\n      } else {\n        self.client.query({\n          query: PickupMapBranchQuery,\n          variables: { branchId: business.branchId },\n        })\n      }\n    },\n    prefetchFoodMenu(branchId?: ID) {\n      if (branchId) {\n        self.client.query({ query: FoodMenuQuery, variables: { branchId } })\n      }\n    },\n    prefetchFood(recipeId: ID) {\n      self.client.query({\n        query: OrderCartForRecipeQuery,\n        variables: { recipeId },\n      })\n    },\n    async addFromRecipe(recipeId: ID, sideDishes: Array<ID> = []) {\n      const variables: GAddToOrder.Variables = {\n        orderId: self.orderId!,\n        recipeId,\n        sideDishes,\n      }\n      const current = self.client.readFragment<GOrder.Fragment>({\n        id: self.fragmentOrderId,\n        fragment: OrderFragment,\n        fragmentName: 'GOrder',\n      })\n      const recipe = self.client.readFragment<GRecipe.Fragment>({\n        id: `Recipe-${recipeId}`,\n        fragment: RecipeFragment,\n      })\n      const optimisticResponse = {\n        __typename: 'Mutation',\n        createOrderRecipe: {\n          ...current,\n          countWares: current ? current.countWares + 1 : 1,\n          items: [\n            ...(current ? current.items : []),\n            {\n              __typename: 'OrderRecipe',\n              id: '-1',\n              price: {\n                __typename: 'PriceConverted',\n                value: 0,\n                formattedValue: '---',\n              },\n              recipe: { ...recipe, sideDishes: [] },\n              sideDishes: [],\n              automatic: false,\n            },\n          ],\n        },\n      }\n      await self.client.mutate({\n        mutation: AddToOrderMutation,\n        variables,\n        optimisticResponse,\n      })\n    },\n    async addFromRecipeMobile(recipeId: ID, sideDishes: Array<ID> = []) {\n      const variables: GAddToOrder.Variables = {\n        orderId: self.orderId!,\n        recipeId,\n        sideDishes,\n      }\n      const current = self.client.readFragment<GOrderMobile.Fragment>({\n        id: self.fragmentOrderId,\n        fragment: OrderMobileFragment,\n        fragmentName: 'GOrderMobile',\n      })\n      const optimisticResponse = {\n        __typename: 'Mutation',\n        createOrderRecipe: {\n          ...current,\n          countWares: current ? current.countWares + 1 : 1,\n          items: [\n            ...(current ? current.items : []),\n            {\n              __typename: 'OrderRecipe',\n              id: '-1',\n              recipe: { __typename: 'Recipe', id: recipeId },\n              automatic: false,\n            },\n          ],\n        },\n      }\n      await self.client.mutate({\n        mutation: AddToOrderMobileMutation,\n        variables,\n        optimisticResponse,\n      })\n    },\n    async updateItem(itemId: ID, sideDishes: Array<ID> = []) {\n      const variables: GChangeOrderItem.Variables = {\n        orderId: self.orderId!,\n        itemId,\n        sideDishes,\n      }\n      await self.client.mutate({ mutation: ChangeOrderItemMutation, variables })\n    },\n    removeItemFromCart(itemId: ID) {\n      const variables: GRemoveOrderItem.Variables = {\n        itemId,\n      }\n      const current = self.client.readFragment<GOrder.Fragment>({\n        fragment: OrderFragment,\n        fragmentName: 'GOrder',\n        id: self.fragmentOrderId,\n      })\n      self.client.mutate({\n        mutation: RemoveOrderItemMutation,\n        variables,\n        optimisticResponse: {\n          __typename: 'Mutation',\n          destroyOrderRecipe: {\n            ...current,\n            countWares: current ? current.countWares - 1 : 0,\n            items: current\n              ? current.items.filter(item => item.id !== itemId)\n              : [],\n          },\n        },\n      })\n    },\n    async initVam() {\n      const variables: GVamStatus.Variables = {\n        input: {\n          orderId: self.orderId!,\n          email: self.email,\n          firstname: self.firstname,\n          lastname: self.lastname,\n          phone: self.phone,\n        },\n      }\n      try {\n        const result = await self.client.query<GVamStatus.Query>({\n          query: VamStatusQuery,\n          variables,\n        })\n        if (result.data) {\n          self.useAgreements(result.data.vamStatus)\n        }\n      } catch (err) {\n        reportError(err, { variables })\n        self.vamFailed()\n      }\n    },\n    async updateVam(formValues: IOrderFormState) {\n      const phone = `${formValues.phonePrefix.trim()}${formValues.phone.trim()}`\n      const email = formValues.email.trim()\n      const firstname = formValues.firstname.trim()\n      const lastname = formValues.lastname.trim()\n      const variables: GVamStatus.Variables = {\n        input: {\n          email,\n          phone,\n          firstname,\n          lastname,\n          orderId: self.orderId!,\n        },\n      }\n      try {\n        const result = await self.client.query<GVamStatus.Query>({\n          query: VamStatusQuery,\n          variables,\n        })\n        if (result.data) {\n          self.useAgreements(result.data.vamStatus)\n        }\n      } catch (err) {\n        reportError(err, { variables })\n        self.vamFailed()\n      }\n    },\n    submitOrder: async (formValues: IOrderFormState) => {\n      self.isSubmitting = true\n      let result: FetchResult\n\n      self.rememberFormValues(formValues)\n\n      try {\n        result = await self.client.mutate({\n          fetchPolicy: 'no-cache',\n          mutation: SubmitOrderMutation,\n          variables: self.getSubmitVariables(formValues),\n          refetchQueries: ['GCartView', 'GMobileCart'],\n        })\n      } catch (err) {\n        self.submitFailed()\n        throw reportError(new VError('order submit mutation error: %j', err))\n      }\n\n      if ((result.errors && result.errors.length) || !result.data) {\n        self.submitFailed()\n        throw reportError(\n          new VError('order submit graphql errors: %j', result.errors),\n        )\n      }\n\n      const submitResult: GSubmitOrder.FinishOrder = result.data.finishOrder\n      if (submitResult.userErrors && submitResult.userErrors.length) {\n        self.submitFailed(submitResult.userErrors)\n        throw new VError('Order user errors: %j', submitResult.userErrors)\n      }\n\n      if (formValues.payment === PaymentGateEnum.Cash) {\n        self.submitFinished()\n        return\n      }\n\n      if (!submitResult.gopayUrl) {\n        self.submitFailed()\n        throw reportError(new Error('GoPay url missing from response'))\n      }\n\n      await executeGoPayPayment(submitResult.gopayUrl)\n\n      self.goPayStatusCheck(true)\n      const paymentStatus = await self.queryPaymentStatus()\n      self.goPayStatusCheck(false)\n\n      if (paymentStatus) {\n        if (paymentStatus.isSuccess) {\n          self.submitFinished()\n        } else {\n          self.submitFailed(\n            paymentStatus.userErrors.length\n              ? paymentStatus.userErrors\n              : undefined,\n          )\n          throw new VError('Payment failed: %j', paymentStatus.userErrors)\n        }\n      } else {\n        self.submitFailed()\n        throw reportError(new VError('No payment status returned'))\n      }\n    },\n  }))\n  .actions(self => ({\n    checkPaymentStatus() {\n      const parsedUrl = new window.URL(window.location.href)\n      // the orderId will come in URL when GoPay payment was handled by redirect\n      const orderId = parsedUrl.searchParams.get('orderId')\n      if (!orderId) {\n        return\n      }\n      when(\n        () => self.root.auth.isValid,\n        async () => {\n          // delay displaying status checking modal\n          const checkDelay = setTimeout(() => self.goPayStatusCheck(true), 500)\n          const paymentStatus = await self.queryPaymentStatus(orderId)\n\n          clearTimeout(checkDelay)\n          self.goPayStatusCheck(false)\n\n          if (paymentStatus && paymentStatus.isSuccess) {\n            self.orderPaid(orderId)\n            parsedUrl.search = ''\n            parsedUrl.pathname = '/finish'\n            location.replace(parsedUrl.toString())\n          } else {\n            const phone = self.root.business.branch!.phone\n            self.submitFailed([\n              i18n.t`We were unable to verify status of your payment. Please contact operator using number ${phone}`,\n            ])\n            return\n          }\n        },\n      )\n    },\n  }))\n\nexport interface TOrderModel extends Instance<typeof OrderModel> {}\nexport interface TOrderModelProps extends SnapshotIn<typeof OrderModel> {}\n","import scriptjs from 'scriptjs'\n\nimport { logOrder } from './logger'\n\nconst embedScript = 'https://gate.gopay.cz/gp-gw/js/embed.js'\nconst embedScriptSandbox = 'https://gw.sandbox.gopay.com/gp-gw/js/embed.js'\n\ninterface ICheckoutResult {\n  url: string\n  id: number\n}\n\nexport async function executeGoPayPayment(url: string) {\n  logOrder('GoPay init', url)\n  await loadScript(url)\n  return checkout(getOptions(url))\n}\n\nfunction getOptions(url: string) {\n  // const isSafari = /^((?!chrome|android|mobile).)*safari/i.test(\n  //   navigator.userAgent,\n  // )\n  // logOrder('Browser is desktop Safari', isSafari)\n  return { gatewayUrl: url, inline: true }\n}\n\nfunction loadScript(url: string) {\n  const scriptUrl = url.includes('gw.sandbox.gopay.com')\n    ? embedScriptSandbox\n    : embedScript\n  logOrder('GoPay script url', scriptUrl)\n  return new Promise(resolve => {\n    scriptjs(scriptUrl, resolve)\n  })\n}\n\nfunction checkout(options: object): Promise<number> {\n  return new Promise(resolve => {\n    logOrder('GoPay checkout')\n    // @ts-ignore\n    _gopay.checkout(options, function(result: ICheckoutResult) {\n      logOrder('GoPay result', result)\n      resolve(result.id)\n    })\n  })\n}\n","import { DocumentNode } from 'graphql'\nimport React from 'react'\nimport { Mutation, MutationProps, MutationResult } from 'react-apollo'\n\nexport function buildMutation<TData, TVariables>(mutation: DocumentNode) {\n  interface IProps\n    extends Omit<MutationProps<TData, TVariables>, 'mutation' | 'children'> {\n    render(data: MutationResult<TData>): ReactNode\n  }\n  const GMutation: React.SFC<IProps> = () => {\n    const { render, ...props } = this.props\n    return (\n      <Mutation mutation={mutation} {...props}>\n        {render}\n      </Mutation>\n    )\n  }\n  return GMutation\n}\n","import { Instance, SnapshotIn, types } from 'mobx-state-tree'\n\nimport { BaseModel } from './BaseModel'\n\nexport const UserModel = BaseModel.named('User')\n  .props({\n    rememberForm: types.maybeNull(types.boolean),\n  })\n  .volatile(self => ({\n    closingTimeAlertHidden: false,\n    orderLimitAlertHidden: true,\n  }))\n  .actions(self => ({\n    showClosingTime() {\n      self.closingTimeAlertHidden = false\n    },\n    hideClosingTime() {\n      self.closingTimeAlertHidden = true\n    },\n    showOrderLimit() {\n      self.orderLimitAlertHidden = false\n    },\n    hideOrderLimit() {\n      self.orderLimitAlertHidden = true\n    },\n    setFormRememberYes() {\n      self.rememberForm = true\n    },\n    setFormRememberNo() {\n      self.rememberForm = false\n    },\n  }))\n  .views(self => ({\n    get shouldRememberForm() {\n      return self.rememberForm !== false\n    },\n  }))\n\nexport interface TUserModel extends Instance<typeof UserModel> {}\nexport interface TUserModelProps extends SnapshotIn<typeof UserModel> {}\n"],"sourceRoot":""}