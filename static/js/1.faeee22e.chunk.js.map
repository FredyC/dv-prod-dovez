{"version":3,"sources":["segments/orderForm/OrderFormStorageNotice.tsx","segments/orderForm/OrderFormView.graphql.ts","segments/orderForm/OrderErrorModal.tsx","segments/orderForm/OrderAgreements.tsx","segments/orderForm/OrderFormAutoFill.tsx","segments/orderForm/OrderNoteInput.tsx","segments/orderForm/OrderFormInputs.tsx","hooks/useGuardedMutation.ts","segments/orderForm/OrderFormSetup.tsx","segments/orderForm/OrderSubmitLine.tsx","common/SubmitSpinner.tsx","segments/orderForm/OrderGoPayModal.tsx","segments/orderForm/OrderTimePicker.tsx","segments/shop/logo-commerce-01.svg","segments/shop/logo-commerce-02.svg","segments/shop/logo-doveze.svg","segments/shop/logo-gopay.png","segments/finish/FinishView.graphql.ts","segments/destination/AddressInput.tsx","segments/destination/GeolocationButton.tsx","segments/destination/ResolvedAddress.tsx","segments/destination/SearchInput.tsx","segments/map/AddressSubmit.tsx","segments/map/DeliveryMap.graphql.ts","segments/map/DeliveryMapPanning.tsx","segments/sidedishPicker/SidedishPicker.tsx","segments/sidedishPicker/CategoryValidationMessage.tsx","segments/sidedishPicker/SidedishCheckbox.tsx","segments/cart/CartOrderButton.tsx","segments/cart/CartContents.tsx","segments/cart/CartDiscounts.tsx","segments/cart/CartItem.tsx","segments/cart/EditCartItemButton.tsx","segments/cart/RemoveCartItemButton.tsx","segments/cart/CartTotals.tsx","segments/cart/CartIsEmpty.tsx","segments/cart/ChangeCartModal.tsx","segments/foodMenu/CategoryNavigator.tsx","segments/foodMenu/FoodMenu.tsx","segments/foodMenu/FoodCategory.tsx","segments/foodMenu/FoodMenuItem.tsx","segments/foodMenu/LinkToCart.tsx","segments/foodMenu/OrderLimitModal.tsx","common/FormInputCheckbox.tsx","segments/orderForm/OrderEmailInput.tsx","segments/orderForm/OrderNameInput.tsx","segments/orderForm/OrderPhoneInput.tsx","segments/orderForm/OrderPromoInput.tsx","segments/orderForm/OrderPromoInput.graphql.ts","segments/orderForm/OrderTimeButtons.tsx","segments/timePicker/TimePicker.tsx","segments/timePicker/createTimeSteps.ts","segments/timePicker/TimePickerButton.tsx","segments/orderForm/OrderTimePicker.graphql.ts","common/ColStyle.tsx","hooks/useShopStatus.ts","common/ShopAddress.tsx","common/AlertModal.tsx","common/BackgroundThemed.tsx","common/WithOrder.tsx","common/BaseMap.tsx","common/FormTextInput.tsx","segments/shop/ShopClosingTimeModal.tsx","segments/shop/ShopHeaderIcons.tsx","segments/shop/ShopStatusDisplay.tsx","segments/finish/FinishViewFooter.tsx","segments/finish/FinishViewLoader.tsx","segments/finish/FinishViewOrder.tsx","segments/finish/FinishViewSupport.tsx","segments/destination/OrderMethod.tsx","segments/map/DeliveryMap.tsx","common/ButtonStripe.tsx","segments/map/atoms/MapPanning.tsx","segments/cart/CartView.tsx","segments/cart/AddToCartModal.tsx","segments/cart/CartModal.tsx","common/PickerButton.tsx","segments/cart/CartItemButton.tsx","segments/cart/useCartRefresh.ts","segments/foodMenu/FoodMenuView.tsx"],"names":["_react","__webpack_require__","_mobxReact","_react2","_interopRequireDefault","_reactstrap","_styledComponents","_Responsive","_WithRoot","_OrderFormView","NoticeButton","default","Button","withConfig","displayName","StorageNotice","Alert","mediaDesktop","mediaMobile","props","createElement","WithRoot","render","root","QueryOrderForm","skip","order","hasOrder","user","rememberForm","variables","orderId","renderLoading","Observer","countWares","data-testid","Trans","id","color","size","onClick","setFormRememberYes","setFormRememberNo","_graphqlTag","_graph","OrderFormQuery","buildQuery","_mobxReactLite","useRoot","useObserver","Modal","isOpen","hasErrors","toggle","clearErrors","className","ModalHeader","tag","Container","ModalBody","submitErrors","map","error","idx","key","_mobx","_interopRequireWildcard","_FormInputCheckbox","_i18n","ButtonStyled","GdprAgreementStyled","div","descOpen","useRef","observable","array","current","toggleId","useCallback","includes","remove","push","Fragment","agreements","agreement","_extends","isConfirmed","style","display","hideConfirmed","FormInputCheckbox","field","validate","checked","isMandatory","dangerouslySetInnerHTML","__html","name","description","i18n","_","toLocaleLowerCase","Collapse","onFill","_reactForm","isTooLong","value","trim","length","OrderNoteInputValidator","ingredientsDescription","Field","fieldApi","FormGroup","Input","type","placeholder","title","onChange","e","setValue","target","onBlur","setTouched","valid","invalid","Boolean","FormText","FormFeedback","values","0","MAX_LENGTH","_OrderEmailInput","_OrderNameInput","_OrderNoteInput","_OrderPhoneInput","_OrderPromoInput","_OrderTimeButtons","OrderNameInput","OrderPhoneInput","OrderEmailInput","OrderNoteInput","OrderTimeButtons","mutation","_a","onUserErrors","options","__rest","defaultMessage","handleGraphQLErrors","errors","userErrors","filter","_ramda","RM","pathEq","prop","handleError","err","hasOwnProperty","isApolloError","networkError","window","alert","graphQLErrors","_sentry","reportError","mutate","_reactApolloHooks","useMutation","__awaiter","this","result","data","_hooks","_types","_logger","orderModel","history","useRouterContext","useEffect","isVamInitialized","initVam","updateVam","formState","formApi","formValue","formAgreement","find","propEq","Object","assign","useDebounceCallback","Form","defaultValues","firstname","lastname","email","phone","phonePrefix","defaultPhonePrefix","note","payment","PaymentGateEnum","Gopay","getFormValues","validateOnMount","onSubmit","submitOrder","replace","logOrder","submitForm","_Buttons","_SubmitSpinner","_WithOrder","canSubmit","WithOrder","observe","PrimaryButton","disabled","isSubmitting","Desktop","toLocaleUpperCase","Mobile","_reactSpinkit","withTheme","theme","primary","fadeIn","_AlertModal","_Pacman","TextPadding","AlertModal","isGoPayChecking","headerText","noMargin","_tools","_dateFns","_useGuardedMutation","_TimePicker","_OrderTimePicker","loading","useQuery","OrderTimePickerQuery","branchId","suspend","updateOrder","useGuardedMutation","UpdateOrderDeliveryTimeMutation","submitFailed","selectedTime","deliverAt","onConfirmAndClose","time","isoDate","setDeliverAt","closeTimePicker","renderModalContent","minDate","companyBranch","willOpenAt","Date","getStartTime","maxDate","willCloseAt","nextBusinessHour","businessHours","closeAt","getEndTime","isAfter","minuteOffset","defaultDeliveryTime","defaultPickupTime","usingDeliveryOrderMethod","usingPickupOrderMethod","getMinuteOffset","TimePicker","minuteStep","addMinutes","initialTime","filterIntervals","bhour","start","openAt","end","getFilterIntervals","onStepChange","header","timePickerOpen","autoFocus","backdrop","fade","module","exports","p","_fragments","FinishViewOrderFragment","CartItemFragment","PriceFragment","FinishViewQuery","QueryFinishView","_GeolocationButton","_ResolvedAddress","_SearchInput","AddressInputStyled","AddressInputBoxStyled","location","InputGroup","address","isVisible","hasAddress","isResolving","onValidClick","clearAddress","inputProps","autoComplete","onSearch","withUserAddress","isSearching","attemptGeolocation","isGeolocationAvailable","hasFinishedSearch","isResolved","NoMouseAlert","isStreetAddress","inDeliveryLocation","renderErrorMessage","span","secondary","GeolocationButton","InputGroupAddon","addonType","ResolvedAddress","_classnames","_debounce","Component","[object Object]","state","ev","setState","onKeyPress","clear","inputRef","onInputMount","ref","setFocus","nextProps","focus","isHidden","address__input__hidden","innerRef","_ButtonStripe","AddressSubmit","enabled","onPrefetch","onMouseEnter","InitialMapLocationQuery","_MapPanning","initialLocation","useDisposable","reaction","clickPoint","withUserLocation","clearClickPoint","panToGps","useFullComputed","geoPoint","logMap","geolocationPoint","MapPanning","gps","get","_CategoryValidationMessage","_SidedishCheckbox","recipe","selection","onToggle","categories","category","nameLabel","minCount","maxCount","sideDishes","sidedish","SidedishCheckbox","isSelected","canBeSelected","_PickerButton","Name","Price","buttonProps","PickerButton","outline","width","price","formattedValue","onConfirm","isConfirming","box","set","_CartDiscounts","_CartItem","_CartTotals","items","item","CartItem","isActive","lastActiveRecipeId","onEdit","setUsedRecipeId","CartDiscounts","CartTotals","discounts","code","totalDiscount","_EditCartItemButton","_RemoveCartItemButton","EditButtonsContainerStyled","CartItemStyled","RemoveCartItemButton","itemId","automatic","EditCartItemButton","sideDishCount","join","_reactRouterDom","_CartItemButton","button","CartItemButton","icon","Link","to","clickedRef","data_testid","removeItemFromCart","_color","CartItemSummaryTotalThemed","alpha","hsl","string","coverPrice","transportFee","totalSum","CartIsEmptyThemed","_OrderModel","_CartModal","QueryCart","OrderCartForItemQuery","Route","path","match","params","renderError","CartModal","initialSelection","updateItem","onClose","goBack","isLoading","_reactScroll","_reactTruncate","CategoryNavigatorContainer","activeCategoryIndex","setActiveCategoryIndex","useState","active","onSetActive","offset","smooth","spy","pictogram","lines","_FoodCategory","_FoodMenuItem","FoodMenuStyled","FoodMenuListStyled","shouldUpdate","orderItemCount","rootModel","config","orderItemsMax","inCart","canAddToCart","orderLimitReached","recipes","showOrderLimit","prefetchFood","FoodCategoryStyled","FoodCategoryTitleStyled","children","Element","_LinkToCart","FoodMenuItemStyled","FoodMenuItemImage","img","FoodMenuItemPriceCorner","FoodMenuItemPrice","FoodMenuItemCount","LinkToCart","recipeId","hasSidedish","image","src","alt","descriptionLabel","LinkStyled","pathname","isMobile","addFromRecipeMobile","addFromRecipe","orderLimitAlertHidden","hideOrderLimit","CheckboxContainerStyled","CheckboxStyled","LabelStyled","defaultValue","touched","_FormTextInput","emailRx","OrderEmailInputValidator","test","FormTextInput","showFeedback","OrderPhoneInputValidator","OrderPhonePrefixInputValidator","CodesPanel","OrderPromoInputUI","codes","onCodeAdd","onCodeRemove","autoSubmitAfterTimeout","isValidating","setValidating","addCode","onKeyDown","preventDefault","onPaste","SecondaryButton","OrderPromoCodesQuery","addCodeMutation","AddOrderPromoMutation","setCartRefresh","addOrderPromoCode","removeCodeMutation","RemoveOrderPromoMutation","promoCodes","codeId","PromoCodeFragment","SelectButtonThemed","selected","undefined","openTimePicker","formats","date0","weekday","hour","minute","_fp","_createTimeSteps","_TimePickerButton","TimePickerContainer","TimePickerDay","steps","useMemo","allSteps","createTimeSteps","step","some","isWithinInterval","days","eachDayOfInterval","stepIdx","setStepIdx","closestIndexTo","useEffectOnce","day","getDate","DateFormat","format","month","isEqual","startOfDay","TimePickerButton","getTime","startOfMinute","timeClampUp","endMinute","endOfMinute","subMinutes","timeClampDown","getMinutes","_formats","Time","formatTime","_CartView","OrderFragment","Col","sm","md","lg","xl","status","updateInterval","SECOND","openSoonThresholdInMinutes","closeSoonThresholdInMinutes","getNow","useNow","useTimer","interval","now","decision","openingIn","differenceInMinutes","closingIn","isSoon","threshold","Math","abs","street","houseNumber","city","modalProps","BackgroundThemed","imageName","fallbackColor","fixed","component","otherProps","_reactRouter","redirect","Redirect","_reactGoogleMaps","MapContainerStyled","MapElement","BaseMapContainer","withGoogleMap","model","containerElement","mapElement","GoogleMap","setMapRef","zoom","center","onCenterChanged","updatePosition","onZoomChanged","updateZoom","streetViewControl","mapTypeControl","fullscreenControl","zoomControlOptions","position","google","maps","ControlPosition","RIGHT_TOP","getMapOptions","_useShopStatus","useShopStatus","closingTimeAlertHidden","hideClosingTime","_ColStyle","_logoCommerce","_logoCommerce2","_logoDoveze","_logoGopay","ColStyle","StatusDisplayOpen","StatusDisplayClosed","formatOpenTime","openAtDate","nowDate","isSameDay","deliveryTime","pickupTime","closestBH","closedNote","CenteredButtonContainer","finish","androidApp","iosApp","href","url","PrimaryRoutedButton","textAlign","_FinishView","HeaderThemed","PriceThemed","PriceCornerThemed","orderPayments","hasMethod","Cash","getPaymentInfo","OrderItem","getPaymentPrice","PhoneNumberLinkStyled","a","branch","OrderMethodButton","orderMethod","useOrderMethod","data-testselected","DeliveryTypeEnum","Messenger","identity","Pickup","prefetchPickup","_gps","_AddressInput","_AddressSubmit","_DeliveryMap2","_DeliveryMapPanning","business","setBranch","createDeliveryOrder","when","isValid","validateUserLocation","DeliveryMapPanning","gpsCoordinates","latLng","Marker","defaultDraggable","onDragEnd","latLngToGps","AddressInput","isDeliveryAddress","prefetchFoodMenu","autorun","isReady","panToLocation","_AddToCartModal","_CartContents","_CartIsEmpty","_CartView2","_ChangeCartModal","_useCartRefresh","refetch","CartViewQuery","useCartRefresh","AddToCartModal","ChangeCartModal","CartContents","CartIsEmpty","OrderCartForRecipeQuery","Promise","resolve","_SidedishPicker","_CartOrderButton","SidedishPicker","sidedishId","CartOrderButton","Array","from","PickerButtonStyled","tertiary","tertiaryText","tertiaryHover","onSelect","CartItemButtonStyled","useColor","css","CartItemButtonIcon","onDoubleClick","onRefresh","shouldRefreshCart","_CategoryNavigator","_FoodMenu","_FoodMenuView","_OrderLimitModal","QueryFoodMenu","wareCategories","OrderLimitModal","QueryFoodMenuCartPresence","FoodMenu","reduce","getCartPresence"],"mappings":"4KAAA,IAAAA,EAAAC,EAAA,KACAC,EAAAD,EAAA,KACAE,EAAAC,EAAAH,EAAA,IACAI,EAAAJ,EAAA,KACAK,EAAAF,EAAAH,EAAA,KAEAM,EAAAN,EAAA,KACAO,EAAAP,EAAA,IACAQ,EAAAR,EAAA,yDAIA,MAAMS,GAAe,EAAAJ,EAAAK,SAAON,EAAAO,QAAOC,WAAA,CAAAC,YAAA;;;;EAM7BC,GAAgB,EAAAT,EAAAK,SAAON,EAAAW,OAAMH,WAAA,CAAAC,YAAA;;;IAG/BP,EAAAU;;;;;IAKAV,EAAAW;;;;;;;2BASqDC,IACvDhB,EAAAQ,QAAAS,cAACZ,EAAAa,SAAD,CACEC,OAAQC,GACNpB,EAAAQ,QAAAS,cAACX,EAAAe,eAAD,CACEC,MAAOF,EAAKG,MAAMC,UAAuC,OAA3BJ,EAAKK,KAAKC,aACxCC,UAAW,CAAEC,QAASR,EAAKG,MAAMK,SACjCC,cAAe,IAAM,KACrBV,OAAQ,EAAGI,WACTvB,EAAAQ,QAAAS,cAAClB,EAAA+B,SAAD,KACG,IACCP,EAAMQ,WAAa,GAAgC,OAA3BX,EAAKK,KAAKC,aAChC1B,EAAAQ,QAAAS,cAACL,EAAD,CAAeoB,cAAY,0BACzBhC,EAAAQ,QAAAS,cAAA,SACEjB,EAAAQ,QAAAS,cAACpB,EAAAoC,MAAD,CAAAC,GAAA,6HAOFlC,EAAAQ,QAAAS,cAACV,EAAD,CACE4B,MAAM,UACNC,KAAK,KACLC,QAASjB,EAAKK,KAAKa,mBACnBN,cAAY,+BAEZhC,EAAAQ,QAAAS,cAACpB,EAAAoC,MAAD,CAAAC,GAAA,qBAEFlC,EAAAQ,QAAAS,cAACV,EAAD,CACE4B,MAAM,YACNC,KAAK,KACLC,QAASjB,EAAKK,KAAKc,kBACnBP,cAAY,8BAEZhC,EAAAQ,QAAAS,cAACpB,EAAAoC,MAAD,CAAAC,GAAA,mBAGF,wICxElB,MAAAM,KAAA1C,EAAA,iCAEA2C,EAAA3C,EAAA,KAGO,MAAM4C,EAAiBF,EAAAhC;;;;;;;qBASvB,MAAMa,GAAiB,EAAAoB,EAAAE,YAG5BD,mICjBF5C,EAAA,KAEA,MAAAD,EAAAC,EAAA,KACA8C,EAAA9C,EAAA,KACAE,KAAAF,EAAA,gCACAI,EAAAJ,EAAA,KAEAO,EAAAP,EAAA,sBAEyC,MACvC,MAAMyB,MAAEA,IAAU,EAAAlB,EAAAwC,WAClB,OAAO,EAAAD,EAAAE,aAAY,IACjB9C,EAAAQ,QAAAS,cAACf,EAAA6C,MAAD,CACEC,OAAQzB,EAAM0B,UACdC,OAAQ3B,EAAM4B,YACdC,UAAU,oBAEVpD,EAAAQ,QAAAS,cAACf,EAAAmD,YAAD,CACEH,OAAQ3B,EAAM4B,YACdG,IAAKpD,EAAAqD,UACLH,UAAU,iBAEVpD,EAAAQ,QAAAS,cAAA,YACEjB,EAAAQ,QAAAS,cAACpB,EAAAoC,MAAD,CAAAC,GAAA,iCAGJlC,EAAAQ,QAAAS,cAACf,EAAAsD,UAAD,CAAWJ,UAAU,eACnBpD,EAAAQ,QAAAS,cAAA,OAAKmC,UAAU,wBACZ7B,EAAM0B,WACL1B,EAAMkC,aAAcC,IAAI,CAACC,EAAOC,IAC9B5D,EAAAQ,QAAAS,cAAA,OAAK4C,IAAKD,GAAMD,KAGtB3D,EAAAQ,QAAAS,cAAA,OAAKmC,UAAU,6BACbpD,EAAAQ,QAAAS,cAAA,OAAKmC,UAAU,+BACfpD,EAAAQ,QAAAS,cAACf,EAAAO,OAAD,CACE2C,UAAU,sBACVjB,MAAM,UACNE,QAASd,EAAM4B,aAEfnD,EAAAQ,QAAAS,cAACpB,EAAAoC,MAAD,CAAAC,GAAA,kBAPJ,wHCjCR,MAAA4B,EAAAhE,EAAA,GACA8C,EAAA9C,EAAA,KACAD,ySAAAkE,CAAAjE,EAAA,IACAI,EAAAJ,EAAA,KACAK,KAAAL,EAAA,iCAEAkE,EAAAlE,EAAA,MACAO,EAAAP,EAAA,IACAmE,EAAAnE,EAAA,mNAGA,MAAMoE,GAAe,EAAA/D,EAAAK,SAAON,EAAAO,QAAOC,WAAA,CAAAC,YAAA;;;;EAM7BwD,EAAsBhE,EAAAK,QAAO4D,IAAG1D,WAAA,CAAAC,YAAA;;;;;;;oBAmBG,MACvC,MAAM0D,GAAW,EAAAxE,EAAAyE,QAAOR,EAAAS,WAAWC,MAAU,KAAKC,QAC5CC,GAAW,EAAA7E,EAAA8E,aACdzC,GAAW,KACNmC,EAASO,SAAS1C,GACpBmC,EAASQ,OAAO3C,GAEhBmC,EAASS,KAAK5C,IAGlB,KAEIX,MAAEA,IAAU,EAAAlB,EAAAwC,WAClB,OAAO,EAAAD,EAAAE,aAAY,IACjBjD,EAAAW,QAAAS,cAAApB,EAAAW,QAAAuE,SAAA,KACGxD,EAAMyD,WAAWtB,IAAI,CAACuB,EAAWrB,IAChC/D,EAAAW,QAAAS,cAAA,MAAAiE,EAAA,CAAKrB,IAAKoB,EAAU/C,IA1BL+C,IACjBA,EAAUE,YAIL,CAAEC,MAAO,CAAEC,QAAS,SAEtB,GAmB2BC,CAAcL,IACxCpF,EAAAW,QAAAS,cAAC+C,EAAAuB,kBAAD,CACEC,MAAO,CAAC,aAAc5B,EAAK,eAC3B6B,SAAUC,IACRT,EAAUU,aAAiBV,EAAUE,aAAeO,EAEhD,KADA,yBAGN1D,wCAAuCiD,EAAU/C,MAEjDrC,EAAAW,QAAAS,cAAA,QAAM2E,wBAAyB,CAAEC,OAAQZ,EAAUa,QAClDb,EAAUU,aAAe,MACzBV,EAAUc,aACTlG,EAAAW,QAAAS,cAAApB,EAAAW,QAAAuE,SAAA,KACElF,EAAAW,QAAAS,cAACiD,EAAD,CACE/B,MAAM,OACNE,QAASqC,EAASO,EAAU/C,IAC5BF,6CAA4CiD,EAAU/C,MAErDmC,EAASO,SAASK,EAAU/C,IACzB+B,EAAA+B,KAAAC,EAAA,QAAaC,oBACbjC,EAAA+B,KAAAC,EAAA,WAAgBC,qBAEtBrG,EAAAW,QAAAS,cAACf,EAAAiG,SAAD,CAAUnD,OAAQqB,EAASO,SAASK,EAAU/C,KAC5CrC,EAAAW,QAAAS,cAACkD,EAAD,CACEnC,uCAAsCiD,EAAU/C,KAChD0D,wBAAyB,CACvBC,OAAQZ,EAAUc,uIC/ExC,SAAAjG,EAAA,kBAEAA,EAAA,KACAA,EAAA,KAEAA,EAAA,0BAMoD,GAAGsG,YAqBjD,+HChCN,MAAAvG,EAAAC,EAAA,KACAE,KAAAF,EAAA,gCACAuG,EAAAvG,EAAA,KACAI,EAAAJ,EAAA,KAEAmE,EAAAnE,EAAA,iBAE0B,GAC1B,MAAMwG,EAAYC,GAASA,GAASA,EAAMC,OAAOC,OADvB,GAGpBC,EAA0BH,GAC9BD,EAAUC,GAAStC,EAAA+B,KAAAC,EAAA,oBAA2B,sBAEP,MACvC,MAAMU,EAAyB1C,EAAA+B,KAAAC,EAAA,sCAC/B,OACEjG,EAAAQ,QAAAS,cAACoF,EAAAO,MAAD,CACEpB,MAAM,OACNC,SAAUiB,EACVvF,OAAQ0F,GACN7G,EAAAQ,QAAAS,cAACf,EAAA4G,UAAD,KACE9G,EAAAQ,QAAAS,cAACf,EAAA6G,MAAD,CACEC,KAAK,WACLC,YAAahD,EAAA+B,KAAAC,EAAA,QACbiB,MAAOP,EACPJ,MAAOM,EAASN,MAChBY,SAAUC,GAAKP,EAASQ,SAASD,EAAEE,OAAOf,OAC1CgB,OAAQ,IAAMV,EAASW,YAAW,GAClCC,OAAQZ,EAASlD,MACjB+D,QAASC,QAAQd,EAASlD,OAC1B3B,cAAY,mBAEdhC,EAAAQ,QAAAS,cAACf,EAAA0H,SAAD,KAAWjB,GACVL,EAAUO,EAASN,OAClBvG,EAAAQ,QAAAS,cAACf,EAAA2H,aAAD,KACE7H,EAAAQ,QAAAS,cAACpB,EAAAoC,MAAD,CAAAC,GAAA,gHAAA4F,OAAA,CAAAC,EAIWlB,EAASN,MAAME,OAFTuB,WA9BL,OAsCZ,uHC7Cd,IAAAnI,EAAAI,EAAAH,EAAA,IAEAmI,EAAAnI,EAAA,MACAoI,EAAApI,EAAA,MACAqI,EAAArI,EAAA,MACAsI,EAAAtI,EAAA,MACAuI,EAAApI,EAAAH,EAAA,OACAwI,EAAAxI,EAAA,2EAE+B,KAC7BD,EAAAW,QAAAS,cAAApB,EAAAW,QAAAuE,SAAA,KACElF,EAAAW,QAAAS,cAACiH,EAAAK,eAAD,MACA1I,EAAAW,QAAAS,cAACmH,EAAAI,gBAAD,MACA3I,EAAAW,QAAAS,cAACgH,EAAAQ,gBAAD,MACA5I,EAAAW,QAAAS,cAACkH,EAAAO,eAAD,MACA7I,EAAAW,QAAAS,cAACqH,EAAAK,iBAAD,MACA9I,EAAAW,QAAAS,cAACoH,EAAA7H,QAAD,iHCFE,SACJoI,EACAC,EAA2E,QAA3EC,aAAEA,GAAYD,EAAEE,EAAAC,EAAAH,EAAA,kBAEhB,MAAMI,EAAiBhF,EAAA+B,KAAAC,EAAA,4FAEjBiD,GAAsB,EAAArJ,EAAA8E,aACzBwE,IACC,MAAMC,EAAaD,EAAOE,OACxBC,EAAAC,GAAGC,OAAO,CAAC,aAAc,eAAe,IAEtCV,IACwB,IAAtBM,EAAW3C,OACbqC,EAAa,CAACG,IAEdH,EAAaM,EAAW1F,IAAI4F,EAAAC,GAAGE,KAAK,eAI1C,IAGIC,GAAc,EAAA7J,EAAA8E,aAAagF,IAC/B,GAiCJ,SAAuBA,GACrB,OAAOA,EAAIC,eAAe,iBAlCpBC,CAAcF,GAAM,CACtB,GAAIA,EAAIG,aAIN,YAHAC,OAAOC,MACL/F,EAAA+B,KAAAC,EAAA,wFAGG,GAAI0D,EAAIM,cAEb,YADAf,EAAoBS,EAAIM,gBAI5B,EAAAC,EAAAC,aAAYR,IACX,IAEGS,GAAS,EAAAC,EAAAC,aAAY1B,EAAUG,GACrC,OAAcpH,GAAyB4I,EAAAC,UAAA,qBACrC,IACE,MAAMC,QAAeL,EAAO,CAAEzI,cAC9B,OAAI8I,EAAOtB,QAAUsB,EAAOtB,OAAO1C,QACjCyC,EAAoBuB,EAAOtB,QACpB,MAEJsB,EAAOC,KAGLD,EAAOC,KAFL,KAGT,MAAOf,GAEP,OADAD,EAAYC,GACL,SA/Db,IAAA9J,EAAAC,EAAA,GACAuK,EAAAvK,EAAA,KAEAwJ,EAAAxJ,EAAA,KACAoK,EAAApK,EAAA,IACAmE,EAAAnE,EAAA,qqBCPA,IAAA6K,EAAA7K,EAAA,KACAD,ySAAAkE,CAAAjE,EAAA,IACAuG,EAAAvG,EAAA,KACAI,EAAAJ,EAAA,KAEAO,EAAAP,EAAA,IACA8K,EAAA9K,EAAA,KACA+K,EAAA/K,EAAA,IACAwJ,EAAAxJ,EAAA,KACAoK,EAAApK,EAAA,8RAiCgD,GAAGqB,aACjD,MAAQI,MAAOuJ,IAAe,EAAAzK,EAAAwC,YACxBkI,QAAEA,IAAY,EAAAJ,EAAAK,qBAEpB,EAAAnL,EAAAoL,WAAU,KACHH,EAAWI,kBACdJ,EAAWK,WAEZ,IAEH,MAAMC,GAAY,EAAAvL,EAAA8E,aAChB,CAAO0G,EAAwCC,IAAqBf,OAAA,4BAClE,UACQO,EAAWM,UAAUC,EAAUvD,QACrCwD,EAAQjE,SACN,cAuCRkE,EArCUF,EAAUvD,OAAO9C,WACjB8F,EAAW9F,WAuCHtB,IAAIuB,IACpB,MAAMuG,EAAgBD,EAAUE,KAAKnC,EAAAC,GAAGmC,OAAO,KAAMzG,EAAU/C,KAC/D,OAAIsJ,EACFG,OAAAC,OAAA,GAAY3G,EAAS,CAAEE,YAAaqG,EAAcrG,cAE7CF,MAzCH,MAAO0E,IACP,EAAAO,EAAAC,aAAYR,EAAK,CACf0B,UAAWA,EAAUvD,SA8B/B,IACEyD,IA3BE,IAGIpE,GAAW,EAAAwD,EAAAkB,qBAAoBT,EAhCd,MAkCvB,OACEvL,EAAAW,QAAAS,cAACoF,EAAAyF,KAAD,CACEC,cAjDN,SAAuBjB,GACrB,MAAO,CACLkB,UAAWlB,EAAWkB,UACtBC,SAAUnB,EAAWmB,SACrBC,MAAOpB,EAAWoB,MAClBC,MAAOrB,EAAWqB,MAClBC,YAAatB,EAAWsB,aAAetB,EAAWuB,mBAClDC,KAAMxB,EAAWwB,KACjBC,QAAS3B,EAAA4B,gBAAgBC,MACzBzH,WAAY,IAwCK0H,CAAc5B,GAC7B6B,iBAAiB,EACjBxF,SAAUA,EACVyF,SAAiBvB,GAA8Bd,OAAA,4BAC7C,UACQO,EAAW+B,YAAYxB,GAC7BN,EAAQ+B,QAAQ,WAChB,MAAO1F,IACP,EAAAyD,EAAAkC,UAAS3F,OAIZkE,GACCzL,EAAAW,QAAAS,cAACf,EAAA4L,KAAD,CAAWc,SAAUtB,EAAQ0B,YAAa7L,EAAOmK,oHCzFzDxL,EAAA,MAEA,IAAAD,EAAAI,EAAAH,EAAA,IAEAmN,EAAAnN,EAAA,KACAM,EAAAN,EAAA,KACAoN,EAAAjN,EAAAH,EAAA,OACAqN,EAAArN,EAAA,KACAmE,EAAAnE,EAAA,yEAOkD,GAChDuC,UACA+K,aAAY,KAEZvN,EAAAW,QAAAS,cAACkM,EAAAE,UAAD,CACEC,SAAS,EACTnM,OAAQI,GACN1B,EAAAW,QAAAS,cAAA,OAAKmC,UAAU,6BACbvD,EAAAW,QAAAS,cAAA,OAAKmC,UAAU,qCACfvD,EAAAW,QAAAS,cAACgM,EAAAM,cAAD,CACEnK,UAAU,oCACVjB,MAAM,UACNC,KAAK,KACLC,QAASA,EACTmL,UAAWJ,GAAa7L,EAAMkM,aAC9BzL,cAAY,qBAEZnC,EAAAW,QAAAS,cAACb,EAAAsN,QAAD,KACGnM,EAAMkM,aACL5N,EAAAW,QAAAS,cAACiM,EAAA1M,QAAD,MAEAyD,EAAA+B,KAAAC,EAAA,eAAoB0H,qBAGxB9N,EAAAW,QAAAS,cAACb,EAAAwN,OAAD,KAAS3J,EAAA+B,KAAAC,EAAA,eAAoB0H,+HCvCvC,IAAA9N,EAAAI,EAAAH,EAAA,IACA+N,EAAA5N,EAAAH,EAAA,gEAOe,EANfA,EAAA,IAMegO,WAJO9M,GACpBnB,EAAAW,QAAAS,cAAC4M,EAAArN,QAAD,CAASsF,KAAK,eAAe3D,MAAOnB,EAAM+M,MAAMC,QAASC,OAAO,mICLlE,IAAApO,EAAAC,EAAA,KACA8C,EAAA9C,EAAA,KACAE,EAAAC,EAAAH,EAAA,IACAK,EAAAF,EAAAH,EAAA,KAEAoO,EAAApO,EAAA,KACAqO,EAAAlO,EAAAH,EAAA,KACAO,EAAAP,EAAA,uDAEA,MAAMsO,EAAcjO,EAAAK,QAAO4D,IAAG1D,WAAA,CAAAC,YAAA;;oBAIW,MACvC,MAAQY,MAAOuJ,IAAe,EAAAzK,EAAAwC,WAC9B,OAAO,EAAAD,EAAAE,aAAY,IACjB9C,EAAAQ,QAAAS,cAACiN,EAAAG,WAAD,CAAYrL,OAAQ8H,EAAWwD,gBAAiBC,WAAW,gBACzDvO,EAAAQ,QAAAS,cAACmN,EAAD,KACEpO,EAAAQ,QAAAS,cAACpB,EAAAoC,MAAD,CAAAC,GAAA,iDAEFlC,EAAAQ,QAAAS,cAACkN,EAAA3N,QAAD,CAAQgO,UAAU,qHCpBxB1O,EAAA,KAEA,IAAAD,EAAAC,EAAA,KACA2O,EAAA3O,EAAA,KACA4O,EAAA5O,EAAA,IACA8C,EAAA9C,EAAA,KACAE,ySAAA+D,CAAAjE,EAAA,IACAuK,EAAAvK,EAAA,KACAI,EAAAJ,EAAA,KAEAmN,EAAAnN,EAAA,KACAO,EAAAP,EAAA,IAEAwJ,EAAAxJ,EAAA,KACA6O,EAAA7O,EAAA,MACAmE,EAAAnE,EAAA,IACA8O,EAAA9O,EAAA,MACA+O,EAAA/O,EAAA,wBAEyC,MACvC,MAAMyB,MAAEA,IAAU,EAAAlB,EAAAwC,YAEZ6H,KAAEA,EAAFoE,QAAQA,IAAY,EAAAzE,EAAA0E,UAGxBF,EAAAG,qBAAsB,CACtBrN,UAAW,CAAEsN,SAAU1N,EAAM0N,UAC7BC,SAAS,IAGLC,GAAc,EAAAR,EAAAS,oBAGlBP,EAAAQ,gCAAiC,CAAEvG,aAAcvH,EAAM+N,eAEnDC,GAAe,EAAAvP,EAAAsE,QAAyB/C,EAAMiO,WAC9CC,EAAoB,KACxB,MAAMC,EAAOH,EAAa9K,QAC1B0K,EAAY,CACVvN,QAASL,EAAMK,QACf4N,UAAWE,IAAQ,EAAAjB,EAAAkB,SAAQD,KAE7BnO,EAAMqO,aAAaF,GACnBnO,EAAMsO,mBA8CFC,EAAqB,KACzB,GAAIhB,IAAYpE,EACd,OAAO,KAGT,MAAMqF,EAhDa,MACnB,MAAMC,cAAEA,GAAkBtF,EAK1B,OAHEsF,EAAchN,SAAWgN,EAAcC,WACnC,IAAIC,KACJ,IAAIA,KAAKF,EAAcC,aA2CbE,GACVC,EAxCW,MACjB,MAAMJ,cAAEA,GAAkBtF,EAC1B,GAAIsF,EAAchN,QAAUgN,EAAcK,YACxC,OAAO,IAAIH,KAAKF,EAAcK,aAEhC,MAAMC,EAAmBN,EAAcO,cAAc9E,KACnDnC,EAAAC,GAAGmC,OAAO,UAAU,IAEtB,OAAO4E,EAAmB,IAAIJ,KAAKI,EAAiBE,SAAW,MAgC/CC,GAChB,GAAgB,OAAZL,IAAoB,EAAA1B,EAAAgC,SAAQX,EAASK,GACvC,OACEpQ,EAAAQ,QAAAS,cAACpB,EAAAoC,MAAD,CAAAC,GAAA,oEAMJ,MAAMyO,EA5BgB,MACtB,MAAMC,oBAAEA,EAAFC,kBAAuBA,GAAsBnG,EAAMsF,cAEzD,OAAIzO,EAAMuP,yBACDF,EAELrP,EAAMwP,uBACDF,EAGF,GAkBcG,GAErB,OACEhR,EAAAQ,QAAAS,cAAC2N,EAAAqC,WAAD,CACEC,WAAY,GACZnB,SAAS,EAAArB,EAAAyC,YAAWpB,EAASY,GAC7BP,SAAS,EAAA1B,EAAAyC,YAAWf,EAASO,GAC7BS,YAAa7B,EAAa9K,QAC1B4M,gBA9CqB,MACzB,MAAMrB,cAAEA,GAAkBtF,EAC1B,OAAOsF,EAAcO,cAClBlH,OAAOC,EAAAC,GAAGmC,OAAO,UAAU,IAC3BhI,IAAI4N,IAAK,CACRC,MAAO,IAAIrB,KAAKoB,EAAME,QACtBC,IAAK,IAAIvB,KAAKoB,EAAMd,aAwCHkB,GACjBC,aAAcjC,GAASH,EAAa9K,QAAUiL,KAK9CkC,EAASrQ,EAAMuP,yBACjB7M,EAAA+B,KAAAC,EAAA,yBACAhC,EAAA+B,KAAAC,EAAA,mCAEJ,OAAO,EAAArD,EAAAE,aAAY,IACjB9C,EAAAQ,QAAAS,cAACf,EAAA6C,MAAD,CACEC,OAAQzB,EAAMsQ,eACd3O,OAAQ3B,EAAMsO,gBACdzM,UAAU,mBACV0O,WAAW,EACXC,SAAS,SACTC,MAAM,GAENhS,EAAAQ,QAAAS,cAACf,EAAAmD,YAAD,CACEH,OAAQ3B,EAAMsO,gBACdvM,IAAKpD,EAAAqD,UACLH,UAAU,iBAEVpD,EAAAQ,QAAAS,cAAA,YAAO2Q,IAET5R,EAAAQ,QAAAS,cAACf,EAAAsD,UAAD,CAAWJ,UAAU,eACnBpD,EAAAQ,QAAAS,cAAA,OAAKmC,UAAU,wBAAwB0M,KACvC9P,EAAAQ,QAAAS,cAAA,OAAKmC,UAAU,6BACbpD,EAAAQ,QAAAS,cAAA,OAAKmC,UAAU,+BACfpD,EAAAQ,QAAAS,cAACgM,EAAAM,cAAD,CACElL,QAASoN,EACTrN,KAAK,KACLgB,UAAU,uBAETa,EAAA+B,KAAAC,EAAA,gBAAqB0H,wECnJlCsE,EAAAC,QAAiBpS,EAAAqS,EAAuB,mECAxCF,EAAAC,QAAiBpS,EAAAqS,EAAuB,mECAxCF,EAAAC,QAAiBpS,EAAAqS,EAAuB,8DCAxCF,EAAAC,QAAiBpS,EAAAqS,EAAuB,gMCAxC,MAAA3P,KAAA1C,EAAA,iCAEA2C,EAAA3C,EAAA,KACAsS,EAAAtS,EAAA,IAGO,MAAMuS,EAA0B7P,EAAAhC;;;;;;;;;;;;;;;;;;;;IAoBnC4R,EAAAE;IACAF,EAAAG;8BAGG,MAAMC,EAAkBhQ,EAAAhC;;;;;;;;;;;;;;;;;;;;;;IAsB3B6R;sBAGG,MAAMI,GAAkB,EAAAhQ,EAAAE,YAG7B6P,+KC1DF1S,EAAA,MAEA,IAAAD,EAAAC,EAAA,KACA8C,EAAA9C,EAAA,KACAE,EAAAC,EAAAH,EAAA,IACAI,EAAAJ,EAAA,KACAK,EAAAF,EAAAH,EAAA,KAEAO,EAAAP,EAAA,IACAmE,EAAAnE,EAAA,IAEA4S,EAAAzS,EAAAH,EAAA,OACA6S,EAAA1S,EAAAH,EAAA,OACA8S,EAAA3S,EAAAH,EAAA,0DAEA,MAAM+S,EAAqB1S,EAAAK,QAAO4D,IAAG1D,WAAA,CAAAC,YAAA;;;;;EAO/BmS,EAAwB3S,EAAAK,QAAO4D,IAAG1D,WAAA,CAAAC,YAAA;;;;;;;;;;;iBAaF,MACpC,MAAMoS,SAAEA,IAAa,EAAA1S,EAAAwC,WACrB,OAAO,EAAAD,EAAAE,aAAY,IACjB9C,EAAAQ,QAAAS,cAAC4R,EAAD,KACE7S,EAAAQ,QAAAS,cAAC6R,EAAD,KACE9S,EAAAQ,QAAAS,cAACf,EAAA8S,WAAD,CAAY5Q,KAAK,MACfpC,EAAAQ,QAAAS,cAAC0R,EAAAnS,QAAD,CACEyS,QAASF,EAASE,SAAW,GAC7BC,UAAWH,EAASI,WACpBC,YAAaL,EAASK,YACtBC,aAAcN,EAASO,eAEzBtT,EAAAQ,QAAAS,cAAC2R,EAAApS,QAAD,CACE+S,WAAY,CACVtM,YAAahD,EAAA+B,KAAAC,EAAA,sCACbuN,aAAc,2BAEhBC,SAAUV,EAASW,gBACnBR,WAAYH,EAASI,WACrBQ,YAAaZ,EAASK,cAExBpT,EAAAQ,QAAAS,cAACyR,EAAAlS,QAAD,CACE6B,QAAS0Q,EAASa,mBAClBV,UAAWH,EAASc,yBAA2Bd,EAASK,gBAI7DL,EAASe,kBAShB,SAA4Bf,GAC1B,OAA4B,IAAxBA,EAASgB,WAET/T,EAAAQ,QAAAS,cAAC+S,EAAD,CAAc7R,MAAM,UAClBnC,EAAAQ,QAAAS,cAACpB,EAAAoC,MAAD,CAAAC,GAAA,kCAI2B,IAA7B6Q,EAASkB,gBAETjU,EAAAQ,QAAAS,cAAC+S,EAAD,CAAc7R,MAAM,WAClBnC,EAAAQ,QAAAS,cAACpB,EAAAoC,MAAD,CAAAC,GAAA,8CAI8B,IAAhC6Q,EAASmB,mBAETlU,EAAAQ,QAAAS,cAAC+S,EAAD,CAAc7R,MAAM,WAClBnC,EAAAQ,QAAAS,cAACpB,EAAAoC,MAAD,CAAAC,GAAA,uEAMC,KAjC2BiS,CAAmBpB,GAAY,SAKnE,MAAMiB,GAAe,EAAA7T,EAAAK,SAAON,EAAAW,OAAMH,WAAA,CAAAC,YAAA;;kJCnElC,IAAAd,EAAAI,EAAAH,EAAA,IACAI,EAAAJ,EAAA,wDAQA,MAAMyD,EAPNtD,EAAAH,EAAA,KAOkBU,QAAO4T,KAAI1T,WAAA,CAAAC,YAAA;WAClB,EAAGoN,WAAYA,EAAMsG;;;;;EAOnBC,EAAuC,EAClDjS,UACA6Q,aAAY,KAEZA,EACErT,EAAAW,QAAAS,cAACsC,EAAD,KACE1D,EAAAW,QAAAS,cAACf,EAAAqU,gBAAD,CAAiBC,UAAU,SAASnS,QAASA,GAC3CxC,EAAAW,QAAAS,cAAA,QAAMmC,UAAU,mBAGlB,iCAESkR,qIC7Bf,IAAAzU,EAAAI,EAAAH,EAAA,IACA+N,EAAA5N,EAAAH,EAAA,yDASO,MAAM2U,EAAqC,EAChDxB,UACAC,YACAE,cACAC,kBAEID,EAEAvT,EAAAW,QAAAS,cAAA,OAAKmC,UAAU,sCACbvD,EAAAW,QAAAS,cAAC4M,EAAArN,QAAD,CAASsF,KAAK,YAAYmI,OAAO,UAIlCiF,EAIHrT,EAAAW,QAAAS,cAAA,OAAKmC,UAAU,gCAAgCf,QAASgR,GACrDJ,GAJI,+BASIwB,mHCjCf,IAAAC,EAAAzU,EAAAH,EAAA,IACA6U,EAAA1U,EAAAH,EAAA,MACAD,ySAAAkE,CAAAjE,EAAA,IACAI,EAAAJ,EAAA,6QAaA,cAA0BD,EAAA+U,UAA1BC,kCACErK,KAAAsK,MAAQ,CAAEvO,MAAO,IASjBiE,KAAAiJ,UAAW,EAAAkB,EAAAnU,SAASgK,KAAKxJ,MAAMyS,SAAU,KACzCjJ,KAAArD,SAAW4N,KACT,MAAMxO,EAAQwO,EAAGzN,OAAOf,OAAS,GACjCiE,KAAKwK,SAAS,CAAEzO,UAChBiE,KAAKiJ,SAASlN,EAAMC,UAEtBgE,KAAAyK,WAAaF,KACI,UAAXA,EAAGlR,MACL2G,KAAKiJ,SAASyB,QACd1K,KAAKxJ,MAAMyS,SAASjJ,KAAKsK,MAAMvO,MAAMC,WAGzCgE,KAAA2K,SAAoC,KACpC3K,KAAA4K,aAAgBC,KACd7K,KAAK2K,SAAWE,IAtBlBR,oBACErK,KAAK8K,WAEPT,mBAAmBU,GACbA,EAAUrC,YAAc1I,KAAKxJ,MAAMkS,WACrC1I,KAAK8K,WAmBTT,YACE,OAAgC,IAAzBrK,KAAKxJ,MAAMkS,UAEpB2B,cACE,OAAkC,IAA3BrK,KAAKxJ,MAAM2S,YAEpBkB,WACMrK,KAAK0I,aAAiC,OAAlB1I,KAAK2K,UAC3B3K,KAAK2K,SAASK,QAGlBX,SACE,MAAMtB,WAAEA,GAAe/I,KAAKxJ,MACtByU,GAAYjL,KAAK0I,aAAe1I,KAAKmJ,cAC3C,OACE9T,EAAAW,QAAAS,cAACf,EAAA6G,MAAD7B,EAAA,CACE9B,WAAW,EAAAsR,EAAAlU,SAAW,CAAEkV,uBAAwBD,IAChDtO,SAAUqD,KAAKrD,SACf8N,WAAYzK,KAAKyK,WACjB1O,MAAOiE,KAAKsK,MAAMvO,MAClBoP,SAAUnL,KAAK4K,aACftD,WAAW,GACPyB,uIChEZ,IAAA1T,EAAAI,EAAAH,EAAA,IAEAmN,EAAAnN,EAAA,KACA8V,EAAA3V,EAAAH,EAAA,MACAmE,EAAAnE,EAAA,uDAQO,MAAM+V,EAAmC,EAC9CC,UACAzT,UACA0T,gBAEAlW,EAAAW,QAAAS,cAAC2U,EAAApV,QAAD,KACEX,EAAAW,QAAAS,cAACgM,EAAAM,cAAD,CACEpL,MAAM,UACNqL,UAAWsI,EACXzT,QAASA,EACT2T,aAAc,IAAMF,GAAWC,KAE9B9R,EAAA+B,KAAAC,EAAA,mBAAwB0H,8CAKhBkI,wEC7Bf,wFAEO,MAAMI,MAFbnW,EAAA,kCAEuCU;;;;;;;;;8ICFvC,MAAAmK,EAAA7K,EAAA,KACAgE,EAAAhE,EAAA,GACA8C,EAAA9C,EAAA,KACAD,KAAAC,EAAA,gCAEAO,EAAAP,EAAA,IAEA+K,EAAA/K,EAAA,IACAoW,EAAApW,EAAA,0BAMqD,GAAGqW,sBACtD,MAAMpD,SAAEA,EAAFrP,IAAYA,IAAQ,EAAArD,EAAAwC,YAE1B,EAAAD,EAAAwT,eAAc,KACZ,EAAAtS,EAAAuS,UACE,IAAM3S,EAAI4S,WACVA,IACMA,IACFvD,EAASwD,iBAAiBD,GAC1B5S,EAAI8S,sBAMZ,MAAMC,GAAW,EAAA9L,EAAA+L,iBACf,IACM3D,EAAS4D,WACX,EAAA9L,EAAA+L,QAAO,uBAAwB7D,EAAS4D,UACjC5D,EAAS4D,UACP5D,EAAS8D,mBAClB,EAAAhM,EAAA+L,QAAO,qBAAsB7D,EAAS8D,kBAC/B9D,EAAS8D,kBACPV,IACT,EAAAtL,EAAA+L,QAAO,0BAA2BT,GAC3BA,QAET,EAAAtL,EAAA+L,QAAO,6BAGT,CAACT,IAGH,OAAO,EAAAvT,EAAAE,aAAY,IAAMjD,EAAAW,QAAAS,cAACiV,EAAAY,WAAD,CAAYC,IAAKN,EAASO,MAAOtT,IAAKA,0IC/CjE5D,EAAA,MAEA,MAAAC,EAAAD,EAAA,KACAD,ySAAAkE,CAAAjE,EAAA,IAIAmX,KAAAnX,EAAA,mCACAoX,EAAApX,EAAA,uBAQiD,GAC/CqX,SACAC,YACAC,cAEAxX,EAAAW,QAAAS,cAAClB,EAAA+B,SAAD,KACG,IACCjC,EAAAW,QAAAS,cAAA,OAAKmC,UAAU,0BACZ+T,EAAOG,WAAW5T,IAAI6T,GACrB1X,EAAAW,QAAAS,cAACpB,EAAAkF,SAAD,CAAUlB,IAAK0T,EAASrV,IACtBrC,EAAAW,QAAAS,cAAA,OAAKmC,UAAU,oCACZmU,EAASC,UAAW,IACrB3X,EAAAW,QAAAS,cAACgW,EAAAzW,QAAD,CACEiX,SAAUF,EAASE,SACnBC,SAAUH,EAASG,YAGtBH,EAASI,WAAWjU,IAAIkU,GACvB/X,EAAAW,QAAAS,cAACiW,EAAAW,iBAAD,CACEhU,OAAQ+T,EAAS1V,MAAMqV,EAASrV,KAChC0V,SAAUA,EACVE,WAAYV,EAAUxS,SAASgT,EAAS1V,IACxC6V,eAAe,EACf1V,QAAS,IAAMgV,EAASO,EAAS1V,wICvCjD,MAAArC,KAAAC,EAAA,sCAOqD,EACnD2X,WACAC,eAaA,OAAO7X,EAAAW,QAAAS,cAAA,YAXO,+HCXhB,IAAApB,EAAAI,EAAAH,EAAA,IAEAK,EAAAF,EAAAH,EAAA,KAEAkY,EAAAlY,EAAA,oiBASA,MAAMmY,EAAO9X,EAAAK,QAAO4D,IAAG1D,WAAA,CAAAC,YAAA;;;;;EAOjBuX,EAAQ/X,EAAAK,QAAO4D,IAAG1D,WAAA,CAAAC,YAAA;;;qBAK2BkI,SAAA+O,SACjDA,GAAQ/O,EACRsP,EAAAnP,EAAAH,EAAA,cACI,OACJhJ,EAAAW,QAAAS,cAAC+W,EAAAI,aAADlT,EAAA,CACE9C,KAAK,KACLiW,SAAS,EACTC,MAAM,UACNtW,mCAAkC4V,EAAS1V,MACvCiW,GAEJtY,EAAAW,QAAAS,cAACgX,EAAD,KAAOL,EAASJ,WAChB3X,EAAAW,QAAAS,cAACiX,EAAD,KAAQN,EAASW,MAAMC,gICrC3B,MAAA1U,EAAAhE,EAAA,GACAC,EAAAD,EAAA,KACAD,KAAAC,EAAA,gCAEAmN,EAAAnN,EAAA,KACAmE,EAAAnE,EAAA,+RAQkD,GAChDsX,YACAqB,gBAEA,MAAMC,EAAe5U,EAAAS,WAAWoU,KAAI,GAEpC,OACE9Y,EAAAW,QAAAS,cAAClB,EAAA+B,SAAD,KACG,IACCjC,EAAAW,QAAAS,cAACgM,EAAAM,cAAD,CACEnK,UAAU,sBACVoK,SAAUkL,EAAa1B,MACvBhV,cAAY,kBACZK,QAAS,IAAWkI,OAAA,4BAClBmO,EAAaE,KAAI,SACXH,IACNC,EAAaE,KAAI,MAGlB3U,EAAA+B,KAAAC,EAAA,2GAAA8B,EAEUqP,EAAU3Q,SAKlBkH,kICvCb,MAAA/K,EAAA9C,EAAA,KACAD,KAAAC,EAAA,gCAEAO,EAAAP,EAAA,IAEA+Y,EAAA/Y,EAAA,MACAgZ,EAAAhZ,EAAA,MACAiZ,EAAAjZ,EAAA,qBAM8C,GAAGyB,YAC/C,MAAQA,MAAOuJ,IAAe,EAAAzK,EAAAwC,WAE9B,OAAO,EAAAD,EAAAE,aAAY,IACjBjD,EAAAW,QAAAS,cAAA,OAAKmC,UAAU,0BACbvD,EAAAW,QAAAS,cAAA,OAAKmC,UAAU,mCACZ7B,EAAMyX,MAAMtV,IAAIuV,GACfpZ,EAAAW,QAAAS,cAAC6X,EAAAI,SAAD,CACErV,IAAKoV,EAAK/W,GACV+W,KAAMA,EACNE,SAAUrO,EAAWsO,qBAAuBH,EAAK9B,OAAOjV,GACxDmX,OAAQ,IAAMvO,EAAWwO,gBAAgBL,EAAK9B,OAAOjV,OAGzDrC,EAAAW,QAAAS,cAAC4X,EAAAU,cAAD,CAAehY,MAAOA,IACtB1B,EAAAW,QAAAS,cAAC8X,EAAAS,WAAD,CAAYjY,MAAOA,oHC5B3B,MAAA1B,EAAAC,EAAA,KACAE,KAAAF,EAAA,gDAQgD,GAAGyB,WACjDA,EAAMkY,WAAalY,EAAMkY,UAAUhT,OAAS,EAC1CzG,EAAAQ,QAAAS,cAAA,WACGM,EAAMkY,UAAU/V,IACf,EAAGgW,OAAM3T,cAAawS,OAASC,qBAC7BxY,EAAAQ,QAAAS,cAAA,OAAK4C,IAAK6V,EAAMtW,UAAU,uBACxBpD,EAAAQ,QAAAS,cAAA,OAAKmC,UAAU,8BAA8B2C,GAC7C/F,EAAAQ,QAAAS,cAAA,OAAKmC,UAAU,8BAA8BoV,KAInDxY,EAAAQ,QAAAS,cAAA,OAAKmC,UAAU,uBACbpD,EAAAQ,QAAAS,cAAA,OAAKmC,UAAU,8BACbpD,EAAAQ,QAAAS,cAACpB,EAAAoC,MAAD,CAAAC,GAAA,oBAEFlC,EAAAQ,QAAAS,cAAA,OAAKmC,UAAU,8BACZ7B,EAAMoY,cAAcnB,kBAIzB,4GC7BN1Y,EAAA,MAEA,IAAAD,EAAAI,EAAAH,EAAA,IACAK,EAAAF,EAAAH,EAAA,KAEAM,EAAAN,EAAA,KAEAmE,EAAAnE,EAAA,IACA8Z,EAAA9Z,EAAA,MACA+Z,EAAA/Z,EAAA,yDAQA,MAAMga,EAA6B3Z,EAAAK,QAAO4D,IAAG1D,WAAA,CAAAC,YAAA;;EAIvCoZ,EAAiB5Z,EAAAK,QAAO4D,IAAG1D,WAAA,CAAAC,YAAA;;;;;;gBAMjB,EAAGwY,cACfA,EAAW,UAAY;;;aAKgB,GAAGF,OAAME,WAAUE,YAC5DxZ,EAAAW,QAAAS,cAAC8Y,EAAD,CAAgBZ,SAAUA,GACxBtZ,EAAAW,QAAAS,cAAC6Y,EAAD,KACEja,EAAAW,QAAAS,cAAC4Y,EAAAG,qBAAD,CAAsBC,OAAQhB,EAAK/W,GAAI4T,SAAUmD,EAAKiB,YAEtDra,EAAAW,QAAAS,cAACb,EAAAsN,QAAD,KACE7N,EAAAW,QAAAS,cAAC2Y,EAAAO,mBAAD,CACEF,OAAQhB,EAAK/W,GACb4T,QAAuC,IAA9BmD,EAAK9B,OAAOiD,gBAAwBnB,EAAKiB,UAClD7X,QAASgX,MAKfxZ,EAAAW,QAAAS,cAAA,OAAKmC,UAAU,2BACbvD,EAAAW,QAAAS,cAAA,OACEmC,UAAU,yBACVpB,iCAAgCiX,EAAK9B,OAAOjV,MAE3C+W,EAAK9B,OAAOK,WAEf3X,EAAAW,QAAAS,cAAA,OACEmC,UAAU,+BACVpB,qCAAoCiX,EAAK9B,OAAOjV,MAE/C+W,EAAKtB,WAAWlR,OAAS,OACjBwS,EAAKtB,WACPjU,IAAI,EAAGyT,YAAaA,EAAOK,WAC3B6C,KAAK,OACRpB,EAAK9B,OAAOiD,cAAgB,GAC1Bva,EAAAW,QAAAS,cAAA,YAAOgD,EAAA+B,KAAAC,EAAA,oBAAyBC,uBAK1CrG,EAAAW,QAAAS,cAAA,OACEmC,UAAU,0BACVpB,kCAAiCiX,EAAK/W,MAErC+W,EAAKiB,UAAYjW,EAAA+B,KAAAC,EAAA,YAAmBgT,EAAKV,MAAMC,yJCxEtD,MAAA3Y,KAAAC,EAAA,gCACAwa,EAAAxa,EAAA,KAEAya,EAAAza,EAAA,sgBAQsD+I,SAAAoR,OACpDA,EADoD5X,QAEpDA,GAAOwG,EACP7H,EAAAgI,EAAAH,EAAA,sBAEA,MAAM2R,EAAS3a,EAAAW,QAAAS,cAACsZ,EAAAE,eAADvV,EAAA,CAAgBwV,KAAK,OAAOvY,MAAM,WAAcnB,IAC/D,OAAOA,EAAM8U,QACXjW,EAAAW,QAAAS,cAACqZ,EAAAK,KAAD,CACEC,oBAAqBX,IACrB5X,QAASA,EACTL,qCAAoCiY,KAEnCO,GAGHA,sHC1BJ,IAAA3a,ySAAAkE,CAAAjE,EAAA,IAEAO,EAAAP,EAAA,IACAya,EAAAza,EAAA,4BAOsD,GAAGma,SAAQnE,cAC/D,MAAQvU,MAAOuJ,IAAe,EAAAzK,EAAAwC,WACxBgY,GAAa,EAAAhb,EAAAyE,SAAO,GAC1B,OACEzE,EAAAW,QAAAS,cAACsZ,EAAAE,eAAD,CACEC,KAAK,SACLvY,MAAM,UACN2T,QAASA,IAAY+E,EAAWpW,QAChCqW,YAAa,uBACbzY,QAAS,KACFwY,EAAWpW,SACdqG,EAAWiQ,mBAAmBd,GAEhCY,EAAWpW,SAAU,+GCvB7B,IAAAuW,EAAA/a,EAAAH,EAAA,MACAD,EAAAI,EAAAH,EAAA,IACAK,EAAAF,EAAAH,EAAA,KAGAmE,EAAAnE,EAAA,uDAMA,MAAMmb,EAA6B9a,EAAAK,QAAO4D,IAAG1D,WAAA,CAAAC,YAAA;gBAC7B,EAAGoN,YACf,EAAAiN,EAAAxa,SAAMuN,EAAMC,SACTkN,MAAM,IACNC,MACAC;eAGsC,GAAG7Z,WAC9C1B,EAAAW,QAAAS,cAAA,WACGM,EAAM8Z,YAAc9Z,EAAM8Z,WAAW9U,MACpC1G,EAAAW,QAAAS,cAAA,OAAK4C,IAAI,YAAYT,UAAU,uBAC7BvD,EAAAW,QAAAS,cAAA,OAAKmC,UAAU,8BAA8Ba,EAAA+B,KAAAC,EAAA,WAC7CpG,EAAAW,QAAAS,cAAA,OAAKmC,UAAU,8BACZ7B,EAAM8Z,WAAW7C,iBAGpB,KACHjX,EAAM+Z,cAAgB/Z,EAAM+Z,aAAa/U,MACxC1G,EAAAW,QAAAS,cAAA,OAAK4C,IAAI,eAAeT,UAAU,uBAChCvD,EAAAW,QAAAS,cAAA,OAAKmC,UAAU,8BAA8Ba,EAAA+B,KAAAC,EAAA,aAC7CpG,EAAAW,QAAAS,cAAA,OAAKmC,UAAU,8BACZ7B,EAAM+Z,aAAa9C,iBAGtB,KACJ3Y,EAAAW,QAAAS,cAACga,EAAD,CACEpX,IAAI,aACJT,UAAU,kDAEVvD,EAAAW,QAAAS,cAAA,OAAKmC,UAAU,8BAA8Ba,EAAA+B,KAAAC,EAAA,UAC7CpG,EAAAW,QAAAS,cAAA,OACEmC,UAAU,6BACVpB,cAAa,0BAEZT,EAAMga,SAAS/C,4HC9CxB,IAAA3Y,EAAAI,EAAAH,EAAA,IACAK,EAAAF,EAAAH,EAAA,KAEAmE,EAAAnE,EAAA,uDAEA,MAAM0b,EAAoBrb,EAAAK,QAAO4T,KAAI1T,WAAA,CAAAC,YAAA;WAC1B,EAAGoN,WAAYA,EAAMsG;gBAGL,KACzBxU,EAAAW,QAAAS,cAACua,EAAD,CACEpY,UAAU,mCACVpB,cAAY,kBAERiC,EAAA+B,KAAAC,EAAA,qICdR,MAAApG,EAAAC,EAAA,KACAE,KAAAF,EAAA,gCACAwa,EAAAxa,EAAA,KACAI,EAAAJ,EAAA,KAEAO,EAAAP,EAAA,IACA2C,EAAA3C,EAAA,KAEAwJ,EAAAxJ,EAAA,KACA2b,EAAA3b,EAAA,KACA4b,EAAA5b,EAAA,KAEA,MAAM6b,GAAY,EAAAlZ,EAAAE,YAGhB8Y,EAAAG,yCAEuC,MACvC,MAAQra,MAAOuJ,IAAe,EAAAzK,EAAAwC,WAC9B,OACE7C,EAAAQ,QAAAS,cAACqZ,EAAAuB,MAAD,CACEC,KAAK,wBACL3a,OAAQ,EAAG4a,QAAOhR,aAChB/K,EAAAQ,QAAAS,cAAC0a,EAAD,CACEha,UAAW,CAAEsY,OAAQ8B,EAAMC,OAAO/B,QAClCpY,eAAe,EACfoa,YAAa,IACXjc,EAAAQ,QAAAS,cAACf,EAAAW,MAAD,CAAOsB,MAAM,WACXnC,EAAAQ,QAAAS,cAACpB,EAAAoC,MAAD,CAAAC,GAAA,qDAGJf,OAAQ,CAACuJ,GAAQoE,aACf9O,EAAAQ,QAAAS,cAACya,EAAAQ,UAAD,CACE/E,OAAQzM,EAAKuO,MAAQvO,EAAKuO,KAAK9B,OAC/BgF,iBACEzR,EAAKuO,KACAvO,EAAKuO,KAAKtB,WAAWjU,IACpB4F,EAAAC,GAAGuS,KAAK,CAAC,SAAU,QAErB,GAENrD,UAAWd,GACT7M,EAAWsR,WAAWL,EAAMC,OAAO/B,OAAQtC,GAE7C0E,QAAS,IAAMtR,EAAQuR,SACvBC,UAAWzN,+GC7CzBhP,EAAA,MAEA,IAAA4U,EAAAzU,EAAAH,EAAA,IACAD,ySAAAkE,CAAAjE,EAAA,IACA0c,EAAAvc,EAAAH,EAAA,MACA2c,EAAAxc,EAAAH,EAAA,OACAK,EAAAF,EAAAH,EAAA,KAEAM,EAAAN,EAAA,wDAOA,MAAM4c,EAA6Bvc,EAAAK,QAAO4D,IAAG1D,WAAA,CAAAC,YAAA;;;;;;;;;IASzCP,EAAAU;;;IAGAV,EAAAW;;;;;;;;;;QAYwC,EAAGuW,iBAC7C,MAAOqF,EAAqBC,IAA0B,EAAA/c,EAAAgd,UAAS,GAC/D,OACEhd,EAAAW,QAAAS,cAACyb,EAAD,KACyB,IAAtBpF,EAAW7Q,OACR,KACA6Q,EAAW5T,IAAI,CAAC6T,EAAU3T,IACxB/D,EAAAW,QAAAS,cAACub,EAAAhc,QAAOma,KAAR,CACEC,GAAIrD,EAASC,UACb3T,IAAK0T,EAASrV,GACdkB,WAAW,EAAAsR,EAAAlU,SAAW,oCAAqC,CACzDsc,OAAQH,IAAwB/Y,IAElCmZ,YAAa,IAAMH,EAAuBhZ,GAC1CoZ,QAAS,IACTC,QAAQ,EACRC,KAAK,EACLlb,8CAA6CuV,EAASrV,MAEtDrC,EAAAW,QAAAS,cAAA,OAAKmC,UAAU,6CACbvD,EAAAW,QAAAS,cAAA,QAAMmC,sBAAuBmU,EAAS4F,eAExCtd,EAAAW,QAAAS,cAAA,OAAKmC,UAAU,kDACbvD,EAAAW,QAAAS,cAACwb,EAAAjc,QAAD,CAAU4c,MAAO,GAAI7F,EAASC,yJC9D9C,IAAA3X,EAAAC,EAAA,KACAC,EAAAD,EAAA,KACAE,EAAAC,EAAAH,EAAA,IACAK,EAAAF,EAAAH,EAAA,KAEAM,EAAAN,EAAA,KAGAud,EAAApd,EAAAH,EAAA,OACAwd,EAAArd,EAAAH,EAAA,0DAUA,MAAMyd,EAAiBpd,EAAAK,QAAO4D,IAAG1D,WAAA,CAAAC,YAAA;;IAE7BP,EAAAU;IACAV,EAAAW;;;;;EAOEyc,EAAqBrd,EAAAK,QAAO4D,IAAG1D,WAAA,CAAAC,YAAA;IACjCP,EAAAU;;;;IAIAV,EAAAW;;;;aAME,cAAwBf,EAAAQ,QAAMoU,UAClCC,uBAAsB4I,aAAEA,IACtB,OAAOA,EAET5I,oBACE,MAAM6I,eACJA,EACAC,WAAWC,OAAEA,IACXpT,KAAKxJ,MACT,OAAO0c,GAAkBE,EAAOC,cAElChJ,SACE,MAAMyC,WACJA,EADIwG,OAEJA,EACAH,WAAWpc,MAAEA,EAAFE,KAASA,IAClB+I,KAAKxJ,MACH+c,GAAgBvT,KAAKwT,oBAC3B,OACEhe,EAAAQ,QAAAS,cAACsc,EAAD,KACEvd,EAAAQ,QAAAS,cAACuc,EAAD,KACyB,IAAtBlG,EAAW7Q,OACVzG,EAAAQ,QAAAS,cAAA,UACEjB,EAAAQ,QAAAS,cAACpB,EAAAoC,MAAD,CAAAC,GAAA,uCAGFlC,EAAAQ,QAAAS,cAAClB,EAAA+B,SAAD,KACG,IACCwV,EAAW5T,IAAI6T,GACbvX,EAAAQ,QAAAS,cAACoc,EAAA7c,QAAD,CAAcqD,IAAK0T,EAASrV,GAAIqV,SAAUA,GACvCA,EAAS0G,QAAQva,IAAIyT,GACpBnX,EAAAQ,QAAAS,cAACqc,EAAA9c,QAAD,CACEqD,IAAKsT,EAAOjV,GACZiV,OAAQA,EACR2G,OAAQA,EAAO3G,EAAOjV,KAAO,EAC7BiX,SAAU5X,EAAM6X,qBAAuBjC,EAAOjV,GAC9C6b,aAAcA,EACd1b,QAAS,KACH0b,EACFxc,EAAM+X,gBAAgBnC,EAAOjV,IAE7BT,EAAKyc,kBAGTnI,WAAY,KACNoB,EAAOiD,cAAgB,GACzB7Y,EAAM4c,aAAahH,EAAOjV,oHCtFtD,IAAArC,EAAAI,EAAAH,EAAA,IACA0c,EAAAvc,EAAAH,EAAA,MACAK,EAAAF,EAAAH,EAAA,KAEAM,EAAAN,EAAA,wDASA,MAAMse,EAAqBje,EAAAK,QAAO4D,IAAG1D,WAAA,CAAAC,YAAA;;;;;;;EAS/B0d,GAA0B,EAAAle,EAAAK,SAAO,MAAKE,WAAA,CAAAC,YAAA;IACxCP,EAAAW;QAGoC,EAAGwW,WAAU+G,cACnDze,EAAAW,QAAAS,cAACub,EAAAhc,QAAO+d,QAAR,CAAgBzY,KAAMyR,EAASC,WAC7B3X,EAAAW,QAAAS,cAACmd,EAAD,KACEve,EAAAW,QAAAS,cAACod,EAAD,KAA0B9G,EAASC,WAClC8G,qHC9BPxe,EAAA,MAEA,IAAAD,EAAAI,EAAAH,EAAA,IACA2c,EAAAxc,EAAAH,EAAA,OACAK,EAAAF,EAAAH,EAAA,KAIAM,EAAAN,EAAA,KACA0e,EAAA1e,EAAA,yDAWA,MAAM2e,EAAqBte,EAAAK,QAAO4D,IAAG1D,WAAA,CAAAC,YAAA;;;;;;;;;;;sBAWf,EAAGwY,cACrBA,EAAW,UAAY;;;;;;;;;;;;;;;;EAiBrBuF,EAAoBve,EAAAK,QAAOme,IAAGje,WAAA,CAAAC,YAAA;;;;;;;;EAU9Bie,EAA0Bze,EAAAK,QAAO4D,IAAG1D,WAAA,CAAAC,YAAA;;;sBAGpB,EAAGoN,WAAYA,EAAMC;;;;;;;EASrC6Q,EAAoB1e,EAAAK,QAAO4D,IAAG1D,WAAA,CAAAC,YAAA;sBACd,EAAGoN,WAAYA,EAAMC;;;;;;;;;;;;;EAerC8Q,EAAoB3e,EAAAK,QAAO4D,IAAG1D,WAAA,CAAAC,YAAA;sBACd,EAAGoN,WAAYA,EAAMsG;;;;;;;;IAQvCjU,EAAAW;;;;QAMoC,EACtCoW,SACA2G,SACA/H,aACAoD,WACA9W,UACA0b,kBAEAle,EAAAW,QAAAS,cAACud,EAAAO,WAAD,CACEC,SAAU7H,EAAOjV,GACjB+c,YAAa9H,EAAOiD,cAAgB,EACpC2D,aAAcA,EACd1b,QAASA,EACTL,+BAA8BmV,EAAOjV,MAErCrC,EAAAW,QAAAS,cAACwd,EAAD,CAAoBzI,aAAcD,EAAYoD,SAAUA,GACrDhC,EAAO+H,OACNrf,EAAAW,QAAAS,cAACyd,EAAD,CAAmBS,IAAKhI,EAAO+H,MAAOE,IAAKjI,EAAOK,YAGpD3X,EAAAW,QAAAS,cAAC2d,EAAD,MACA/e,EAAAW,QAAAS,cAAC4d,EAAD,CAAmB7c,sCAAqCmV,EAAOjV,MAC5DiV,EAAOoB,MAAMC,gBAEfsF,EAAS,EAAIje,EAAAW,QAAAS,cAAC6d,EAAD,QAAuBhB,MAAiC,GACtEje,EAAAW,QAAAS,cAAA,UACEpB,EAAAW,QAAAS,cAACwb,EAAAjc,QAAD,CAAU4c,MAAO,EAAGpb,qCAAoCmV,EAAOjV,MAC5DiV,EAAOK,YAGZ3X,EAAAW,QAAAS,cAAA,SACEpB,EAAAW,QAAAS,cAACwb,EAAAjc,QAAD,CACE4c,MAAO,EACPpb,4CAA2CmV,EAAOjV,MAEjDiV,EAAOkI,gKCzIlB,IAAAxf,EAAAI,EAAAH,EAAA,IACAwa,EAAAxa,EAAA,KACAK,EAAAF,EAAAH,EAAA,KAEAO,EAAAP,EAAA,IAEAM,EAAAN,EAAA,wDASA,MAAMwf,GAAa,EAAAnf,EAAAK,SAAO8Z,EAAAK,MAAKja,WAAA,CAAAC,YAAA;;;;;eAOc,GAC3Cqe,WACAC,cACAlB,eACA1b,UACAic,cAEKP,EAGDkB,EAEApf,EAAAW,QAAAS,cAACqe,EAAD,CAAY1E,GAAI,CAAE2E,uBAAwBP,KAAc3c,QAASA,GAC9Dic,GAKLze,EAAAW,QAAAS,cAACZ,EAAAa,SAAD,CACEC,OAAQ,EAAGI,WACT1B,EAAAW,QAAAS,cAACb,EAAAwN,OAAD,KACG4R,GACC3f,EAAAW,QAAAS,cAAA,OACEoB,QAAS,KACPA,IACAmd,EACIje,EAAMke,oBAAoBT,GAC1Bzd,EAAMme,cAAcV,KAGzBV,MAtBJze,EAAAW,QAAAS,cAAA,OAAKoB,QAASA,GAAUic,iHC9BnC,MAAA1b,EAAA9C,EAAA,KACAD,KAAAC,EAAA,gCAEAoO,EAAApO,EAAA,KACAO,EAAAP,EAAA,IACAmE,EAAAnE,EAAA,sBAEyC,MACvC,MAAM2B,KAAEA,IAAS,EAAApB,EAAAwC,WACjB,OAAO,EAAAD,EAAAE,aAAY,IACjBjD,EAAAW,QAAAS,cAACiN,EAAAG,WAAD,CACErL,QAASvB,EAAKke,sBACdtD,QAAS5a,EAAKme,eACdrR,WAAYtK,EAAA+B,KAAAC,EAAA,2BAEXhC,EAAA+B,KAAAC,EAAA,gLCfP,IAAApG,EAAAI,EAAAH,EAAA,IACAuG,EAAAvG,EAAA,KACAI,EAAAJ,EAAA,KACAK,EAAAF,EAAAH,EAAA,oiBAQA,MAAM+f,EAA0B1f,EAAAK,QAAO4D,IAAG1D,WAAA,CAAAC,YAAA;;;EAKpCmf,GAAiB,EAAA3f,EAAAK,SAAON,EAAA6G,OAAMrG,WAAA,CAAAC,YAAA;;;;;kBAKlB,EAAG+G,aACjBA,EAAU,MAAQ;;;;;;;;;;;;;;;;;;;;EAsBhBqY,EAAc5f,EAAAK,QAAO4D,IAAG1D,WAAA,CAAAC,YAAA;;;sBAKuBkI,SAAArD,MACnDA,EADmDwa,aAEnDA,GAAe,EAFoCva,SAGnDA,EAHmD6Y,SAInDA,GAAQzV,EACR7H,EAAAgI,EAAAH,EAAA,gDACI,OACJhJ,EAAAW,QAAAS,cAACoF,EAAAO,MAAD,CAAOpB,MAAOA,EAAOwa,aAAcA,EAAcva,SAAUA,GACxDoB,GACChH,EAAAW,QAAAS,cAAC4e,EAAD,KACEhgB,EAAAW,QAAAS,cAAC6e,EAAD5a,EAAA,CACE8B,KAAK,WACLT,MAAOM,EAASN,MAChBY,SAAUzB,GAAWmB,EAASQ,SAAS3B,EAAQ4B,OAAO5B,SACtDgC,QAASb,EAASoZ,SAAWtY,QAAQd,EAASlD,QAC1C3C,IAENnB,EAAAW,QAAAS,cAAC8e,EAAD,KAAczB,+IClEtB,MAAAze,KAAAC,EAAA,gCACAI,EAAAJ,EAAA,KAEAogB,EAAApgB,EAAA,KACAmE,EAAAnE,EAAA,IAEA,MAAMqgB,EAAU,yHAEHC,EAA2B7Z,IACtC,MAAM2F,EAAQ3F,EAAMC,OACpB,MAAc,KAAV0F,EACKjI,EAAA+B,KAAAC,EAAA,uBAEJka,EAAQE,KAAKnU,GAGX,KAFEjI,EAAA+B,KAAAC,EAAA,8EAK+B,KACxCpG,EAAAW,QAAAS,cAACf,EAAA4G,UAAD,KACEjH,EAAAW,QAAAS,cAACif,EAAAI,cAAD,CACE9a,MAAM,QACNwB,KAAK,QACLwM,aAAa,QACbvM,YAAY,SACZsZ,cAAc,EACd9a,SAAU2a,EACVpe,cAAY,kIC5BlB,MAAAnC,KAAAC,EAAA,gCACAI,EAAAJ,EAAA,KAEAogB,EAAApgB,EAAA,KACAmE,EAAAnE,EAAA,qBAEyC,KACvCD,EAAAW,QAAAS,cAACf,EAAA4G,UAAD,KACEjH,EAAAW,QAAAS,cAACf,EAAA8S,WAAD,KACEnT,EAAAW,QAAAS,cAACif,EAAAI,cAAD,CACE9a,MAAM,YACNgO,aAAa,aACbvM,YAAahD,EAAA+B,KAAAC,EAAA,cACbR,SAAUc,GACS,KAAjBA,EAAMC,OAAgBvC,EAAA+B,KAAAC,EAAA,2BAAkC,KAE1DjE,cAAY,8BAEdnC,EAAAW,QAAAS,cAACif,EAAAI,cAAD,CACE9a,MAAM,WACNgO,aAAa,cACbvM,YAAahD,EAAA+B,KAAAC,EAAA,aACbR,SAAUc,GACS,KAAjBA,EAAMC,OAAgBvC,EAAA+B,KAAAC,EAAA,0BAAiC,KAEzDjE,cAAY,yMCzBpB,MAAAnC,KAAAC,EAAA,gCACAI,EAAAJ,EAAA,KAEAogB,EAAApgB,EAAA,KACAmE,EAAAnE,EAAA,IAEO,MAAM0gB,EAA2Bja,GACrB,KAAjBA,EAAMC,OAAgBvC,EAAA+B,KAAAC,EAAA,sBAA6B,kCAE9C,MAAMwa,EAAiCla,GAC3B,KAAjBA,EAAMC,OAAgBvC,EAAA+B,KAAAC,EAAA,6BAAoC,0DAElB,KACxCpG,EAAAW,QAAAS,cAACf,EAAA4G,UAAD,KACEjH,EAAAW,QAAAS,cAACf,EAAA8S,WAAD,KACEnT,EAAAW,QAAAS,cAACif,EAAAI,cAAD,CACE9a,MAAM,cACNgO,aAAa,mBACbvM,YAAY,IACZxB,SAAUgb,IAEZ5gB,EAAAW,QAAAS,cAACif,EAAAI,cAAD,CACE9a,MAAM,QACNwB,KAAK,MACLwM,aAAa,eACbvM,YAAahD,EAAA+B,KAAAC,EAAA,SACbR,SAAU+a,EACVpb,MAAO,CAAEkT,MAAO,OAChBtW,cAAY,yJC5BpB,MAAA2I,EAAA7K,EAAA,KACAD,ySAAAkE,CAAAjE,EAAA,IACAuK,EAAAvK,EAAA,KACAI,EAAAJ,EAAA,KACAK,KAAAL,EAAA,iCAEAmN,EAAAnN,EAAA,KACAO,EAAAP,EAAA,IAEA6O,EAAA7O,EAAA,MACAmE,EAAAnE,EAAA,IACAuI,EAAAvI,EAAA,+QAWA,MAAM4gB,EAAavgB,EAAAK,QAAO4D,IAAG1D,WAAA,CAAAC,YAAA;;;;;;EAQvB,SAAUggB,GAAkBC,MAChCA,EADgCC,UAEhCA,EAFgCC,aAGhCA,EAHgCC,uBAIhCA,EAAyB,MAEzB,MAAM5L,GAAW,EAAAtV,EAAAyE,QAAyB,OACnC0c,EAAcC,IAAiB,EAAAphB,EAAAgd,WAAS,GAEzCqE,GAAU,EAAArhB,EAAA8E,aACd,IAAW4F,EAAAC,UAAA,qBACT,IAAK2K,EAAS1Q,SAAW0Q,EAAS1Q,QAAQ+I,SACxC,OAEF,MAAMkM,EAAOvE,EAAS1Q,QAAQ8B,MAAMC,OACpC,GAAoB,IAAhBkT,EAAKjT,OAAT,CAGAwa,GAAc,GACd9L,EAAS1Q,QAAQ+I,UAAW,EAC5B2H,EAAS1Q,QAAQ8B,MAAQtC,EAAA+B,KAAAC,EAAA,mCAA+ByT,SACxD,UACQmH,EAAUnH,GACZvE,EAAS1Q,UACX0Q,EAAS1Q,QAAQ8B,MAAQ,IAE3B,MAAOoD,GACHwL,EAAS1Q,UACX0Q,EAAS1Q,QAAQ8B,MAAQmT,GAP7B,QAUEuH,GAAc,GACV9L,EAAS1Q,UACX0Q,EAAS1Q,QAAQ+I,UAAW,EAC5B2H,EAAS1Q,QAAQ+Q,aAIvB,CAACqL,IAGG1Z,GAAW,EAAAwD,EAAAkB,qBAAoBqV,EAASH,GAExCI,GAAY,EAAAthB,EAAA8E,aAAaoQ,IACd,UAAXA,EAAGlR,MACLqd,IACAnM,EAAGqM,mBAEJ,IAEH,OACEvhB,EAAAW,QAAAS,cAACf,EAAA4G,UAAD,KACEjH,EAAAW,QAAAS,cAACf,EAAA8S,WAAD,KACEnT,EAAAW,QAAAS,cAACf,EAAA6G,MAAD,CACE4O,SAAUR,EACV3B,aAAa,MACbhG,SAAUwT,EACV/Z,YAAahD,EAAA+B,KAAAC,EAAA,eACbkB,SAAUA,EACVga,UAAWA,EACX5Z,OAAQ2Z,EACRG,QAASH,KAGbrhB,EAAAW,QAAAS,cAACyf,EAAD,KACGE,EAAMld,IAAI,EAAGxB,KAAIwX,UAChB7Z,EAAAW,QAAAS,cAACgM,EAAAqU,gBAAD,CAAiBzd,IAAK3B,EAAIG,QAAS,IAAMye,EAAa5e,OAChDwX,qBAQkB,KAChC,MAAMnY,MAAEA,IAAU,EAAAlB,EAAAwC,YAEZ6H,KAAEA,IAAS,EAAAL,EAAA0E,UACf1G,EAAAkZ,qBACA,CACErS,SAAS,EACTvN,UAAW,CAAEC,QAASL,EAAMK,WAI1B4f,GAAkB,EAAA7S,EAAAS,oBAGtB/G,EAAAoZ,sBAAuB,CAAE3Y,aAAcvH,EAAM+N,eAEzCuR,GAAY,EAAAhhB,EAAA8E,aAAmB+U,GAAgBnP,OAAA,4BACnD,IAAKhJ,EAAMK,QACT,OAEF,MAAM6I,QAAe+W,EAAgB,CACnC5f,QAASL,EAAMK,QACf8X,KAAMA,IAERnY,EAAMmgB,gBAAe,GACjBjX,GAAUA,EAAOkX,kBAAkBvY,WAAW3C,QAChDlF,EAAM+N,aAAa7E,EAAOkX,kBAAkBvY,cAE7C,IAEGwY,GAAqB,EAAAjT,EAAAS,oBAGzB/G,EAAAwZ,yBAA0B,CAAE/Y,aAAcvH,EAAM+N,eASlD,OACEzP,EAAAW,QAAAS,cAAC0f,EAAD,CACEC,MAAOlW,GAAQA,EAAKnJ,MAAQmJ,EAAKnJ,MAAMugB,WAAa,GACpDjB,UAAWA,EACXC,aAXkBiB,IAChBxgB,EAAMK,UACRL,EAAMmgB,gBAAe,GACrBE,EAAmB,CAAEG,SAAQngB,QAASL,EAAMK,gMC/IlD,MAAAY,KAAA1C,EAAA,iCAEAsS,EAAAtS,EAAA,IAEO,MAAMyhB,EAAuB/e,EAAAhC;;;;;;;;;IAShC4R,EAAA4P;2BAGG,MAAMP,EAAwBjf,EAAAhC;;;;;;;;;;;;IAYjC4R,EAAA4P;4BAGG,MAAMH,EAA2Brf,EAAAhC;;;;;;;;;IASpC4R,EAAA4P;6ICxCJliB,EAAA,MAEA,MAAAD,EAAAC,EAAA,KACA8C,EAAA9C,EAAA,KACAE,KAAAF,EAAA,gCAEAmN,EAAAnN,EAAA,KACAO,EAAAP,EAAA,IACAmE,EAAAnE,EAAA,uBAE0C,MACxC,MAAMyB,MAAEA,IAAU,EAAAlB,EAAAwC,WAElB,OAAO,EAAAD,EAAAE,aAAY,IACjB9C,EAAAQ,QAAAS,cAAA,OAAKmC,UAAU,0BACbpD,EAAAQ,QAAAS,cAACgM,EAAAgV,mBAAD,CACEjgB,cAAY,qBACZkgB,cAA8BC,IAApB5gB,EAAMiO,UAChBnN,QAAS,IAAMd,EAAMqO,kBAAauS,IAEjCle,EAAA+B,KAAAC,EAAA,kBAEHjG,EAAAQ,QAAAS,cAACgM,EAAAgV,mBAAD,CACEjgB,cAAY,uBACZkgB,cAA8BC,IAApB5gB,EAAMiO,UAChBnN,QAASd,EAAM6gB,gBAEd7gB,EAAMiO,UACLxP,EAAAQ,QAAAS,cAACpB,EAAAoC,MAAD,CAAAC,GAAA,oBAAA4F,OAAA,CAAAC,EAGWxG,EAAMiO,WAHjB6S,QAAA,CAAAC,MAIY,CAAEC,QAAS,OAAQC,KAAM,UAAWC,OAAQ,cAIxDxe,EAAA+B,KAAAC,EAAA,mJCpCV,MAAApG,EAAAC,EAAA,KACA6K,EAAA7K,EAAA,KACA4O,EAAA5O,EAAA,IAMA4iB,EAAA5iB,EAAA,KACAE,ySAAA+D,CAAAjE,EAAA,IACAK,KAAAL,EAAA,iCAEA6iB,EAAA7iB,EAAA,MACA8iB,EAAA9iB,EAAA,MAWA,MAAM+iB,EAAsB1iB,EAAAK,QAAO4D,IAAG1D,WAAA,CAAAC,YAAA;;EAIhCmiB,EAAgB3iB,EAAAK,QAAO4D,IAAG1D,WAAA,CAAAC,YAAA;;;;;eAOY,GAC1CoP,UACAK,UACAc,aACAS,eACAP,cACAC,kBAAkB,OAElB,MAAM0R,GAAQ,EAAA/iB,EAAAgjB,SACZ,KACE,MAAMC,GAAW,EAAAN,EAAAO,iBAAgBnT,EAASK,EAASc,GACnD,OAAIG,EAAgB5K,OACXwc,EAAS5Z,OAAO8Z,GACrB9R,EAAgB+R,MAAK,EAAAV,EAAAW,kBAAiBF,KAGnCF,GAET,CAAClT,EAASK,EAASc,EAAYG,IAG3BiS,GAAO,EAAAtjB,EAAAgjB,SACX,KACS,EAAAtU,EAAA6U,mBAAkB,CAAEhS,MAAOxB,EAAS0B,IAAKrB,IAElD,CAACL,EAASK,KAGLoT,EAASC,IAAc,EAAAzjB,EAAA6c,UAAS,GAevC,OAbA,EAAA7c,EAAAiL,WACE,KACMmG,GACFqS,GAAW,EAAA/U,EAAAgV,gBAAetS,EAAa2R,KAG3C,CAAC3R,KAGH,EAAAzG,EAAAgZ,eAAc,KACZhS,EAAaoR,EAAMS,MAInBxjB,EAAAQ,QAAAS,cAAC4hB,EAAD,KACGS,EAAK5f,IAAIkgB,GACR5jB,EAAAQ,QAAAS,cAACjB,EAAA+E,SAAD,CAAUlB,IAAK+f,EAAIC,WACjB7jB,EAAAQ,QAAAS,cAAC6hB,EAAD,KACE9iB,EAAAQ,QAAAS,cAACpB,EAAAikB,WAAD,CACEvd,MAAOqd,EACPG,OAAQ,CAAEC,MAAO,OAAQJ,IAAK,UAAWrB,QAAS,WAGrDQ,EAAMrf,IAAI,CAACyf,EAAMvf,KAChB,EAAA8K,EAAAuV,SAAQL,GAAK,EAAAlV,EAAAwV,YAAWf,IACtBnjB,EAAAQ,QAAAS,cAAC2hB,EAAAuB,iBAAD,CACEtgB,IAAKsf,EAAKiB,UACV1U,KAAMyT,EACNrL,WAAYlU,IAAQ4f,EACpBzL,eAAe,EACf1V,QAAS,KACPohB,EAAW7f,GACX+N,EAAawR,MAGf,iHC5FV,SAA0B5R,EAAaE,EAAWP,GACtD,IAAIzM,GAAU,EAAAiK,EAAA2V,eAAcC,EAAY/S,EAAOL,IAC/C,MAAM6R,EAAgB,GAChBwB,GAAY,EAAA7V,EAAA8V,cAAY,EAAA9V,EAAA+V,YAAWhT,EAAK,IAC9C,GACEsR,EAAMje,KAAKL,GACXA,GAAU,EAAAiK,EAAAyC,YAAW1M,EAASyM,SACvBzM,GAAW8f,GACpB,OAAOxB,qCAhBT,IAAArU,EAAA5O,EAAA,IAmBM,SAAUwkB,EAAY5U,EAAYwB,GACtC,OAAO,EAAAxC,EAAAyC,YAAWuT,EAAchV,EAAMwB,GAAaA,GAG/C,SAAUwT,EAAchV,EAAYwB,GACxC,OAAO,EAAAxC,EAAA+V,YAAW/U,GAAM,EAAAhB,EAAAiW,YAAWjV,GAAQwB,kHCxB7C,IAAArR,EAAAI,EAAAH,EAAA,IAEAK,EAAAF,EAAAH,EAAA,KAEAkY,EAAAlY,EAAA,KACA8kB,EAAA9kB,EAAA,oiBAQA,MAAM+kB,EAAO1kB,EAAAK,QAAO4D,IAAG1D,WAAA,CAAAC,YAAA;;qBAI4BkI,SAAA6G,KACjDA,GAAI7G,EACJsP,EAAAnP,EAAAH,EAAA,UACI,OACJhJ,EAAAW,QAAAS,cAAC+W,EAAAI,aAADlT,EAAA,CACE9C,KAAK,KACLiW,SAAS,EACTC,MAAM,QACNtW,mCAAkC0N,EAAK0U,aACnCjM,GAEJtY,EAAAW,QAAAS,cAAC4jB,EAAD,MAAO,EAAAD,EAAAE,YAAWpV,2JC5BtB,MAAAlN,KAAA1C,EAAA,iCAEAilB,EAAAjlB,EAAA,KAEO,MAAMkP,EAAuBxM,EAAAhC;;;;;;;;;;;;;;;;2BAkB7B,MAAM6O,EAAkC7M,EAAAhC;;;;;;IAM3CukB,EAAAC;0KC5BJ,MAAAnlB,KAAAC,EAAA,gCACAI,EAAAJ,EAAA,gBAEwB,GAAGwe,cACzBze,EAAAW,QAAAS,cAACf,EAAA+kB,IAAD,CAAK7hB,UAAU,UAAU8hB,GAAG,KAAKC,GAAG,KAAKC,GAAG,KAAKC,GAAG,KACjD/G,mBAIuB,GAAGA,cAC7Bze,EAAAW,QAAAS,cAACf,EAAA+kB,IAAD,CAAK7hB,UAAU,UAAU8hB,GAAG,IAAIC,GAAG,IAAIC,GAAG,IAAIC,GAAG,KAC9C/G,oBAIwB,GAAGA,cAC9Bze,EAAAW,QAAAS,cAACf,EAAA+kB,IAAD,CAAK7hB,UAAU,UAAU8hB,GAAG,IAAIC,GAAG,IAAIC,GAAG,IAAIC,GAAG,KAC9C/G,uGCMC,UAAwBgH,OAC5BA,EAD4BC,eAE5BA,EAAiB,GAAK5a,EAAA6a,OAFMC,2BAG5BA,EAA6B,GAHDC,4BAI5BA,EAA8B,KAE9B,MAAMC,GAAS,EAAAhb,EAAAib,WAEf,EAAAjb,EAAAkb,UAAS,CACPC,SAAUP,EACVzP,QAASnO,QAAQ4d,KAGnB,MAAMQ,EAAMJ,KACN3iB,OAAEA,EAAFqN,YAAUA,EAAVJ,WAAuBA,GAAeqV,EAE5C,IAAIU,EAEJ,MAAMC,EAAYhW,GAAa,EAAAvB,EAAAwX,qBAAoBjW,EAAY8V,GAAO,EAChEI,EAAY9V,GAAc,EAAA3B,EAAAwX,qBAAoB7V,EAAa0V,GAAO,EAIpEC,EAFAhjB,EACEqN,GAAe8V,GAAa,EACnB,SAEAC,EAAO/V,EAAaqV,EAA6BK,GACxD,cACA,OAGF9V,GAAcgW,GAAa,EAClB,OAEAG,EAAOnW,EAAYwV,EAA4BM,GACtD,cACA,SASR,MALgC,CAC9BC,WACAC,YACAE,cAjEJ,IAAAxb,EAAA7K,EAAA,KACA4O,EAAA5O,EAAA,IAqEA,SAASsmB,EAAO1W,EAAqB2W,EAAmBN,GACtD,QAAOrW,GAAO4W,KAAKC,KAAI,EAAA7X,EAAAwX,qBAAoBxW,EAAMqW,KAASM,iICvE5D,MAAAxmB,KAAAC,EAAA,gCAGAmE,EAAAnE,EAAA,kBAM8C,GAAGmT,cAC/C,IAAKA,IAAYA,EAAQF,SACvB,OAAOlT,EAAAW,QAAAS,cAAA,YAAOgD,EAAA+B,KAAAC,EAAA,oBAEhB,MAAM8M,SAAEA,GAAaE,EACrB,OACEpT,EAAAW,QAAAS,cAAA,eAAU8R,EAASyT,UAAUzT,EAAS0T,kBACpC1T,EAAS2T,iHChBf5mB,EAAA,KAEA,MAAAD,KAAAC,EAAA,gCACAI,EAAAJ,EAAA,8fAc8C+I,SAAA7F,OAC5CA,EAD4CuL,WAE5CA,EAF4C8N,QAG5CA,EAH4CiC,SAI5CA,GAAQzV,EACR8d,EAAA3d,EAAAH,EAAA,8CACI,OACJhJ,EAAAW,QAAAS,cAACf,EAAA6C,MAADmC,EAAA,CACElC,OAAQA,EACRE,OAAQmZ,EACRjZ,UAAU,oBACNujB,EAJN,CAKE3kB,cAAY,eAEZnC,EAAAW,QAAAS,cAACf,EAAAmD,YAAD,CAAaC,IAAKpD,EAAAqD,UAAWL,OAAQmZ,EAASjZ,UAAU,iBACtDvD,EAAAW,QAAAS,cAAA,YAAOsN,IAET1O,EAAAW,QAAAS,cAACf,EAAAsD,UAAD,CAAWJ,UAAU,eACnBvD,EAAAW,QAAAS,cAAA,OAAKmC,UAAU,wBAAwBkb,8HCnC7C,IAAAze,EAAAI,EAAAH,EAAA,IACAK,EAAAF,EAAAH,EAAA,qVAYO,MAAM8mB,EAAuC/d,QAAAge,UAClDA,EADkDC,cAElDA,EAAgB,UAFkCC,MAGlDA,GAAQ,EAH0C3kB,KAIlDA,EAAO,UAJ2Ckc,SAKlDA,EALkD0I,UAMlDA,EAAY,OAAKne,EACjBoe,EAAAje,EAAAH,EAAA,qEAEA,OAAAhJ,EAAAW,QAAMS,eACJ,EAAAd,EAAAK,SAAOwmB;0BACehmB,UAAgBA,EAAM+M,MAAM8Y;+BACvB7lB,GAAU+lB,EAAQ,QAAU;;;yBAGlC/lB,GAASoB;MAE9B6kB,EACA3I,+BAGWsI,oHClCf,MAAA/mB,KAAAC,EAAA,gCACAonB,EAAApnB,EAAA,IAGAO,EAAAP,EAAA,gBAQ4C,GAC1CqB,SACAmM,UACA6Z,YAAW,KAEXtnB,EAAAW,QAAAS,cAACZ,EAAAa,SAAD,CACEoM,QAASA,EACTnM,OAAQ,EAAGI,WACFA,EAAMC,SACXL,EAAOI,GACL4lB,EACFtnB,EAAAW,QAAAS,cAACimB,EAAAE,SAAD,CAAUxM,GAAG,MACX,4GCxBV,IAAAhY,EAAA9C,EAAA,KACAD,EAAAI,EAAAH,EAAA,IACAunB,EAAAvnB,EAAA,KACAK,EAAAF,EAAAH,EAAA,wDAQA,MAAMwnB,EAAqBnnB,EAAAK,QAAO4D,IAAG1D,WAAA,CAAAC,YAAA;;;;EAM/B4mB,EAAapnB,EAAAK,QAAO4D,IAAG1D,WAAA,CAAAC,YAAA;;;EAKvB6mB,GAAmB,EAAAH,EAAAI,eAAc,EAAGnJ,cAAeze,EAAAW,QAAAS,cAAApB,EAAAW,QAAAuE,SAAA,KAAGuZ,cAaZ,GAAGoJ,QAAOpJ,eACjD,EAAA1b,EAAAE,aAAY,IACjBjD,EAAAW,QAAAS,cAACumB,EAAD,CACEG,iBACE9nB,EAAAW,QAAAS,cAACqmB,EAAD,CACElkB,UAAU,iBACVpB,cAAY,cAGhB4lB,WAAY/nB,EAAAW,QAAAS,cAACsmB,EAAD,OAEZ1nB,EAAAW,QAAAS,cAAComB,EAAAQ,UAAD,CACExS,IAAKqS,EAAMI,UACXC,KAAML,EAAMK,KACZC,OAAQN,EAAMM,OACdC,gBAAiBP,EAAMQ,eACvBC,cAAeT,EAAMU,WACrB/lB,QAASqlB,EAAMrlB,QACf0G,QA7Bc,MACb,CACLsf,mBAAmB,EACnBC,gBAAgB,EAChBC,mBAAmB,EACnBC,mBAAoB,CAClBC,SAAUC,OAAOC,KAAKC,gBAAgBC,aAuB3BC,IAERxK,gHCvDT,MAAAze,KAAAC,EAAA,gCACAuG,EAAAvG,EAAA,KACAI,EAAAJ,EAAA,igBAQiD+I,SAAArD,MAC/CA,EAD+CC,SAE/CA,EAF+C8a,aAG/CA,GAAe,GAAK1X,EACpB0K,EAAAvK,EAAAH,EAAA,qCACI,OACJhJ,EAAAW,QAAAS,cAACoF,EAAAO,MAAD,CACEpB,MAAOA,EACPC,SAAUA,EACVtE,OAAQ0F,GACNhH,EAAAW,QAAAS,cAAApB,EAAAW,QAAAuE,SAAA,KACElF,EAAAW,QAAAS,cAACf,EAAA6G,MAAD7B,EAAA,GACMqO,EADN,CAEEhN,MAAOM,EAASN,MAChBY,SAAUC,GAAKP,EAASQ,SAASD,EAAEE,OAAOf,OAC1CgB,OAAQ,IAAMV,EAASW,YAAW,GAClCE,QAASb,EAASoZ,SAAWtY,QAAQd,EAASlD,UAE/C4c,GAAgB1gB,EAAAW,QAAAS,cAACf,EAAA2H,aAAD,KAAehB,EAASlD,mJC5BjD,MAAA9D,EAAAC,EAAA,KACA8C,EAAA9C,EAAA,KACAE,KAAAF,EAAA,gCAEAoO,EAAApO,EAAA,KACAO,EAAAP,EAAA,IAEAipB,EAAAjpB,EAAA,KACAmE,EAAAnE,EAAA,2BAMsD,GAAGwlB,aACvD,MAAM7jB,KAAEA,IAAS,EAAApB,EAAAwC,YACXmjB,SAAEA,EAAFC,UAAYA,IAAc,EAAA8C,EAAAC,eAAc,CAC5C1D,SAEAC,eAAgB,IAElB,OAAO,EAAA3iB,EAAAE,aAAY,IACjB9C,EAAAQ,QAAAS,cAACiN,EAAAG,WAAD,CACErL,QACgB,WAAbgjB,GAAsC,gBAAbA,KACzBvkB,EAAKwnB,uBAER5M,QAAS5a,EAAKynB,gBACd3a,WAAYtK,EAAA+B,KAAAC,EAAA,4BAEXhC,EAAA+B,KAAAC,EAAA,8DACa,gBAAb+f,GACChmB,EAAAQ,QAAAS,cAACpB,EAAAoC,MAAD,CAAAC,GAAA,0HAAA4F,OAAA,CAGWme,+HCnCnBnmB,EAAA,MAEA,IAAAD,EAAAI,EAAAH,EAAA,IAEAqpB,EAAArpB,EAAA,KAEAspB,EAAAnpB,EAAAH,EAAA,OACAupB,EAAAppB,EAAAH,EAAA,OACAwpB,EAAArpB,EAAAH,EAAA,OACAypB,EAAAtpB,EAAAH,EAAA,4EAE+B,KAC7BD,EAAAW,QAAAS,cAACkoB,EAAAK,SAAD,KACE3pB,EAAAW,QAAAS,cAAA,OACEke,IAAKmK,EAAA9oB,QACL4C,UAAU,8BACVpB,cAAY,2BACZod,IAAI,mBAENvf,EAAAW,QAAAS,cAAA,OACEke,IAAKkK,EAAA7oB,QACL4C,UAAU,gCACVgc,IAAI,eAENvf,EAAAW,QAAAS,cAAA,OACEke,IAAKiK,EAAA5oB,QACL4C,UAAU,gCACVpB,cAAY,4BACZod,IAAI,SAENvf,EAAAW,QAAAS,cAAA,OACEke,IAAKoK,EAAA/oB,QACL4C,UAAU,6BACVgc,IAAI,QACJpd,cAAY,4MClClB,IAAAnC,EAAAC,EAAA,KACA4O,EAAA5O,EAAA,IACAE,EAAAC,EAAAH,EAAA,IACAK,EAAAF,EAAAH,EAAA,KAEAO,EAAAP,EAAA,IAEAipB,EAAAjpB,EAAA,wDAQO,MAAM2pB,EAAoBtpB,EAAAK,QAAO4T,KAAI1T,WAAA,CAAAC,YAAA;;;wBAKrC,MAAM+oB,EAAsBvpB,EAAAK,QAAO4T,KAAI1T,WAAA,CAAAC,YAAA;;;0BA6ExC,SAAUgpB,EAAenY,GAC7B,MAAMoY,EAAa,IAAI1Z,KAAKsB,GACtBqY,EAAU,IAAI3Z,KACpB,IAAI6T,EAAqC,CACvCvB,KAAM,UACNC,OAAQ,WAQV,OANK,EAAA/T,EAAAob,WAAUF,EAAYC,KACzB9F,EAAMpY,OAAAC,OAAA,GACDmY,EAAM,CACTxB,QAAS,UAGNviB,EAAAQ,QAAAS,cAACpB,EAAAikB,WAAD,CAAYvd,MAAOqjB,EAAY7F,OAAQA,wBArFG,GACjDuB,SACAyE,eACAC,iBAEA,MAAMzoB,MAAEA,IAAU,EAAAlB,EAAAwC,YACZmjB,SAAEA,EAAFC,UAAYA,EAAZE,UAAuBA,IAAc,EAAA4C,EAAAC,eAAc,CACvD1D,WAGF,IAAKA,EACH,OAAO,KAGT,IAAsB,IAAlBA,EAAOtiB,OAAkB,CAC3B,IAAKsiB,EAAOrV,WACV,OACEjQ,EAAAQ,QAAAS,cAACyoB,EAAD,KACE1pB,EAAAQ,QAAAS,cAACpB,EAAAoC,MAAD,CAAAC,GAAA,wCAIN,MAAM+nB,EAAY3E,EAAO/U,cAAc,GACvC,GAAI0Z,GAAaA,EAAUC,WACzB,OAAOlqB,EAAAQ,QAAAS,cAACyoB,EAAD,KAAsBO,EAAUC,YAI3C,OAAQlE,GACN,IAAK,OACH,OACEhmB,EAAAQ,QAAAS,cAACwoB,EAAD,CAAmBznB,cAAY,qBAC5BT,EAAMuP,yBACL9Q,EAAAQ,QAAAS,cAACpB,EAAAoC,MAAD,CAAAC,GAAA,8CAAA4F,OAAA,CAA6BiiB,kBAE7B/pB,EAAAQ,QAAAS,cAACpB,EAAAoC,MAAD,CAAAC,GAAA,oDAAA4F,OAAA,CAAqCkiB,iBAI7C,IAAK,cACH,OACEhqB,EAAAQ,QAAAS,cAACyoB,EAAD,KACE1pB,EAAAQ,QAAAS,cAAApB,EAAAoC,MAAA,CAAAC,GAAA,8EAAA4F,OAAA,CACSme,gBAMf,IAAK,cACH,OACEjmB,EAAAQ,QAAAS,cAACwoB,EAAD,KACEzpB,EAAAQ,QAAAS,cAAApB,EAAAoC,MAAA,CAAAC,GAAA,8EAAA4F,OAAA,CACSqe,gBAMf,IAAK,SACH,OACEnmB,EAAAQ,QAAAS,cAACyoB,EAAD,KACGpE,EAAOrV,WACNjQ,EAAAQ,QAAAS,cAACpB,EAAAoC,MAAD,CAAAC,GAAA,sBAAA4F,OAAA,CAAAC,EAAwB4hB,EAAerE,EAAOrV,eAE9CjQ,EAAAQ,QAAAS,cAACpB,EAAAoC,MAAD,CAAAC,GAAA,4HC1FZ,IAAArC,EAAAC,EAAA,KACAE,EAAAC,EAAAH,EAAA,IACAI,EAAAJ,EAAA,KACAK,EAAAF,EAAAH,EAAA,KAEAmN,EAAAnN,EAAA,KACAM,EAAAN,EAAA,KAEAmE,EAAAnE,EAAA,uDAKA,MAAMqqB,EAA0BhqB,EAAAK,QAAO4D,IAAG1D,WAAA,CAAAC,YAAA;;qBAIS,GACjDypB,QAAUC,aAAYC,aAEtBtqB,EAAAQ,QAAAS,cAAAjB,EAAAQ,QAAAuE,SAAA,KACE/E,EAAAQ,QAAAS,cAACb,EAAAsN,QAAD,MACI2c,GAAcC,IACdtqB,EAAAQ,QAAAS,cAAA,OAAKmC,UAAU,mCACbpD,EAAAQ,QAAAS,cAAA,OAAKmC,UAAU,2CACbpD,EAAAQ,QAAAS,cAACpB,EAAAoC,MAAD,CAAAC,GAAA,4BAEFlC,EAAAQ,QAAAS,cAAA,OAAKmC,UAAU,gDACbpD,EAAAQ,QAAAS,cAACpB,EAAAoC,MAAD,CAAAC,GAAA,oEAKDmoB,GACCrqB,EAAAQ,QAAAS,cAAA,KAAGspB,KAAMF,EAAWG,KAClBxqB,EAAAQ,QAAAS,cAACf,EAAAO,OAAD,CACE2C,UAAU,0CACVjB,MAAM,aAFR,gBASHmoB,GACCtqB,EAAAQ,QAAAS,cAAA,KAAGspB,KAAMD,EAAOE,KACdxqB,EAAAQ,QAAAS,cAACf,EAAAO,OAAD,CACE2C,UAAU,0CACVjB,MAAM,aAFR,eAURnC,EAAAQ,QAAAS,cAACkpB,EAAD,KACEnqB,EAAAQ,QAAAS,cAACgM,EAAAwd,oBAAD,CACE7P,GAAG,IACHxX,UAAU,qCACVpB,cAAY,8BAEXiC,EAAA+B,KAAAC,EAAA,qBAA0B0H,uBAKjC3N,EAAAQ,QAAAS,cAACb,EAAAwN,OAAD,KACE5N,EAAAQ,QAAAS,cAAA,OACEmC,UAAU,6BACVgC,MAAO,CAAEslB,UAAW,WAEpB1qB,EAAAQ,QAAAS,cAAA,OAAKmC,UAAU,sCACfpD,EAAAQ,QAAAS,cAACgM,EAAAwd,oBAAD,CACE7P,GAAG,IACHxX,UAAU,qCACVpB,cAAY,8BAEXiC,EAAA+B,KAAAC,EAAA,qBAA0B0H,sIC9ErC,MAAA9N,KAAAC,EAAA,gCAEAqN,EAAArN,EAAA,KAGA6qB,EAAA7qB,EAAA,yBAMmD,GAAGqB,YACpDtB,EAAAW,QAAAS,cAACkM,EAAAE,UAAD,CACE8Z,UAAU,EACVhmB,OAAQI,GACN1B,EAAAW,QAAAS,cAAC0pB,EAAAlY,gBAAD,CACE9Q,UAAW,CACTsN,SAAU1N,EAAM0N,SAChBrN,QAASL,EAAMK,SAEjBT,OAAQuJ,GAAQvJ,EAAOuJ,oHCpB/B,IAAA7K,EAAAC,EAAA,KACAE,EAAAC,EAAAH,EAAA,IACAK,EAAAF,EAAAH,EAAA,KAEA8K,EAAA9K,EAAA,KACAwJ,EAAAxJ,EAAA,KACAmE,EAAAnE,EAAA,sQAMA,MAAM8qB,EAAezqB,EAAAK,QAAO4D,IAAG1D,WAAA,CAAAC,YAAA;sBACT,EAAGoN,WAAYA,EAAMC;EAGrC6c,EAAc1qB,EAAAK,QAAO4D,IAAG1D,WAAA,CAAAC,YAAA;sBACR,EAAGoN,WAAYA,EAAMC;EAGrC8c,EAAoB3qB,EAAAK,QAAO4D,IAAG1D,WAAA,CAAAC,YAAA;sBACd,EAAGoN,WAAYA,EAAMC;oBAGO,GAAGzM,WACnDvB,EAAAQ,QAAAS,cAAAjB,EAAAQ,QAAAuE,SAAA,KACE/E,EAAAQ,QAAAS,cAAC2pB,EAAD,CAAcxnB,UAAU,wBACtBpD,EAAAQ,QAAAS,cAAA,OAAKmC,UAAU,+BACbpD,EAAAQ,QAAAS,cAAA,QAAMmC,UAAU,oDAChBpD,EAAAQ,QAAAS,cAAA,UACEjB,EAAAQ,QAAAS,cAACpB,EAAAoC,MAAD,CAAAC,GAAA,gCAINlC,EAAAQ,QAAAS,cAAA,UACEjB,EAAAQ,QAAAS,cAACpB,EAAAoC,MAAD,CAAAC,GAAA,0CAAqD,IAoB3D,UAAwB6oB,cAAEA,IACxB,OAAIA,EAAc3H,KAAK4H,EAAUpgB,EAAA4B,gBAAgBye,OACxChnB,EAAA+B,KAAAC,EAAA,2BAEL8kB,EAAc3H,KAAK4H,EAAUpgB,EAAA4B,gBAAgBC,QACxCxI,EAAA+B,KAAAC,EAAA,mBAEF,KA1BFilB,CAAe3pB,IAElBvB,EAAAQ,QAAAS,cAAA,OAAKmC,UAAU,uBACbpD,EAAAQ,QAAAS,cAAA,OAAKmC,UAAU,iCACbpD,EAAAQ,QAAAS,cAACpB,EAAAoC,MAAD,CAAAC,GAAA,8BAEDX,EAAMyX,MAAMtV,IAAIuV,GACfjZ,EAAAQ,QAAAS,cAACkqB,EAADjmB,EAAA,CAAWrB,IAAKoV,EAAK/W,IAAQ+W,KAE/BjZ,EAAAQ,QAAAS,cAAC6pB,EAAD,CAAmB1nB,UAAU,uCAC7BpD,EAAAQ,QAAAS,cAAC4pB,EAAD,CAAaznB,UAAU,8BAmB7B,UAAyB2nB,cACvBA,EADuBxP,SAEvBA,IAEA,OAAIwP,EAAc3H,KAAK4H,EAAUpgB,EAAA4B,gBAAgBye,OACxChnB,EAAA+B,KAAAC,EAAA,2BAEL8kB,EAAc3H,KAAK4H,EAAUpgB,EAAA4B,gBAAgBC,QACxCxI,EAAA+B,KAAAC,EAAA,qBAEF,KA5BAmlB,CAAgB7pB,GADnB,IAC2BvB,EAAAQ,QAAAS,cAAA,SAAIM,EAAMga,SAAS/C,oBAMpD,MAAMwS,EAAY1hB,EAAAC,GAAGC,OAAO,CAAC,gBAAiB,cAAe,SAyB7D,SAAS2hB,GAAUhU,OAAEA,EAAFQ,WAAUA,IAC3B,OACE3X,EAAAQ,QAAAS,cAAA,WACEjB,EAAAQ,QAAAS,cAAA,SAAIkW,EAAOK,WACVG,EAAWlR,aACFkR,EAAWjU,IAAI4F,EAAAC,GAAGuS,KAAK,CAAC,SAAU,eAAezB,KAAK,OAC5D,qHCpFV,IAAAxa,EAAAC,EAAA,KACAE,EAAAC,EAAAH,EAAA,uDASA,MAAMurB,EARNprB,EAAAH,EAAA,KAQ8BU,QAAO8qB,EAAC5qB,WAAA,CAAAC,YAAA;;;;;;sBAQc,GAAG4qB,YACrDvrB,EAAAQ,QAAAS,cAAA,OAAKmC,UAAU,yBACbpD,EAAAQ,QAAAS,cAAA,UACEjB,EAAAQ,QAAAS,cAACpB,EAAAoC,MAAD,CAAAC,GAAA,gDAEFlC,EAAAQ,QAAAS,cAAA,QAAMmC,UAAU,oDAChBpD,EAAAQ,QAAAS,cAAA,QAAMmC,UAAU,gCACdpD,EAAAQ,QAAAS,cAACoqB,EAAD,CAAuBd,YAAagB,EAAOpf,SACxCof,EAAOpf,kHC1BhBrM,EAAA,MAEA,MAAAC,EAAAD,EAAA,KACAD,KAAAC,EAAA,gCAEAmN,EAAAnN,EAAA,KACAO,EAAAP,EAAA,IACA8K,EAAA9K,EAAA,KACAwJ,EAAAxJ,EAAA,KACAmE,EAAAnE,EAAA,IAcA,MAAM0rB,EAA6C,EACjD1gB,aACA2gB,cACAtkB,WACA4O,aACAuI,cAEAze,EAAAW,QAAAS,cAAClB,EAAA+B,SAAD,KACG,IACCjC,EAAAW,QAAAS,cAACgM,EAAAgV,mBAAD,CACEC,SAAUpX,EAAW2gB,cAAgBA,EACrCzV,aAAcD,EACd1T,QAAS,KACPyI,EAAW4gB,eAAeD,GAC1BtkB,EAAS2D,IAEX9I,6BAA4BypB,IAC5BE,oBAAmB7gB,EAAW2gB,cAAgBA,GAE7CnN,kBAMqC,GAAGnX,cAC/CtH,EAAAW,QAAAS,cAACZ,EAAAa,SAAD,CACEoM,SAAS,EACTnM,OAAQ,EAAGI,WACT1B,EAAAW,QAAAS,cAAA,OAAKmC,UAAU,iBACbvD,EAAAW,QAAAS,cAACuqB,EAAD,CACE1gB,WAAYvJ,EACZkqB,YAAa7gB,EAAAghB,iBAAiBC,UAC9B1kB,SAAUA,GAAYmC,EAAAC,GAAGuiB,UAEzBjsB,EAAAW,QAAAS,cAAA,QAAMmC,UAAU,uBACfa,EAAA+B,KAAAC,EAAA,qBAA0B0H,qBAE7B9N,EAAAW,QAAAS,cAACuqB,EAAD,CACE1gB,WAAYvJ,EACZkqB,YAAa7gB,EAAAghB,iBAAiBG,OAC9B5kB,SAAUA,GAAYmC,EAAAC,GAAGuiB,SACzB/V,WAAYxU,EAAMyqB,gBAElBnsB,EAAAW,QAAAS,cAAA,QAAMmC,UAAU,wBACfa,EAAA+B,KAAAC,EAAA,gBAAqB0H,iICpEhC7N,EAAA,MAEA,IAAAgE,EAAAhE,EAAA,GACA8C,EAAA9C,EAAA,KACAD,ySAAAkE,CAAAjE,EAAA,IACAuK,EAAAvK,EAAA,KACAunB,EAAAvnB,EAAA,KAEAO,EAAAP,EAAA,IAEAmsB,EAAAnsB,EAAA,KACAosB,EAAApsB,EAAA,MACAqsB,EAAArsB,EAAA,MACAssB,EAAAtsB,EAAA,MACAusB,EAAAvsB,EAAA,6RAM6C,GAAG2Y,gBAC9C,MAAM6T,SAAEA,EAAF/qB,MAAYA,EAAZwR,SAAmBA,IAAa,EAAA1S,EAAAwC,YAChC6H,KAAEA,IAAS,EAAAL,EAAA0E,UAAiCqd,EAAAnW,yBAE5CrJ,GAAW,EAAA/M,EAAA8E,aACf,IAAW4F,OAAA,4BACLwI,EAAS9D,UACX1N,EAAMgrB,UAAUxZ,EAAS9D,gBAErB1N,EAAMirB,sBACZ/T,MAEF,CAACA,IAOH,OAJA,EAAA7V,EAAAwT,eAAc,KACZ,EAAAtS,EAAA2oB,MAAK,IAAMH,EAASI,QAAS3Z,EAAS4Z,wBAGjC,EAAA/pB,EAAAE,aAAY,IACjBjD,EAAAW,QAAAS,cAAApB,EAAAW,QAAAuE,SAAA,KACElF,EAAAW,QAAAS,cAACorB,EAAAO,mBAAD,CACEzW,gBAAiBzL,EAAOA,EAAKyL,gBAAgB0W,eAAiB,OAE/D9Z,EAAS+Z,OACRjtB,EAAAW,QAAAS,cAAComB,EAAA0F,OAAD,CACEtE,SAAU1V,EAAS+Z,OACnBE,kBAAkB,EAClBC,UAAW,EAAGH,aACZ/Z,EAASwD,kBAAiB,EAAA0V,EAAAiB,aAAYJ,OAGxC,KACJjtB,EAAAW,QAAAS,cAAA,OAAKmC,UAAU,0BACbvD,EAAAW,QAAAS,cAACirB,EAAAiB,aAAD,OAEFttB,EAAAW,QAAAS,cAAA,OAAKmC,UAAU,yBACbvD,EAAAW,QAAAS,cAACkrB,EAAAtW,cAAD,CACEC,QAAS/C,EAASqa,kBAClB/qB,QAASuK,EACTmJ,WAAY,KACNhD,EAAS9D,UACX1N,EAAM8rB,iBAAiBta,EAAS9D,sHC9D9CnP,EAAA,MAEA,MAAAD,KAAAC,EAAA,sCAEgC,EAAGwe,cACjCze,EAAAW,QAAAS,cAAA,OAAKmC,UAAU,kBACbvD,EAAAW,QAAAS,cAAA,OAAKmC,UAAU,wBACfvD,EAAAW,QAAAS,cAAA,OAAKmC,UAAU,0BAA0Bkb,uHCP7C,IAAAxa,EAAAhE,EAAA,GACA8C,EAAA9C,EAAA,kBAW4C,GAAG4D,MAAKqT,WAClD,EAAAnU,EAAAwT,eACE,KACE,EAAAtS,EAAAwpB,SAAQ,KACF5pB,EAAI6pB,SAAWxW,GACjBrT,EAAI8pB,cAAczW,KAGxB,CAACA,IAEI,4GCtBTjX,EAAA,MAEA,MAAAD,KAAAC,EAAA,gCACAuK,EAAAvK,EAAA,KAGA2tB,EAAA3tB,EAAA,KACA4tB,EAAA5tB,EAAA,MACA6tB,EAAA7tB,EAAA,MACA8tB,EAAA9tB,EAAA,KACA+tB,EAAA/tB,EAAA,MACAguB,EAAAhuB,EAAA,gBAM0C,GAAG8B,cAC3C,MAAM8I,KAAEA,EAAFqjB,QAAQA,IAAY,EAAA1jB,EAAA0E,UACxB6e,EAAAI,cACA,CAAE9e,SAAS,EAAO5N,MAAOM,EAASD,UAAW,CAAEC,QAASA,KAK1D,OAFA,EAAAksB,EAAAG,gBAAeF,GAGbluB,EAAAW,QAAAS,cAAApB,EAAAW,QAAAuE,SAAA,KACElF,EAAAW,QAAAS,cAACwsB,EAAAS,eAAD,MACAruB,EAAAW,QAAAS,cAAC4sB,EAAAM,gBAAD,MACEzjB,GAASA,EAAKnJ,OAAmC,IAA1BmJ,EAAKnJ,MAAMQ,WAGlClC,EAAAW,QAAAS,cAACysB,EAAAU,aAAD,CAAc7sB,MAAOmJ,EAAKnJ,QAF1B1B,EAAAW,QAAAS,cAAC0sB,EAAAU,YAAD,oHC9BR,MAAAxuB,EAAAC,EAAA,KACAE,KAAAF,EAAA,gCACAwa,EAAAxa,EAAA,KACAI,EAAAJ,EAAA,KAEAM,EAAAN,EAAA,KACAO,EAAAP,EAAA,IACA2C,EAAA3C,EAAA,KAEA2b,EAAA3b,EAAA,KACA4b,EAAA5b,EAAA,KAEA,MAAM6b,GAAY,EAAAlZ,EAAAE,YAGhB8Y,EAAA6S,0CAEsC,MACtC,MAAQ/sB,MAAOuJ,IAAe,EAAAzK,EAAAwC,WAC9B,OACE7C,EAAAQ,QAAAS,cAACqZ,EAAAuB,MAAD,CACEC,KAAK,uBACL3a,OAAQ,EAAG4a,QAAOhR,aAChB/K,EAAAQ,QAAAS,cAAC0a,EAAD,CACEha,UAAW,CAAEqd,SAAUjD,EAAMC,OAAOgD,UACpCnd,eAAe,EACfoa,YAAa,IACXjc,EAAAQ,QAAAS,cAACf,EAAAW,MAAD,CAAOsB,MAAM,WACXnC,EAAAQ,QAAAS,cAACpB,EAAAoC,MAAD,CAAAC,GAAA,qDAGJf,OAAQ,CAACuJ,GAAQoE,aACf9O,EAAAQ,QAAAS,cAACb,EAAAwN,OAAD,KACG4R,GACCxf,EAAAQ,QAAAS,cAACya,EAAAQ,UAAD,CACE/E,OAAQzM,EAAKyM,OACbsB,UAAWd,GACL6H,GACF1U,EAAW2U,oBACT1D,EAAMC,OAAOgD,SACbrH,GAGK4W,QAAQC,WAEV1jB,EAAW4U,cAChB3D,EAAMC,OAAOgD,SACbrH,GAGJ0E,QAAS,IAAMtR,EAAQuR,SACvBC,UAAWzN,iHCnD7B,MAAAjP,EAAAC,EAAA,KACAgE,EAAAhE,EAAA,GACAE,KAAAF,EAAA,gCACAI,EAAAJ,EAAA,KAEAA,EAAA,KAGA,IAAA2uB,EAAA3uB,EAAA,MACA4uB,EAAA5uB,EAAA,2RAU4C,GAC1CqX,SACAgF,mBAAmB,GACnB1D,YACA4D,UACAE,gBAEA,MAAMnF,EAAYtT,EAAAS,WAAWC,MAAU2X,GAevC,OACEnc,EAAAQ,QAAAS,cAACf,EAAA6C,MAAD,CACEC,QAAQ,EACRE,OAAQmZ,EACRjZ,UAAU,mBACV0O,WAAW,EACXC,SAAS,SACTC,MAAM,GAENhS,EAAAQ,QAAAS,cAACf,EAAAmD,YAAD,CAAaH,OAAQmZ,EAAS/Y,IAAKpD,EAAAqD,UAAWH,UAAU,iBACtDpD,EAAAQ,QAAAS,cAAA,YACEjB,EAAAQ,QAAAS,cAACpB,EAAAoC,MAAD,CAAAC,GAAA,oCAGJlC,EAAAQ,QAAAS,cAACf,EAAAsD,UAAD,CAAWJ,UAAU,eACnBpD,EAAAQ,QAAAS,cAAA,OAAKmC,UAAU,wBACZmZ,IAAcpF,EAAS,KACtBnX,EAAAQ,QAAAS,cAAAjB,EAAAQ,QAAAuE,SAAA,KACE/E,EAAAQ,QAAAS,cAAA,MAAImC,UAAU,2BAA2B+T,EAAOK,WAChDxX,EAAAQ,QAAAS,cAAA,QAAMmC,UAAU,iCACb+T,EAAOkI,kBAEVrf,EAAAQ,QAAAS,cAACwtB,EAAAE,eAAD,CACExX,OAAQA,EACRC,UAAWA,EACXC,SAjCYuX,IACpBxX,EAAUxS,SAASgqB,GACrBxX,EAAUvS,OAAO+pB,GAEjBxX,EAAUtS,KAAK8pB,QAkCb5uB,EAAAQ,QAAAS,cAAA,OAAKmC,UAAU,6BACbpD,EAAAQ,QAAAS,cAAA,OAAKmC,UAAU,+BACfpD,EAAAQ,QAAAS,cAACytB,EAAAG,gBAAD,CACEzX,UAAWA,EACXqB,UA/CgB,IAAWlO,OAAA,kCAC7BkO,EAAUqW,MAAMC,KAAK3X,IAC3BiF,MA8CQvG,SAAUyG,kHC5EtB,IAAA1c,EAAAI,EAAAH,EAAA,IACAI,EAAAJ,EAAA,KACAK,EAAAF,EAAAH,EAAA,oiBAQA,MAAMkvB,GAAqB,EAAA7uB,EAAAK,SACxBqI,QAAAiP,WAAEA,EAAFC,cAAcA,EAAdO,MAA6BA,GAAKzP,EAAE7H,EAAAgI,EAAAH,EAAA,wCAAe,OAAAhJ,EAAAW,QAAAS,cAACf,EAAAO,OAAWO,KACjEN,WAAA,CAAAC,YAAA;;;sBAGqBK,GAClBA,EAAM8W,WAAa9W,EAAM+M,MAAMkhB,SAAW;WACnCjuB,GACPA,EAAM8W,WAAa9W,EAAM+M,MAAMmhB,aAAe;;oBAE9B,EAAGnhB,WAAYA,EAAMohB;;WAE9BnuB,GAASA,EAAMsX;;;;;;;;;;;iBAaqBzP,SAAAiP,WAC7CA,EAD6CC,cAE7CA,EAF6CqX,SAG7CA,EAH6C9Q,SAI7CA,GAAQzV,EACRsP,EAAAnP,EAAAH,EAAA,sDAEA,OACEhJ,EAAAW,QAAAS,cAAC+tB,EAAD9pB,EAAA,CACEsI,UAAWuK,IAAkBD,EAC7BA,WAAYA,GACRK,GAEHmG,gHChDP,MAAAze,KAAAC,EAAA,gCACAK,ySAAA4D,CAAAjE,EAAA,KAgBA,MAAMuvB,EAAuBlvB,EAAAK,QAAO4D,IAAG1D,WAAA,CAAAC,YAAA;;;;;;;;;;IAcvC,UAAwBwB,MAAEA,EAAF2T,QAASA,IAC/B,MAAMwZ,EAAWxZ,EAAU3T,EAAQ,UACnC,OAAOhC,EAAAovB;aACID;wBACWA;;IAIxB,UAAuBxZ,QAAEA,IACvB,OAAOA,EACH3V,EAAAovB;;;;;;;QAQApvB,EAAAovB;;;EAKN,MAAMC,EAAqBrvB,EAAAK,QAAO4T,KAAI1T,WAAA,CAAAC,YAAA;;;;;mBAOW,GAC/CwB,QACAuY,OACArY,UACAyT,WAAU,EACVgF,iBAGEjb,EAAAW,QAAAS,cAACouB,EAAD,CACEltB,MAAOA,EACP2T,QAASA,EACTzT,QAASA,EACTotB,cAAe1a,GAAMA,EAAGqM,iBACxBpf,cAAa8Y,GAEbjb,EAAAW,QAAAS,cAACuuB,EAAD,CAAoB9U,KAAMA,EAAMtX,sBAAuBsX,4GCvEvD,SAAyBgV,GAC7B,MAAQnuB,MAAOuJ,IAAe,EAAAzK,EAAAwC,WAC9B,OAAO,EAAAD,EAAAwT,eAAc,KACnB,EAAAtS,EAAAuS,UACE,IAAMvL,EAAW6kB,kBACjB,KACE7kB,EAAW4W,gBAAe,GAC1BgO,QAZR,IAAA5rB,EAAAhE,EAAA,GACA8C,EAAA9C,EAAA,KAEAO,EAAAP,EAAA,6GCHA,IAAA8C,EAAA9C,EAAA,KACAD,EAAAI,EAAAH,EAAA,IAEAO,EAAAP,EAAA,IAEA8vB,EAAA3vB,EAAAH,EAAA,OACA+vB,EAAA/vB,EAAA,MACAgwB,EAAAhwB,EAAA,KAIAiwB,EAAAjwB,EAAA,wEAEsC,MACpC,MAAQyB,MAAOuJ,IAAe,EAAAzK,EAAAwC,WAC9B,OAAO,EAAAD,EAAAE,aAAY,IACjBjD,EAAAW,QAAAS,cAAC6uB,EAAAE,cAAD,CACE1uB,MAAOwJ,EAAWmE,SAClBtN,UAAW,CACTsN,SAAUnE,EAAWmE,UAEvB9N,OAAQ,EAAG8uB,oBACTpwB,EAAAW,QAAAS,cAAApB,EAAAW,QAAAuE,SAAA,KACElF,EAAAW,QAAAS,cAAC8uB,EAAAG,gBAAD,MACArwB,EAAAW,QAAAS,cAAC2uB,EAAApvB,QAAD,CAAmB8W,WAAY2Y,IAC/BpwB,EAAAW,QAAAS,cAAC6uB,EAAAK,0BAAD,CACExuB,UAAW,CAAEC,QAASkJ,EAAWlJ,SACjCC,eAAe,EACfV,OAAQ,EAAGI,UAAWuN,aACpBjP,EAAAW,QAAAS,cAAC4uB,EAAAO,SAAD,CACE9Y,WAAY2Y,EACZtS,UAAW7S,EAAW1J,KACtB0c,OAYhB,SAAyB9E,GACvB,OAAKA,EAGEA,EAAMqX,OAAO,CAAC5lB,EAAQwO,KAC3B,MAAM+F,EAAW/F,EAAK9B,OAAOjV,GAK7B,OAJKuI,EAAOuU,KACVvU,EAAOuU,GAAY,GAErBvU,EAAOuU,IAAa,EACbvU,GACN,IATM,GAda6lB,CAAgB/uB,GAASA,EAAMyX,OACvC0E,eAAgBnc,EAAQA,EAAMyX,MAAMvS,OAAS,EAC7CgX,aAAc9V,QAAQpG,IAAUuN","file":"static/js/1.faeee22e.chunk.js","sourcesContent":["import { Trans } from '@lingui/react'\nimport { Observer } from 'mobx-react'\nimport React from 'react'\nimport { Alert, Button } from 'reactstrap'\nimport styled from 'styled-components'\n\nimport { mediaDesktop, mediaMobile } from '../../common/Responsive'\nimport { WithRoot } from '../../common/WithRoot'\nimport { QueryOrderForm } from './OrderFormView.graphql'\n\ninterface IProps {}\n\nconst NoticeButton = styled(Button)`\n  font-size: 0.9rem;\n  margin: 0.2rem 1rem;\n  padding: 0.5em 1rem;\n`\n\nconst StorageNotice = styled(Alert)`\n  width: 100%;\n  z-index: 5;\n  ${mediaDesktop`\n    font-size: 0.9rem;\n    position: sticky;\n    bottom: 0;\n  `};\n  ${mediaMobile`\n    position: fixed;\n    top: 5rem;\n    font-size: 0.8rem;\n    `};\n  padding: 0.5rem 1rem;\n  background-color: #d4eddadc;\n`\n\nexport const OrderFormStorageNotice: React.SFC<IProps> = props => (\n  <WithRoot\n    render={root => (\n      <QueryOrderForm\n        skip={!root.order.hasOrder || root.user.rememberForm !== null}\n        variables={{ orderId: root.order.orderId! }}\n        renderLoading={() => null}\n        render={({ order }) => (\n          <Observer>\n            {() =>\n              order.countWares > 0 && root.user.rememberForm === null ? (\n                <StorageNotice data-testid=\"orderFormStorageNotice\">\n                  <p>\n                    <Trans>\n                      This app is using secure storage for keeping filled form\n                      data. It's not cookies, these are stored in your browser\n                      only.\n                    </Trans>\n                  </p>\n\n                  <NoticeButton\n                    color=\"success\"\n                    size=\"sm\"\n                    onClick={root.user.setFormRememberYes}\n                    data-testid=\"orderFormStorageNotice__Yes\"\n                  >\n                    <Trans>Always remember</Trans>\n                  </NoticeButton>\n                  <NoticeButton\n                    color=\"secondary\"\n                    size=\"sm\"\n                    onClick={root.user.setFormRememberNo}\n                    data-testid=\"orderFormStorageNotice__No\"\n                  >\n                    <Trans>Do not store</Trans>\n                  </NoticeButton>\n                </StorageNotice>\n              ) : null\n            }\n          </Observer>\n        )}\n      />\n    )}\n  />\n)\n","import gql from 'graphql-tag'\n\nimport { buildQuery } from '../../graph'\nimport { GOrderForm } from '../../graph/types'\n\nexport const OrderFormQuery = gql`\n  query GOrderForm($orderId: ID!) {\n    order(id: $orderId) {\n      id\n      countWares\n    }\n  }\n`\n\nexport const QueryOrderForm = buildQuery<\n  GOrderForm.Query,\n  GOrderForm.Variables\n>(OrderFormQuery)\n","import '../../common/Modal.css'\n\nimport { Trans } from '@lingui/react'\nimport { useObserver } from 'mobx-react-lite'\nimport React from 'react'\nimport { Button, Container, Modal, ModalBody, ModalHeader } from 'reactstrap'\n\nimport { useRoot } from '../../common/WithRoot'\n\nexport const OrderErrorModal: React.FC = () => {\n  const { order } = useRoot()\n  return useObserver(() => (\n    <Modal\n      isOpen={order.hasErrors}\n      toggle={order.clearErrors}\n      className=\"modal__container\"\n    >\n      <ModalHeader\n        toggle={order.clearErrors}\n        tag={Container}\n        className=\"modal__header\"\n      >\n        <span>\n          <Trans>Order can not be completed</Trans>\n        </span>\n      </ModalHeader>\n      <ModalBody className=\"modal__body\">\n        <div className=\"modal__body__content\">\n          {order.hasErrors &&\n            order.submitErrors!.map((error, idx) => (\n              <div key={idx}>{error}</div>\n            ))}\n        </div>\n        <div className=\"modal__body__button__line\">\n          <div className=\"modal__body__button__strip\" />\n          <Button\n            className=\"modal__body__button\"\n            color=\"primary\"\n            onClick={order.clearErrors}\n          >\n            <Trans>I understand</Trans>\n          </Button>\n          />\n        </div>\n      </ModalBody>\n    </Modal>\n  ))\n}\n","import { observable } from 'mobx'\nimport { useObserver } from 'mobx-react-lite'\nimport React, { useCallback, useRef } from 'react'\nimport { Button, Collapse } from 'reactstrap'\nimport styled from 'styled-components'\n\nimport { FormInputCheckbox } from '../../common/FormInputCheckbox'\nimport { useRoot } from '../../common/WithRoot'\nimport { i18n } from '../../i18n'\nimport { TAgreement } from '../../models/OrderModel'\n\nconst ButtonStyled = styled(Button)`\n  padding: 0 0.5rem;\n  font-size: 0.8rem;\n  color: darkgray;\n`\n\nconst GdprAgreementStyled = styled.div`\n  font-size: 0.8rem !important;\n  color: darkgray;\n  margin: 0.5rem 0 0.5rem 0;\n  & .row {\n    margin: 0;\n  }\n`\n\nconst hideConfirmed = (agreement: TAgreement) => {\n  if (agreement.isConfirmed) {\n    // it's necessary to hide confirmed agreements like this\n    // because react-form already has validation errors stored\n    // for mandatory ones and is unable to forget it by not rendering field\n    return { style: { display: 'none' } }\n  }\n  return {}\n}\n\nexport const OrderAgreements: React.FC = () => {\n  const descOpen = useRef(observable.array<ID>([])).current\n  const toggleId = useCallback(\n    (id: ID) => () => {\n      if (descOpen.includes(id)) {\n        descOpen.remove(id)\n      } else {\n        descOpen.push(id)\n      }\n    },\n    [],\n  )\n  const { order } = useRoot()\n  return useObserver(() => (\n    <>\n      {order.agreements.map((agreement, idx) => (\n        <div key={agreement.id} {...hideConfirmed(agreement)}>\n          <FormInputCheckbox\n            field={['agreements', idx, 'isConfirmed']}\n            validate={checked =>\n              agreement.isMandatory && !(agreement.isConfirmed || checked)\n                ? 'Agreement is mandatory'\n                : null\n            }\n            data-testid={`orderAgreement__Check__${agreement.id}`}\n          >\n            <span dangerouslySetInnerHTML={{ __html: agreement.name }} />\n            {agreement.isMandatory && ' * '}\n            {agreement.description && (\n              <>\n                <ButtonStyled\n                  color=\"link\"\n                  onClick={toggleId(agreement.id)}\n                  data-testid={`orderAgreement__MoreButton__${agreement.id}`}\n                >\n                  {descOpen.includes(agreement.id)\n                    ? i18n.t`Less`.toLocaleLowerCase()\n                    : i18n.t`More...`.toLocaleLowerCase()}\n                </ButtonStyled>\n                <Collapse isOpen={descOpen.includes(agreement.id)}>\n                  <GdprAgreementStyled\n                    data-testid={`orderAgreement__Info__${agreement.id}`}\n                    dangerouslySetInnerHTML={{\n                      __html: agreement.description,\n                    }}\n                  />\n                </Collapse>\n              </>\n            )}\n          </FormInputCheckbox>\n        </div>\n      ))}\n    </>\n  ))\n}\n","import React from 'react'\n\nimport { SecondaryButton } from '../../common/Buttons'\nimport { PaymentGateEnum } from '../../graph/types'\nimport { IOrderFormState } from './OrderFormSetup'\nimport { MAX_LENGTH } from './OrderNoteInput'\n\ninterface IProps {\n  onFill(values: IOrderFormState): void\n}\n\nexport const OrderFormAutoFill: React.SFC<IProps> = ({ onFill }) =>\n  process.env.REACT_APP_STAGE !== 'prod' ? (\n    <SecondaryButton\n      style={{ marginBottom: '0.5rem' }}\n      onClick={() => {\n        const faker: Faker.FakerStatic = require('faker')\n        faker.locale = 'cz'\n        onFill({\n          firstname: faker.name.firstName(),\n          lastname: faker.name.lastName(),\n          email: faker.internet.email(),\n          phone: faker.phone.phoneNumberFormat(0),\n          phonePrefix: '+420',\n          note: faker.lorem.sentence().slice(0, MAX_LENGTH - 1),\n          payment: PaymentGateEnum.Gopay,\n          agreements: [],\n        })\n      }}\n    >\n      Autofill form [DEV ONLY]\n    </SecondaryButton>\n  ) : null\n","import { Plural, Trans } from '@lingui/react'\nimport React from 'react'\nimport { Field } from 'react-form'\nimport { FormFeedback, FormGroup, FormText, Input } from 'reactstrap'\n\nimport { i18n } from '../../i18n'\n\nexport const MAX_LENGTH = 50\nconst isTooLong = value => value && value.trim().length > MAX_LENGTH\n\nconst OrderNoteInputValidator = value =>\n  isTooLong(value) ? i18n.t`Note is too long` : null\n\nexport const OrderNoteInput: React.SFC = () => {\n  const ingredientsDescription = i18n.t`eg. ingredients change, company...`\n  return (\n    <Field\n      field=\"note\"\n      validate={OrderNoteInputValidator}\n      render={fieldApi => (\n        <FormGroup>\n          <Input\n            type=\"textarea\"\n            placeholder={i18n.t`Note`}\n            title={ingredientsDescription}\n            value={fieldApi.value}\n            onChange={e => fieldApi.setValue(e.target.value)}\n            onBlur={() => fieldApi.setTouched(true)}\n            valid={!fieldApi.error}\n            invalid={Boolean(fieldApi.error)}\n            data-testid=\"orderNoteInput\"\n          />\n          <FormText>{ingredientsDescription}</FormText>\n          {isTooLong(fieldApi.value) ? (\n            <FormFeedback>\n              <Trans>\n                Maximum length is{' '}\n                <Plural value={MAX_LENGTH} other=\"# characters\" />. Typed{' '}\n                <Plural\n                  value={fieldApi.value.length}\n                  one=\"# char\"\n                  other=\"# chars\"\n                />\n              </Trans>\n            </FormFeedback>\n          ) : null}\n        </FormGroup>\n      )}\n    />\n  )\n}\n","import React from 'react'\n\nimport { OrderEmailInput } from './OrderEmailInput'\nimport { OrderNameInput } from './OrderNameInput'\nimport { OrderNoteInput } from './OrderNoteInput'\nimport { OrderPhoneInput } from './OrderPhoneInput'\nimport OrderPromoInput from './OrderPromoInput'\nimport { OrderTimeButtons } from './OrderTimeButtons'\n\nexport const OrderFormInputs = () => (\n  <>\n    <OrderNameInput />\n    <OrderPhoneInput />\n    <OrderEmailInput />\n    <OrderNoteInput />\n    <OrderTimeButtons />\n    <OrderPromoInput />\n  </>\n)\n","import { ApolloError } from 'apollo-client'\nimport { DocumentNode, GraphQLError } from 'graphql'\nimport { useCallback } from 'react'\nimport { MutationHookOptions, useMutation } from 'react-apollo-hooks'\n\nimport { RM } from '../helpers/ramda'\nimport { reportError } from '../helpers/sentry'\nimport { i18n } from '../i18n'\n\ninterface IGuardedMutationOptions<TData, TVariables>\n  extends MutationHookOptions<TData, TVariables> {\n  onUserErrors?(errors: string[]): void\n}\n\nexport function useGuardedMutation<TData, TVariables>(\n  mutation: DocumentNode,\n  { onUserErrors, ...options }: IGuardedMutationOptions<TData, TVariables> = {},\n) {\n  const defaultMessage = i18n.t`Unexpected error occured while sending a request. Our team was notified about the issue.`\n\n  const handleGraphQLErrors = useCallback(\n    (errors: ReadonlyArray<GraphQLError>) => {\n      const userErrors = errors.filter(\n        RM.pathEq(['extensions', 'showToUser'], true),\n      )\n      if (onUserErrors) {\n        if (userErrors.length === 0) {\n          onUserErrors([defaultMessage])\n        } else {\n          onUserErrors(userErrors.map(RM.prop('message')))\n        }\n      }\n    },\n    [],\n  )\n\n  const handleError = useCallback((err: Error) => {\n    if (isApolloError(err)) {\n      if (err.networkError) {\n        window.alert(\n          i18n.t`Communication with server has failed. Please retry the operation in a moment again.`,\n        )\n        return\n      } else if (err.graphQLErrors) {\n        handleGraphQLErrors(err.graphQLErrors)\n        return\n      }\n    }\n    reportError(err)\n  }, [])\n\n  const mutate = useMutation(mutation, options)\n  return async (variables: TVariables) => {\n    try {\n      const result = await mutate({ variables })\n      if (result.errors && result.errors.length) {\n        handleGraphQLErrors(result.errors)\n        return null\n      }\n      if (!result.data) {\n        return null\n      }\n      return result.data as TData\n    } catch (err) {\n      handleError(err)\n      return null\n    }\n  }\n}\n\nfunction isApolloError(err: Error): err is ApolloError {\n  return err.hasOwnProperty('graphQLErrors')\n}\n","import { useDebounceCallback, useRouterContext } from '@speedlo/hooks'\nimport React, { useCallback, useEffect } from 'react'\nimport { Form, IFormApi, IFormState } from 'react-form'\nimport { Form as StrapForm } from 'reactstrap'\n\nimport { useRoot } from '../../common/WithRoot'\nimport { PaymentGateEnum } from '../../graph/types'\nimport { logOrder } from '../../helpers/logger'\nimport { RM } from '../../helpers/ramda'\nimport { reportError } from '../../helpers/sentry'\nimport { TAgreement, TOrderModel } from '../../models/OrderModel'\n\ninterface IProps {\n  render(formApi: IFormApi & IFormState<IOrderFormState>): ReactNode\n}\n\nexport interface IOrderFormState {\n  firstname: string\n  lastname: string\n  email: string\n  phonePrefix: string\n  phone: string\n  note: string\n  payment: PaymentGateEnum\n  agreements: TAgreement[]\n}\n\nfunction getFormValues(orderModel: TOrderModel): IOrderFormState {\n  return {\n    firstname: orderModel.firstname,\n    lastname: orderModel.lastname,\n    email: orderModel.email,\n    phone: orderModel.phone,\n    phonePrefix: orderModel.phonePrefix || orderModel.defaultPhonePrefix,\n    note: orderModel.note,\n    payment: PaymentGateEnum.Gopay,\n    agreements: [],\n  }\n}\n\nconst debounceInterval = 1500\n\nexport const OrderFormSetup: React.FC<IProps> = ({ render }) => {\n  const { order: orderModel } = useRoot()\n  const { history } = useRouterContext()\n\n  useEffect(() => {\n    if (!orderModel.isVamInitialized) {\n      orderModel.initVam()\n    }\n  }, [])\n\n  const updateVam = useCallback(\n    async (formState: IFormState<IOrderFormState>, formApi: IFormApi) => {\n      try {\n        await orderModel.updateVam(formState.values)\n        formApi.setValue(\n          'agreements',\n          mergeFormAgreements(\n            formState.values.agreements,\n            orderModel.agreements,\n          ),\n        )\n      } catch (err) {\n        reportError(err, {\n          formState: formState.values,\n        })\n      }\n    },\n    [],\n  )\n\n  const onChange = useDebounceCallback(updateVam, debounceInterval)\n\n  return (\n    <Form\n      defaultValues={getFormValues(orderModel)}\n      validateOnMount={true}\n      onChange={onChange}\n      onSubmit={async (formState: IOrderFormState) => {\n        try {\n          await orderModel.submitOrder(formState)\n          history.replace(`/finish`)\n        } catch (e) {\n          logOrder(e)\n        }\n      }}\n    >\n      {formApi => (\n        <StrapForm onSubmit={formApi.submitForm}>{render(formApi)}</StrapForm>\n      )}\n    </Form>\n  )\n}\n\nfunction mergeFormAgreements(\n  formValue: TAgreement[],\n  agreements: TAgreement[],\n) {\n  return agreements.map(agreement => {\n    const formAgreement = formValue.find(RM.propEq('id', agreement.id))\n    if (formAgreement) {\n      return { ...agreement, isConfirmed: formAgreement.isConfirmed }\n    }\n    return agreement\n  })\n}\n","import './OrderSubmitLine.css'\n\nimport React from 'react'\n\nimport { PrimaryButton } from '../../common/Buttons'\nimport { Desktop, Mobile } from '../../common/Responsive'\nimport SubmitSpinner from '../../common/SubmitSpinner'\nimport { WithOrder } from '../../common/WithOrder'\nimport { i18n } from '../../i18n'\n\ninterface IProps {\n  onClick(): void\n  canSubmit: boolean\n}\n\nexport const OrderSubmitLine: React.SFC<IProps> = ({\n  onClick,\n  canSubmit = false,\n}) => (\n  <WithOrder\n    observe={true}\n    render={order => (\n      <div className=\"order__form__submit__line\">\n        <div className=\"order__form__submit__line__strip\" />\n        <PrimaryButton\n          className=\"order__form__submit__line__button\"\n          color=\"primary\"\n          size=\"md\"\n          onClick={onClick}\n          disabled={!canSubmit || order.isSubmitting}\n          data-testid=\"orderSubmitButton\"\n        >\n          <Desktop>\n            {order.isSubmitting ? (\n              <SubmitSpinner />\n            ) : (\n              i18n.t`Place order`.toLocaleUpperCase()\n            )}\n          </Desktop>\n          <Mobile>{i18n.t`Place order`.toLocaleUpperCase()}</Mobile>\n        </PrimaryButton>\n      </div>\n    )}\n  />\n)\n","import React from 'react'\nimport Spinner from 'react-spinkit'\nimport { withTheme } from 'styled-components'\n\nconst SubmitSpinner = props => (\n  <Spinner name=\"three-bounce\" color={props.theme.primary} fadeIn=\"none\" />\n)\n\nexport default withTheme(SubmitSpinner)\n","import { Trans } from '@lingui/react'\nimport { useObserver } from 'mobx-react-lite'\nimport React from 'react'\nimport styled from 'styled-components'\n\nimport { AlertModal } from '../../common/AlertModal'\nimport Pacman from '../../common/Pacman'\nimport { useRoot } from '../../common/WithRoot'\n\nconst TextPadding = styled.div`\n  padding-bottom: 2rem;\n`\n\nexport const OrderGoPayModal: React.FC = () => {\n  const { order: orderModel } = useRoot()\n  return useObserver(() => (\n    <AlertModal isOpen={orderModel.isGoPayChecking} headerText=\"GoPay platba\">\n      <TextPadding>\n        <Trans>Checking your GoPay payment, please wait...</Trans>\n      </TextPadding>\n      <Pacman noMargin={true} />\n    </AlertModal>\n  ))\n}\n","import '../../common/Modal.css'\n\nimport { Trans } from '@lingui/react'\nimport { isoDate } from '@speedlo/tools'\nimport { addMinutes, isAfter } from 'date-fns'\nimport { useObserver } from 'mobx-react-lite'\nimport React, { useRef } from 'react'\nimport { useQuery } from 'react-apollo-hooks'\nimport { Container, Modal, ModalBody, ModalHeader } from 'reactstrap'\n\nimport { PrimaryButton } from '../../common/Buttons'\nimport { useRoot } from '../../common/WithRoot'\nimport { GOrderTimePicker, MUpdateOrderDeliveryTime } from '../../graph/types'\nimport { RM } from '../../helpers/ramda'\nimport { useGuardedMutation } from '../../hooks/useGuardedMutation'\nimport { i18n } from '../../i18n'\nimport { TimePicker } from '../timePicker/TimePicker'\nimport { OrderTimePickerQuery, UpdateOrderDeliveryTimeMutation } from './OrderTimePicker.graphql'\n\nexport const OrderTimePicker: React.FC = () => {\n  const { order } = useRoot()\n\n  const { data, loading } = useQuery<\n    GOrderTimePicker.Query,\n    GOrderTimePicker.Variables\n  >(OrderTimePickerQuery, {\n    variables: { branchId: order.branchId! },\n    suspend: false,\n  })\n\n  const updateOrder = useGuardedMutation<\n    {},\n    MUpdateOrderDeliveryTime.Variables\n  >(UpdateOrderDeliveryTimeMutation, { onUserErrors: order.submitFailed })\n\n  const selectedTime = useRef<Date | undefined>(order.deliverAt)\n  const onConfirmAndClose = () => {\n    const time = selectedTime.current\n    updateOrder({\n      orderId: order.orderId!,\n      deliverAt: time && isoDate(time),\n    })\n    order.setDeliverAt(time)\n    order.closeTimePicker()\n  }\n\n  const getStartTime = () => {\n    const { companyBranch } = data!\n    const openAt =\n      companyBranch.isOpen || !companyBranch.willOpenAt\n        ? new Date()\n        : new Date(companyBranch.willOpenAt)\n    return openAt\n  }\n\n  const getEndTime = () => {\n    const { companyBranch } = data!\n    if (companyBranch.isOpen && companyBranch.willCloseAt) {\n      return new Date(companyBranch.willCloseAt)\n    }\n    const nextBusinessHour = companyBranch.businessHours.find(\n      RM.propEq('closed', false),\n    )\n    return nextBusinessHour ? new Date(nextBusinessHour.closeAt) : null\n  }\n\n  const getFilterIntervals = (): Interval[] => {\n    const { companyBranch } = data!\n    return companyBranch.businessHours\n      .filter(RM.propEq('closed', true))\n      .map(bhour => ({\n        start: new Date(bhour.openAt),\n        end: new Date(bhour.closeAt),\n      }))\n  }\n\n  const getMinuteOffset = () => {\n    const { defaultDeliveryTime, defaultPickupTime } = data!.companyBranch\n\n    if (order.usingDeliveryOrderMethod) {\n      return defaultDeliveryTime\n    }\n    if (order.usingPickupOrderMethod) {\n      return defaultPickupTime\n    }\n\n    return 0\n  }\n\n  const renderModalContent = () => {\n    if (loading || !data) {\n      return null\n    }\n\n    const minDate = getStartTime()\n    const maxDate = getEndTime()\n    if (maxDate === null || isAfter(minDate, maxDate)) {\n      return (\n        <Trans>\n          It's not possible to pick a specific order time at this moment.\n        </Trans>\n      )\n    }\n\n    const minuteOffset = getMinuteOffset()\n\n    return (\n      <TimePicker\n        minuteStep={15}\n        minDate={addMinutes(minDate, minuteOffset)}\n        maxDate={addMinutes(maxDate, minuteOffset)}\n        initialTime={selectedTime.current}\n        filterIntervals={getFilterIntervals()}\n        onStepChange={time => (selectedTime.current = time)}\n      />\n    )\n  }\n\n  const header = order.usingDeliveryOrderMethod\n    ? i18n.t`Deliver at what time?`\n    : i18n.t`When you will pickup the order?`\n\n  return useObserver(() => (\n    <Modal\n      isOpen={order.timePickerOpen}\n      toggle={order.closeTimePicker}\n      className=\"modal__container\"\n      autoFocus={true}\n      backdrop=\"static\"\n      fade={false}\n    >\n      <ModalHeader\n        toggle={order.closeTimePicker}\n        tag={Container}\n        className=\"modal__header\"\n      >\n        <span>{header}</span>\n      </ModalHeader>\n      <ModalBody className=\"modal__body\">\n        <div className=\"modal__body__content\">{renderModalContent()}</div>\n        <div className=\"modal__body__button__line\">\n          <div className=\"modal__body__button__strip\" />\n          <PrimaryButton\n            onClick={onConfirmAndClose}\n            size=\"md\"\n            className=\"modal__body__button\"\n          >\n            {i18n.t`Confirm time`.toLocaleUpperCase()}\n          </PrimaryButton>\n        </div>\n      </ModalBody>\n    </Modal>\n  ))\n}\n","module.exports = __webpack_public_path__ + \"static/media/logo-commerce-01.6d4e5108.svg\";","module.exports = __webpack_public_path__ + \"static/media/logo-commerce-02.8afb6c6f.svg\";","module.exports = __webpack_public_path__ + \"static/media/logo-doveze.e13c0122.svg\";","module.exports = __webpack_public_path__ + \"static/media/logo-gopay.48aa4030.png\";","import gql from 'graphql-tag'\n\nimport { buildQuery } from '../../graph'\nimport { CartItemFragment, PriceFragment } from '../../graph/fragments.graphql'\nimport { GFinishView } from '../../graph/types'\n\nexport const FinishViewOrderFragment = gql`\n  fragment GFinishViewOrder on Order {\n    id\n    items {\n      ...GCartItem\n      sideDishes {\n        ...GCartItem\n      }\n    }\n    totalSum {\n      ...GPrice\n    }\n    orderPayments {\n      paymentMethod {\n        paymentType {\n          enum\n        }\n      }\n    }\n  }\n  ${CartItemFragment}\n  ${PriceFragment}\n`\n\nexport const FinishViewQuery = gql`\n  query GFinishView($orderId: ID!, $branchId: ID!) {\n    order(id: $orderId) {\n      ...GFinishViewOrder\n    }\n    companyBranch(id: $branchId) {\n      id\n      phone\n      company {\n        id\n      }\n    }\n    androidApp: mobileApplicationSettings(\n      companyBranch: $branchId\n      platform: ANDROID\n    ) {\n      url\n    }\n    iosApp: mobileApplicationSettings(companyBranch: $branchId, platform: IOS) {\n      url\n    }\n  }\n  ${FinishViewOrderFragment}\n`\n\nexport const QueryFinishView = buildQuery<\n  GFinishView.Query,\n  GFinishView.Variables\n>(FinishViewQuery)\n","import './AddressInput.css'\n\nimport { Trans } from '@lingui/react'\nimport { useObserver } from 'mobx-react-lite'\nimport React from 'react'\nimport { Alert, InputGroup } from 'reactstrap'\nimport styled from 'styled-components'\n\nimport { useRoot } from '../../common/WithRoot'\nimport { i18n } from '../../i18n'\nimport { TLocationModel } from '../../models/LocationModel'\nimport GeolocationButton from './GeolocationButton'\nimport ResolvedAddress from './ResolvedAddress'\nimport SearchInput from './SearchInput'\n\nconst AddressInputStyled = styled.div`\n  width: 90%;\n  min-width: 14rem;\n  margin: 1rem auto;\n  text-align: center;\n`\n\nconst AddressInputBoxStyled = styled.div`\n  border-radius: 1rem;\n  border: 1px solid #d4d4d4;\n  background-color: white;\n  height: 2.3rem;\n  overflow: hidden;\n  & input {\n    margin: 0.2rem 2rem 0.5rem 0.7rem;\n    background: transparent;\n    border: none;\n  }\n`\n\nexport const AddressInput: React.FC = () => {\n  const { location } = useRoot()\n  return useObserver(() => (\n    <AddressInputStyled>\n      <AddressInputBoxStyled>\n        <InputGroup size=\"sm\">\n          <ResolvedAddress\n            address={location.address || ''}\n            isVisible={location.hasAddress}\n            isResolving={location.isResolving}\n            onValidClick={location.clearAddress}\n          />\n          <SearchInput\n            inputProps={{\n              placeholder: i18n.t`Type address or choose it from map`,\n              autoComplete: 'shipping street-address',\n            }}\n            onSearch={location.withUserAddress}\n            isVisible={!location.hasAddress}\n            isSearching={location.isResolving}\n          />\n          <GeolocationButton\n            onClick={location.attemptGeolocation}\n            isVisible={location.isGeolocationAvailable && !location.isResolving}\n          />\n        </InputGroup>\n      </AddressInputBoxStyled>\n      {location.hasFinishedSearch ? renderErrorMessage(location) : null}\n    </AddressInputStyled>\n  ))\n}\n\nconst NoMouseAlert = styled(Alert)`\n  pointer-events: none;\n`\n\nfunction renderErrorMessage(location: TLocationModel) {\n  if (location.isResolved === false) {\n    return (\n      <NoMouseAlert color=\"danger\">\n        <Trans>Address was not recognized.</Trans>\n      </NoMouseAlert>\n    )\n  }\n  if (location.isStreetAddress === false) {\n    return (\n      <NoMouseAlert color=\"warning\">\n        <Trans>Please enter address with house number.</Trans>\n      </NoMouseAlert>\n    )\n  }\n  if (location.inDeliveryLocation === false) {\n    return (\n      <NoMouseAlert color=\"warning\">\n        <Trans>\n          Meal can't be delivered to your chosen address by any restaurant.\n        </Trans>\n      </NoMouseAlert>\n    )\n  }\n  return null\n}\n","import React from 'react'\nimport { InputGroupAddon } from 'reactstrap'\nimport styled from 'styled-components'\n\ninterface IProps {\n  isVisible: boolean\n  onClick(): void\n}\n\nconst Container = styled.span`\n  color: ${({ theme }) => theme.secondary};\n  cursor: pointer;\n  position: absolute;\n  right: 0.4rem;\n  top: 0.15rem;\n`\n\nexport const GeolocationButton: React.SFC<IProps> = ({\n  onClick,\n  isVisible = false,\n}) =>\n  isVisible ? (\n    <Container>\n      <InputGroupAddon addonType=\"append\" onClick={onClick}>\n        <span className=\"flaticon-gps\" />\n      </InputGroupAddon>\n    </Container>\n  ) : null\n\nexport default GeolocationButton\n","import React from 'react'\nimport Spinner from 'react-spinkit'\n\ninterface IProps {\n  address: string\n  isVisible: boolean\n  isResolving: boolean\n  onValidClick(): void\n}\n\nexport const ResolvedAddress: React.SFC<IProps> = ({\n  address,\n  isVisible,\n  isResolving,\n  onValidClick,\n}) => {\n  if (isResolving) {\n    return (\n      <div className=\"address__input__box__resolved wait\">\n        <Spinner name=\"ball-beat\" fadeIn=\"none\" />\n      </div>\n    )\n  }\n  if (!isVisible) {\n    return null\n  }\n  return (\n    <div className=\"address__input__box__resolved\" onClick={onValidClick}>\n      {address}\n    </div>\n  )\n}\n\nexport default ResolvedAddress\n","import classnames from 'classnames'\nimport debounce from 'debounce'\nimport React, { Component } from 'react'\nimport { Input } from 'reactstrap'\n\ninterface IProps {\n  onSearch(search: string): void\n  isVisible: boolean\n  isSearching: boolean\n  inputProps: Object\n}\n\ninterface IState {\n  value: string\n}\n\nclass SearchInput extends Component<IProps, IState> {\n  state = { value: '' }\n  componentDidMount() {\n    this.setFocus()\n  }\n  componentDidUpdate(nextProps: IProps) {\n    if (nextProps.isVisible !== this.props.isVisible) {\n      this.setFocus()\n    }\n  }\n  onSearch = debounce(this.props.onSearch, 2000)\n  onChange = ev => {\n    const value = ev.target.value || ''\n    this.setState({ value })\n    this.onSearch(value.trim())\n  }\n  onKeyPress = ev => {\n    if (ev.key === 'Enter') {\n      this.onSearch.clear()\n      this.props.onSearch(this.state.value.trim())\n    }\n  }\n  inputRef: Maybe<HTMLInputElement> = null\n  onInputMount = (ref: HTMLInputElement) => {\n    this.inputRef = ref\n  }\n  isVisible() {\n    return this.props.isVisible !== false\n  }\n  isSearching() {\n    return this.props.isSearching !== false\n  }\n  setFocus() {\n    if (this.isVisible() && this.inputRef !== null) {\n      this.inputRef.focus()\n    }\n  }\n  render() {\n    const { inputProps } = this.props\n    const isHidden = !this.isVisible() || this.isSearching()\n    return (\n      <Input\n        className={classnames({ address__input__hidden: isHidden })}\n        onChange={this.onChange}\n        onKeyPress={this.onKeyPress}\n        value={this.state.value}\n        innerRef={this.onInputMount}\n        autoFocus={true}\n        {...inputProps}\n      />\n    )\n  }\n}\n\nexport default SearchInput\n","import React from 'react'\n\nimport { PrimaryButton } from '../../common/Buttons'\nimport ButtonStripe from '../../common/ButtonStripe'\nimport { i18n } from '../../i18n'\n\ninterface IProps {\n  enabled: boolean\n  onClick(): void\n  onPrefetch(): void\n}\n\nexport const AddressSubmit: React.SFC<IProps> = ({\n  enabled,\n  onClick,\n  onPrefetch,\n}) => (\n  <ButtonStripe>\n    <PrimaryButton\n      color=\"primary\"\n      disabled={!enabled}\n      onClick={onClick}\n      onMouseEnter={() => enabled && onPrefetch()}\n    >\n      {i18n.t`Confirm address`.toLocaleUpperCase()}\n    </PrimaryButton>\n  </ButtonStripe>\n)\n\nexport default AddressSubmit\n","import gql from 'graphql-tag'\n\nexport const InitialMapLocationQuery = gql`\n  query GInitialLocation {\n    initialLocation: resolveLocation {\n      gpsCoordinates {\n        latitude\n        longitude\n      }\n    }\n  }\n`\n","import { useFullComputed } from '@speedlo/hooks'\nimport { reaction } from 'mobx'\nimport { useDisposable, useObserver } from 'mobx-react-lite'\nimport React from 'react'\n\nimport { useRoot } from '../../common/WithRoot'\nimport { GeoPoint } from '../../helpers/gps'\nimport { logMap } from '../../helpers/logger'\nimport { MapPanning } from './atoms/MapPanning'\n\ninterface IProps {\n  initialLocation: Maybe<GeoPoint>\n}\n\nexport const DeliveryMapPanning: React.SFC<IProps> = ({ initialLocation }) => {\n  const { location, map } = useRoot()\n\n  useDisposable(() =>\n    reaction(\n      () => map.clickPoint,\n      clickPoint => {\n        if (clickPoint) {\n          location.withUserLocation(clickPoint)\n          map.clearClickPoint()\n        }\n      },\n    ),\n  )\n\n  const panToGps = useFullComputed(\n    () => {\n      if (location.geoPoint) {\n        logMap('pan to user location', location.geoPoint)\n        return location.geoPoint\n      } else if (location.geolocationPoint) {\n        logMap('pan to geolocation', location.geolocationPoint)\n        return location.geolocationPoint\n      } else if (initialLocation) {\n        logMap('pan to initial location', initialLocation)\n        return initialLocation\n      }\n      logMap('no pan location available')\n      return\n    },\n    [initialLocation],\n  )\n\n  return useObserver(() => <MapPanning gps={panToGps.get()} map={map} />)\n}\n","import './SidedishPicker.css'\n\nimport { Observer } from 'mobx-react'\nimport React, { Fragment } from 'react'\n\nimport { GCartRecipe } from '../../graph/types'\n\nimport CategoryValidationMessage from './CategoryValidationMessage'\nimport { SidedishCheckbox } from './SidedishCheckbox'\n\ninterface IProps {\n  recipe: GCartRecipe.Fragment\n  selection: ReadonlyArray<ID>\n  onToggle(item: ID): void\n}\n\nexport const SidedishPicker: React.SFC<IProps> = ({\n  recipe,\n  selection,\n  onToggle,\n}) => (\n  <Observer>\n    {() => (\n      <div className=\"food__sidedish__picker\">\n        {recipe.categories.map(category => (\n          <Fragment key={category.id}>\n            <div className=\"food__sidedish__picker__category\">\n              {category.nameLabel}{' '}\n              <CategoryValidationMessage\n                minCount={category.minCount}\n                maxCount={category.maxCount}\n              />\n            </div>\n            {category.sideDishes.map(sidedish => (\n              <SidedishCheckbox\n                key={`${sidedish.id}-${category.id}`}\n                sidedish={sidedish}\n                isSelected={selection.includes(sidedish.id)}\n                canBeSelected={true}\n                onClick={() => onToggle(sidedish.id)}\n              />\n            ))}\n          </Fragment>\n        ))}\n      </div>\n    )}\n  </Observer>\n)\n","import React from 'react'\n\ninterface IProps {\n  minCount: number\n  maxCount: number\n}\n\nconst CategoryValidationMessage: React.SFC<IProps> = ({\n  minCount,\n  maxCount,\n}) => {\n  let message = ''\n  // if (minCount === 0) {\n  //   if (maxCount > 0) {\n  //     message = `(maximálně ${maxCount})`\n  //   }\n  // }\n  // if (maxCount === 0) {\n  //   message = `(minimálně ${minCount})`\n  // } else {\n  //   message = `(minimálně ${minCount} a maximálně ${maxCount})`\n  // }\n  return <span>{message}</span>\n}\n\nexport default CategoryValidationMessage\n","import React from 'react'\nimport { ButtonProps } from 'reactstrap'\nimport styled from 'styled-components'\n\nimport { PickerButton } from '../../common/PickerButton'\nimport { GCartRecipe } from '../../graph/types'\n\ninterface IProps extends ButtonProps {\n  sidedish: GCartRecipe.SideDishes\n  isSelected: boolean\n  canBeSelected: boolean\n}\n\nconst Name = styled.div`\n  float: left;\n  text-align: left;\n  white-space: normal;\n  max-width: 13rem;\n`\n\nconst Price = styled.div`\n  font-weight: bold;\n  float: right;\n`\n\nexport const SidedishCheckbox: React.FC<IProps> = ({\n  sidedish,\n  ...buttonProps\n}) => (\n  <PickerButton\n    size=\"xs\"\n    outline={true}\n    width=\"17.5rem\"\n    data-testid={`sidedishCheckbox__${sidedish.id}`}\n    {...buttonProps}\n  >\n    <Name>{sidedish.nameLabel}</Name>\n    <Price>{sidedish.price.formattedValue}</Price>\n  </PickerButton>\n)\n","import { observable } from 'mobx'\nimport { Observer } from 'mobx-react'\nimport React from 'react'\n\nimport { PrimaryButton } from '../../common/Buttons'\nimport { i18n } from '../../i18n'\n\ninterface IProps {\n  selection: ID[]\n  onConfirm(): Promise<void>\n  enabled: boolean\n}\n\nexport const CartOrderButton: React.SFC<IProps> = ({\n  selection,\n  onConfirm,\n}) => {\n  const isConfirming = observable.box(false)\n\n  return (\n    <Observer>\n      {() => (\n        <PrimaryButton\n          className=\"modal__body__button\"\n          disabled={isConfirming.get()} /*!cartFood.isValid*/\n          data-testid=\"cartOrderButton\"\n          onClick={async () => {\n            isConfirming.set(true)\n            await onConfirm()\n            isConfirming.set(false)\n          }}\n        >\n          {i18n\n            .plural({\n              value: selection.length,\n              0: 'Order without sidedish',\n              one: 'Order with this sidedish',\n              other: 'Order with # sidedishes',\n            })\n            .toLocaleUpperCase()}\n        </PrimaryButton>\n      )}\n    </Observer>\n  )\n}\n","import { useObserver } from 'mobx-react-lite'\nimport React from 'react'\n\nimport { useRoot } from '../../common/WithRoot'\nimport { GCartView } from '../../graph/types'\nimport { CartDiscounts } from './CartDiscounts'\nimport { CartItem } from './CartItem'\nimport { CartTotals } from './CartTotals'\n\ninterface IProps {\n  order: GCartView.Order\n}\n\nexport const CartContents: React.FC<IProps> = ({ order }) => {\n  const { order: orderModel } = useRoot()\n\n  return useObserver(() => (\n    <div className=\"cart__items__container\">\n      <div className=\"cart__items__container__content\">\n        {order.items.map(item => (\n          <CartItem\n            key={item.id}\n            item={item}\n            isActive={orderModel.lastActiveRecipeId === item.recipe.id}\n            onEdit={() => orderModel.setUsedRecipeId(item.recipe.id)}\n          />\n        ))}\n        <CartDiscounts order={order} />\n        <CartTotals order={order} />\n      </div>\n    </div>\n  ))\n}\n","import { Trans } from '@lingui/react'\nimport React from 'react'\n\nimport { GCartView } from '../../graph/types'\n\ninterface IProps {\n  order: GCartView.Order\n}\n\nexport const CartDiscounts: React.SFC<IProps> = ({ order }) =>\n  order.discounts && order.discounts.length > 0 ? (\n    <div>\n      {order.discounts.map(\n        ({ code, description, price: { formattedValue } }) => (\n          <div key={code} className=\"cart__item__summary\">\n            <div className=\"cart__item__summary__label\">{description}</div>\n            <div className=\"cart__item__summary__price\">{formattedValue}</div>\n          </div>\n        ),\n      )}\n      <div className=\"cart__item__summary\">\n        <div className=\"cart__item__summary__label\">\n          <Trans>Total discount</Trans>\n        </div>\n        <div className=\"cart__item__summary__price\">\n          {order.totalDiscount.formattedValue}\n        </div>\n      </div>\n    </div>\n  ) : null\n","import './CartItem.css'\n\nimport React from 'react'\nimport styled from 'styled-components'\n\nimport { Desktop } from '../../common/Responsive'\nimport { GOrder } from '../../graph/types'\nimport { i18n } from '../../i18n'\nimport { EditCartItemButton } from './EditCartItemButton'\nimport { RemoveCartItemButton } from './RemoveCartItemButton'\n\ninterface IProps {\n  item: GOrder.Items\n  isActive: boolean\n  onEdit(): void\n}\n\nconst EditButtonsContainerStyled = styled.div`\n  flex: 0 0 auto;\n`\n\nconst CartItemStyled = styled.div`\n  width: 100%;\n  min-height: 3rem;\n  color: #1d1d1d;\n  margin: 0 0 0.4rem 0;\n  padding: 0.2rem;\n  background: ${({ isActive }: { isActive: boolean }) =>\n    isActive ? '#b3ebcc' : 'rgba(255, 255, 255, 0.8)'};\n  text-align: left;\n  display: flex;\n`\n\nexport const CartItem: React.SFC<IProps> = ({ item, isActive, onEdit }) => (\n  <CartItemStyled isActive={isActive}>\n    <EditButtonsContainerStyled>\n      <RemoveCartItemButton itemId={item.id} enabled={!item.automatic} />\n\n      <Desktop>\n        <EditCartItemButton\n          itemId={item.id}\n          enabled={item.recipe.sideDishCount !== 0 && !item.automatic}\n          onClick={onEdit}\n        />\n      </Desktop>\n    </EditButtonsContainerStyled>\n\n    <div className=\"cart__item__description\">\n      <div\n        className=\"cart__item__item__name\"\n        data-testid={`cardItem__Name__${item.recipe.id}`}\n      >\n        {item.recipe.nameLabel}\n      </div>\n      <div\n        className=\"cart__item__item__side__dish\"\n        data-testid={`cardItem__SideDish__${item.recipe.id}`}\n      >\n        {item.sideDishes.length > 0\n          ? `+ ${item.sideDishes\n              .map(({ recipe }) => recipe.nameLabel)\n              .join(',')}`\n          : item.recipe.sideDishCount > 0 && (\n              <span>{i18n.t`Without sidedish`.toLocaleLowerCase()}</span>\n            )}\n      </div>\n    </div>\n\n    <div\n      className=\"cart__item__item__price\"\n      data-testid={`cardItem__Price__${item.id}`}\n    >\n      {item.automatic ? i18n.t`For free` : item.price.formattedValue}\n    </div>\n  </CartItemStyled>\n)\n","import React from 'react'\nimport { Link } from 'react-router-dom'\n\nimport { CartItemButton } from './CartItemButton'\n\ninterface IProps {\n  itemId: ID\n  enabled: boolean\n  onClick(): void\n}\n\nexport const EditCartItemButton: React.SFC<IProps> = ({\n  itemId,\n  onClick,\n  ...props\n}) => {\n  const button = <CartItemButton icon=\"edit\" color=\"#d9a700\" {...props} />\n  return props.enabled ? (\n    <Link\n      to={`/order/change/${itemId}`}\n      onClick={onClick}\n      data-testid={`editCartItemButton__${itemId}`}\n    >\n      {button}\n    </Link>\n  ) : (\n    button\n  )\n}\n","import React, { useRef } from 'react'\n\nimport { useRoot } from '../../common/WithRoot'\nimport { CartItemButton } from './CartItemButton'\n\ninterface IProps {\n  itemId: ID\n  enabled: boolean\n}\n\nexport const RemoveCartItemButton: React.FC<IProps> = ({ itemId, enabled }) => {\n  const { order: orderModel } = useRoot()\n  const clickedRef = useRef(false)\n  return (\n    <CartItemButton\n      icon=\"delete\"\n      color=\"#99230e\"\n      enabled={enabled && !clickedRef.current}\n      data_testid={`removeCartItemButton`}\n      onClick={() => {\n        if (!clickedRef.current) {\n          orderModel.removeItemFromCart(itemId)\n        }\n        clickedRef.current = true\n      }}\n    />\n  )\n}\n","import Color from 'color'\nimport React from 'react'\nimport styled from 'styled-components'\n\nimport { GCartView } from '../../graph/types'\nimport { i18n } from '../../i18n'\n\ninterface IProps {\n  order: GCartView.Order\n}\n\nconst CartItemSummaryTotalThemed = styled.div`\n  background: ${({ theme }) =>\n    Color(theme.primary)\n      .alpha(0.7)\n      .hsl()\n      .string()} !important;\n`\n\nexport const CartTotals: React.SFC<IProps> = ({ order }) => (\n  <div>\n    {order.coverPrice && order.coverPrice.value ? (\n      <div key=\"casePrice\" className=\"cart__item__summary\">\n        <div className=\"cart__item__summary__label\">{i18n.t`Covers`}</div>\n        <div className=\"cart__item__summary__price\">\n          {order.coverPrice.formattedValue}\n        </div>\n      </div>\n    ) : null}\n    {order.transportFee && order.transportFee.value ? (\n      <div key=\"transportFee\" className=\"cart__item__summary\">\n        <div className=\"cart__item__summary__label\">{i18n.t`Delivery`}</div>\n        <div className=\"cart__item__summary__price\">\n          {order.transportFee.formattedValue}\n        </div>\n      </div>\n    ) : null}\n    <CartItemSummaryTotalThemed\n      key=\"totalPrice\"\n      className=\"cart__item__summary cart__item__summary__total\"\n    >\n      <div className=\"cart__item__summary__label\">{i18n.t`Total`}</div>\n      <div\n        className=\"cart__item__summary__price\"\n        data-testid={`cardItemSummary__Price`}\n      >\n        {order.totalSum.formattedValue}\n      </div>\n    </CartItemSummaryTotalThemed>\n  </div>\n)\n","import React from 'react'\nimport styled from 'styled-components'\n\nimport { i18n } from '../../i18n'\n\nconst CartIsEmptyThemed = styled.span`\n  color: ${({ theme }) => theme.secondary};\n`\n\nexport const CartIsEmpty = () => (\n  <CartIsEmptyThemed\n    className=\"cart__column__cart__empty__label\"\n    data-testid=\"cartIsEmpty\"\n  >\n    {`${i18n.t`Cart is empty`}...`}\n  </CartIsEmptyThemed>\n)\n","import { Trans } from '@lingui/react'\nimport React from 'react'\nimport { Route } from 'react-router-dom'\nimport { Alert } from 'reactstrap'\n\nimport { useRoot } from '../../common/WithRoot'\nimport { buildQuery } from '../../graph'\nimport { GOrderCartForItem } from '../../graph/types'\nimport { RM } from '../../helpers/ramda'\nimport { OrderCartForItemQuery } from '../../models/OrderModel.graphql'\nimport { CartModal } from './CartModal'\n\nconst QueryCart = buildQuery<\n  GOrderCartForItem.Query,\n  GOrderCartForItem.Variables\n>(OrderCartForItemQuery)\n\nexport const ChangeCartModal: React.FC = () => {\n  const { order: orderModel } = useRoot()\n  return (\n    <Route\n      path=\"/order/change/:itemId\"\n      render={({ match, history }) => (\n        <QueryCart\n          variables={{ itemId: match.params.itemId }}\n          renderLoading={false}\n          renderError={() => (\n            <Alert color=\"warning\">\n              <Trans>Error in loading cart item. Issue was reported.</Trans>\n            </Alert>\n          )}\n          render={(data, { loading }) => (\n            <CartModal\n              recipe={data.item && data.item.recipe}\n              initialSelection={\n                data.item\n                  ? (data.item.sideDishes.map(\n                      RM.path(['recipe', 'id']),\n                    ) as string[])\n                  : []\n              }\n              onConfirm={sideDishes =>\n                orderModel.updateItem(match.params.itemId, sideDishes)\n              }\n              onClose={() => history.goBack()}\n              isLoading={loading}\n            />\n          )}\n        />\n      )}\n    />\n  )\n}\n","import './CategoryNavigator.css'\n\nimport classNames from 'classnames'\nimport React, { useState } from 'react'\nimport Scroll from 'react-scroll'\nimport Truncate from 'react-truncate'\nimport styled from 'styled-components'\n\nimport { mediaDesktop, mediaMobile } from '../../common/Responsive'\nimport { GFoodMenuCategory } from '../../graph/types'\n\ninterface IProps {\n  categories: ReadonlyArray<GFoodMenuCategory.Fragment>\n}\n\nconst CategoryNavigatorContainer = styled.div`\n  background-color: #d4d4d4;\n  border-top-left-radius: 0.6rem;\n  padding: 0.7rem 0.5rem 0 0.2rem;\n  position: sticky;\n  top: 0;\n  z-index: 1;\n  user-select: none;\n  display: flex;\n  ${mediaDesktop`\n    flex-wrap: wrap;\n  `}\n  ${mediaMobile`\n    flex-wrap: nowrap;\n    overflow-x: auto;\n    overflow-y: hidden;\n    box-shadow: inset -15px -5px 15px -14px rgba(0, 0, 0, 0.6);\n    margin: 0;\n    border-top-left-radius: 0;\n    background-color: #f3f3f3;\n    opacity: 0.94;\n  `}\n`\n\nconst CategoryNavigator: React.FC<IProps> = ({ categories }) => {\n  const [activeCategoryIndex, setActiveCategoryIndex] = useState(0)\n  return (\n    <CategoryNavigatorContainer>\n      {categories.length === 0\n        ? null\n        : categories.map((category, idx) => (\n            <Scroll.Link\n              to={category.nameLabel}\n              key={category.id}\n              className={classNames('category__navigator__scroll__link', {\n                active: activeCategoryIndex === idx,\n              })}\n              onSetActive={() => setActiveCategoryIndex(idx)}\n              offset={-168}\n              smooth={true}\n              spy={true}\n              data-testid={`categoryNavigatorScrollLink__${category.id}`}\n            >\n              <div className=\"category__navigator__scroll__link__circle\">\n                <span className={`flaticon-${category.pictogram}`} />\n              </div>\n              <div className=\"category__navigator__scroll__link__description\">\n                <Truncate lines={2}>{category.nameLabel}</Truncate>\n              </div>\n            </Scroll.Link>\n          ))}\n    </CategoryNavigatorContainer>\n  )\n}\n\nexport default CategoryNavigator\n","import { Trans } from '@lingui/react'\nimport { Observer } from 'mobx-react'\nimport React from 'react'\nimport styled from 'styled-components'\n\nimport { mediaDesktop, mediaMobile } from '../../common/Responsive'\nimport { GFoodMenu } from '../../graph/types'\nimport { TRootModel } from '../../models/RootModel'\nimport FoodCategory from './FoodCategory'\nimport FoodMenuItem from './FoodMenuItem'\n\ninterface IProps {\n  categories: ReadonlyArray<GFoodMenu.WareCategories>\n  inCart: { [recipeId: string]: number }\n  orderItemCount: number\n  shouldUpdate: boolean\n  rootModel: TRootModel\n}\n\nconst FoodMenuStyled = styled.div`\n  border-radius: 0 0 0.6rem 0.6rem;\n  ${mediaDesktop`background: white;`};\n  ${mediaMobile`\n    background: #eee9e7;\n    background-size: cover;\n    background-attachment: scroll;\n  `};\n`\n\nconst FoodMenuListStyled = styled.div`\n  ${mediaDesktop`\n    margin: 0 1.4rem 1rem 1.6rem;\n    padding: 2rem 0 2rem 0;\n  `};\n  ${mediaMobile`\n    margin: 0 0.7rem 1rem 0.7rem;\n    padding: 0 0 4rem 0;\n  `};\n`\n\nexport class FoodMenu extends React.Component<IProps> {\n  shouldComponentUpdate({ shouldUpdate }: IProps) {\n    return shouldUpdate\n  }\n  orderLimitReached() {\n    const {\n      orderItemCount,\n      rootModel: { config },\n    } = this.props\n    return orderItemCount >= config.orderItemsMax\n  }\n  render() {\n    const {\n      categories,\n      inCart,\n      rootModel: { order, user },\n    } = this.props\n    const canAddToCart = !this.orderLimitReached()\n    return (\n      <FoodMenuStyled>\n        <FoodMenuListStyled>\n          {categories.length === 0 ? (\n            <h3>\n              <Trans>Food menu is empty. We are sorry.</Trans>\n            </h3>\n          ) : (\n            <Observer>\n              {() =>\n                categories.map(category => (\n                  <FoodCategory key={category.id} category={category}>\n                    {category.recipes.map(recipe => (\n                      <FoodMenuItem\n                        key={recipe.id}\n                        recipe={recipe}\n                        inCart={inCart[recipe.id] || 0}\n                        isActive={order.lastActiveRecipeId === recipe.id}\n                        canAddToCart={canAddToCart}\n                        onClick={() => {\n                          if (canAddToCart) {\n                            order.setUsedRecipeId(recipe.id)\n                          } else {\n                            user.showOrderLimit()\n                          }\n                        }}\n                        onPrefetch={() => {\n                          if (recipe.sideDishCount > 0) {\n                            order.prefetchFood(recipe.id)\n                          }\n                        }}\n                      />\n                    ))}\n                  </FoodCategory>\n                ))\n              }\n            </Observer>\n          )}\n        </FoodMenuListStyled>\n      </FoodMenuStyled>\n    )\n  }\n}\n","import React from 'react'\nimport Scroll from 'react-scroll'\nimport styled from 'styled-components'\n\nimport { mediaMobile } from '../../common/Responsive'\nimport { GFoodMenuCategory } from '../../graph/types'\nimport { FoodInCart } from './types'\n\ninterface IProps {\n  category: GFoodMenuCategory.Fragment\n  foodInCart?: FoodInCart\n}\n\nconst FoodCategoryStyled = styled.div`\n  color: #474747;\n  display: block;\n  font-size: 1.6rem;\n  & a {\n    text-decoration: none;\n  }\n`\n\nconst FoodCategoryTitleStyled = styled('h3')`\n  ${mediaMobile`margin: 1rem 0 0.4rem 1rem;`};\n`\n\nconst FoodCategory: React.SFC<IProps> = ({ category, children }) => (\n  <Scroll.Element name={category.nameLabel}>\n    <FoodCategoryStyled>\n      <FoodCategoryTitleStyled>{category.nameLabel}</FoodCategoryTitleStyled>\n      {children}\n    </FoodCategoryStyled>\n  </Scroll.Element>\n)\n\nexport default FoodCategory\n","import './FoodMenuItem.css'\n\nimport React from 'react'\nimport Truncate from 'react-truncate'\nimport styled from 'styled-components'\n\nimport { GFoodMenuRecipe } from '../../graph/types'\n\nimport { mediaMobile } from '../../common/Responsive'\nimport { LinkToCart } from './LinkToCart'\n\ninterface IProps {\n  recipe: GFoodMenuRecipe.Fragment\n  inCart: number\n  isActive: boolean\n  onClick(): void\n  onPrefetch(): void\n  canAddToCart: boolean\n}\n\nconst FoodMenuItemStyled = styled.div`\n  padding: 1rem 0.5rem 0.3rem 1.1rem;\n  border: 1px solid #d5d5d5 !important;\n  margin: 0 0 0.4rem 0;\n  border-radius: 0.8rem;\n  cursor: pointer;\n  position: relative;\n  min-height: 6rem;\n  &:hover {\n    background-color: #c9e8d7;\n  }\n  background-color: ${({ isActive }: { isActive: boolean }) =>\n    isActive ? '#b3ebcc' : 'white'};\n  h4 {\n    font-size: 1rem;\n    font-weight: 700;\n    color: #404040;\n    margin-bottom: 0.1rem;\n    margin-right: 6rem;\n  }\n  p {\n    color: #666666;\n    margin: 0.6rem 0 0 0;\n    font-size: 0.9rem;\n    max-height: 2.5rem;\n    -webkit-line-clamp: 2;\n    overflow: hidden;\n  }\n`\nconst FoodMenuItemImage = styled.img`\n  width: 6rem;\n  height: 6rem;\n  display: block;\n  float: left;\n  margin: -1.05rem 1rem 0 -1.2rem;\n  border-radius: 0.8rem 0 0 0.8rem;\n  object-fit: cover;\n`\n\nconst FoodMenuItemPriceCorner = styled.div`\n  border-top-width: 1.8rem;\n  border-top-style: solid;\n  border-top-color: ${({ theme }) => theme.primary} !important;\n  position: absolute;\n  right: 4.799rem;\n  top: 1rem;\n  width: 0;\n  height: 0;\n  border-left: 1.8rem solid transparent;\n`\n\nconst FoodMenuItemPrice = styled.div`\n  background-color: ${({ theme }) => theme.primary} !important;\n  position: absolute;\n  right: 0;\n  top: 1rem;\n  width: 4.8rem;\n  height: 1.8rem;\n  padding: 0.12rem 0.7rem 0.3rem 0rem;\n  font-weight: 500;\n  font-size: 1.1rem;\n  color: white;\n  text-align: right;\n  overflow: hidden;\n  white-space: nowrap;\n`\n\nconst FoodMenuItemCount = styled.div`\n  background-color: ${({ theme }) => theme.secondary};\n  float: left;\n  position: absolute;\n  left: -1.2rem;\n  padding: 0.4rem 0.6rem;\n  color: white;\n  border-radius: 1.8rem;\n  font-size: 0.9rem;\n  ${mediaMobile`\n    left: -0.6rem;\n    top: -0.7rem;\n  `};\n`\n\nconst FoodMenuItem: React.SFC<IProps> = ({\n  recipe,\n  inCart,\n  onPrefetch,\n  isActive,\n  onClick,\n  canAddToCart,\n}) => (\n  <LinkToCart\n    recipeId={recipe.id}\n    hasSidedish={recipe.sideDishCount > 0}\n    canAddToCart={canAddToCart}\n    onClick={onClick}\n    data-testid={`foodMenuItem__${recipe.id}`}\n  >\n    <FoodMenuItemStyled onMouseEnter={onPrefetch} isActive={isActive}>\n      {recipe.image && (\n        <FoodMenuItemImage src={recipe.image} alt={recipe.nameLabel} />\n      )}\n\n      <FoodMenuItemPriceCorner />\n      <FoodMenuItemPrice data-testid={`foodMenuItem__Price__${recipe.id}`}>\n        {recipe.price.formattedValue}\n      </FoodMenuItemPrice>\n      {inCart > 0 ? <FoodMenuItemCount>{`${inCart}x`}</FoodMenuItemCount> : ''}\n      <h4>\n        <Truncate lines={2} data-testid={`foodMenuItem__Name__${recipe.id}`}>\n          {recipe.nameLabel}\n        </Truncate>\n      </h4>\n      <p>\n        <Truncate\n          lines={2}\n          data-testid={`foodMenuItem__Description__${recipe.id}`}\n        >\n          {recipe.descriptionLabel}\n        </Truncate>\n      </p>\n    </FoodMenuItemStyled>\n  </LinkToCart>\n)\n\nexport default FoodMenuItem\n","import React from 'react'\nimport { Link } from 'react-router-dom'\nimport styled from 'styled-components'\n\nimport { WithRoot } from '../../common/WithRoot'\n\nimport { Mobile } from '../../common/Responsive'\n\ninterface IProps {\n  recipeId: string\n  canAddToCart: boolean\n  hasSidedish: boolean\n  onClick(): void\n}\n\nconst LinkStyled = styled(Link)`\n  color: inherit;\n  &:visited div {\n    border: inherit;\n  }\n`\n\nexport const LinkToCart: React.SFC<IProps> = ({\n  recipeId,\n  hasSidedish,\n  canAddToCart,\n  onClick,\n  children,\n}) => {\n  if (!canAddToCart) {\n    return <div onClick={onClick}>{children}</div>\n  }\n  if (hasSidedish) {\n    return (\n      <LinkStyled to={{ pathname: `/order/add/${recipeId}` }} onClick={onClick}>\n        {children}\n      </LinkStyled>\n    )\n  }\n  return (\n    <WithRoot\n      render={({ order }) => (\n        <Mobile>\n          {isMobile => (\n            <div\n              onClick={() => {\n                onClick()\n                isMobile\n                  ? order.addFromRecipeMobile(recipeId)\n                  : order.addFromRecipe(recipeId)\n              }}\n            >\n              {children}\n            </div>\n          )}\n        </Mobile>\n      )}\n    />\n  )\n}\n","import { useObserver } from 'mobx-react-lite'\nimport React from 'react'\n\nimport { AlertModal } from '../../common/AlertModal'\nimport { useRoot } from '../../common/WithRoot'\nimport { i18n } from '../../i18n'\n\nexport const OrderLimitModal: React.FC = () => {\n  const { user } = useRoot()\n  return useObserver(() => (\n    <AlertModal\n      isOpen={!user.orderLimitAlertHidden}\n      onClose={user.hideOrderLimit}\n      headerText={i18n.t`Limit has been reached`}\n    >\n      {i18n.t`The maximum number of items in the order has been reached`}\n    </AlertModal>\n  ))\n}\n","import React from 'react'\nimport { Field, FieldType } from 'react-form'\nimport { Input } from 'reactstrap'\nimport styled from 'styled-components'\n\ninterface IProps {\n  field: FieldType\n  defaultValue?: boolean\n  validate?(value: boolean): string | null\n}\n\nconst CheckboxContainerStyled = styled.div`\n  display: flex;\n  margin-bottom: 0.5rem;\n`\n\nconst CheckboxStyled = styled(Input)`\n  -webkit-appearance: none;\n  -moz-appearance: none;\n  background-color: white;\n  border: 1px solid;\n  border-color: ${({ invalid }: { invalid: boolean }) =>\n    invalid ? 'red' : '#c5c5c5'};\n  width: 2rem;\n  height: 2rem;\n  min-width: 2rem;\n  border-radius: 0.25rem;\n  position: relative;\n  margin: 0;\n  outline: none;\n  &:checked {\n    background-color: white;\n  }\n  &:checked:after {\n    content: '\\\\2714';\n    font-size: 2rem;\n    position: absolute;\n    top: -0.5rem;\n    left: 0.1rem;\n    color: #1d1d1d;\n    overflow: hidden;\n  }\n`\n\nconst LabelStyled = styled.div`\n  margin: 0 0 0 0.8rem;\n  vertical-align: top;\n`\n\nexport const FormInputCheckbox: React.SFC<IProps> = ({\n  field,\n  defaultValue = false,\n  validate,\n  children,\n  ...props\n}) => (\n  <Field field={field} defaultValue={defaultValue} validate={validate}>\n    {fieldApi => (\n      <CheckboxContainerStyled>\n        <CheckboxStyled\n          type=\"checkbox\"\n          value={fieldApi.value}\n          onChange={checked => fieldApi.setValue(checked.target.checked)}\n          invalid={fieldApi.touched && Boolean(fieldApi.error)}\n          {...props}\n        />\n        <LabelStyled>{children}</LabelStyled>\n      </CheckboxContainerStyled>\n    )}\n  </Field>\n)\n","import React from 'react'\nimport { FormGroup } from 'reactstrap'\n\nimport { FormTextInput } from '../../common/FormTextInput'\nimport { i18n } from '../../i18n'\n\nconst emailRx = /^(([^<>()\\[\\]\\.,;:\\s@\\\"]+(\\.[^<>()\\[\\]\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@(([^<>()[\\]\\.,;:\\s@\\\"]+\\.)+[^<>()[\\]\\.,;:\\s@\\\"]{2,})$/i\n\nexport const OrderEmailInputValidator = value => {\n  const email = value.trim()\n  if (email === '') {\n    return i18n.t`E-mail is mandatory`\n  }\n  if (!emailRx.test(email)) {\n    return i18n.t`E-mail format is not valid`\n  }\n  return null\n}\n\nexport const OrderEmailInput: React.SFC = () => (\n  <FormGroup>\n    <FormTextInput\n      field=\"email\"\n      type=\"email\"\n      autoComplete=\"email\"\n      placeholder=\"E-mail\"\n      showFeedback={true}\n      validate={OrderEmailInputValidator}\n      data-testid=\"orderEmailInput\"\n    />\n  </FormGroup>\n)\n","import React from 'react'\nimport { FormGroup, InputGroup } from 'reactstrap'\n\nimport { FormTextInput } from '../../common/FormTextInput'\nimport { i18n } from '../../i18n'\n\nexport const OrderNameInput: React.SFC = () => (\n  <FormGroup>\n    <InputGroup>\n      <FormTextInput\n        field=\"firstname\"\n        autoComplete=\"given-name\"\n        placeholder={i18n.t`First name`}\n        validate={value =>\n          value.trim() === '' ? i18n.t`First name is mandatory` : null\n        }\n        data-testid=\"orderNameInput__FirstName\"\n      />\n      <FormTextInput\n        field=\"lastname\"\n        autoComplete=\"family-name\"\n        placeholder={i18n.t`Last name`}\n        validate={value =>\n          value.trim() === '' ? i18n.t`Last name is mandatory` : null\n        }\n        data-testid=\"orderNameInput__LastName\"\n      />\n    </InputGroup>\n  </FormGroup>\n)\n","import React from 'react'\nimport { FormGroup, InputGroup } from 'reactstrap'\n\nimport { FormTextInput } from '../../common/FormTextInput'\nimport { i18n } from '../../i18n'\n\nexport const OrderPhoneInputValidator = value =>\n  value.trim() === '' ? i18n.t`Phone is mandatory` : null\n\nexport const OrderPhonePrefixInputValidator = value =>\n  value.trim() === '' ? i18n.t`Phone prefix is mandatory` : null\n\nexport const OrderPhoneInput: React.SFC = () => (\n  <FormGroup>\n    <InputGroup>\n      <FormTextInput\n        field=\"phonePrefix\"\n        autoComplete=\"tel-country-code\"\n        placeholder=\"+\"\n        validate={OrderPhonePrefixInputValidator}\n      />\n      <FormTextInput\n        field=\"phone\"\n        type=\"tel\"\n        autoComplete=\"tel-national\"\n        placeholder={i18n.t`Phone`}\n        validate={OrderPhoneInputValidator}\n        style={{ width: '55%' }}\n        data-testid=\"orderPhoneInput__Phone\"\n      />\n    </InputGroup>\n  </FormGroup>\n)\n","import { useDebounceCallback } from '@speedlo/hooks'\nimport React, { KeyboardEvent, useCallback, useRef, useState } from 'react'\nimport { useQuery } from 'react-apollo-hooks'\nimport { FormGroup, Input, InputGroup } from 'reactstrap'\nimport styled from 'styled-components'\n\nimport { SecondaryButton } from '../../common/Buttons'\nimport { useRoot } from '../../common/WithRoot'\nimport { GOrderPromoCodes, GPromoCode, MAddOrderPromo, MRemoveOrderPromo } from '../../graph/types'\nimport { useGuardedMutation } from '../../hooks/useGuardedMutation'\nimport { i18n } from '../../i18n'\nimport { AddOrderPromoMutation, OrderPromoCodesQuery, RemoveOrderPromoMutation } from './OrderPromoInput.graphql'\n\ntype TPromoCode = GPromoCode.Fragment\n\ninterface IProps {\n  codes: ReadonlyArray<TPromoCode>\n  onCodeAdd(codeInput: string): Promise<void>\n  onCodeRemove(codeId: ID): void\n  autoSubmitAfterTimeout?: number\n}\n\nconst CodesPanel = styled.div`\n  margin-top: 0.5rem;\n  & button {\n    margin-right: 0.5rem;\n    font-size: 0.7rem;\n  }\n`\n\nexport function OrderPromoInputUI({\n  codes,\n  onCodeAdd,\n  onCodeRemove,\n  autoSubmitAfterTimeout = 2000,\n}: IProps) {\n  const inputRef = useRef<HTMLInputElement>(null)\n  const [isValidating, setValidating] = useState(false)\n\n  const addCode = useCallback(\n    async () => {\n      if (!inputRef.current || inputRef.current.disabled) {\n        return\n      }\n      const code = inputRef.current.value.trim()\n      if (code.length === 0) {\n        return\n      }\n      setValidating(true)\n      inputRef.current.disabled = true\n      inputRef.current.value = i18n.t`Validating promo code ${code}...`\n      try {\n        await onCodeAdd(code)\n        if (inputRef.current) {\n          inputRef.current.value = ''\n        }\n      } catch (err) {\n        if (inputRef.current) {\n          inputRef.current.value = code\n        }\n      } finally {\n        setValidating(false)\n        if (inputRef.current) {\n          inputRef.current.disabled = false\n          inputRef.current.focus()\n        }\n      }\n    },\n    [onCodeAdd],\n  )\n\n  const onChange = useDebounceCallback(addCode, autoSubmitAfterTimeout)\n\n  const onKeyDown = useCallback((ev: KeyboardEvent<HTMLInputElement>) => {\n    if (ev.key === 'Enter') {\n      addCode()\n      ev.preventDefault()\n    }\n  }, [])\n\n  return (\n    <FormGroup>\n      <InputGroup>\n        <Input\n          innerRef={inputRef}\n          autoComplete=\"off\"\n          disabled={isValidating}\n          placeholder={i18n.t`Promo codes`}\n          onChange={onChange}\n          onKeyDown={onKeyDown}\n          onBlur={addCode}\n          onPaste={addCode}\n        />\n      </InputGroup>\n      <CodesPanel>\n        {codes.map(({ id, code }) => (\n          <SecondaryButton key={id} onClick={() => onCodeRemove(id)}>\n            {`${code} ✖`}\n          </SecondaryButton>\n        ))}\n      </CodesPanel>\n    </FormGroup>\n  )\n}\n\nconst OrderPromoInput: React.FC = () => {\n  const { order } = useRoot()\n\n  const { data } = useQuery<GOrderPromoCodes.Query, GOrderPromoCodes.Variables>(\n    OrderPromoCodesQuery,\n    {\n      suspend: false,\n      variables: { orderId: order.orderId! },\n    },\n  )\n\n  const addCodeMutation = useGuardedMutation<\n    MAddOrderPromo.Mutation,\n    MAddOrderPromo.Variables\n  >(AddOrderPromoMutation, { onUserErrors: order.submitFailed })\n\n  const onCodeAdd = useCallback(async (code: string) => {\n    if (!order.orderId) {\n      return\n    }\n    const result = await addCodeMutation({\n      orderId: order.orderId!,\n      code: code,\n    })\n    order.setCartRefresh(true)\n    if (result && result.addOrderPromoCode.userErrors.length) {\n      order.submitFailed(result.addOrderPromoCode.userErrors)\n    }\n  }, [])\n\n  const removeCodeMutation = useGuardedMutation<\n    MRemoveOrderPromo.Mutation,\n    MRemoveOrderPromo.Variables\n  >(RemoveOrderPromoMutation, { onUserErrors: order.submitFailed })\n\n  const onCodeRemove = (codeId: ID) => {\n    if (order.orderId) {\n      order.setCartRefresh(true)\n      removeCodeMutation({ codeId, orderId: order.orderId })\n    }\n  }\n\n  return (\n    <OrderPromoInputUI\n      codes={data && data.order ? data.order.promoCodes : []}\n      onCodeAdd={onCodeAdd}\n      onCodeRemove={onCodeRemove}\n    />\n  )\n}\n\nexport default OrderPromoInput\n","import gql from 'graphql-tag'\n\nimport { PromoCodeFragment } from '../../graph/fragments.graphql'\n\nexport const OrderPromoCodesQuery = gql`\n  query GOrderPromoCodes($orderId: ID!) {\n    order(id: $orderId) {\n      id\n      promoCodes {\n        ...GPromoCode\n      }\n    }\n  }\n  ${PromoCodeFragment}\n`\n\nexport const AddOrderPromoMutation = gql`\n  mutation MAddOrderPromo($orderId: ID!, $code: String!) {\n    addOrderPromoCode(order: $orderId, promoCode: $code) {\n      userErrors: errors\n      order {\n        id\n        promoCodes {\n          ...GPromoCode\n        }\n      }\n    }\n  }\n  ${PromoCodeFragment}\n`\n\nexport const RemoveOrderPromoMutation = gql`\n  mutation MRemoveOrderPromo($orderId: ID!, $codeId: ID!) {\n    removeOrderPromoCode(order: $orderId, promoCode: $codeId) {\n      id\n      promoCodes {\n        ...GPromoCode\n      }\n    }\n  }\n  ${PromoCodeFragment}\n`\n","import './OrderPaymentMethod.css'\n\nimport { DateFormat, Trans } from '@lingui/react'\nimport { useObserver } from 'mobx-react-lite'\nimport React from 'react'\n\nimport { SelectButtonThemed } from '../../common/Buttons'\nimport { useRoot } from '../../common/WithRoot'\nimport { i18n } from '../../i18n'\n\nexport const OrderTimeButtons: React.FC = () => {\n  const { order } = useRoot()\n\n  return useObserver(() => (\n    <div className=\"order__payment__method\">\n      <SelectButtonThemed\n        data-testid=\"orderTimeButtonNow\"\n        selected={order.deliverAt === undefined}\n        onClick={() => order.setDeliverAt(undefined)}\n      >\n        {i18n.t`When possible`}\n      </SelectButtonThemed>\n      <SelectButtonThemed\n        data-testid=\"orderTimeButtonLater\"\n        selected={order.deliverAt !== undefined}\n        onClick={order.openTimePicker}\n      >\n        {order.deliverAt ? (\n          <Trans>\n            at{' '}\n            <DateFormat\n              value={order.deliverAt}\n              format={{ weekday: 'long', hour: 'numeric', minute: 'numeric' }}\n            />\n          </Trans>\n        ) : (\n          i18n.t`Choose time`\n        )}\n      </SelectButtonThemed>\n    </div>\n  ))\n}\n","import { DateFormat } from '@lingui/react'\nimport { useEffectOnce } from '@speedlo/hooks'\nimport {\n  closestIndexTo,\n  eachDayOfInterval,\n  isEqual,\n  startOfDay,\n} from 'date-fns'\nimport { isWithinInterval } from 'date-fns/fp'\nimport React, { Fragment, useEffect, useMemo, useState } from 'react'\nimport styled from 'styled-components'\n\nimport { createTimeSteps } from './createTimeSteps'\nimport { TimePickerButton } from './TimePickerButton'\n\ninterface IProps {\n  minDate: Date\n  maxDate: Date\n  minuteStep: number\n  onStepChange(step: Date): void\n  initialTime?: Date\n  filterIntervals?: Interval[]\n}\n\nconst TimePickerContainer = styled.div`\n  margin-top: 1rem;\n`\n\nconst TimePickerDay = styled.div`\n  font-size: 1rem;\n  font-weight: bold;\n  text-align: left;\n  margin: 0 0 0.2rem 0.2rem;\n`\n\nexport const TimePicker: React.FC<IProps> = ({\n  minDate,\n  maxDate,\n  minuteStep,\n  onStepChange,\n  initialTime,\n  filterIntervals = [],\n}) => {\n  const steps = useMemo(\n    () => {\n      const allSteps = createTimeSteps(minDate, maxDate, minuteStep)\n      if (filterIntervals.length) {\n        return allSteps.filter(step =>\n          filterIntervals.some(isWithinInterval(step)),\n        )\n      }\n      return allSteps\n    },\n    [minDate, maxDate, minuteStep, filterIntervals],\n  )\n\n  const days = useMemo(\n    () => {\n      return eachDayOfInterval({ start: minDate, end: maxDate })\n    },\n    [minDate, maxDate],\n  )\n\n  const [stepIdx, setStepIdx] = useState(0)\n\n  useEffect(\n    () => {\n      if (initialTime) {\n        setStepIdx(closestIndexTo(initialTime, steps))\n      }\n    },\n    [initialTime],\n  )\n\n  useEffectOnce(() => {\n    onStepChange(steps[stepIdx])\n  })\n\n  return (\n    <TimePickerContainer>\n      {days.map(day => (\n        <Fragment key={day.getDate()}>\n          <TimePickerDay>\n            <DateFormat\n              value={day}\n              format={{ month: 'long', day: 'numeric', weekday: 'long' }}\n            />\n          </TimePickerDay>\n          {steps.map((step, idx) =>\n            isEqual(day, startOfDay(step)) ? (\n              <TimePickerButton\n                key={step.getTime()}\n                time={step}\n                isSelected={idx === stepIdx}\n                canBeSelected={true}\n                onClick={() => {\n                  setStepIdx(idx)\n                  onStepChange(step)\n                }}\n              />\n            ) : null,\n          )}\n        </Fragment>\n      ))}\n    </TimePickerContainer>\n  )\n}\n","import {\n  addMinutes,\n  endOfMinute,\n  getMinutes,\n  startOfMinute,\n  subMinutes,\n} from 'date-fns'\n\nexport function createTimeSteps(start: Date, end: Date, minuteStep: number) {\n  let current = startOfMinute(timeClampUp(start, minuteStep))\n  const steps: Date[] = []\n  const endMinute = endOfMinute(subMinutes(end, 1))\n  do {\n    steps.push(current)\n    current = addMinutes(current, minuteStep)\n  } while (current <= endMinute)\n  return steps\n}\n\nexport function timeClampUp(time: Date, minuteStep: number) {\n  return addMinutes(timeClampDown(time, minuteStep), minuteStep)\n}\n\nexport function timeClampDown(time: Date, minuteStep: number) {\n  return subMinutes(time, getMinutes(time) % minuteStep)\n}\n","import React from 'react'\nimport { ButtonProps } from 'reactstrap'\nimport styled from 'styled-components'\n\nimport { PickerButton } from '../../common/PickerButton'\nimport { formatTime } from '../../helpers/formats'\n\ninterface IProps extends ButtonProps {\n  time: Date\n  isSelected: boolean\n  canBeSelected: boolean\n}\n\nconst Time = styled.div`\n  font-size: 1.2rem;\n`\n\nexport const TimePickerButton: React.FC<IProps> = ({\n  time,\n  ...buttonProps\n}) => (\n  <PickerButton\n    size=\"xs\"\n    outline={true}\n    width=\"10rem\"\n    data-testid={`timePickerButton__${time.getTime()}`}\n    {...buttonProps}\n  >\n    <Time>{formatTime(time)}</Time>\n  </PickerButton>\n)\n","import gql from 'graphql-tag'\n\nimport { OrderFragment } from '../cart/CartView.graphql'\n\nexport const OrderTimePickerQuery = gql`\n  query GOrderTimePicker($branchId: ID!) {\n    companyBranch(id: $branchId) {\n      id\n      isOpen\n      businessHours: businessHoursIntervals {\n        openAt\n        closeAt\n        closed\n      }\n      defaultDeliveryTime\n      defaultPickupTime\n      willOpenAt\n      willCloseAt\n    }\n  }\n`\n\nexport const UpdateOrderDeliveryTimeMutation = gql`\n  mutation MUpdateOrderDeliveryTime($orderId: ID!, $deliverAt: DateTime) {\n    updateOrder(id: $orderId, order: { deliverAt: $deliverAt }) {\n      ...GOrder\n    }\n  }\n  ${OrderFragment}\n`\n","import React from 'react'\nimport { Col } from 'reactstrap'\n\nexport const ColStyle = ({ children }) => (\n  <Col className=\"pl-sm-0\" sm=\"12\" md=\"12\" lg=\"10\" xl=\"8\">\n    {children}\n  </Col>\n)\n\nexport const ColStyleLeft = ({ children }) => (\n  <Col className=\"pl-sm-0\" sm=\"8\" md=\"8\" lg=\"6\" xl=\"5\">\n    {children}\n  </Col>\n)\n\nexport const ColStyleRight = ({ children }) => (\n  <Col className=\"pl-sm-0\" sm=\"4\" md=\"4\" lg=\"4\" xl=\"3\">\n    {children}\n  </Col>\n)\n","import { SECOND, useNow, useTimer } from '@speedlo/hooks'\nimport { differenceInMinutes } from 'date-fns'\n\nimport { GCompanyBranchStatus } from '../graph/types'\n\nexport type TStatus = GCompanyBranchStatus.Fragment\n\nexport type TStatusDecision = 'Open' | 'Closed' | 'ClosingSoon' | 'OpeningSoon'\n\ninterface IProps {\n  status: TStatus\n  updateInterval?: number\n  openSoonThresholdInMinutes?: number\n  closeSoonThresholdInMinutes?: number\n  onRefresh?(): void\n}\n\nexport interface IShopStatus {\n  decision: TStatusDecision\n  openingIn: number\n  closingIn: number\n}\n\nexport function useShopStatus({\n  status,\n  updateInterval = 30 * SECOND,\n  openSoonThresholdInMinutes = 30,\n  closeSoonThresholdInMinutes = 30,\n}: IProps) {\n  const getNow = useNow()\n\n  useTimer({\n    interval: updateInterval,\n    enabled: Boolean(updateInterval),\n  })\n\n  const now = getNow()\n  const { isOpen, willCloseAt, willOpenAt } = status\n\n  let decision: TStatusDecision\n\n  const openingIn = willOpenAt ? differenceInMinutes(willOpenAt, now) : 0\n  const closingIn = willCloseAt ? differenceInMinutes(willCloseAt, now) : 0\n\n  if (isOpen) {\n    if (willCloseAt && closingIn <= 0) {\n      decision = 'Closed'\n    } else {\n      decision = isSoon(willCloseAt, closeSoonThresholdInMinutes, now)\n        ? 'ClosingSoon'\n        : 'Open'\n    }\n  } else {\n    if (willOpenAt && openingIn <= 0) {\n      decision = 'Open'\n    } else {\n      decision = isSoon(willOpenAt, openSoonThresholdInMinutes, now)\n        ? 'OpeningSoon'\n        : 'Closed'\n    }\n  }\n\n  const shopStatus: IShopStatus = {\n    decision,\n    openingIn,\n    closingIn,\n  }\n  return shopStatus\n}\n\nfunction isSoon(time: Maybe<string>, threshold: number, now: Date) {\n  return time ? Math.abs(differenceInMinutes(time, now)) <= threshold : false\n}\n","import React from 'react'\n\nimport { GAddress } from '../graph/types'\nimport { i18n } from '../i18n'\n\ninterface IProps {\n  address?: GAddress.Fragment\n}\n\nexport const ShopAddress: React.SFC<IProps> = ({ address }) => {\n  if (!address || !address.location) {\n    return <span>{i18n.t`Unknown address`}</span>\n  }\n  const { location } = address\n  return (\n    <span>{`${location.street} ${location.houseNumber},\\n ${\n      location.city\n    }`}</span>\n  )\n}\n","import './Modal.css'\n\nimport React from 'react'\nimport {\n  Container,\n  Modal,\n  ModalBody,\n  ModalHeader,\n  ModalProps,\n} from 'reactstrap'\n\ninterface IProps extends ModalProps {\n  isOpen: boolean\n  headerText: string\n  onClose?(): void\n}\n\nexport const AlertModal: React.SFC<IProps> = ({\n  isOpen,\n  headerText,\n  onClose,\n  children,\n  ...modalProps\n}) => (\n  <Modal\n    isOpen={isOpen}\n    toggle={onClose}\n    className=\"modal__container\"\n    {...modalProps}\n    data-testid=\"alertModal\"\n  >\n    <ModalHeader tag={Container} toggle={onClose} className=\"modal__header\">\n      <span>{headerText}</span>\n    </ModalHeader>\n    <ModalBody className=\"modal__body\">\n      <div className=\"modal__body__content\">{children}</div>\n    </ModalBody>\n  </Modal>\n)\n","import React from 'react'\nimport styled from 'styled-components'\n\ninterface IProps {\n  className: string\n  imageName: string\n  fallbackColor?: string\n  fixed?: boolean\n  size?: 'cover' | 'contain' | 'inherit'\n  children?: any\n  component?: any\n}\n\nexport const BackgroundThemed: React.SFC<IProps> = ({\n  imageName,\n  fallbackColor = '#5b453c',\n  fixed = false,\n  size = 'inherit',\n  children,\n  component = 'div',\n  ...otherProps\n}) =>\n  React.createElement(\n    styled(component)`\n      background-image: ${props => `url(${props.theme[imageName]})`};\n      background-attachment: ${props => (fixed ? 'fixed' : 'inherit')};\n      background-repeat: no-repeat;\n      background-position: left top;\n      background-size: ${props => size};\n    `,\n    otherProps,\n    children,\n  )\n\nexport default BackgroundThemed\n","import React from 'react'\nimport { Redirect } from 'react-router'\n\nimport { TOrderModel } from '../models/OrderModel'\nimport { WithRoot } from './WithRoot'\n\ninterface IProps {\n  render(root: TOrderModel): ReactNode\n  observe?: boolean\n  redirect?: boolean\n}\n\nexport const WithOrder: React.SFC<IProps> = ({\n  render,\n  observe,\n  redirect = false,\n}) => (\n  <WithRoot\n    observe={observe}\n    render={({ order }) => {\n      return order.hasOrder ? (\n        render(order)\n      ) : redirect ? (\n        <Redirect to=\"/\" />\n      ) : null\n    }}\n  />\n)\n","import { useObserver } from 'mobx-react-lite'\nimport React from 'react'\nimport { GoogleMap, GoogleMapProps, withGoogleMap } from 'react-google-maps'\nimport styled from 'styled-components'\n\nimport { TMapModel } from '../models/MapModel'\n\ninterface IBaseMapProps extends GoogleMapProps {\n  model: TMapModel\n}\n\nconst MapContainerStyled = styled.div`\n  border-radius: 0 0 0.5rem 0.5rem;\n  overflow: hidden;\n  height: calc(100% - 3.75rem);\n`\n\nconst MapElement = styled.div`\n  height: 100%;\n  position: relative;\n`\n\nconst BaseMapContainer = withGoogleMap(({ children }) => <>{children}</>)\n\nconst getMapOptions = (): google.maps.MapOptions => {\n  return {\n    streetViewControl: false,\n    mapTypeControl: false,\n    fullscreenControl: false,\n    zoomControlOptions: {\n      position: google.maps.ControlPosition.RIGHT_TOP,\n    },\n  }\n}\n\nexport const BaseMap: React.FC<IBaseMapProps> = ({ model, children }) => {\n  return useObserver(() => (\n    <BaseMapContainer\n      containerElement={\n        <MapContainerStyled\n          className=\"map__container\"\n          data-testid=\"googleMap\"\n        />\n      }\n      mapElement={<MapElement />}\n    >\n      <GoogleMap\n        ref={model.setMapRef}\n        zoom={model.zoom}\n        center={model.center}\n        onCenterChanged={model.updatePosition}\n        onZoomChanged={model.updateZoom}\n        onClick={model.onClick}\n        options={getMapOptions()}\n      >\n        {children}\n      </GoogleMap>\n    </BaseMapContainer>\n  ))\n}\n","import React from 'react'\nimport { Field, FieldProps } from 'react-form'\nimport { FormFeedback, Input, InputProps } from 'reactstrap'\n\ninterface IProps\n  extends Omit<FieldProps<string>, 'render' | 'children'>,\n    Omit<InputProps, 'defaultValue'> {\n  showFeedback?: boolean\n}\n\nexport const FormTextInput: React.SFC<IProps> = ({\n  field,\n  validate,\n  showFeedback = false,\n  ...inputProps\n}) => (\n  <Field\n    field={field}\n    validate={validate}\n    render={fieldApi => (\n      <>\n        <Input\n          {...inputProps}\n          value={fieldApi.value}\n          onChange={e => fieldApi.setValue(e.target.value)}\n          onBlur={() => fieldApi.setTouched(true)}\n          invalid={fieldApi.touched && Boolean(fieldApi.error)}\n        />\n        {showFeedback && <FormFeedback>{fieldApi.error}</FormFeedback>}\n      </>\n    )}\n  />\n)\n","import { Plural, Trans } from '@lingui/react'\nimport { useObserver } from 'mobx-react-lite'\nimport React from 'react'\n\nimport { AlertModal } from '../../common/AlertModal'\nimport { useRoot } from '../../common/WithRoot'\nimport { GCompanyBranchStatus } from '../../graph/types'\nimport { useShopStatus } from '../../hooks/useShopStatus'\nimport { i18n } from '../../i18n'\n\ninterface IProps {\n  status: GCompanyBranchStatus.Fragment\n}\n\nexport const ShopClosingTimeModal: React.FC<IProps> = ({ status }) => {\n  const { user } = useRoot()\n  const { decision, openingIn } = useShopStatus({\n    status,\n    // Do not want update here as it would be showing modal every time :)\n    updateInterval: 0,\n  })\n  return useObserver(() => (\n    <AlertModal\n      isOpen={\n        (decision === 'Closed' || decision === 'OpeningSoon') &&\n        !user.closingTimeAlertHidden\n      }\n      onClose={user.hideClosingTime}\n      headerText={i18n.t`We are closed right now`}\n    >\n      {i18n.t`We're sorry, but we do not accept new orders at this time.`}\n      {decision === 'OpeningSoon' && (\n        <Trans>\n          You can prepare your order because we are{' '}\n          <Plural\n            value={openingIn}\n            one=\"opening in 1 minute\"\n            other=\"opening in # minutes\"\n          />\n          !\n        </Trans>\n      )}\n    </AlertModal>\n  ))\n}\n","import './ShopHeaderIcons.css'\n\nimport React from 'react'\n\nimport { ColStyle } from '../../common/ColStyle'\n\nimport logoCommerce01 from './logo-commerce-01.svg'\nimport logoCommerce02 from './logo-commerce-02.svg'\nimport logoDoveze from './logo-doveze.svg'\nimport logoGoPay from './logo-gopay.png'\n\nexport const ShopHeaderIcons = () => (\n  <ColStyle>\n    <img\n      src={logoDoveze}\n      className=\"shop__header__icons__doveze\"\n      data-testid=\"ShopHeaderIcons__AppLogo\"\n      alt=\"logo Doveze.cz\"\n    />\n    <img\n      src={logoCommerce02}\n      className=\"shop__header__icons__commerce\"\n      alt=\"MasterCard\"\n    />\n    <img\n      src={logoCommerce01}\n      className=\"shop__header__icons__commerce\"\n      data-testid=\"ShopHeaderIcons__VisaLogo\"\n      alt=\"VISA\"\n    />\n    <img\n      src={logoGoPay}\n      className=\"shop__header__icons__gopay\"\n      alt=\"GoPay\"\n      data-testid=\"ShopHeaderIcons__GoPayLogo\"\n    />\n  </ColStyle>\n)\n","import { DateFormat, Plural, Trans } from '@lingui/react'\nimport { isSameDay } from 'date-fns'\nimport React from 'react'\nimport styled from 'styled-components'\n\nimport { useRoot } from '../../common/WithRoot'\nimport { GCompanyBranchStatus } from '../../graph/types'\nimport { useShopStatus } from '../../hooks/useShopStatus'\n\ninterface IProps {\n  status: GCompanyBranchStatus.Fragment\n  deliveryTime: number\n  pickupTime: number\n}\n\nexport const StatusDisplayOpen = styled.span`\n  font-style: italic;\n  color: #0f9849;\n`\n\nexport const StatusDisplayClosed = styled.span`\n  font-style: italic;\n  color: #b40000;\n`\n\nexport const ShopStatusDisplay: React.FC<IProps> = ({\n  status,\n  deliveryTime,\n  pickupTime,\n}) => {\n  const { order } = useRoot()\n  const { decision, openingIn, closingIn } = useShopStatus({\n    status,\n  })\n\n  if (!status) {\n    return null\n  }\n\n  if (status.isOpen === false) {\n    if (!status.willOpenAt) {\n      return (\n        <StatusDisplayClosed>\n          <Trans>We are closed until further notice</Trans>\n        </StatusDisplayClosed>\n      )\n    }\n    const closestBH = status.businessHours[0]\n    if (closestBH && closestBH.closedNote) {\n      return <StatusDisplayClosed>{closestBH.closedNote}</StatusDisplayClosed>\n    }\n  }\n\n  switch (decision) {\n    case 'Open':\n      return (\n        <StatusDisplayOpen data-testid=\"statusDisplayOpen\">\n          {order.usingDeliveryOrderMethod ? (\n            <Trans>We are delivering in {deliveryTime} minutes</Trans>\n          ) : (\n            <Trans>We can prepare your order in {pickupTime} minutes</Trans>\n          )}\n        </StatusDisplayOpen>\n      )\n    case 'OpeningSoon':\n      return (\n        <StatusDisplayClosed>\n          <Plural\n            value={openingIn}\n            one=\"Opening in 1 minute\"\n            other=\"Opening in # minutes\"\n          />\n        </StatusDisplayClosed>\n      )\n    case 'ClosingSoon':\n      return (\n        <StatusDisplayOpen>\n          <Plural\n            value={closingIn}\n            one=\"Closing in 1 minute\"\n            other=\"Closing in # minutes\"\n          />\n        </StatusDisplayOpen>\n      )\n    case 'Closed':\n      return (\n        <StatusDisplayClosed>\n          {status.willOpenAt ? (\n            <Trans>We will open at {formatOpenTime(status.willOpenAt)}</Trans>\n          ) : (\n            <Trans>Closed</Trans>\n          )}\n        </StatusDisplayClosed>\n      )\n  }\n}\n\nexport function formatOpenTime(openAt: string) {\n  const openAtDate = new Date(openAt)\n  const nowDate = new Date()\n  let format: Intl.DateTimeFormatOptions = {\n    hour: 'numeric',\n    minute: 'numeric',\n  }\n  if (!isSameDay(openAtDate, nowDate)) {\n    format = {\n      ...format,\n      weekday: 'long',\n    }\n  }\n  return <DateFormat value={openAtDate} format={format} />\n}\n","import { Trans } from '@lingui/react'\nimport React from 'react'\nimport { Button } from 'reactstrap'\nimport styled from 'styled-components'\n\nimport { PrimaryRoutedButton } from '../../common/Buttons'\nimport { Desktop, Mobile } from '../../common/Responsive'\nimport { GFinishView } from '../../graph/types'\nimport { i18n } from '../../i18n'\n\ninterface IProps {\n  finish: GFinishView.Query\n}\nconst CenteredButtonContainer = styled.div`\n  text-align: center;\n`\n\nexport const FinishViewFooter: React.SFC<IProps> = ({\n  finish: { androidApp, iosApp },\n}) => (\n  <>\n    <Desktop>\n      {(androidApp || iosApp) && (\n        <div className=\"finish__view__apps__propagation\">\n          <div className=\"finish__view__apps__propagation__header\">\n            <Trans>What about mobile app?</Trans>\n          </div>\n          <div className=\"finish__view__apps__propagation__description\">\n            <Trans>\n              We have prepared mobile app, so you could order from anywhere!\n            </Trans>\n          </div>\n\n          {androidApp && (\n            <a href={androidApp.url}>\n              <Button\n                className=\"finish__view__apps__propagation__button\"\n                color=\"secondary\"\n              >\n                Google Play\n              </Button>\n            </a>\n          )}\n\n          {iosApp && (\n            <a href={iosApp.url}>\n              <Button\n                className=\"finish__view__apps__propagation__button\"\n                color=\"secondary\"\n              >\n                App Store\n              </Button>\n            </a>\n          )}\n        </div>\n      )}\n      <CenteredButtonContainer>\n        <PrimaryRoutedButton\n          to=\"/\"\n          className=\"finish__view__submit__line__button\"\n          data-testid=\"finishViewFooterBackButton\"\n        >\n          {i18n.t`Back to home page`.toLocaleUpperCase()}\n        </PrimaryRoutedButton>\n      </CenteredButtonContainer>\n    </Desktop>\n\n    <Mobile>\n      <div\n        className=\"finish__view__submit__line\"\n        style={{ textAlign: 'center' }}\n      >\n        <div className=\"finish__view__submit__line__strip\" />\n        <PrimaryRoutedButton\n          to=\"/\"\n          className=\"finish__view__submit__line__button\"\n          data-testid=\"finishViewFooterBackButton\"\n        >\n          {i18n.t`Back to home page`.toLocaleUpperCase()}\n        </PrimaryRoutedButton>\n      </div>\n    </Mobile>\n  </>\n)\n","import React from 'react'\n\nimport { WithOrder } from '../../common/WithOrder'\nimport { GFinishView } from '../../graph/types'\n\nimport { QueryFinishView } from './FinishView.graphql'\n\ninterface IProps {\n  render(result: GFinishView.Query): ReactNode\n}\n\nexport const FinishViewLoader: React.SFC<IProps> = ({ render }) => (\n  <WithOrder\n    redirect={true}\n    render={order => (\n      <QueryFinishView\n        variables={{\n          branchId: order.branchId!,\n          orderId: order.orderId!,\n        }}\n        render={data => render(data)}\n      />\n    )}\n  />\n)\n","import { Trans } from '@lingui/react'\nimport React from 'react'\nimport styled from 'styled-components'\n\nimport { GFinishViewOrder, PaymentGateEnum } from '../../graph/types'\nimport { RM } from '../../helpers/ramda'\nimport { i18n } from '../../i18n'\n\ninterface IProps {\n  order: GFinishViewOrder.Fragment\n}\n\nconst HeaderThemed = styled.div`\n  background-color: ${({ theme }) => theme.primary};\n`\n\nconst PriceThemed = styled.div`\n  background-color: ${({ theme }) => theme.primary};\n`\n\nconst PriceCornerThemed = styled.div`\n  border-top-color: ${({ theme }) => theme.primary} !important;\n`\n\nexport const FinishViewOrder: React.SFC<IProps> = ({ order }) => (\n  <>\n    <HeaderThemed className=\"finish__view__header\">\n      <div className=\"finish__view__header__inner\">\n        <span className=\"flaticon-transport-1 finish__view__header__icon\" />\n        <h3>\n          <Trans>It's done! Thank you :-)</Trans>\n        </h3>\n      </div>\n    </HeaderThemed>\n    <h4>\n      <Trans>Your order was successfully accepted!</Trans>{' '}\n      {getPaymentInfo(order)}\n    </h4>\n    <div className=\"finish__view__items\">\n      <div className=\"finish__view__items__look__to\">\n        <Trans>You can look forward to:</Trans>\n      </div>\n      {order.items.map(item => (\n        <OrderItem key={item.id} {...item} />\n      ))}\n      <PriceCornerThemed className=\"finish__view__items__price__corner\" />\n      <PriceThemed className=\"finish__view__items__price\">\n        {getPaymentPrice(order)} <b>{order.totalSum.formattedValue}</b>\n      </PriceThemed>\n    </div>\n  </>\n)\n\nconst hasMethod = RM.pathEq(['paymentMethod', 'paymentType', 'enum'])\n\nfunction getPaymentInfo({ orderPayments }: GFinishViewOrder.Fragment) {\n  if (orderPayments.some(hasMethod(PaymentGateEnum.Cash))) {\n    return i18n.t`You will pay at pickup.`\n  }\n  if (orderPayments.some(hasMethod(PaymentGateEnum.Gopay))) {\n    return i18n.t`You have payed.`\n  }\n  return null\n}\n\nfunction getPaymentPrice({\n  orderPayments,\n  totalSum,\n}: GFinishViewOrder.Fragment) {\n  if (orderPayments.some(hasMethod(PaymentGateEnum.Cash))) {\n    return i18n.t`Total cost to be payed:`\n  }\n  if (orderPayments.some(hasMethod(PaymentGateEnum.Gopay))) {\n    return i18n.t`Total cost payed:`\n  }\n  return null\n}\n\nfunction OrderItem({ recipe, sideDishes }: GFinishViewOrder.Items) {\n  return (\n    <div>\n      <b>{recipe.nameLabel}</b>\n      {sideDishes.length\n        ? ` + ${sideDishes.map(RM.path(['recipe', 'nameLabel'])).join(',')}`\n        : null}\n    </div>\n  )\n}\n","import { Trans } from '@lingui/react'\nimport React from 'react'\nimport styled from 'styled-components'\n\nimport { GFinishView } from '../../graph/types'\n\ninterface IProps {\n  branch: GFinishView.CompanyBranch\n}\n\nconst PhoneNumberLinkStyled = styled.a`\n  color: inherit;\n  text-decoration: none;\n  &:hover {\n    text-decoration: underline;\n  }\n`\n\nexport const FinishViewSupport: React.SFC<IProps> = ({ branch }) => (\n  <div className=\"finish__view__support\">\n    <h4>\n      <Trans>Any question? Do you have a problem? Call:</Trans>\n    </h4>\n    <span className=\"flaticon-technology finish__view__support__icon\" />\n    <span className=\"finish__view__support__phone\">\n      <PhoneNumberLinkStyled href={`tel:${branch.phone}`}>\n        {branch.phone}\n      </PhoneNumberLinkStyled>\n    </span>\n  </div>\n)\n","import './OrderMethod.css'\n\nimport { Observer } from 'mobx-react'\nimport React from 'react'\n\nimport { SelectButtonThemed } from '../../common/Buttons'\nimport { WithRoot } from '../../common/WithRoot'\nimport { DeliveryTypeEnum } from '../../graph/types'\nimport { RM } from '../../helpers/ramda'\nimport { i18n } from '../../i18n'\nimport { TOrderModel } from '../../models/OrderModel'\n\ninterface IProps {\n  onChange?(order: TOrderModel): void\n}\n\ninterface IButtonProps {\n  orderModel: TOrderModel\n  orderMethod: DeliveryTypeEnum\n  onChange(order: TOrderModel): void\n  onPrefetch?(): void\n}\n\nconst OrderMethodButton: React.SFC<IButtonProps> = ({\n  orderModel,\n  orderMethod,\n  onChange,\n  onPrefetch,\n  children,\n}) => (\n  <Observer>\n    {() => (\n      <SelectButtonThemed\n        selected={orderModel.orderMethod === orderMethod}\n        onMouseEnter={onPrefetch}\n        onClick={() => {\n          orderModel.useOrderMethod(orderMethod)\n          onChange(orderModel)\n        }}\n        data-testid={`orderMethod-${orderMethod}`}\n        data-testselected={orderModel.orderMethod === orderMethod}\n      >\n        {children}\n      </SelectButtonThemed>\n    )}\n  </Observer>\n)\n\nexport const OrderMethod: React.SFC<IProps> = ({ onChange }) => (\n  <WithRoot\n    observe={false}\n    render={({ order }) => (\n      <div className=\"order__method\">\n        <OrderMethodButton\n          orderModel={order}\n          orderMethod={DeliveryTypeEnum.Messenger}\n          onChange={onChange || RM.identity}\n        >\n          <span className=\"flaticon-transport\" />\n          {i18n.t`I want to deliver`.toLocaleUpperCase()}\n        </OrderMethodButton>\n        <OrderMethodButton\n          orderModel={order}\n          orderMethod={DeliveryTypeEnum.Pickup}\n          onChange={onChange || RM.identity}\n          onPrefetch={order.prefetchPickup}\n        >\n          <span className=\"flaticon-restaurant\" />\n          {i18n.t`I'll pick up`.toLocaleUpperCase()}\n        </OrderMethodButton>\n      </div>\n    )}\n  />\n)\n","import './DeliveryMap.css'\n\nimport { when } from 'mobx'\nimport { useDisposable, useObserver } from 'mobx-react-lite'\nimport React, { useCallback } from 'react'\nimport { useQuery } from 'react-apollo-hooks'\nimport { Marker } from 'react-google-maps'\n\nimport { useRoot } from '../../common/WithRoot'\nimport { GInitialLocation } from '../../graph/types'\nimport { latLngToGps } from '../../helpers/gps'\nimport { AddressInput } from '../destination/AddressInput'\nimport { AddressSubmit } from './AddressSubmit'\nimport { InitialMapLocationQuery } from './DeliveryMap.graphql'\nimport { DeliveryMapPanning } from './DeliveryMapPanning'\n\ninterface IProps {\n  onConfirm(): void\n}\n\nexport const DeliveryMap: React.FC<IProps> = ({ onConfirm }) => {\n  const { business, order, location } = useRoot()\n  const { data } = useQuery<GInitialLocation.Query>(InitialMapLocationQuery)\n\n  const onSubmit = useCallback(\n    async () => {\n      if (location.branchId) {\n        order.setBranch(location.branchId)\n      }\n      await order.createDeliveryOrder()\n      onConfirm()\n    },\n    [onConfirm],\n  )\n\n  useDisposable(() =>\n    when(() => business.isValid, location.validateUserLocation),\n  )\n\n  return useObserver(() => (\n    <>\n      <DeliveryMapPanning\n        initialLocation={data ? data.initialLocation.gpsCoordinates : null}\n      />\n      {location.latLng ? (\n        <Marker\n          position={location.latLng}\n          defaultDraggable={true}\n          onDragEnd={({ latLng }) => {\n            location.withUserLocation(latLngToGps(latLng))\n          }}\n        />\n      ) : null}\n      <div className=\"delivery__map__address\">\n        <AddressInput />\n      </div>\n      <div className=\"delivery__map__submit\">\n        <AddressSubmit\n          enabled={location.isDeliveryAddress}\n          onClick={onSubmit}\n          onPrefetch={() => {\n            if (location.branchId) {\n              order.prefetchFoodMenu(location.branchId)\n            }\n          }}\n        />\n      </div>\n    </>\n  ))\n}\n","import './ButtonStripe.css'\n\nimport React from 'react'\n\nconst ButtonStripe: React.SFC = ({ children }) => (\n  <div className=\"button__stripe\">\n    <div className=\"button__stripe__bar\" />\n    <div className=\"button__stripe__button\">{children}</div>\n  </div>\n)\n\nexport default ButtonStripe\n","import { autorun } from 'mobx'\nimport { useDisposable } from 'mobx-react-lite'\nimport React from 'react'\n\nimport { GeoPoint } from '../../../helpers/gps'\nimport { TMapModel } from '../../../models/MapModel'\n\ninterface IProps {\n  gps: GeoPoint | undefined\n  map: TMapModel\n}\n\nexport const MapPanning: React.FC<IProps> = ({ map, gps }) => {\n  useDisposable(\n    () =>\n      autorun(() => {\n        if (map.isReady && gps) {\n          map.panToLocation(gps)\n        }\n      }),\n    [gps],\n  )\n  return null\n}\n","import './CartView.css'\n\nimport React from 'react'\nimport { useQuery } from 'react-apollo-hooks'\n\nimport { GCartView } from '../../graph/types'\nimport { AddToCartModal } from './AddToCartModal'\nimport { CartContents } from './CartContents'\nimport { CartIsEmpty } from './CartIsEmpty'\nimport { CartViewQuery } from './CartView.graphql'\nimport { ChangeCartModal } from './ChangeCartModal'\nimport { useCartRefresh } from './useCartRefresh'\n\ninterface IProps {\n  orderId: MaybeID\n}\n\nexport const CartView: React.FC<IProps> = ({ orderId }) => {\n  const { data, refetch } = useQuery<GCartView.Query, GCartView.Variables>(\n    CartViewQuery,\n    { suspend: false, skip: !orderId, variables: { orderId: orderId! } },\n  )\n\n  useCartRefresh(refetch)\n\n  return (\n    <>\n      <AddToCartModal />\n      <ChangeCartModal />\n      {!data || !data.order || data.order.countWares === 0 ? (\n        <CartIsEmpty />\n      ) : (\n        <CartContents order={data.order} />\n      )}\n    </>\n  )\n}\n","import { Trans } from '@lingui/react'\nimport React from 'react'\nimport { Route } from 'react-router-dom'\nimport { Alert } from 'reactstrap'\n\nimport { Mobile } from '../../common/Responsive'\nimport { useRoot } from '../../common/WithRoot'\nimport { buildQuery } from '../../graph'\nimport { GOrderCartForRecipe } from '../../graph/types'\nimport { OrderCartForRecipeQuery } from '../../models/OrderModel.graphql'\nimport { CartModal } from './CartModal'\n\nconst QueryCart = buildQuery<\n  GOrderCartForRecipe.Query,\n  GOrderCartForRecipe.Variables\n>(OrderCartForRecipeQuery)\n\nexport const AddToCartModal: React.FC = () => {\n  const { order: orderModel } = useRoot()\n  return (\n    <Route\n      path=\"/order/add/:recipeId\"\n      render={({ match, history }) => (\n        <QueryCart\n          variables={{ recipeId: match.params.recipeId }}\n          renderLoading={false}\n          renderError={() => (\n            <Alert color=\"warning\">\n              <Trans>Error in loading cart item. Issue was reported.</Trans>\n            </Alert>\n          )}\n          render={(data, { loading }) => (\n            <Mobile>\n              {isMobile => (\n                <CartModal\n                  recipe={data.recipe}\n                  onConfirm={sideDishes => {\n                    if (isMobile) {\n                      orderModel.addFromRecipeMobile(\n                        match.params.recipeId,\n                        sideDishes,\n                      )\n                      // let the optimistic response happen in this case\n                      return Promise.resolve()\n                    }\n                    return orderModel.addFromRecipe(\n                      match.params.recipeId,\n                      sideDishes,\n                    )\n                  }}\n                  onClose={() => history.goBack()}\n                  isLoading={loading}\n                />\n              )}\n            </Mobile>\n          )}\n        />\n      )}\n    />\n  )\n}\n","import { Trans } from '@lingui/react'\nimport { observable } from 'mobx'\nimport React from 'react'\nimport { Container, Modal, ModalBody, ModalHeader } from 'reactstrap'\n\nimport '../../common/Modal.css'\nimport { GCartRecipe } from '../../graph/types'\n\nimport { SidedishPicker } from '../sidedishPicker/SidedishPicker'\nimport { CartOrderButton } from './CartOrderButton'\n\ninterface IProps {\n  recipe: GCartRecipe.Fragment | undefined\n  initialSelection?: ID[]\n  isLoading: boolean\n  onConfirm(selection: ID[]): Promise<void>\n  onClose(): void\n}\n\nexport const CartModal: React.SFC<IProps> = ({\n  recipe,\n  initialSelection = [],\n  onConfirm,\n  onClose,\n  isLoading,\n}) => {\n  const selection = observable.array<ID>(initialSelection)\n\n  const onConfirmAndClose = async () => {\n    await onConfirm(Array.from(selection))\n    onClose()\n  }\n\n  const onToggleSidedish = (sidedishId: ID) => {\n    if (selection.includes(sidedishId)) {\n      selection.remove(sidedishId)\n    } else {\n      selection.push(sidedishId)\n    }\n  }\n\n  return (\n    <Modal\n      isOpen={true}\n      toggle={onClose}\n      className=\"modal__container\"\n      autoFocus={true}\n      backdrop=\"static\"\n      fade={false}\n    >\n      <ModalHeader toggle={onClose} tag={Container} className=\"modal__header\">\n        <span>\n          <Trans>Do you want to add something?</Trans>\n        </span>\n      </ModalHeader>\n      <ModalBody className=\"modal__body\">\n        <div className=\"modal__body__content\">\n          {isLoading || !recipe ? null : (\n            <>\n              <h3 className=\"modal__body__food__name\">{recipe.nameLabel}</h3>\n              <span className=\"modal__body__food_description\">\n                {recipe.descriptionLabel}\n              </span>\n              <SidedishPicker\n                recipe={recipe}\n                selection={selection}\n                onToggle={onToggleSidedish}\n              />\n            </>\n          )}\n        </div>\n        <div className=\"modal__body__button__line\">\n          <div className=\"modal__body__button__strip\" />\n          <CartOrderButton\n            selection={selection}\n            onConfirm={onConfirmAndClose}\n            enabled={!isLoading}\n          />\n        </div>\n      </ModalBody>\n    </Modal>\n  )\n}\n","import React from 'react'\nimport { Button, ButtonProps } from 'reactstrap'\nimport styled from 'styled-components'\n\ninterface IProps extends ButtonProps {\n  isSelected: boolean\n  canBeSelected: boolean\n  width: string\n}\n\nconst PickerButtonStyled = styled(\n  ({ isSelected, canBeSelected, width, ...props }) => <Button {...props} />,\n)`\n  border-radius: 0.6rem;\n  margin: 0.5rem;\n  background-color: ${props =>\n    props.isSelected ? props.theme.tertiary : 'transparent'} !important;\n  color: ${props =>\n    props.isSelected ? props.theme.tertiaryText : 'initial'} !important;\n  &:hover {\n    border-color: ${({ theme }) => theme.tertiaryHover} !important;\n  }\n  width: ${props => props.width};\n  @media (max-width: 370px) {\n    width: 100%;\n  }\n  &.btn-outline-secondary {\n    color: #2e2e2e;\n    border-color: #d4d4d4;\n  }\n  &.btn-outline-secondary.active {\n    color: white;\n  }\n`\n\nexport const PickerButton: React.FC<IProps> = ({\n  isSelected,\n  canBeSelected,\n  onSelect,\n  children,\n  ...buttonProps\n}) => {\n  return (\n    <PickerButtonStyled\n      disabled={!canBeSelected && !isSelected}\n      isSelected={isSelected}\n      {...buttonProps}\n    >\n      {children}\n    </PickerButtonStyled>\n  )\n}\n","import React from 'react'\nimport styled, { css } from 'styled-components'\n\ninterface IButtonProps {\n  color: string\n  enabled?: boolean\n  data_testid?: string\n}\n\ninterface IIconProps {\n  icon: string\n}\n\ninterface IProps extends IButtonProps, IIconProps {\n  onClick?(): void\n}\n\nconst CartItemButtonStyled = styled.div<IButtonProps>`\n  display: inline-block;\n  border-radius: 3rem;\n  background: white;\n  width: 1.8rem;\n  height: 1.8rem;\n  text-align: left;\n  vertical-align: top;\n  padding: 0 0 0 0rem;\n  margin: 0.3rem 0.1rem 0 0.1rem;\n  ${getButtonColor};\n  ${getHoverStyle};\n`\n\nfunction getButtonColor({ color, enabled }: IButtonProps) {\n  const useColor = enabled ? color : '#8d8d8d'\n  return css`\n    color: ${useColor};\n    border: 2px solid ${useColor};\n  `\n}\n\nfunction getHoverStyle({ enabled }: IButtonProps) {\n  return enabled\n    ? css`\n        cursor: pointer;\n        &:hover {\n          background: #c9e8d7;\n          color: #1d1d1d;\n          border-color: #1d1d1d;\n        }\n      `\n    : css`\n        cursor: default;\n      `\n}\n\nconst CartItemButtonIcon = styled.span<IIconProps>`\n  &:before {\n    font-size: 0.8rem;\n    margin-left: 0.36rem;\n  }\n`\n\nexport const CartItemButton: React.SFC<IProps> = ({\n  color,\n  icon,\n  onClick,\n  enabled = true,\n  data_testid,\n}) => {\n  return (\n    <CartItemButtonStyled\n      color={color}\n      enabled={enabled}\n      onClick={onClick}\n      onDoubleClick={ev => ev.preventDefault()}\n      data-testid={data_testid}\n    >\n      <CartItemButtonIcon icon={icon} className={`flaticon-${icon}`} />\n    </CartItemButtonStyled>\n  )\n}\n","import { reaction } from 'mobx'\nimport { useDisposable } from 'mobx-react-lite'\n\nimport { useRoot } from '../../common/WithRoot'\n\nexport function useCartRefresh(onRefresh: () => void) {\n  const { order: orderModel } = useRoot()\n  return useDisposable(() =>\n    reaction(\n      () => orderModel.shouldRefreshCart,\n      () => {\n        orderModel.setCartRefresh(false)\n        onRefresh()\n      },\n    ),\n  )\n}\n","import { useObserver } from 'mobx-react-lite'\nimport React from 'react'\n\nimport { useRoot } from '../../common/WithRoot'\nimport { GCartPresence } from '../../graph/types'\nimport CategoryNavigator from './CategoryNavigator'\nimport { FoodMenu } from './FoodMenu'\nimport {\n  QueryFoodMenu,\n  QueryFoodMenuCartPresence,\n} from './FoodMenuView.graphql'\nimport { OrderLimitModal } from './OrderLimitModal'\n\nexport const FoodMenuView: React.FC = () => {\n  const { order: orderModel } = useRoot()\n  return useObserver(() => (\n    <QueryFoodMenu\n      skip={!orderModel.branchId}\n      variables={{\n        branchId: orderModel.branchId!,\n      }}\n      render={({ wareCategories }) => (\n        <>\n          <OrderLimitModal />\n          <CategoryNavigator categories={wareCategories} />\n          <QueryFoodMenuCartPresence\n            variables={{ orderId: orderModel.orderId! }}\n            renderLoading={false}\n            render={({ order }, { loading }) => (\n              <FoodMenu\n                categories={wareCategories}\n                rootModel={orderModel.root}\n                inCart={getCartPresence(order && order.items)}\n                orderItemCount={order ? order.items.length : 0}\n                shouldUpdate={Boolean(order && !loading)}\n              />\n            )}\n          />\n        </>\n      )}\n    />\n  ))\n}\n\nfunction getCartPresence(items: ReadonlyArray<GCartPresence.Items>) {\n  if (!items) {\n    return {}\n  }\n  return items.reduce((result, item) => {\n    const recipeId = item.recipe.id\n    if (!result[recipeId]) {\n      result[recipeId] = 0\n    }\n    result[recipeId] += 1\n    return result\n  }, {})\n}\n"],"sourceRoot":""}