{"version":3,"sources":["common/ButtonStrip.tsx","segments/orderForm/OrderFormAutoFill.tsx","segments/orderForm/OrderErrorModal.tsx","segments/orderForm/OrderGoPayModal.tsx","segments/orderForm/OrderFormTipInput.tsx","segments/orderForm/OrderPromoInput.tsx","segments/orderForm/OrderSubmitButton.tsx","segments/orderForm/OrderTimeButtons.tsx","segments/orderForm/OrderFormStorageNotice.tsx","segments/map/AddressSubmit.tsx","segments/map/destination/AddressSearchInput.tsx","hooks/useDebounce.ts","segments/map/destination/GeolocationButton.tsx","segments/map/destination/ResolvedAddress.tsx","segments/map/hooks/useAddressSearch.ts","segments/map/ExtraAddressResult.tsx","segments/map/DeliveryAddressSearch.tsx","segments/map/DeliveryMap.tsx","hooks/useLocationResolver.ts","segments/map/hooks/useDeliveryMapPanning.ts","segments/sidedishPicker/CategoryValidationMessage.tsx","segments/sidedishPicker/SidedishRemoveButton.tsx","segments/sidedishPicker/SidedishCheckbox.tsx","segments/sidedishPicker/SidedishPicker.tsx","segments/cart/CartOrderButton.tsx","segments/cart/CartModal.tsx","segments/cart/AddToCartModal.tsx","segments/cart/ChangeCartModal.tsx","segments/cart/CartView.tsx","segments/foodMenu/CategoryNavigator.tsx","segments/foodMenu/FoodCategory.tsx","segments/foodMenu/FoodMenuItem.tsx","segments/foodMenu/FoodMenu.tsx","segments/foodMenu/hooks/useFoodMenuPresence.ts","segments/foodMenu/OrderLimitModal.tsx","segments/foodMenu/FoodMenuView.tsx","segments/orderForm/OrderEmailInput.tsx","segments/orderForm/OrderNameInput.tsx","segments/orderForm/OrderNoteInput.tsx","segments/orderForm/OrderPhoneInput.tsx","segments/orderForm/OrderFormInputs.tsx","segments/timePicker/createTimeSteps.ts","segments/timePicker/TimePickerButton.tsx","segments/timePicker/TimePicker.tsx","segments/orderForm/OrderTimePicker.tsx","forms/FormCheckbox.tsx","segments/orderForm/OrderAgreementBox.tsx","segments/orderForm/OrderAgreements.tsx","segments/map/destination/OrderMethodButton.tsx","segments/map/destination/OrderMethod.tsx","segments/cart/CartSystem.tsx","segments/cart/hooks/useCartControl.ts","segments/orderForm/OrderPaymentButton.tsx","segments/orderForm/OrderPaymentMethod.tsx","common/ColStyle.tsx","forms/FormTextInput.tsx","hooks/useShopStatus.ts","hooks/useEmptyOrderRedirect.ts","common/ShopAddress.tsx","common/BackgroundThemed.tsx","segments/map/hooks/usePickupMapQuery.ts","common/BaseMap.tsx","segments/foodMenu/hooks/useFoodMenuQuery.ts","segments/orderForm/OrderFormMemory.ts","segments/orderForm/OrderFormSetup.tsx","segments/orderForm/hooks/useOrderPayment.ts","common/LanguagePicker.tsx","segments/shop/ShopClosingTimeModal.tsx","segments/shop/ShopHeaderIcons.tsx","segments/shop/ShopStatusDisplay.tsx","segments/finish/FinishViewFooter.tsx","segments/finish/FinishViewLoader.tsx","segments/finish/FinishViewOrder.tsx","segments/finish/FinishViewSupport.tsx","common/ButtonStripe.tsx","segments/map/hooks/useMapPanning.ts","common/MapBranchMarker.tsx","hooks/useAddToCart.ts","common/PickerButton.tsx"],"names":["StyledButtonStrip","styled","div","withConfig","displayName","componentId","mediaMobile","_templateObject","ButtonStrip","_ref","children","react__WEBPACK_IMPORTED_MODULE_2___default","a","createElement","className","__webpack_require__","d","__webpack_exports__","OrderFormAutoFill","formik__WEBPACK_IMPORTED_MODULE_1__","_hooks_useOrderModel__WEBPACK_IMPORTED_MODULE_4__","useOrderModel","useFormikContext","OrderErrorModal","order","useRoot","useObserver","react__WEBPACK_IMPORTED_MODULE_3___default","reactstrap__WEBPACK_IMPORTED_MODULE_4__","isOpen","hasErrors","toggle","clearErrors","reactstrap__WEBPACK_IMPORTED_MODULE_5__","tag","Container","_lingui_react__WEBPACK_IMPORTED_MODULE_0__","id","reactstrap__WEBPACK_IMPORTED_MODULE_7__","submitErrors","map","error","idx","key","reactstrap__WEBPACK_IMPORTED_MODULE_8__","color","onClick","TextPadding","OrderGoPayModal","orderModel","_common_AlertModal__WEBPACK_IMPORTED_MODULE_5__","isGoPayChecking","headerText","_lingui_react__WEBPACK_IMPORTED_MODULE_1__","_common_Pacman__WEBPACK_IMPORTED_MODULE_6__","noMargin","StyledOrderFormTipInput","OrderFormTipInput","observer","_useRoot","cart","_useMOrderTipUpdate","useMOrderTipUpdate","updateTip","Object","D_workspace_deepvision_doveze_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__","useReaction","usingPaymentMethodWithTips","Number","tips","orderId","withGoods","react__WEBPACK_IMPORTED_MODULE_4___default","reactstrap_lib_FormGroup__WEBPACK_IMPORTED_MODULE_5___default","reactstrap_lib_Input__WEBPACK_IMPORTED_MODULE_6___default","type","value","onChange","ev","setTips","parseInt","target","disabled","disableInteraction","data-testid","_i18n__WEBPACK_IMPORTED_MODULE_9__","_","CodesPanel","OrderPromoInput","React","memo","_useAlertModal","useAlertModal","_useAlertModal2","D_workspace_deepvision_doveze_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_2__","errorModal","showError","_useQOrderPromoCodes","useQOrderPromoCodes","skip","data","loading","_useMOrderPromoAdd","useMOrderPromoAdd","addCodeMutation","_useMOrderPromoRemove","useMOrderPromoRemove","removeCodeMutation","onCodeAdd","useCallback","D_workspace_deepvision_doveze_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__","D_workspace_deepvision_doveze_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default","mark","_callee","code","wrap","_context","prev","next","abrupt","stop","_x","apply","this","arguments","onCodeRemove","_ref2","_callee2","codeId","_context2","_x2","_useOrderPromoCodes","useOrderPromoCodes","onCodeErrors","errors","_i18n__WEBPACK_IMPORTED_MODULE_14__","react__WEBPACK_IMPORTED_MODULE_6___default","msg","getValidatingMessage","inputProps","inputRef","codes","promoCodes","reactstrap__WEBPACK_IMPORTED_MODULE_9__","assign","innerRef","autoComplete","placeholder","_ref3","_common_Buttons__WEBPACK_IMPORTED_MODULE_11__","role","concat","OrderSubmitButton","_speedlo_hooks__WEBPACK_IMPORTED_MODULE_0__","react__WEBPACK_IMPORTED_MODULE_2__","n","react_spinkit__WEBPACK_IMPORTED_MODULE_3__","react_spinkit__WEBPACK_IMPORTED_MODULE_3___default","_common_Buttons__WEBPACK_IMPORTED_MODULE_4__","_graph_generated__WEBPACK_IMPORTED_MODULE_5__","_hooks_useOrderModel__WEBPACK_IMPORTED_MODULE_6__","formik","history","useRouterContext","_useQOrderForm","useQOrderForm","useEffect","hasOrder","orderStateCategory","OrderStateCategoryEnum","InCart","replace","canSubmit","countWares","isVamInitialized","Fragment","size","isSubmitting","name","fadeIn","StyledOrderTimeButtons","OrderTimeButtons","delayedOrderEnabled","isDelayed","deliverAt","selected","setDeliverAt","openTimePicker","format","weekday","hour","minute","NoticeButton","Button","StorageNotice","Alert","mediaDesktop","_templateObject2","OrderFormStorageNotice","user","rememberForm","_lingui_react__WEBPACK_IMPORTED_MODULE_2__","setFormRememberYes","setFormRememberNo","AddressSubmit","enabled","react_default","ButtonStripe","Buttons","i18n","AddressSearchInput","onSearch","isVisible","location","useRef","current","focus","onSearchDebounced","cb","time","length","undefined","deps","debounced","debounce","toConsumableArray","clear","useDebounce","Input","cn","hidden","search","setSearchValue","trim","clearAddress","onKeyPress","onFocus","select","searchValue","GeolocationButton","slicedToArray","alert","makeAlert","isGeolocationAvailable","isResolving","log","navigator","geolocation","getCurrentPosition","coords","latitude","longitude","accuracy","setGeolocationPoint","err","disableGeolocation","enableHighAccuracy","maximumAge","ResolvedAddress","address","onValidClick","wait","react_spinkit_dist_default","urlCache","Map","useAddressSearch","_ref$count","count","_ref$watchLocation","watchLocation","state","useLocalStore","results","phrase","searching","url","params","zoom","join","doFetch","has","get","fetch","then","resp","json","result","filter","validateResult","mapResult","set","finally","debouncedFetch","nextPhrase","reaction","objectSpread","userData","category","suggestFirstRow","suggestSecondRow","suffix","municipality","district","country","find","Boolean","gps","Styled","ExtraAddressResult","props","open","_useAddressSearch","hasSearchValue","usefulResults","bounceInLeft","bounceIn","toString","_lingui_react","setSearchResult","theme","secondary","DeliveryAddressSearch","setIsResolving","setAsNotResolved","singleResult","_singleResult$gps","mapRef","panTo","gpsToLatLngLit","startsWith","setAsNotAddress","resetResolution","DeliveryAddressSearch_Styled","ResolvedAddress_ResolvedAddress","hasAddress","destination_GeolocationButton","ErrorMessage","hasResolutionResult","isResolved","isStreetAddress","inDeliveryLocation","StyledDeliveryMap","DeliveryMap","onConfirm","business","resolver","_useExecutableQResolv","useExecutableQResolveLocation","fetchPolicy","resolveLocation","asyncToGenerator","regenerator_default","resolutionTarget","sent","setResolutionResult","useLocationResolver","resolveUserLocation","setLocation","useWhen","isValid","hasLocation","geoPoint","clickPoint","clearClickPoint","useFoodMenuQuery","isDeliveryAddress","branchId","_useQInitialDeliveryL","useQInitialDeliveryLocation","source","useAsObservableSource","initial","panToGps","useMapPanning","useAutorun","geolocationPoint","gpsCoordinates","useDeliveryMapPanning","createDeliveryOrder","useOrderCreate","latLng","dist","position","draggable","onDragEnd","latLngToGps","AddressSubmit_AddressSubmit","CategoryValidationMessage","minCount","maxCount","message","values","style","StyledSidedishRemoveButton","primary","primaryHover","SidedishRemoveButton","_ref4","objectWithoutProperties","StyledSidedishCheckbox","SidedishCheckbox","sidedish","canBeSelected","canBeRemoved","onAdd","onRemove","buttonProps","PickerButton","outline","width","nameLabel","price","formattedValue","SidedishRemoveButton_SidedishRemoveButton","StyledSidedishPicker","SidedishPicker_templateObject","SidedishPicker","recipe","selection","_useSideDishValidator","useSideDishValidator","categories","isCategoryValid","react","CategoryValidationMessage_CategoryValidationMessage","sideDishes","i","isSelected","includes","_onAdd","_onRemove","CartOrderButton","_React$useState","useState","_React$useState2","isConfirming","setConfirming","heartBeat","every","catch","0","EMPTY_SELECTION","CartModal","isLoading","_ref$initialSideDishe","initialSideDishes","onClose","updateSelection","onCloseModal","onConfirmAndClose","onAddSidedish","sidedishId","sel","RM","append","onRemoveSidedish","remove","indexOf","es_Modal","autoFocus","backdrop","fade","ModalHeader","ModalBody","Pacman","descriptionLabel","SidedishPicker_SidedishPicker","AddToCartModal","recipeId","addToCartRecipeId","_useQCartRecipe","useQCartRecipe","executeAddToCart","useAddToCart","addToCart","CartModal_CartModal","ChangeCartModal","cartModel","itemId","changeCartItemId","_useQCartItem","useQCartItem","_useMChangeCartItem","useMChangeCartItem","changeItem","changeCartItem","sideDishesSelection","useMemo","item","path","CartView","_ref$isReadonly","isReadonly","CartSystem","StyledCategoryNavigator","CategoryNavigator","_useState","_useState2","activeCategoryIndex","setActiveCategoryIndex","modules_default","Link","to","active","onSetActive","offset","smooth","spy","title","pictogram","Truncate","lines","FoodCategoryStyled","FoodCategoryTitleStyled","FoodCategory_templateObject","Element","FoodMenuItemStyled","isActive","FoodMenuItem_templateObject","FoodMenuItemImage","img","FoodMenuItemPriceCorner","FoodMenuItemPrice","FoodMenuItem","_ref5","presence","onAddToCart","hasSideDishes","sideDishCount","_useExecutableQCartRe","useExecutableQCartRecipe","prefetchFoodItem","onMouseEnter","previousPresence","lastActiveRecipeId","image","src","alt","recipePresence","pulse","zoomIn","renderPresence","StyledFoodMenu","FoodMenu_templateObject","FoodMenu_templateObject2","_templateObject3","_templateObject4","config","_useQFoodMenuCartPres","useQFoodMenuCartPresence","observable","runInAction","forEach","useFoodMenuPresence","hasSideDish","orderItemsMax","showOrderLimit","setUsedRecipeId","foodMenu_FoodCategory","recipes","foodMenu_FoodMenuItem","OrderLimitModal","AlertModal","orderLimitAlertHidden","hideOrderLimit","FoodMenuView","_useFoodMenuQuery","refetch","language","wareCategories","cat","OrderLimitModal_OrderLimitModal","foodMenu_CategoryNavigator","foodMenu_FoodMenu","OrderEmailInput","FormGroup","FormTextInput","OrderNameInput","InputGroup","OrderNoteInput","ingredientsDescription","errorForceDisplay","FormText","OrderPhoneInput","isMobileSafari","UAParser","window","userAgent","getBrowser","OrderFormInputs_OrderFormInputs","OrderFormInputs","OrderNameInput_OrderNameInput","OrderPhoneInput_OrderPhoneInput","OrderEmailInput_OrderEmailInput","OrderNoteInput_OrderNoteInput","createTimeSteps","start","end","minuteStep","startOfMinute","addMinutes","subMinutes","getMinutes","timeClampDown","timeClampUp","steps","endMinute","endOfMinute","push","Time","TimePickerButton","node_modules_react_default","getTime","formatTime","TimePickerContainer","TimePickerDay","TimePicker","minDate","maxDate","onStepChange","initialTime","_ref$filterIntervals","filterIntervals","allSteps","step","some","isWithinInterval","days","eachDayOfInterval","stepIdx","setStepIdx","closestIndexTo","day","node_modules_react","getDate","month","isEqual","startOfDay","TimePickerButton_TimePickerButton","OrderTimePicker","root","_useQOrderTimePicker","useQOrderTimePicker","initialized","_useMOrderDeliveryTim","useMOrderDeliveryTime","updateOrder","selectedTime","companyBranch","delayedDeliveryEnabled","enableDelayedOrder","header","usingDeliveryOrderMethod","timePickerOpen","closeTimePicker","willOpenAt","Date","getStartTime","willCloseAt","nextBusinessHour","businessHours","propEq","closeAt","getEndTime","isAfter","minuteOffset","_data$companyBranch","defaultDeliveryTime","defaultPickupTime","usingPickupOrderMethod","getMinuteOffset","TimePicker_TimePicker","bhour","openAt","renderModalContent","isoDate","StyledFormCheckbox","StyledOrderAgreementBox","OrderAgreementBox","agreement","isCollapsed","titleNode","descriptionNode","invalid","onInvalid","setCustomValidity","isMandatory","htmlFor","toLocaleLowerCase","Collapse","EMPTY_ARRAY","OrderAgreements","extractVariables","variables","setVariables","updateVariablesLater","useDebounceCallback","_formik$values","firstname","lastname","phonePrefix","phone","input","_useQOrderFormAgreeme","useQOrderFormAgreements","agreements","hasFailed","initVam","_useVamAgreements","useVamAgreements","renderVamAgreements","setFieldValue","Array","from","confirmedAgreements","registerField","validate","unregisterField","AgreementBox","OrderMethodButton","orderMethod","useOrderMethod","data-testselected","StyledOrderMethod","OrderMethod","_ref$onChange","identity","OrderMethodButton_OrderMethodButton","DeliveryTypeEnum","Messenger","Pickup","useTheme","labels","getCartLabels","_useCartControl","client","useApolloClient","onItemEdit","_useMRemoveCartItem","useMRemoveCartItem","removeItem","onItemRemove","withPresence","optimisticResponse","makeOptimisticRemove","context","noBatch","onPlaceOrder","onChangeOrder","readQuery","query","QCartDocument","rejectItem","reject","idPropEq","__typename","totalSum","items","useCartControl","renderMobileSubmit","renderGoodsLoading","useCartSystem","colors","sumRowBg","sumRowText","mobileSummaryItemCount","mobileBreakpoint","backgroundImage","backgroundCart","autorun","updateDisplay","store","isMobile","showGoods","_useQCart","useQCart","updateSummary","updateGoods","renderCart","noSideDish","noCost","cartSumHeader","totalPrice","emptyCart","totalDiscount","coverPrice","transportFee","tip","minimalOrderPrice","OrderPaymentButton","paymentMethod","setPaymentMethod","Checkmark","show","StyledOrderPaymentMethod","OrderPaymentMethod","PaymentGateEnum","Gopay","Cash","ColStyle","ColStyleLeft","ColStyleRight","react__WEBPACK_IMPORTED_MODULE_0__","react__WEBPACK_IMPORTED_MODULE_0___default","reactstrap__WEBPACK_IMPORTED_MODULE_1__","sm","md","lg","xl","hiddenError","label","_ref$type","_ref$errorForceDispla","element","D_workspace_deepvision_doveze_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectWithoutProperties__WEBPACK_IMPORTED_MODULE_1__","_useField","useField","_useField2","field","meta","labelNode","for","touched","reactstrap__WEBPACK_IMPORTED_MODULE_6__","valid","tooltip","useShopStatus","date_fns__WEBPACK_IMPORTED_MODULE_1__","status","_ref$updateInterval","updateInterval","SECOND","_ref$openSoonThreshol","openSoonThresholdInMinutes","_ref$closeSoonThresho","closeSoonThresholdInMinutes","getNow","useNow","useTimer","interval","now","openingIn","differenceInMinutes","closingIn","decision","isSoon","threshold","Math","abs","useEmptyOrderRedirect","_app_useRoot__WEBPACK_IMPORTED_MODULE_1__","_useOrderModel__WEBPACK_IMPORTED_MODULE_2__","ShopAddress","_i18n__WEBPACK_IMPORTED_MODULE_1__","street","houseNumber","city","BackgroundThemed","imageName","_ref$fixed","fallbackColor","fixed","_ref$size","_ref$component","component","otherProps","D_workspace_deepvision_doveze_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectWithoutProperties__WEBPACK_IMPORTED_MODULE_0__","usePickupMapQuery","_app_useRoot__WEBPACK_IMPORTED_MODULE_0__","_graph_generated__WEBPACK_IMPORTED_MODULE_1__","useQPickupMap","branchSpecific","isBrand","brandId","getMapOptions","streetViewControl","mapTypeControl","fullscreenControl","clickableIcons","draggableCursor","minZoom","zoomControlOptions","google","maps","ControlPosition","RIGHT_CENTER","RIGHT_TOP","libraries","BaseMap","model","_ref$isMobile","_useLoadScript","useLoadScript","version","googleMapsApiKey","appConfig","googleMapsApi","isLoaded","loadError","googleMapUrl","googleAvailable","Reflect","Sentry","withScope","scope","setExtras","captureException","_react_google_maps_api__WEBPACK_IMPORTED_MODULE_1__","center","onCenterChanged","updatePosition","onZoomChanged","updateZoom","onLoad","setMapRef","onUnmount","options","mapContainerStyle","borderRadius","overflow","height","Provider","document","_Pacman__WEBPACK_IMPORTED_MODULE_7__","_graph_generated__WEBPACK_IMPORTED_MODULE_2__","useQFoodMenu","memoryKey","persistenceKey","catchError","setTag","writeMemory","done","localforage","setItem","email","note","OrderFormMemory","applyMemory","memory","keys","setFieldTouched","setMemoryApplied","getItem","when","getLegacyMemory","shouldRememberForm","memoryApplied","NOTE_MAX_LENGTH","OrderFormSetup","_useOrderPayment","paymentErrorModal","alertPaymentError","_useExecutableQOrderP","useExecutableQOrderPaymentStatus","executePaymentStatusCheck","_useGoPay","useGoPay","userToken","_args","goPayStatusCheck","invalidateWithToken","onError","branch","onFinish","executeGoPayPayment","paymentProcessing","paymentLoading","useOrderPayment","_useMSubmitOrder","useMSubmitOrder","submitOrder","validationSchema","Yup","shape","required","matches","notRequired","max","onSubmit","_result$submitOrder","userErrors","gopayUrl","submitStarted","getSubmitVariables","submitFailed","submitFinished","captureMessage","useFormik","initialValues","setOrderSubmitting","prefix","defaultPhonePrefix","formik_es_production","Form","handleSubmit","customer","firstName","lastName","emails","phones","paymentGate","LanguagePicker","_speedlo_ui__WEBPACK_IMPORTED_MODULE_0__","mobx_react_lite__WEBPACK_IMPORTED_MODULE_1__","_app_useRoot__WEBPACK_IMPORTED_MODULE_3__","availableLanguages","supportedLanguages","selectedLanguage","selectLanguage","setTimeout","reload","backgroundColor","arrowColor","ShopClosingTimeModal","_common_AlertModal__WEBPACK_IMPORTED_MODULE_4__","_hooks_useShopStatus__WEBPACK_IMPORTED_MODULE_5__","_i18n__WEBPACK_IMPORTED_MODULE_6__","_useShopStatus","closingTimeAlertHidden","hideClosingTime","ShopHeaderIcons","_speedlo_assets__WEBPACK_IMPORTED_MODULE_1__","getLogo","StatusDisplayOpen","span","StatusDisplayClosed","ShopStatusDisplay","deliveryTime","pickupTime","closestBH","closedNote","timingDisplay","defaultDeliveryTimeEnabled","defaultPickupTimeEnabled","formatOpenTime","openAtDate","nowDate","isSameDay","D_workspace_deepvision_doveze_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread__WEBPACK_IMPORTED_MODULE_0__","CenteredButtonContainer","FinishViewFooter","_ref$finish","finish","androidApp","iosApp","renderHomeButton","react_router_dom__WEBPACK_IMPORTED_MODULE_3__","_common_Buttons__WEBPACK_IMPORTED_MODULE_5__","_common_Responsive__WEBPACK_IMPORTED_MODULE_6__","href","textAlign","FinishViewLoader","_common_Pacman__WEBPACK_IMPORTED_MODULE_2__","_graph_generated__WEBPACK_IMPORTED_MODULE_3__","_hooks_useEmptyOrderRedirect__WEBPACK_IMPORTED_MODULE_4__","render","_useQOrderFinish","useQOrderFinish","HeaderThemed","PriceThemed","PriceCornerThemed","FinishViewOrder","orderPayments","hasMethod","PaymentTypeEnum","_i18n__WEBPACK_IMPORTED_MODULE_5__","Credit","getPaymentInfo","OrderItem","_ref6","getPaymentPrice","paymentType","payment","enum","_ref7","PhoneNumberLinkStyled","FinishViewSupport","react__WEBPACK_IMPORTED_MODULE_1__","react__WEBPACK_IMPORTED_MODULE_1___default","_react_google_maps_api__WEBPACK_IMPORTED_MODULE_0__","_app_useRoot__WEBPACK_IMPORTED_MODULE_2__","_helpers_gps__WEBPACK_IMPORTED_MODULE_3__","useGoogleMap","prevGps","StyledPickupMapMarker","MapBranchMarker","gpsToLatLng","mapPaneName","OverlayView","OVERLAY_MOUSE_TARGET","getPixelPositionOffset","x","y","counter","NO_SIDEDISHES","_useMAddToCart","useMAddToCart","makeOptimisticResponse","add","readFragment","fragment","FRecipeFragmentDoc","fragmentName","D_workspace_deepvision_doveze_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_1__","automatic","addItem","PickerButtonStyled","reactstrap__WEBPACK_IMPORTED_MODULE_3__","tertiary","tertiaryText","tertiaryHover","onSelect"],"mappings":"8SAOA,IAAMA,EAAoBC,UAAOC,IAAVC,WAAA,CAAAC,YAAA,iCAAAC,YAAA,eAAGJ,CAAH,6PAOnBK,YAPmBC,MA6BVC,EAAgC,SAAAC,GAAkB,IAAfC,EAAeD,EAAfC,SAC9C,OACEC,EAAAC,EAAAC,cAACb,EAAD,KACEW,EAAAC,EAAAC,cAAA,OAAKC,UAAU,UACdJ,uCCxCPK,EAAAC,EAAAC,EAAA,sBAAAC,IAAAH,EAAA,UAAAI,EAAAJ,EAAA,KAAAK,GAAAL,EAAA,GAAAA,EAAA,IAAAA,EAAA,MAQaG,GARbH,EAAA,KAQ2C,WACtBM,cACJC,cAEb,OAAO,4KCHEC,EAA4B,WAAM,IACrCC,EAAUC,cAAVD,MACR,OAAOE,sBAAY,kBACjBC,EAAAf,EAAAC,cAACe,EAAA,EAAD,CACEC,OAAQL,EAAMM,UACdC,OAAQP,EAAMQ,YACdlB,UAAU,oBAEVa,EAAAf,EAAAC,cAACoB,EAAA,EAAD,CACEF,OAAQP,EAAMQ,YACdE,IAAKC,IACLrB,UAAU,iBAEVa,EAAAf,EAAAC,cAAA,YACEc,EAAAf,EAAAC,cAACuB,EAAA,MAAD,CAAAC,GAAA,iCAGJV,EAAAf,EAAAC,cAACyB,EAAA,EAAD,CAAWxB,UAAU,eACnBa,EAAAf,EAAAC,cAAA,OAAKC,UAAU,wBACZU,EAAMM,WACLN,EAAMe,aAAcC,IAAI,SAACC,EAAOC,GAAR,OACtBf,EAAAf,EAAAC,cAAA,OAAK8B,IAAKD,GAAMD,MAGtBd,EAAAf,EAAAC,cAAA,OAAKC,UAAU,6BACba,EAAAf,EAAAC,cAAA,OAAKC,UAAU,+BACfa,EAAAf,EAAAC,cAAC+B,EAAA,EAAD,CACE9B,UAAU,sBACV+B,MAAM,UACNC,QAAStB,EAAMQ,aAEfL,EAAAf,EAAAC,cAACuB,EAAA,MAAD,CAAAC,GAAA,kBAPJ,oJCxBFU,EAAc9C,UAAOC,IAAVC,WAAA,CAAAC,YAAA,+BAAAC,YAAA,YAAGJ,CAAH,0BAIJ+C,EAA4B,WAAM,IAC9BC,EAAexB,cAAtBD,MACR,OAAOE,sBAAY,kBACjBC,EAAAf,EAAAC,cAACqC,EAAA,EAAD,CAAYrB,OAAQoB,EAAWE,gBAAiBC,WAAW,gBACzDzB,EAAAf,EAAAC,cAACkC,EAAD,KACEpB,EAAAf,EAAAC,cAACwC,EAAA,MAAD,CAAAhB,GAAA,iDAEFV,EAAAf,EAAAC,cAACyC,EAAA,EAAD,CAAQC,UAAU,6LCTlBC,EAA0BvD,UAAOC,IAAVC,WAAA,CAAAC,YAAA,6CAAAC,YAAA,YAAGJ,CAAH,+BAIhBwD,EAAoBC,mBAAS,WAAM,IAAAC,EACtBlC,cAAhBD,EADsCmC,EACtCnC,MAAOoC,EAD+BD,EAC/BC,KAD+BC,EAE1BC,cAAbC,EAFuCC,OAAAC,EAAA,EAAAD,CAAAH,EAAA,MAgB9C,OAXAK,sBACE,kBAAO1C,EAAM2C,2BAA6BC,OAAO5C,EAAM6C,MAAQ,GAC/D,SAAAA,GACEN,EAAU,CACRM,OACAC,QAAS9C,EAAM8C,QACfC,UAAWX,EAAKW,cAKjB/C,EAAM2C,2BAKTK,EAAA5D,EAAAC,cAAC2C,EAAD,KACEgB,EAAA5D,EAAAC,cAAC4D,EAAA7D,EAAD,KACE4D,EAAA5D,EAAAC,cAAC6D,EAAA9D,EAAD,CACE+D,KAAK,SACLC,MAAOpD,EAAM6C,KACbQ,SAAU,SAAAC,GACRtD,EAAMuD,QAAQX,OAAOY,SAASF,EAAGG,OAAOL,MAAO,MAEjDM,SAAU1D,EAAM2D,mBAChBC,cAAY,mBAEZZ,EAAA5D,EAAAC,cAAA,UAAQ+D,MAAO,GAAIS,EAAA,EAAIC,EAAA,iBACvBd,EAAA5D,EAAAC,cAAA,UAAQ+D,MAAO,GAAIS,EAAA,EAAIC,EAAA,YACvBd,EAAA5D,EAAAC,cAAA,UAAQ+D,MAAO,IAAKS,EAAA,EAAIC,EAAA,aACxBd,EAAA5D,EAAAC,cAAA,UAAQ+D,MAAO,IAAKS,EAAA,EAAIC,EAAA,aACxBd,EAAA5D,EAAAC,cAAA,UAAQ+D,MAAO,IAAKS,EAAA,EAAIC,EAAA,aACxBd,EAAA5D,EAAAC,cAAA,UAAQ+D,MAAO,IAAKS,EAAA,EAAIC,EAAA,gBApBvB,+NChBLC,EAAatF,UAAOC,IAAVC,WAAA,CAAAC,YAAA,8BAAAC,YAAA,WAAGJ,CAAH,uEAQHuF,EAAkBC,IAAMC,KAAK,WAAM,IAAA/B,EACVlC,cAArBwB,EAD+BU,EACtCnC,MAAmBoC,EADmBD,EACnBC,KADmB+B,EAEdC,cAFcC,EAAA7B,OAAA8B,EAAA,EAAA9B,CAAA2B,EAAA,GAEvCI,EAFuCF,EAAA,GAE3BG,EAF2BH,EAAA,GAAAI,EAIpBC,YACxB,CAAE5B,QAASrB,EAAWqB,SACtB,CAAE6B,MAAOlD,EAAWqB,UAFd8B,EAJsCH,EAItCG,KAAMC,EAJgCJ,EAIhCI,QAJgCC,EAQpBC,cAAnBC,EARuCxC,OAAA8B,EAAA,EAAA9B,CAAAsC,EAAA,MAAAG,EASjBC,cAAtBC,EATuC3C,OAAA8B,EAAA,EAAA9B,CAAAyC,EAAA,MAWxCG,EAAYnB,IAAMoB,YAAN,eAAApG,EAAAuD,OAAA8C,EAAA,EAAA9C,CAAA+C,EAAAnG,EAAAoG,KAAkB,SAAAC,EAAOC,GAAP,OAAAH,EAAAnG,EAAAuG,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,UAC7BrE,EAAWqB,QADkB,CAAA8C,EAAAE,KAAA,eAAAF,EAAAG,OAAA,wBAAAH,EAAAG,OAAA,SAI3Bf,EAAgB,CACrBU,OACA5C,QAASrB,EAAWqB,QACpBC,UAAWX,EAAKW,aAPgB,wBAAA6C,EAAAI,SAAAP,MAAlB,gBAAAQ,GAAA,OAAAhH,EAAAiH,MAAAC,KAAAC,YAAA,GASf,IAEGC,EAAY,eAAAC,EAAA9D,OAAA8C,EAAA,EAAA9C,CAAA+C,EAAAnG,EAAAoG,KAAG,SAAAe,EAAOC,GAAP,OAAAjB,EAAAnG,EAAAuG,KAAA,SAAAc,GAAA,cAAAA,EAAAZ,KAAAY,EAAAX,MAAA,OACfrE,EAAWqB,SACbqC,EAAmB,CACjBqB,SACA1D,QAASrB,EAAWqB,QACpBC,UAAWX,EAAKW,YALD,wBAAA0D,EAAAT,SAAAO,MAAH,gBAAAG,GAAA,OAAAJ,EAAAJ,MAAAC,KAAAC,YAAA,GAtB4BO,EA2CbC,6BAAmB,CAClDxB,YACAyB,aAbmB,SAACnB,EAAMoB,GAC1BtC,EACEuC,EAAA,EAAIjD,EAAA,kCAAiB4B,SACrBsB,EAAA5H,EAAAC,cAAA,WACGyH,EAAO9F,IAAI,SAAAiG,GAAG,OACbD,EAAA5H,EAAAC,cAAA,OAAK8B,IAAK8F,GAAMA,QAStBC,qBAAsB,SAAAxB,GAAI,OAAIqB,EAAA,EAAIjD,EAAA,mCAA2B4B,YAHvDyB,EA3CsCR,EA2CtCQ,WAAYC,EA3C0BT,EA2C1BS,SAMdC,EAAQxC,EAAU,GAAKD,EAAK5E,MAAMsH,WAExC,OAAOpH,sBAAY,kBACjB8G,EAAA5H,EAAAC,cAACyB,EAAA,EAAD,KACGyD,EACDyC,EAAA5H,EAAAC,cAAC+B,EAAA,EAAD,KACE4F,EAAA5H,EAAAC,cAACkI,EAAA,EAAD/E,OAAAgF,OAAA,CACEC,SAAUL,EACVM,aAAa,MACbC,YAAaZ,EAAA,EAAIjD,EAAA,gBACbqD,EAJN,CAKEzD,SAAUyD,EAAWzD,UAAYjC,EAAWkC,uBAGhDqD,EAAA5H,EAAAC,cAAC0E,EAAD,CAAYH,cAAY,mBACrByD,EAAMrG,IAAI,SAAA4G,GAAA,IAAG/G,EAAH+G,EAAG/G,GAAI6E,EAAPkC,EAAOlC,KAAP,OACTsB,EAAA5H,EAAAC,cAACwI,EAAA,EAAD,CACE1G,IAAKN,EACLiH,KAAK,SACLpE,SAAUjC,EAAWkC,mBACrBrC,QAAS,kBAAM+E,EAAaxF,KAJ9B,GAAAkH,OAMMrC,EANN,uDCzFVnG,EAAAC,EAAAC,EAAA,sBAAAuI,IAAA,IAAAC,EAAA1I,EAAA,IAAAI,EAAAJ,EAAA,KAAA2I,EAAA3I,EAAA,GAAAJ,EAAAI,EAAA4I,EAAAD,GAAAE,EAAA7I,EAAA,KAAA8I,EAAA9I,EAAA4I,EAAAC,GAAAE,EAAA/I,EAAA,IAAAgJ,EAAAhJ,EAAA,IAAAiJ,EAAAjJ,EAAA,KAaayI,EAAsC,SAAA/I,GAAkB,IAAfC,EAAeD,EAAfC,SAC9CuJ,EAAS3I,cACP4I,EAAYC,6BAAZD,QACFjH,EAAa5B,cAHgD+I,EAKzCC,YACxB,CAAE/F,QAASrB,EAAWqB,SACtB,CAAE6B,MAAOlD,EAAWqB,UAFd8B,EAL2DgE,EAK3DhE,KAAMC,EALqD+D,EAKrD/D,QAKdZ,IAAM6E,UAAU,WACTrH,EAAWsH,WAAYlE,GAIxBD,EAAK5E,MAAMgJ,qBAAuBC,IAAuBC,QAC3DR,EAAQS,QAAQ,OAIpB,IAAMC,GACHvE,GAAWD,EAAK5E,MAAMqJ,WAAa,GAAK5H,EAAW6H,iBAEtD,OACEnK,EAAAC,EAAAC,cAAAF,EAAAC,EAAAmK,SAAA,KACEpK,EAAAC,EAAAC,cAACiJ,EAAA,EAAD,CACEnF,KAAK,SACL9B,MAAM,UACNmI,KAAK,KACL9F,UAAW0F,GAAaX,EAAOgB,aAC/B7F,cAAY,qBAEX6E,EAAOgB,aACNtK,EAAAC,EAAAC,cAACgJ,EAAAjJ,EAAD,CAASsK,KAAK,SAASC,OAAO,OAAOtI,MAAM,SAE3CnC,qICxCJ0K,EAAyBnL,UAAOC,IAAVC,WAAA,CAAAC,YAAA,2CAAAC,YAAA,gBAAGJ,CAAH,oJAafoL,EAA6B,WACxC,IAAMpI,EAAa5B,cAEnB,OAAOK,sBAAY,WACjB,IAAKuB,EAAWqI,oBACd,OAAO,KAET,IAAMC,EAAqC,OAAzBtI,EAAWuI,UAC7B,OACE7J,EAAAf,EAAAC,cAACuK,EAAD,KACEzJ,EAAAf,EAAAC,cAACiJ,EAAA,EAAD,CACE1E,cAAY,qBACZqG,UAAWF,EACXrG,SAAUjC,EAAWkC,mBACrBrC,QAAS,kBAAMG,EAAWyI,aAAa,QAEvC/J,EAAAf,EAAAC,cAACwC,EAAA,MAAD,CAAAhB,GAAA,mBAEFV,EAAAf,EAAAC,cAACiJ,EAAA,EAAD,CACE1E,cAAY,uBACZqG,SAAUF,EACVrG,SAAUjC,EAAWkC,mBACrBrC,QAASG,EAAW0I,gBAEnBJ,EACC5J,EAAAf,EAAAC,cAACwC,EAAA,WAAD,CACEuB,MAAO3B,EAAWuI,UAClBI,OAAQ,CAAEC,QAAS,OAAQC,KAAM,UAAWC,OAAQ,aAGtDpK,EAAAf,EAAAC,cAACwC,EAAA,MAAD,CAAAhB,GAAA,gcCxCZ,IAAM2J,EAAe/L,kBAAOgM,KAAV9L,WAAA,CAAAC,YAAA,uCAAAC,YAAA,gBAAGJ,CAAH,6DAMZiM,EAAgBjM,kBAAOkM,KAAVhM,WAAA,CAAAC,YAAA,wCAAAC,YAAA,gBAAGJ,CAAH,iFAGfmM,YAHe7L,KAQfD,YARe+L,MAiBNC,EAA2C,WAAM,IACpDC,EAAS9K,cAAT8K,KAER,OAAO7K,sBAAY,WACjB,OAA0B,OAAtB6K,EAAKC,aACA,KAGPhI,EAAA5D,EAAAC,cAACqL,EAAD,CACE9G,cAAY,yBACZtE,UAAU,sBAEV0D,EAAA5D,EAAAC,cAAA,SACE2D,EAAA5D,EAAAC,cAAC4L,EAAA,MAAD,CAAApK,GAAA,6HAMFmC,EAAA5D,EAAAC,cAACmL,EAAD,CACEnJ,MAAM,UACNmI,KAAK,KACLlI,QAASyJ,EAAKG,mBACdtH,cAAY,+BAEZZ,EAAA5D,EAAAC,cAAC4L,EAAA,MAAD,CAAApK,GAAA,qBAEFmC,EAAA5D,EAAAC,cAACmL,EAAD,CACEnJ,MAAM,YACNmI,KAAK,KACLlI,QAASyJ,EAAKI,kBACdvH,cAAY,8BAEZZ,EAAA5D,EAAAC,cAAC4L,EAAA,MAAD,CAAApK,GAAA,uNCxDGuK,EAAkC,SAAAnM,GAAA,IAAGoM,EAAHpM,EAAGoM,QAAS/J,EAAZrC,EAAYqC,QAAZ,OAC7CgK,EAAAlM,EAAAC,cAACkM,EAAA,EAAD,KACED,EAAAlM,EAAAC,cAACmM,EAAA,EAAD,CACEnK,MAAM,UACNqC,UAAW2H,EACX/J,QAASA,EACTsC,cAAY,iBAEX6H,EAAA,EAAI3H,EAAA,sFCLJ,IAAM4H,EAAqBxJ,mBAChC,SAAAjD,GAAyC,IAAtC0M,EAAsC1M,EAAtC0M,SAAUxE,EAA4BlI,EAA5BkI,WAAYyE,EAAgB3M,EAAhB2M,UACfC,EAAa5L,cAAb4L,SACFzE,EAAWnD,IAAM6H,OAAgC,MAEvD7H,IAAM6E,UACJ,WACM8C,GAAkC,OAArBxE,EAAS2E,SACxB3E,EAAS2E,QAAQC,SAGrB,CAACJ,IAGH,IAAMK,ECzBH,SACLC,GAGA,IAFAC,EAEA/F,UAAAgG,OAAA,QAAAC,IAAAjG,UAAA,GAAAA,UAAA,GAFe,IACfkG,EACAlG,UAAAgG,OAAA,QAAAC,IAAAjG,UAAA,GAAAA,UAAA,GAD6B,GAEvBmG,EAAYtI,IAAMoB,YAAYmH,IAASN,EAAIC,GAA/B,GAAApE,OAAAvF,OAAAiK,EAAA,EAAAjK,CAA0C8J,GAA1C,CAAgDJ,EAAIC,KAQtE,OANAlI,IAAM6E,UAAU,WACd,OAAO,WACLyD,EAAUG,UAEX,CAACH,IAEGA,EDYqBI,CAAYhB,EAAU,KAEhD1H,IAAM6E,UAAU,WACd,OAAO,kBAAMmD,EAAkBS,UAC9B,IA0BH,OACEpB,EAAAlM,EAAAC,cAACuN,EAAA,EAADpK,OAAAgF,OAAA,CACElI,UAAWuN,aAAG,CAAEC,QAASlB,IACzBvI,SA3Ba,SACfC,GAEA,IAAMyJ,EAASzJ,EAAGG,OAAOL,OAAS,GAClCyI,EAASmB,eAAeD,GACK,IAAzBA,EAAOE,OAAOb,QAChBP,EAASqB,eAEXjB,KAoBEkB,WAjBe,SACjB7J,GAEe,UAAXA,EAAGnC,MACL8K,EAAkBS,QAClBf,MAaAyB,QATY,WACdhG,EAAS2E,QAASsB,UAShBjK,MAAOyI,EAASyB,YAChB7F,SAAUL,EACVxD,cAAY,eACRuD,eEbGoG,EA/CkBrL,mBAAS,WAAM,IACtC2J,EAAa5L,cAAb4L,SADsC1H,EAGnBC,cAHmBC,EAAA7B,OAAAgL,EAAA,EAAAhL,CAAA2B,EAAA,GAGvCsJ,EAHuCpJ,EAAA,GAGhCqJ,EAHgCrJ,EAAA,GAK9C,IAAKwH,EAAS8B,wBAA0B9B,EAAS+B,YAC/C,OAAO,KA+BT,OACEtC,EAAAlM,EAAAC,cAAAiM,EAAAlM,EAAAmK,SAAA,KACGkE,EACDnC,EAAAlM,EAAAC,cAAA,OAAKC,UAAU,MAAMgC,QA/BE,WACzBuK,EAASgC,IAAI,kBACbC,UAAUC,YAAYC,mBACpB,SAAA/O,GAAgB,IAAbgP,EAAahP,EAAbgP,OACOC,EAAwBD,EAAxBC,SAAUC,EAAcF,EAAdE,UAClBtC,EAASgC,IACP,wCACAI,EAAOC,SACPD,EAAOE,UACPF,EAAOG,UAETvC,EAASwC,oBAAoB,CAAEH,WAAUC,eAE3C,SAAAG,GACEzC,EAASgC,IAAI,qBAAsBS,GACnCzC,EAAS0C,qBACTb,EACEjC,EAAA,EAAI3H,EAAA,sBACJ2H,EAAA,EAAI3H,EAAA,gDAGR,CACE0K,oBAAoB,EACpBC,WAAY,QASZnD,EAAAlM,EAAAC,cAAA,QAAMC,UAAU,uCCrCXoP,EAAoC,SAAAzP,GAK3C,IAJJ0P,EAII1P,EAJJ0P,QACA/C,EAGI3M,EAHJ2M,UACAgC,EAEI3O,EAFJ2O,YACAgB,EACI3P,EADJ2P,aAEA,OACEtD,EAAAlM,EAAAC,cAAA,OACEuE,cAAY,kBACZtE,UAAWuN,aAAG,oBAAqB,CACjCgC,KAAMjB,EACNd,QAASlB,IAEXtK,QAASsM,OAAcvB,EAAYuC,GAElChB,EAActC,EAAAlM,EAAAC,cAACyP,EAAA1P,EAAD,CAASsK,KAAK,YAAYC,OAAO,SAAYgF,6BCX5DI,EAAW,IAAIC,IAEd,SAASC,IAGe,IAAAhQ,EAAAmH,UAAAgG,OAAA,QAAAC,IAAAjG,UAAA,GAAAA,UAAA,GAAJ,GAAI8I,EAAAjQ,EAF7BkQ,aAE6B,IAAAD,EAFrB,EAEqBA,EAAAE,EAAAnQ,EAD7BoQ,qBAC6B,IAAAD,KAAAjN,EACHlC,cAAlBe,EADqBmB,EACrBnB,IAAK6K,EADgB1J,EAChB0J,SAEPyD,EAAQC,wBAAc,iBAAO,CACjCC,QAAS,KACTC,OAAQ5D,EAASyB,YACjBoC,WAAW,EACXC,UACE,IAAMC,EAAS,UAAA7H,OACJoH,GADI,OAAApH,OAEN/G,EAAImN,WAFE,OAAApG,OAGN/G,EAAIkN,UAHE,QAAAnG,OAIL/G,EAAI6O,MAJC,sCAQf,sCAAA9H,OAAuC6H,EAAOE,KAAK,UAIjDC,EAAU9L,IAAMoB,YAAY,WAChC,GAA4B,IAAxBiK,EAAMG,OAAOrD,OAAjB,CAKAP,EAASgC,IAAT,qBAAA9F,OAAkCuH,EAAMG,SACxC,IAAME,EAAG,GAAA5H,OAAMuH,EAAMK,IAAZ,YAAA5H,OAA0BuH,EAAMG,QAErCV,EAASiB,IAAIL,GACfL,EAAME,QAAUT,EAASkB,IAAIN,IAI/BL,EAAMI,WAAY,EAElBQ,MAAMP,GACHQ,KAAK,SAAAC,GAAI,OAAIA,EAAKC,SAClBF,KAAK,SAAAE,GACJ,IAAMb,EAAUa,EAAKC,OAAOC,OAAOC,GAAgBxP,IAAIyP,GACvD1B,EAAS2B,IAAIf,EAAKH,GAClBF,EAAME,QAAUA,IAEjBmB,QAAQ,WACPrB,EAAMI,WAAY,UAtBpBJ,EAAME,QAAU,MAwBjB,IAEGoB,EAAiB3M,IAAM6H,OAAOU,mBAASuD,EAAS,MAEhDpE,EAAW1H,IAAMoB,YACrB,WAA+C,IAA9CwL,EAA8CzK,UAAAgG,OAAA,QAAAC,IAAAjG,UAAA,GAAAA,UAAA,GAAzByF,EAASyB,YAC7BzB,EAASgC,IAAT,YAAA9F,OAAyB8I,IACzBvB,EAAMG,OAASoB,EAAW5D,OAC1B2D,EAAe7E,QAAQW,QACvBqD,KAEF,CAACA,IA2BH,OAxBArN,sBACE,kBAAMmJ,EAASyB,aACf,SAAAlK,GACuB,IAAjBA,EAAMgJ,SACRkD,EAAMG,OAAS,GACfH,EAAME,QAAU,KAChBoB,EAAe7E,QAAQW,WAK7BzI,IAAM6E,UACJ,kBACEgI,mBACE,kBAAMxB,EAAMK,KACZ,WACMN,GACFuB,EAAe7E,aAIvB,CAACsD,IAGI7M,OAAAuO,EAAA,EAAAvO,CAAA,GAAK8M,EAAZ,CAAmB3D,aAGrB,SAAS6E,EAATlK,GAAsC,IAAZ0K,EAAY1K,EAAZ0K,SAChB9C,EAAwB8C,EAAxB9C,SAAUC,EAAc6C,EAAd7C,UAClB,OAAOD,GAAYC,EAGrB,SAASsC,EAAT7I,GAA2C,IAAtBqJ,EAAsBrJ,EAAtBqJ,SAAUD,EAAYpJ,EAAZoJ,SAE3BnQ,EAQEmQ,EARFnQ,GACAqN,EAOE8C,EAPF9C,SACAC,EAME6C,EANF7C,UACA+C,EAKEF,EALFE,gBACAC,EAIEH,EAJFG,iBAMIC,EACJ,CAHEJ,EAHFK,aAGEL,EAFFM,SAEEN,EADFO,QAIkCJ,GAAkBK,KAAKC,UAAY,GAEvE,MAAO,CACL5Q,KACAoQ,WACAS,IAAK,CACHxD,WACAC,aAEFQ,QAAO,GAAA5G,OAAKmJ,GAALnJ,OAAuBqJ,EAAM,KAAArJ,OAAQqJ,GAAW,q3BCzH3D,IAAMO,EAASlT,UAAOC,IAAVK,KAgDC6S,EAAqB1P,mBAAiB,SAAA2P,GAAS,IAClDhG,EAAa5L,cAAb4L,SACFyD,EAAQC,wBAAc,iBAAO,CACjCuC,MAAM,KAHkDC,EAMjB9C,EAAiB,CACxDE,MAAO,EACPE,cAAeC,EAAMwC,OAFftC,EANkDuC,EAMlDvC,QAASE,EANyCqC,EAMzCrC,UAAW/D,EAN8BoG,EAM9BpG,SAqB5B,GAhBAjJ,sBACE,kBAAM4M,EAAMwC,MACZ,SAAAA,GACMA,GACFnG,MAKNjJ,sBACE,kBAAMmJ,EAASyB,aACf,WACEgC,EAAMwC,MAAO,KAIZjG,EAASmG,eACZ,OAAO,KAGT,IAAMC,EACJzC,GAAWA,EAAQe,OAAO,SAAAtR,GAAA,OAAAA,EAAG0P,UAA0B9C,EAAS8C,UAsDlE,OACErD,EAAAlM,EAAAC,cAACsS,EAAD,CACErS,UAAWuN,aAAG,WAAY,CACxBqF,aAAc5C,EAAMwC,KACpBK,UAAW7C,EAAMwC,OAEnB3Q,IAAKmO,EAAMwC,KAAKM,YAEf9C,EAAMwC,KA/CTxG,EAAAlM,EAAAC,cAAA,WACEiM,EAAAlM,EAAAC,cAAA,SACEiM,EAAAlM,EAAAC,cAACgT,EAAA,MAAD,CAAAxR,GAAA,+FAKD6O,GAAapE,EAAAlM,EAAAC,cAAA,kBACb4S,GACCA,EAAcjR,IAAI,SAAAsP,GAAM,OACtBhF,EAAAlM,EAAAC,cAACoL,EAAA,EAAD,CACEjB,KAAK,KACLnI,MAAM,OACNF,IAAKmP,EAAOzP,GACZS,QAAS,WACPuK,EAASyG,gBAAgBhC,GACzBhB,EAAMwC,MAAO,IAGdxB,EAAO3B,WAGdrD,EAAAlM,EAAAC,cAACoL,EAAA,EAAD,CACEjB,KAAK,KACLnI,MAAM,OACNC,QAAS,WACPgO,EAAMwC,MAAO,GAEfxS,UAAU,QAET2S,GAA0C,IAAzBA,EAAc7F,OAC9Bd,EAAAlM,EAAAC,cAACgT,EAAA,MAAD,CAAAxR,GAAA,8BAEAyK,EAAAlM,EAAAC,cAACgT,EAAA,MAAD,CAAAxR,GAAA,wCA7CNyK,EAAAlM,EAAAC,cAACoL,EAAA,EAAD,CACEnL,UAAU,OACV+B,MAAM,OACNC,QAAS,WACPgO,EAAMwC,MAAO,IAGfxG,EAAAlM,EAAAC,cAACgT,EAAA,MAAD,CAAAxR,GAAA,yCCxFA8Q,EAASlT,UAAOC,IAAVC,WAAA,CAAAC,YAAA,gCAAAC,YAAA,gBAAGJ,CAAH,klBA0BC,SAAAQ,GAAA,OAAAA,EAAGsT,MAAkBC,YA6BrBC,EAAwBvQ,mBAAS,WAAM,IAAAC,EACxBlC,cAAlBe,EAD0CmB,EAC1CnB,IAAK6K,EADqC1J,EACrC0J,SADqCkG,EAGT9C,IAAjCO,EAH0CuC,EAG1CvC,QAASE,EAHiCqC,EAGjCrC,UAAW/D,EAHsBoG,EAGtBpG,SAmD5B,OAzCA1H,IAAM6E,UAAU,WACV4G,GACF7D,EAAS6G,eAAehD,IAEzB,CAACA,IAEJzL,IAAM6E,UAAU,WACd,GAAgB,OAAZ0G,EAAJ,CAIA,GAAuB,IAAnBA,EAAQpD,OAGV,OAFAP,EAASgC,IAAI,2CACbhC,EAAS8G,mBAPS,IAWbC,EAXapQ,OAAAgL,EAAA,EAAAhL,CAWGgN,EAXH,MAalByB,EAEE2B,EAFF3B,SAbkB4B,EAehBD,EADFlB,IAAOxD,EAdW2E,EAcX3E,SAAUC,EAdC0E,EAcD1E,UAQnB,GALInN,EAAI8R,SACN9R,EAAI6M,IAAJ,yBAAA9F,OAAiCmG,EAAjC,OAAAnG,OAA+CoG,IAC/CnN,EAAI8R,OAAOC,MAAMC,YAAeJ,EAAalB,QAGzCT,IAAYA,EAASgC,WAAW,WAGpC,OAFApH,EAASgC,IAAI,0BAA2BoD,QACxCpF,EAASqH,kBAIXrH,EAASgC,IAAT,iBAAA9F,OAA8B6K,EAAajE,UACvC9C,EAASqC,WAAaA,GAAYrC,EAASsC,YAAcA,GAC3DtC,EAASsH,kBAEXtH,EAASyG,gBAAgBM,KACxB,CAACpD,IAGFlE,EAAAlM,EAAAC,cAAC+T,EAAD,KACE9H,EAAAlM,EAAAC,cAAA,OAAKC,UAAU,aACbgM,EAAAlM,EAAAC,cAACgU,EAAD,CACE1E,QAAS9C,EAAS8C,SAAW,GAC7B/C,UAAWC,EAASyH,WACpB1F,YAAa/B,EAAS+B,YACtBgB,aAAc/C,EAASqB,eAEzB5B,EAAAlM,EAAAC,cAACqM,EAAD,CACEvE,WAAY,CACVQ,YAAa8D,EAAA,EAAI3H,EAAA,sCACjB4D,aAAc,2BAEhBiE,SAAUA,EACVC,YAAaC,EAASyH,YAAczH,EAAS+B,eAE/CtC,EAAAlM,EAAAC,cAACkU,EAAD,OAEFjI,EAAAlM,EAAAC,cAACmU,EAAD,MACAlI,EAAAlM,EAAAC,cAACuS,EAAD,SAKN,SAAS4B,IAAe,IACd3H,EAAa5L,cAAb4L,SACR,OAAKA,EAAS4H,qBAGc,IAAxB5H,EAAS6H,WAETpI,EAAAlM,EAAAC,cAACsL,EAAA,EAAD,CAAOtJ,MAAM,UACXiK,EAAAlM,EAAAC,cAACgT,EAAA,MAAD,CAAAxR,GAAA,kCAI2B,IAA7BgL,EAAS8H,gBAETrI,EAAAlM,EAAAC,cAACsL,EAAA,EAAD,CAAOtJ,MAAM,WACXiK,EAAAlM,EAAAC,cAACgT,EAAA,MAAD,CAAAxR,GAAA,8CAI8B,IAAhCgL,EAAS+H,mBAETtI,EAAAlM,EAAAC,cAACsL,EAAA,EAAD,CAAOtJ,MAAM,WACXiK,EAAAlM,EAAAC,cAACgT,EAAA,MAAD,CAAAxR,GAAA,uEAMC,KAzBE,2DCrIX,IAAMgT,EAAoBpV,UAAOC,IAAVC,WAAA,CAAAC,YAAA,iCAAAC,YAAA,eAAGJ,CAAH,iJAcVqV,EAAc5R,mBAAiB,SAAAjD,GAAmB,IAAhB8U,EAAgB9U,EAAhB8U,UAAgB5R,EACzBlC,cAA5Be,EADqDmB,EACrDnB,IAAK6K,EADgD1J,EAChD0J,SAAUmI,EADsC7R,EACtC6R,SAEjBC,EC9BD,WAA+B,IAC5BpI,EAAa5L,cAAb4L,SAD4BqI,EAGVC,YAA8B,CACtDC,YAAa,gBADRC,EAH6B7R,OAAAgL,EAAA,EAAAhL,CAAA0R,EAAA,MAwBpC,OAjBiBjQ,IAAMoB,YAAN,eAAApG,EAAAuD,OAAA8R,EAAA,EAAA9R,CAAA+R,EAAAnV,EAAAoG,KACf,SAAAC,EAAOiM,GAAP,IAAApL,EAAA1B,EAAA,OAAA2P,EAAAnV,EAAAuG,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,cACE+F,EAAS6G,gBAAe,GAD1B9M,EAAAE,KAAA,EAGyBuO,EAAgB7R,OAAAuO,EAAA,EAAAvO,CAAA,GAClCqJ,EAAS2I,iBACT9C,IALP,OAAApL,EAAAV,EAAA6O,KAQe,QALL7P,EAHV0B,EAGU1B,OAMNiH,EAAS6I,oBAAoB9P,EAAKyP,iBAEpCxI,EAAS6G,gBAAe,GAX1B,wBAAA9M,EAAAI,SAAAP,MADe,gBAAAQ,GAAA,OAAAhH,EAAAiH,MAAAC,KAAAC,YAAA,GAcf,CAACiO,IDScM,GAEXC,EAAsB,SAAClD,GAC3B7F,EAASsH,kBACTtH,EAASmB,eAAe,IACxBnB,EAASgJ,YAAYnD,IAGvBoD,kBACE,kBAAMd,EAASe,SACf,WACMlJ,EAASmJ,cACXnJ,EAASgC,IAAI,yBACboG,EAASpI,EAASoJ,aAKxBvS,sBACE,kBAAMmJ,EAASoJ,UACf,SAAAvD,GACMA,IACF7F,EAASgC,IAAI,2BACboG,EAASvC,MAKfhP,sBACE,kBAAM1B,EAAIkU,YACV,SAAAA,GACMA,IACFrJ,EAASgC,IAAT,2BACA+G,EAAoBM,GACpBlU,EAAImU,qBAMVC,YAAiBvJ,EAASwJ,kBAAoBxJ,EAASyJ,SAAW,MErE/B,WAAM,IACjCzJ,EAAa5L,cAAb4L,SADiC0J,EAEfC,YACxB,GACA,CACEpB,YAAa,cACbzP,KAAMkH,EAASyH,aAJX1O,EAFiC2Q,EAEjC3Q,KAAMC,EAF2B0Q,EAE3B1Q,QAQR4Q,EAASC,gCAAsB,CACnCC,QAAS9Q,EAAU,KAAOD,EAAKiH,WAG3B+J,EAAWC,cAEjBC,qBAAW,WACLjK,EAASoJ,UACXpJ,EAASgC,IAAI,uBAAwBhC,EAASoJ,UAC9CW,EAAS/J,EAASoJ,WACTpJ,EAASkK,kBAClBlK,EAASgC,IAAI,qBAAsBhC,EAASkK,kBAC5CH,EAAS/J,EAASkK,mBACTN,EAAOE,SAAWF,EAAOE,QAAQK,iBAC1CnK,EAASgC,IAAI,0BAA2B4H,EAAOE,QAAQK,gBACvDJ,EAASH,EAAOE,QAAQK,mBAI5BtT,sBACE,kBAAMmJ,EAASkK,kBACf,SAAArE,GACMA,GACFkE,EAASlE,KFqCfuE,GA5C6D,IA8CrDC,EAAwBC,YAAepC,GAAvCmC,oBAER,OACE5K,EAAAlM,EAAAC,cAACwU,EAAD,CAAmBjQ,cAAY,cAC5BiI,EAASuK,OACR9K,EAAAlM,EAAAC,cAACgX,EAAA,OAAD,CACEC,SAAUzK,EAASuK,OACnBG,WAAW,EACXC,UAAW,SAAAlQ,GAAgB,IAAb8P,EAAa9P,EAAb8P,OACZvK,EAASgC,IAAT,qBACA+G,EAAoB6B,YAAYL,OAGlC,KACJ9K,EAAAlM,EAAAC,cAAA,OAAKC,UAAU,0BACbgM,EAAAlM,EAAAC,cAACoT,EAAD,OAEFnH,EAAAlM,EAAAC,cAAA,OAAKC,UAAU,yBACbgM,EAAAlM,EAAAC,cAACqX,EAAD,CACErL,QAASQ,EAASwJ,kBAClB/T,QAAS4U,yOGxFNS,EAA8C,SAAA1X,GAIrD,IAHJ2X,EAGI3X,EAHJ2X,SACAC,EAEI5X,EAFJ4X,SACA9B,EACI9V,EADJ8V,QAEI+B,EAAU,GACd,GAAiB,IAAbF,EAAgB,CAClB,KAAIC,EAAW,GAGb,OAAO,KAFPC,EAAUrL,IAAK3H,EAAE,CAAAjD,GAAA,qBAAAkW,OAAA,CAAYF,mBAI1B,GAAiB,IAAbA,EACTC,EAAUrL,IAAK3H,EAAE,CAAAjD,GAAA,qBAAAkW,OAAA,CAAYH,mBACxB,GAAIA,IAAaC,EAAU,CAChC,IAAM1H,EAAQyH,EACdE,EAAUrL,IAAK3H,EAAE,CAAAjD,GAAA,eAAAkW,OAAA,CAAS5H,gBAE1B2H,EAAUrL,IAAK3H,EAAE,CAAAjD,GAAA,4CAAAkW,OAAA,CAAYH,WAAwBC,cAEvD,IAAMG,EAAuB,GAI7B,OAHKjC,IACHiC,EAAM3V,MAAQ,OAGdiK,EAAAlM,EAAAC,cAAA,QAAM2X,MAAOA,GACV,IACAF,EACA,wdChCP,IAAMG,EAA6BxY,UAAOC,IAAVK,IAOhB,SAAAE,GAAA,OAAAA,EAAGsT,MAAkB2E,SAGnB,SAAA5Q,GAAA,OAAAA,EAAGiM,MAAkB4E,cAGrB,SAAAvP,GAAA,OAAAA,EAAG2K,MAAkB2E,UAW1BE,EAAyC,SAAAC,GAGhD,IAFJ/V,EAEI+V,EAFJ/V,QACGuQ,EACCrP,OAAA8U,EAAA,EAAA9U,CAAA6U,EAAA,aACJ,OACE/L,EAAAlM,EAAAC,cAAC4X,EAADzU,OAAAgF,OAAA,CACElG,QAASA,EACThC,UAAU,oBACVsE,cAAY,wBACRiO,GAEJvG,EAAAlM,EAAAC,cAAA,OAAKC,UAAU,gBCxBfiY,EAAyB9Y,UAAOC,IAAVC,WAAA,CAAAC,YAAA,2CAAAC,YAAA,YAAGJ,CAAH,6MAsBf+Y,EAAmBvT,IAAMC,KACpC,SAAAjF,GASM,IARJwY,EAQIxY,EARJwY,SACAtI,EAOIlQ,EAPJkQ,MACAuI,EAMIzY,EANJyY,cACAC,EAKI1Y,EALJ0Y,aACArY,EAIIL,EAJJK,UACAsY,EAGI3Y,EAHJ2Y,MACAC,EAEI5Y,EAFJ4Y,SACGC,EACCtV,OAAA8U,EAAA,EAAA9U,CAAAvD,EAAA,oFACEqC,EAAU2C,IAAMoB,YAAY,WAC5BqS,GACFE,KAED,CAACF,EAAeE,IACnB,OACEtM,EAAAlM,EAAAC,cAACkY,EAAD,CAAwBjY,UAAWA,GACjCgM,EAAAlM,EAAAC,cAAC0Y,EAAA,EAADvV,OAAAgF,OAAA,CACElG,QAASA,EACToC,UAAWgU,EACXlO,KAAK,KACLwO,SAAS,EACTC,MAAM,UACNrU,cAAA,qBAAAmE,OAAkC0P,EAAS5W,KACvCiX,GAEJxM,EAAAlM,EAAAC,cAAA,OAAKC,UAAU,QACZmY,EAASS,UACV5M,EAAAlM,EAAAC,cAAA,QAAM8B,IAAKgO,EAAO7P,UAAU,4BACzB6P,EAAQ,GAAR,GAAApH,OAAgBoH,EAAhB,OAGL7D,EAAAlM,EAAAC,cAAA,OAAKC,UAAU,SAASmY,EAASU,MAAMC,iBAExCT,GAAgBrM,EAAAlM,EAAAC,cAACgZ,EAAD,CAAsB/W,QAASuW,wVC5DxD,IAAMS,EAAuB7Z,UAAOC,IAAV6Z,KAiBbC,EAAmC,SAAAvZ,GAK1C,IAJJwZ,EAIIxZ,EAJJwZ,OACAC,EAGIzZ,EAHJyZ,UACAd,EAEI3Y,EAFJ2Y,MACAC,EACI5Y,EADJ4Y,SACIc,EACuCC,+BACzCH,EAAOI,WACPH,GAFMhB,EADJiB,EACIjB,cAAeoB,EADnBH,EACmBG,gBAKvB,OACExN,EAAAlM,EAAAC,cAACiZ,EAAD,CAAsBhZ,UAAU,0BAC7BmZ,EAAOI,WAAW7X,IAAI,SAAAiQ,GAAQ,OAC7B3F,EAAAlM,EAAAC,cAAC0Z,EAAA,SAAD,CAAU5X,IAAK8P,EAASpQ,IACtByK,EAAAlM,EAAAC,cAAA,OAAKC,UAAU,8BACZ2R,EAASiH,UAAW,IACrB5M,EAAAlM,EAAAC,cAAC2Z,EAAD,CACEpC,SAAU3F,EAAS2F,SACnBC,SAAU5F,EAAS4F,SACnB9B,QAAS+D,EAAgB7H,MAG5BA,EAASgI,WAAWjY,IAAI,SAAAyW,GAAQ,OAC/BnM,EAAAlM,EAAAC,cAACmY,EAAD,CACErW,IAAG,GAAA4G,OAAK0P,EAAS5W,GAAd,KAAAkH,OAAoBkJ,EAASpQ,IAChC4W,SAAUA,EACVtI,MAAOuJ,EAAUnI,OAAO,SAAA2I,GAAC,OAAIA,IAAMzB,EAAS5W,KAAIuL,OAChD+M,WAAYT,EAAUU,SAAS3B,EAAS5W,IACxC8W,aAAce,EAAUU,SAAS3B,EAAS5W,IAC1C6W,cAAeA,EAAczG,EAAUwG,GACvCG,MAAK,SAAAyB,GAAA,SAAAzB,IAAA,OAAAyB,EAAAnT,MAAAC,KAAAC,WAAA,OAAAwR,EAAAxF,SAAA,kBAAAiH,EAAAjH,YAAAwF,EAAA,CAAE,kBAAMA,EAAMH,EAAS5W,MAC5BgX,SAAQ,SAAAyB,GAAA,SAAAzB,IAAA,OAAAyB,EAAApT,MAAAC,KAAAC,WAAA,OAAAyR,EAAAzF,SAAA,kBAAAkH,EAAAlH,YAAAyF,EAAA,CAAE,kBAAMA,EAASJ,EAAS5W,MAClCvB,UAAU,uDCnDXia,EAAkBtV,IAAMC,KACnC,SAAAjF,GAAsC,IAAnCyZ,EAAmCzZ,EAAnCyZ,UAAWD,EAAwBxZ,EAAxBwZ,OAAQ1E,EAAgB9U,EAAhB8U,UAAgByF,EACEvV,IAAMwV,UAAS,GADjBC,EAAAlX,OAAAgL,EAAA,EAAAhL,CAAAgX,EAAA,GAC7BG,EAD6BD,EAAA,GACfE,EADeF,EAAA,GAE5BZ,EAAoBF,+BAC1BH,EAASA,EAAOI,WAAa,GAC7BH,GAFMI,gBAKR,OACExN,EAAAlM,EAAAC,cAACmM,EAAA,EAAD,CACElM,UAAWuN,aAAG,sBAAuB,WAAY,CAC/CgN,UAAWF,IAEbjW,SACEiW,IAAiBlB,IAAWA,EAAOI,WAAWiB,MAAMhB,GAEtDlV,cAAY,kBACZtC,QAAS,WACPsY,GAAc,GACd7F,IAAYgG,MAAM,WAChBH,GAAc,OAIjBnO,EAAA,EAAI3H,EAAA,2GAAAkW,EACItB,EAAUtM,YCnBrB6N,EAAkB,GAEXC,EAA8B,SAAAjb,GAMrC,IALJwZ,EAKIxZ,EALJwZ,OACA0B,EAIIlb,EAJJkb,UAIIC,EAAAnb,EAHJob,yBAGI,IAAAD,EAHgBH,EAGhBG,EAFJrG,EAEI9U,EAFJ8U,UACAuG,EACIrb,EADJqb,QACId,EACiCvV,IAAMwV,SAAS,IADhDC,EAAAlX,OAAAgL,EAAA,EAAAhL,CAAAgX,EAAA,GACGd,EADHgB,EAAA,GACca,EADdb,EAAA,GAGJzV,IAAM6E,UAAU,WACdyR,EAAgBF,IACf,CAACA,IAEJ,IAAMG,EAAevW,IAAMoB,YAAY,WACrCkV,EAAgB,IAChBD,KACC,CAACA,IAEEG,EAAiB,eAAAnU,EAAA9D,OAAA8R,EAAA,EAAA9R,CAAA+R,EAAAnV,EAAAoG,KAAG,SAAAC,IAAA,OAAA8O,EAAAnV,EAAAuG,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,cAAAF,EAAAE,KAAA,EACdiO,EAAU2E,GADI,WAAA9S,EAAA6O,KAAA,CAAA7O,EAAAE,KAAA,eAEtB0U,IAFsB5U,EAAAG,OAAA,UAGf,GAHe,cAAAH,EAAAG,OAAA,UAKjB,GALiB,wBAAAH,EAAAI,SAAAP,MAAH,yBAAAa,EAAAJ,MAAAC,KAAAC,YAAA,GAQjBsU,EAAgB,SAACC,GACrBJ,EAAgB,SAAAK,GACd,OAAOC,KAAGC,OAAOH,EAAYC,MAI3BG,EAAmB,SAACJ,GACxBJ,EAAgB,SAAAK,GACd,OAAOC,KAAGG,OAAOH,KAAGI,QAAQN,EAAYC,GAAM,EAAGA,MA6BrD,OACEtP,EAAAlM,EAAAC,cAAC6b,EAAA,EAAD,CACE7a,OAAmB,OAAXoY,EACRlY,OAAQia,EACRlb,UAAU,mBACV6b,WAAW,EACXC,SAAS,SACTC,MAAM,EACNzX,cAAY,aAEZ0H,EAAAlM,EAAAC,cAACic,EAAA,EAAD,CACE/a,OAAQia,EACR9Z,IAAKC,IACLrB,UAAU,iBAEVgM,EAAAlM,EAAAC,cAAA,YACEiM,EAAAlM,EAAAC,cAACgT,EAAA,MAAD,CAAAxR,GAAA,oCAGJyK,EAAAlM,EAAAC,cAACkc,EAAA,EAAD,CAAWjc,UAAU,eACnBgM,EAAAlM,EAAAC,cAAA,OAAKC,UAAU,wBA5Cf6a,EACK7O,EAAAlM,EAAAC,cAACmc,EAAA,EAAD,MAEJ/C,EAMHnN,EAAAlM,EAAAC,cAAAiM,EAAAlM,EAAAmK,SAAA,KACE+B,EAAAlM,EAAAC,cAAA,MAAIC,UAAU,2BAA2BmZ,EAAOP,WAChD5M,EAAAlM,EAAAC,cAAA,QAAMC,UAAU,iCACbmZ,EAAOgD,kBAEVnQ,EAAAlM,EAAAC,cAACqc,EAAD,CACEjD,OAAQA,EACRC,UAAWA,EACXd,MAAO8C,EACP7C,SAAUkD,KAbZzP,EAAAlM,EAAAC,cAACgT,EAAA,MAAD,CAAAxR,GAAA,2DAwCAyK,EAAAlM,EAAAC,cAAA,OAAKC,UAAU,6BACbgM,EAAAlM,EAAAC,cAAA,OAAKC,UAAU,+BACfgM,EAAAlM,EAAAC,cAACka,EAAD,CACEd,OAAQA,EACRC,UAAWA,EACX3E,UAAW0G,QCnGVkB,EAAiBzZ,mBAAiB,SAAAjD,GAAiB,IAAd6D,EAAc7D,EAAd6D,QAC1CrB,EAAa5B,cAEb+b,EAAWna,EAAWoa,kBAHkCC,EAKpCC,YACxB,CACEH,SAAUA,GAEZ,CAAEjX,KAAkB,OAAZ7B,GAAiC,OAAb8Y,EAAmBxH,YAAa,gBAJtDxP,EALsDkX,EAKtDlX,KAAMC,EALgDiX,EAKhDjX,QAORmX,EAAmBC,cAEnBlI,EAAY9P,IAAMoB,YAAN,eAAAiB,EAAA9D,OAAA8R,EAAA,EAAA9R,CAAA+R,EAAAnV,EAAAoG,KAChB,SAAAC,EAAMwT,GAAN,IAAA3I,EAAA,OAAAiE,EAAAnV,EAAAuG,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,UACkB,OAAZhD,GAAiC,OAAb8Y,EAD1B,CAAAhW,EAAAE,KAAA,eAAAF,EAAAG,OAAA,UAEW,GAFX,cAAAH,EAAAE,KAAA,EAIuBkW,EAAiBJ,EAAU3C,GAJlD,cAIQ3I,EAJR1K,EAAA6O,KAAA7O,EAAAG,OAAA,SAKS0L,QAAQnB,IALjB,wBAAA1K,EAAAI,SAAAP,MADgB,gBAAAQ,GAAA,OAAAK,EAAAJ,MAAAC,KAAAC,YAAA,GAQhB,CAACtD,EAAS8Y,IAGNtB,EAAUrW,IAAMoB,YAAY,WAChC5D,EAAWya,UAAU,OACpB,CAACxT,UAEJ,OACE4C,EAAAlM,EAAAC,cAAC8c,EAAD,CACE1D,OAAQ5T,EAAU,KAAOD,EAAK6T,OAC9B1E,UAAWA,EACXuG,QAASA,EACTH,UAAWtV,wBClCJuX,EAAkBla,mBAAiB,SAAAjD,GAAiB,IAAd6D,EAAc7D,EAAd6D,QAAcX,EAChBlC,cAAhCwB,EADgDU,EACvDnC,MAAyBqc,EAD8Bla,EACpCC,KAErBka,EAAS7a,EAAW8a,iBAHqCC,EAKrCC,YACxB,CACEH,OAAQA,GAEV,CAAE3X,KAAkB,OAAZ7B,GAA+B,OAAXwZ,IAJtB1X,EALuD4X,EAKvD5X,KAAMC,EALiD2X,EAKjD3X,QALiD6X,EAY1CC,cAAdC,EAZwDpa,OAAAgL,EAAA,EAAAhL,CAAAka,EAAA,MAczD3I,EAAY9P,IAAMoB,YAAN,eAAAiB,EAAA9D,OAAA8R,EAAA,EAAA9R,CAAA+R,EAAAnV,EAAAoG,KAChB,SAAAC,EAAMwT,GAAN,IAAA3I,EAAA,OAAAiE,EAAAnV,EAAAuG,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,UACkB,OAAZhD,GAA+B,OAAXwZ,EAD1B,CAAA1W,EAAAE,KAAA,eAAAF,EAAAG,OAAA,UAEW,GAFX,cAAAH,EAAAE,KAAA,EAIuB8W,EAAW,CAC9BN,SACArD,aACAnW,UACAC,UAAWsZ,EAAUtZ,YARzB,cAIQuN,EAJR1K,EAAA6O,KAAA7O,EAAAG,OAAA,SAUS0L,QAAQnB,IAVjB,wBAAA1K,EAAAI,SAAAP,MADgB,gBAAAQ,GAAA,OAAAK,EAAAJ,MAAAC,KAAAC,YAAA,GAahB,CAACtD,EAASwZ,IAGNhC,EAAUrW,IAAMoB,YAAY,WAChC5D,EAAWob,eAAe,OACzB,CAACnU,UAEEoU,EAAsB7Y,IAAM8Y,QAChC,kBACElY,OACIwH,EACCzH,EAAKoY,KAAK/D,WAAWjY,IAAI6Z,KAAGoC,KAAK,CAAC,SAAU,SACnD,CAACpY,EAASD,IAGZ,OACE0G,EAAAlM,EAAAC,cAAC8c,EAAD,CACE1D,OAAQ5T,EAAU,KAAOD,EAAKoY,KAAKvE,OACnC4B,kBAAmByC,EACnB/I,UAAWA,EACXuG,QAASA,EACTH,UAAWtV,MC5DjBtF,EAAAC,EAAAC,EAAA,sBAAAyd,IAYO,IAAMA,EAAWhb,mBAAiB,SAAAjD,GAA4B,IAAAke,EAAAle,EAAzBme,kBAAyB,IAAAD,KAC7D1b,EAAa5B,cACbiD,EAAUrB,EAAWqB,QAC3B,OACEwI,EAAAlM,EAAAC,cAAAiM,EAAAlM,EAAAmK,SAAA,KACE+B,EAAAlM,EAAAC,cAACsc,EAAD,CAAgB7Y,QAASA,IACzBwI,EAAAlM,EAAAC,cAAC+c,EAAD,CAAiBtZ,QAASA,IAC1BwI,EAAAlM,EAAAC,cAACge,EAAA,EAAD,CACEva,QAASA,EACTsa,WAAYA,GAAc3b,EAAWkC,kkBCR7C,IAAM2Z,EAA0B7e,UAAOC,IAAVC,WAAA,CAAAC,YAAA,6CAAAC,YAAA,YAAGJ,CAAH,8oBASzBmM,YATyB7L,KAYzBD,YAZyB+L,MA6Fd0S,EA/B6B,SAAAte,GAAoB,IAAjB4Z,EAAiB5Z,EAAjB4Z,WAAiB2E,EACR/D,mBAAS,GADDgE,EAAAjb,OAAAgL,EAAA,EAAAhL,CAAAgb,EAAA,GACvDE,EADuDD,EAAA,GAClCE,EADkCF,EAAA,GAE9D,OACEnS,EAAAlM,EAAAC,cAACie,EAAD,CAAyB1Z,cAAY,qBACZ,IAAtBiV,EAAWzM,OACR,KACAyM,EAAW7X,IAAI,SAACiQ,EAAU/P,GAAX,OACboK,EAAAlM,EAAAC,cAACue,EAAAxe,EAAOye,KAAR,CACEC,GAAI7M,EAASiH,UACb/W,IAAK8P,EAASpQ,GACdvB,UAAWuN,aAAG,OAAQ,CACpBkR,OAAQL,IAAwBxc,IAElC8c,YAAa,kBAAML,EAAuBzc,IAC1C+c,QAAS,IACTC,QAAQ,EACRC,KAAK,EACLC,MAAOnN,EAASiH,WAEhB5M,EAAAlM,EAAAC,cAAA,OAAKC,UAAU,UACbgM,EAAAlM,EAAAC,cAAA,QAAMC,UAAS,YAAAyI,OAAckJ,EAASoN,cAExC/S,EAAAlM,EAAAC,cAAA,OAAKC,UAAU,eACbgM,EAAAlM,EAAAC,cAACif,EAAA,EAAD,CAAUC,MAAO,GAAItN,EAASiH,2ICvF9C,IAAMsG,EAAqB/f,UAAOC,IAAVC,WAAA,CAAAC,YAAA,mCAAAC,YAAA,gBAAGJ,CAAH,6EASlBggB,EAA0BhgB,kBAAO,MAAVE,WAAA,CAAAC,YAAA,wCAAAC,YAAA,gBAAGJ,CAAH,SACzBK,YADyB4f,MAadza,MAAMC,KATkB,SAAAjF,GAAA,IAAGgS,EAAHhS,EAAGgS,SAAU/R,EAAbD,EAAaC,SAAb,OACrCoM,EAAAlM,EAAAC,cAACue,EAAAxe,EAAOuf,QAAR,CAAgBjV,KAAMuH,EAASiH,WAC7B5M,EAAAlM,EAAAC,cAACmf,EAAD,KACElT,EAAAlM,EAAAC,cAACof,EAAD,KAA0BxN,EAASiH,WAClChZ,iJCNP,IAAM0f,EAAqBngB,UAAOC,IAAVC,WAAA,CAAAC,YAAA,mCAAAC,YAAA,gBAAGJ,CAAH,6kBAYF,SAAAQ,GAAA,OAAAA,EAAG4f,SACV,UAAY,SAkBH,SAAAvY,GAAA,OAAAA,EAAGiM,MAAkBC,WAQvC1T,YAvCkBggB,MA6ClBC,EAAoBtgB,UAAOugB,IAAVrgB,WAAA,CAAAC,YAAA,kCAAAC,YAAA,gBAAGJ,CAAH,sIAUjBwgB,EAA0BxgB,UAAOC,IAAVC,WAAA,CAAAC,YAAA,wCAAAC,YAAA,gBAAGJ,CAAH,oLAGP,SAAAmJ,GAAA,OAAAA,EAAG2K,MAAkB2E,UASrCgI,EAAoBzgB,UAAOC,IAAVC,WAAA,CAAAC,YAAA,kCAAAC,YAAA,gBAAGJ,CAAH,uOACD,SAAA4Y,GAAA,OAAAA,EAAG9E,MAAkB2E,UA0F5BiI,EA3EMlb,IAAMC,KAAa,SAAAkb,GAAuC,IAApC3G,EAAoC2G,EAApC3G,OAAQ4G,EAA4BD,EAA5BC,SAAUC,EAAkBF,EAAlBE,YACrD7d,EAAa5B,cAEb0f,EAAgB9G,EAAO+G,cAAgB,EAEvCle,EAAU2C,IAAMoB,YAAY,WAChCia,EAAY7G,EAAO5X,GAAI0e,IACtB,CAACA,EAAeD,IAP0DG,EASlDC,YAAyB,CAClDtL,YAAa,gBADRuL,EATsEnd,OAAAgL,EAAA,EAAAhL,CAAAid,EAAA,MAavEG,EAAe3b,IAAMoB,YAAY,WACSka,GAC5CI,EAAiB,CAAE/D,SAAUnD,EAAO5X,MAErC,CAAC0e,EAAeI,IAEbE,EAAmB5b,IAAM6H,QAAQ,GAuBvC,OAAO5L,sBAAY,kBACjBoL,EAAAlM,EAAAC,cAACuf,EAAD,CACEtd,QAASA,EACTse,aAAcA,EACdf,SAAUpd,EAAWqe,qBAAuBrH,EAAO5X,GACnD+C,cAAA,iBAAAmE,OAA8B0Q,EAAO5X,KAEpC4X,EAAOsH,OACNzU,EAAAlM,EAAAC,cAAC0f,EAAD,CAAmBiB,IAAKvH,EAAOsH,MAAOE,IAAKxH,EAAOP,YAGpD5M,EAAAlM,EAAAC,cAAC4f,EAAD,MACA3T,EAAAlM,EAAAC,cAAC6f,EAAD,CAAmBtb,cAAA,wBAAAmE,OAAqC0Q,EAAO5X,KAC5D4X,EAAON,MAAMC,gBAlCG,WACrB,IAAM8H,EAAiBb,EAASpP,IAAIwI,EAAO5X,IAC3C,IAAKqf,EAEH,OADAL,EAAiB9T,SAAW,EACrB,KAET,IAAMzM,EAAYuN,aAAG,WAAY,WAAY,CAC3CsT,MAAOD,EAAiB,GAAKL,EAAiB9T,QAAU,EACxDqU,OACsB,IAAnBF,GAAqD,IAA7BL,EAAiB9T,UACZ,IAA9B8T,EAAiB9T,UAGrB,OADA8T,EAAiB9T,QAAUmU,EAEzB5U,EAAAlM,EAAAC,cAAA,OACE8B,IAAK+e,EACL5gB,UAAWA,GAFb,GAAAyI,OAGKmY,EAHL,MAsBCG,GACD/U,EAAAlM,EAAAC,cAAA,MAAI+e,MAAO3F,EAAOP,WAChB5M,EAAAlM,EAAAC,cAACif,EAAA,EAAD,CAAUC,MAAO,EAAG3a,cAAA,uBAAAmE,OAAoC0Q,EAAO5X,KAC5D4X,EAAOP,YAGZ5M,EAAAlM,EAAAC,cAAA,SACEiM,EAAAlM,EAAAC,cAACif,EAAA,EAAD,CACEC,MAAO,EACP3a,cAAA,8BAAAmE,OAA2C0Q,EAAO5X,KAEjD4X,EAAOgD,sjBC1JlB,IAAM6E,EAAiB7hB,UAAOC,IAAVC,WAAA,CAAAC,YAAA,2BAAAC,YAAA,gBAAGJ,CAAH,8DAEhBmM,YAFgB2V,KAGhBzhB,YAHgB0hB,KAUd5V,YAVc6V,KAcd3hB,YAdc4hB,MAiFLzc,MAAMC,KA5Dc,SAAAjF,GAAwC,IAArC6D,EAAqC7D,EAArC6D,QAAS+V,EAA4B5Z,EAA5B4Z,WAAYsB,EAAgBlb,EAAhBkb,UAAgBhY,EAC7BlC,cAA7BwB,EAD0DU,EACjEnC,MAAmB2gB,EAD8Cxe,EAC9Cwe,OAAQ5V,EADsC5I,EACtC4I,KAE7BsU,ECtCD,SAA6Bvc,GAAkB,IAAA8d,EAC1BC,YACxB,CACE/d,QAASA,GAEX,CACE6B,MAAO7B,EACPsR,YAAa,eANTxP,EAD4Cgc,EAC5Chc,KAAMC,EADsC+b,EACtC/b,QADsC2U,EAWjCvV,IAAMwV,SAAS,kBAAMqH,aAAW9f,QAA5Cqe,EAX6C7c,OAAAgL,EAAA,EAAAhL,CAAAgX,EAAA,MAyBpD,OAZK3U,GACHkc,sBAAY,WACV1B,EAAS3S,QACT9H,EAAK5E,MAAMqf,SAAS2B,QAAQ,SAAA/hB,GAAwB,IAAX4B,EAAW5B,EAArBwZ,OAAU5X,GAClCwe,EAASrP,IAAInP,IAChBwe,EAAS3O,IAAI7P,EAAI,GAEnBwe,EAAS3O,IAAI7P,EAAIwe,EAASpP,IAAIpP,GAAO,OAKpCwe,EDaU4B,CAAoBne,GAE/BkZ,EAAmBC,cACnBqD,EAAcrb,IAAMoB,YACxB,SAACuW,EAAcsF,GACTzf,EAAWkC,qBAGX0b,EAAS7V,MAAQmX,EAAOQ,cAC1BpW,EAAKqW,iBACIF,EAETzf,EAAWya,UAAUN,IAErBna,EAAW4f,gBAAgBzF,GAC3BI,EAAiBJ,MAGrB,CAACI,IAgCH,OACE1Q,EAAAlM,EAAAC,cAACihB,EAAD,CAAgB1c,cAAY,YAC1B0H,EAAAlM,EAAAC,cAAA,WA9BE8a,EACK7O,EAAAlM,EAAAC,cAACmc,EAAA,EAAD,CAAQzZ,UAAU,IAED,IAAtB8W,EAAWzM,OAEXd,EAAAlM,EAAAC,cAAA,UACEiM,EAAAlM,EAAAC,cAACgT,EAAA,MAAD,CAAAxR,GAAA,uCAKJyK,EAAAlM,EAAAC,cAAAiM,EAAAlM,EAAAmK,SAAA,KACGsP,EAAW7X,IAAI,SAAAiQ,GAAQ,OACtB3F,EAAAlM,EAAAC,cAACiiB,EAAD,CAAcngB,IAAK8P,EAASpQ,GAAIoQ,SAAUA,GACvCA,EAASsQ,QAAQvgB,IAAI,SAAAyX,GAAM,OAC1BnN,EAAAlM,EAAAC,cAACmiB,EAAD,CACErgB,IAAKsX,EAAO5X,GACZ4X,OAAQA,EACR4G,SAAUA,EACVC,YAAaA,wCE7EhBmC,EAA4B,WAAM,IACrC1W,EAAS9K,cAAT8K,KACR,OAAO7K,sBAAY,kBACjBoL,EAAAlM,EAAAC,cAACqiB,EAAA,EAAD,CACErhB,QAAS0K,EAAK4W,sBACdrH,QAASvP,EAAK6W,eACdhgB,WAAY6J,EAAA,EAAI3H,EAAA,2BAEf2H,EAAA,EAAI3H,EAAA,iECfXvE,EAAAC,EAAAC,EAAA,sBAAAoiB,IAUO,IAAMA,EAAe3f,mBAAS,WAAM,IAAAC,EACLlC,cAArBwB,EAD0BU,EACjCnC,MAAmB+K,EADc5I,EACd4I,KADc+W,EAGN1M,YAAiB3T,EAAW6T,UAAvD1Q,EAHiCkd,EAGjCld,KAAMC,EAH2Bid,EAG3Bjd,QAASkd,EAHkBD,EAGlBC,QAEvBrf,sBAAY,kBAAMqI,EAAKiX,UAAU,kBAAMD,MAEvC,IAAMlJ,EAAa5U,IAAM8Y,QACvB,kBACElY,EAAU,GAAKD,EAAKqd,eAAe1R,OAAO,SAAA2R,GAAG,OAAIA,EAAIX,QAAQnV,OAAS,KACxE,CAACvH,EAASD,IAGZ,OACE0G,EAAAlM,EAAAC,cAAAiM,EAAAlM,EAAAmK,SAAA,KACE+B,EAAAlM,EAAAC,cAAC8iB,EAAD,MACA7W,EAAAlM,EAAAC,cAAC+iB,EAAD,CAAmBvJ,WAAYA,IAC/BvN,EAAAlM,EAAAC,cAACgjB,EAAD,CACEvf,QAASrB,EAAWqB,QACpB+V,WAAYA,EACZsB,UAAWtV,yFCxBNyd,EAA4B,kBACvChX,EAAAlM,EAAAC,cAACkjB,EAAA,EAAD,KACEjX,EAAAlM,EAAAC,cAACmjB,EAAA,EAAD,CACE9Y,KAAK,QACLvG,KAAK,QACLuE,aAAa,QACbC,YAAa8D,EAAA,EAAI3H,EAAA,wBCNV2e,EAA2B,kBACtCnX,EAAAlM,EAAAC,cAACkjB,EAAA,EAAD,KACEjX,EAAAlM,EAAAC,cAACqjB,EAAA,EAAD,KACEpX,EAAAlM,EAAAC,cAACmjB,EAAA,EAAD,CACE9Y,KAAK,YACLhC,aAAa,aACbC,YAAa8D,EAAA,EAAI3H,EAAA,gBAEnBwH,EAAAlM,EAAAC,cAACmjB,EAAA,EAAD,CACE9Y,KAAK,WACLhC,aAAa,cACbC,YAAa8D,EAAA,EAAI3H,EAAA,4BCXZ6e,EAA2B,WACtC,IAAMC,EAAyBnX,EAAA,EAAI3H,EAAA,sCACnC,OACEwH,EAAAlM,EAAAC,cAACkjB,EAAA,EAAD,KACEjX,EAAAlM,EAAAC,cAACmjB,EAAA,EAAD,CACE9Y,KAAK,OACLvG,KAAK,WACLwE,YAAa8D,EAAA,EAAI3H,EAAA,QACjBsa,MAAOwE,EACPC,mBAAmB,IAErBvX,EAAAlM,EAAAC,cAACyjB,EAAA,EAAD,KAAWF,cCVJG,EAA4B,WACvC,IACMC,EAA6C,kBADrC,IAAIC,WAASC,OAAOpV,UAAUqV,WACfC,aAAa1Z,KAC1C,OACE4B,EAAAlM,EAAAC,cAACkjB,EAAA,EAAD,KACEjX,EAAAlM,EAAAC,cAACqjB,EAAA,EAAD,KACEpX,EAAAlM,EAAAC,cAACmjB,EAAA,EAAD,CACE9Y,KAAK,cACLhC,aAAcsb,EAAiB,MAAQ,mBACvCrb,YAAY,WAEd2D,EAAAlM,EAAAC,cAACmjB,EAAA,EAAD,CACE9Y,KAAK,QACLvG,KAAK,MACLuE,aAAa,eACbC,YAAa8D,EAAA,EAAI3H,EAAA,SACjBkT,MAAO,CAAEiB,MAAO,YCvB1B1Y,EAAAC,EAAAC,EAAA,sBAAA4jB,IAOO,IAAMC,EAAkB,kBAC7BhY,EAAAlM,EAAAC,cAAAiM,EAAAlM,EAAAmK,SAAA,KACE+B,EAAAlM,EAAAC,cAACkkB,EAAD,MACAjY,EAAAlM,EAAAC,cAACmkB,EAAD,MACAlY,EAAAlM,EAAAC,cAACokB,EAAD,MACAnY,EAAAlM,EAAAC,cAACqkB,EAAD,8MCJG,SAASC,EAAgBC,EAAaC,EAAWC,GACtD,IAAI/X,EAAUgY,wBAUT,SAAqB5X,EAAY2X,GACtC,OAAOE,qBAGF,SAAuB7X,EAAY2X,GACxC,OAAOG,qBAAW9X,EAAM+X,qBAAW/X,GAAQ2X,GAJzBK,CAAchY,EAAM2X,GAAaA,GAXvBM,CAAYR,EAAOE,IACzCO,EAAgB,GAChBC,EAAYC,sBAAYN,qBAAWJ,EAAK,IAC9C,GACEQ,EAAMG,KAAKzY,GACXA,EAAUiY,qBAAWjY,EAAS+X,SACvB/X,GAAWuY,GACpB,OAAOD,gCCHHI,EAAOhmB,UAAOC,IAAVC,WAAA,CAAAC,YAAA,yBAAAC,YAAA,YAAGJ,CAAH,uBAIGimB,EAAqC,SAAAzlB,GAAA,IAChDkN,EADgDlN,EAChDkN,KACG2L,EAF6CtV,OAAA8U,EAAA,EAAA9U,CAAAvD,EAAA,iBAIhD0lB,EAAAvlB,EAAAC,cAAC0Y,EAAA,EAADvV,OAAAgF,OAAA,CACEgC,KAAK,KACLwO,SAAS,EACTC,MAAM,QACNrU,cAAA,qBAAAmE,OAAkCoE,EAAKyY,YACnC9M,GAEJ6M,EAAAvlB,EAAAC,cAAColB,EAAD,KAAOI,YAAW1Y,MCLhB2Y,EAAsBrmB,UAAOC,IAAVC,WAAA,CAAAC,YAAA,kCAAAC,YAAA,gBAAGJ,CAAH,sBAInBsmB,EAAgBtmB,UAAOC,IAAVC,WAAA,CAAAC,YAAA,4BAAAC,YAAA,gBAAGJ,CAAH,+EAONumB,EAA+B,SAAA/lB,GAOtC,IANJgmB,EAMIhmB,EANJgmB,QACAC,EAKIjmB,EALJimB,QACApB,EAII7kB,EAJJ6kB,WACAqB,EAGIlmB,EAHJkmB,aACAC,EAEInmB,EAFJmmB,YAEIC,EAAApmB,EADJqmB,uBACI,IAAAD,EADc,GACdA,EACEhB,EAAQpgB,IAAM8Y,QAAQ,WAC1B,IAAMwI,EAAW5B,EAAgBsB,EAASC,EAASpB,GACnD,OAAIwB,EAAgBlZ,OACXmZ,EAAShV,OAAO,SAAAiV,GAAI,OACzBF,EAAgBG,KAAKC,2BAAiBF,MAGnCD,GACN,CAACN,EAASC,EAASpB,EAAYwB,IAE5BK,EAAO1hB,IAAM8Y,QAAQ,WACzB,OAAO6I,4BAAkB,CAAEhC,MAAOqB,EAASpB,IAAKqB,KAC/C,CAACD,EAASC,IAbT1L,EAe0BvV,IAAMwV,SAAS,GAfzCC,EAAAlX,OAAAgL,EAAA,EAAAhL,CAAAgX,EAAA,GAeGqM,EAfHnM,EAAA,GAeYoM,EAfZpM,EAAA,GA2BJ,OAVAzV,IAAM6E,UAAU,WACVsc,GACFU,EAAWC,yBAAeX,EAAaf,KAExC,CAACe,IAEJnhB,IAAM6E,UAAU,WACdqc,EAAad,EAAMwB,KAClB,IAGDlB,EAAAvlB,EAAAC,cAACylB,EAAD,KACGa,EAAK3kB,IAAI,SAAAglB,GAAG,OACXrB,EAAAvlB,EAAAC,cAAC4mB,EAAA,SAAD,CAAU9kB,IAAK6kB,EAAIE,WACjBvB,EAAAvlB,EAAAC,cAAC0lB,EAAD,KACEJ,EAAAvlB,EAAAC,cAAC0Z,EAAA,WAAD,CACE3V,MAAO4iB,EACP5b,OAAQ,CAAE+b,MAAO,OAAQH,IAAK,UAAW3b,QAAS,WAGrDga,EAAMrjB,IAAI,SAACwkB,EAAMtkB,GAAP,OACTklB,kBAAQJ,EAAKK,qBAAWb,IACtBb,EAAAvlB,EAAAC,cAACinB,EAAD,CACEnlB,IAAKqkB,EAAKZ,UACVzY,KAAMqZ,EACNrM,WAAYjY,IAAQ2kB,EACpBnO,eAAe,EACfpW,QAAS,WACPwkB,EAAW5kB,GACXikB,EAAaK,MAGf,4CCvET,IAAMe,EAAkBrkB,mBAAS,WACtC,IAAMskB,EAAOvmB,cAD+BkC,EAEpBlC,cAAhBD,EAFoCmC,EAEpCnC,MAAOoC,EAF6BD,EAE7BC,KAF6BqkB,EAIlBC,YACxB,CAAEpR,SAAUtV,EAAMsV,UAClB,CAAE3Q,MAAO6hB,EAAKG,cAAgB3mB,EAAMsV,WAF9B1Q,EAJoC6hB,EAIpC7hB,KAAMC,EAJ8B4hB,EAI9B5hB,QAJ8B+hB,EAStBC,cAAfC,EATqCtkB,OAAAgL,EAAA,EAAAhL,CAAAokB,EAAA,MAWtCG,EAAe9iB,IAAM6H,OAAoB9L,EAAMgK,WAoFrD/F,IAAM6E,UAAU,WAEZlE,GACAA,EAAKoiB,eACLpiB,EAAKoiB,cAAcC,wBAEnBjnB,EAAMknB,sBAEP,CAACtiB,IAEJ,IAAMuiB,EAASnnB,EAAMonB,yBACjB3b,EAAA,EAAI3H,EAAA,yBACJ2H,EAAA,EAAI3H,EAAA,mCAER,OACE6gB,EAAAvlB,EAAAC,cAAC6b,EAAA,EAAD,CACE7a,OAAQL,EAAMqnB,eACd9mB,OAAQP,EAAMsnB,gBACdhoB,UAAU,mBACV6b,WAAW,EACXC,SAAS,SACTC,MAAM,GAENsJ,EAAAvlB,EAAAC,cAACic,EAAA,EAAD,CACE/a,OAAQP,EAAMsnB,gBACd5mB,IAAKC,IACLrB,UAAU,iBAEVqlB,EAAAvlB,EAAAC,cAAA,YAAO8nB,IAETxC,EAAAvlB,EAAAC,cAACkc,EAAA,EAAD,CAAWjc,UAAU,eACnBqlB,EAAAvlB,EAAAC,cAAA,OAAKC,UAAU,wBA5DM,WACzB,GAAIuF,EACF,OAAO,KAGT,IAAMogB,EAhDa,WAAM,IACjB+B,EAAkBpiB,EAAlBoiB,cAKR,OAHEA,EAAc3mB,SAAW2mB,EAAcO,WACnC,IAAIC,KACJ,IAAIA,KAAKR,EAAcO,YA2CbE,GACVvC,EAxCW,WAAM,IACf8B,EAAkBpiB,EAAlBoiB,cACR,GAAIA,EAAc3mB,QAAU2mB,EAAcU,YACxC,OAAO,IAAIF,KAAKR,EAAcU,aAEhC,IAAMC,EAAmBX,EAAcY,cAAcpW,KACnDqJ,KAAGgN,OAAO,UAAU,IAEtB,OAAOF,EAAmB,IAAIH,KAAKG,EAAiBG,SAAW,KAgC/CC,GAChB,GAAgB,OAAZ7C,GAAoB8C,kBAAQ/C,EAASC,GACvC,OACEP,EAAAvlB,EAAAC,cAAC0Z,EAAA,MAAD,CAAAlY,GAAA,oEAMJ,IAAMonB,EA5BgB,WAAM,IAAAC,EACuBtjB,EAAKoiB,cAAhDmB,EADoBD,EACpBC,oBAAqBC,EADDF,EACCE,kBAE7B,OAAIpoB,EAAMonB,yBACDe,EAELnoB,EAAMqoB,uBACDD,EAGF,EAkBcE,GAErB,OACE3D,EAAAvlB,EAAAC,cAACkpB,EAAD,CACEzE,WAAY,GACZmB,QAASjB,qBAAWiB,EAASgD,GAC7B/C,QAASlB,qBAAWkB,EAAS+C,GAC7B7C,YAAa2B,EAAahb,QAC1BuZ,gBA7CsB1gB,EAAlBoiB,cACaY,cAClBrX,OAAOsK,KAAGgN,OAAO,UAAU,IAC3B7mB,IAAI,SAAAwnB,GAAK,MAAK,CACb5E,MAAO,IAAI4D,KAAKgB,EAAMC,QACtB5E,IAAK,IAAI2D,KAAKgB,EAAMV,YAyCpB3C,aAAc,SAAAhZ,GAAI,OAAK4a,EAAahb,QAAUI,KAoCPuc,IACvC/D,EAAAvlB,EAAAC,cAAA,OAAKC,UAAU,6BACbqlB,EAAAvlB,EAAAC,cAAA,OAAKC,UAAU,+BACfqlB,EAAAvlB,EAAAC,cAACmM,EAAA,EAAD,CACElK,QAtHgB,WACxB,IAAM6K,EAAO4a,EAAahb,QAC1B+a,EAAY,CACVhkB,QAAS9C,EAAM8C,QACfkH,UAAWmC,GAAQwc,kBAAQxc,GAC3BpJ,UAAWX,EAAKW,YAElB/C,EAAMkK,aAAaiC,GACnBnM,EAAMsnB,mBA+GE9d,KAAK,KACLlK,UAAU,uBAEVqlB,EAAAvlB,EAAAC,cAAC0Z,EAAA,MAAD,CAAAlY,GAAA,sLC9IC+nB,SAAqBnqB,UAAOC,IAAVC,WAAA,CAAAC,YAAA,mCAAAC,YAAA,eAAGJ,CAAH,8eCDzBoqB,EAA0BpqB,UAAOC,IAAVC,WAAA,CAAAC,YAAA,6CAAAC,YAAA,YAAGJ,CAAH,oLAiBhBqqB,EAAoB5mB,mBAC/B,SAAAjD,GAQM,IAPJ8pB,EAOI9pB,EAPJ8pB,UACAhU,EAMI9V,EANJ8V,QACAiU,EAKI/pB,EALJ+pB,YACAC,EAIIhqB,EAJJgqB,UACAC,EAGIjqB,EAHJiqB,gBACA/hB,EAEIlI,EAFJkI,WACA2Q,EACI7Y,EADJ6Y,YAEMrW,EAAa5B,cACbgB,EAAE,aAAAkH,OAAgBghB,EAAUloB,IAElC,OACE8jB,EAAAvlB,EAAAC,cAACwpB,EAAD,KACElE,EAAAvlB,EAAAC,cAACupB,EAAD,KACEjE,EAAAvlB,EAAAC,cAACuN,EAAA,EAADpK,OAAAgF,OAAA,GACML,EADN,CAEEtG,GAAIA,EACJsC,KAAK,WACLO,SAAUjC,EAAWkC,mBACrBwlB,SAAUpU,EACVqU,UAAW,SAAA9lB,GACJyR,GACDzR,EAAGG,OAA4B4lB,kBAC/B5d,EAAA,EAAI3H,EAAA,mDAIVxC,QAAS,SAAAgC,GACLA,EAAGG,OAA4B4lB,kBAAkB,KAErDzlB,cAAA,iBAAAmE,OACEghB,EAAUO,YAAc,YAAc,OAG1C3E,EAAAvlB,EAAAC,cAAA,SAAOkqB,QAAS1oB,GACbooB,EACAF,EAAUO,aAAe,OAE5B3E,EAAAvlB,EAAAC,cAACoL,EAAA,EAADjI,OAAAgF,OAAA,GAAYsQ,EAAZ,CAAyBzW,MAAM,SAC5B2nB,EACGvd,EAAA,EAAI3H,EAAA,WAAY0lB,oBAChB/d,EAAA,EAAI3H,EAAA,QAAS0lB,sBAGrB7E,EAAAvlB,EAAAC,cAACoqB,EAAA,EAAD,CAAUppB,QAAS2oB,EAAa1pB,UAAU,eACvC4pB,sCC/DX,IAAMQ,EAAc,GAEPC,EAA4B,WACvC,IAAMloB,EAAa5B,cACb4I,EAAS3I,cAF8B0Z,EAGXvV,IAAMwV,SAASmQ,GAHJlQ,EAAAlX,OAAAgL,EAAA,EAAAhL,CAAAgX,EAAA,GAGtCqQ,EAHsCnQ,EAAA,GAG3BoQ,EAH2BpQ,EAAA,GAIvCqQ,EAAuBC,8BAAoBF,EAAc,KAE/D,SAASF,IAAmB,IAAAK,EAC0BxhB,EAAOsO,OAAnDmT,EADkBD,EAClBC,UAAWC,EADOF,EACPE,SAAUC,EADHH,EACGG,YAAaC,EADhBJ,EACgBI,MAC1C,MAAO,CACLC,MAAO,CACLxnB,QAASrB,EAAWqB,QACpBonB,YACAC,WACAE,MAAK,GAAAtiB,OAAKqiB,EAAYnd,QAAjBlF,OAA0BsiB,EAAMpd,UAK3ChJ,IAAM6E,UAAU,WAEd,OADAihB,EAAqBH,KACd,kBAAMG,EAAqBrd,UACjC,CAACjE,EAAOsO,SArBkC,IAAAwT,EAuBXC,YAAwBX,GAAlDjlB,EAvBqC2lB,EAuBrC3lB,KAAMkC,EAvB+ByjB,EAuB/BzjB,OAAQjC,EAvBuB0lB,EAuBvB1lB,QAGhB4lB,EAAaxmB,IAAM6H,OAAwB4d,GAC3CgB,EAAY5jB,GAAUA,EAAOsF,OAAS,EAEtCvH,GAAW6lB,IACfD,EAAW1e,QAAUnH,EAAK6lB,YAG5BxmB,IAAM6E,UAAU,WACV2hB,EAAW1e,QAAQK,OAAS,GAC9B3K,EAAWkpB,YAnC8B,IAAAC,EAuCNC,2BAAiBJ,EAAW1e,SAA3DuD,EAvCqCsb,EAuCrCtb,MAAOwb,EAvC8BF,EAuC9BE,oBAuBf,OArBAhV,qBAAW,WAETrN,EAAOsiB,cAAc,aAAcC,MAAMC,KAAK3b,EAAM4b,wBAItDjnB,IAAM6E,UAAU,WAYd,OAXAL,EAAO0iB,cAAc,aAAc,CACjCC,SAAU,WAOR,OANeX,EAAW1e,QAAQ0Z,KAAK,SAAAsD,GACrC,OACEA,EAAUO,cACTha,EAAM4b,oBAAoBlb,IAAI+Y,EAAUloB,MAG7B,YAAc,MAG3B,kBAAM4H,EAAO4iB,gBAAgB,gBACnC,IAECX,EAEA/F,EAAAvlB,EAAAC,cAAC0Z,EAAA,MAAD,CAAAlY,GAAA,gFAOGiqB,EAAoB,CAAEQ,aAAcxC,qHCvEhCyC,EAAsC,SAAAtsB,GAI7C,IAHJusB,EAGIvsB,EAHJusB,YACAnoB,EAEIpE,EAFJoE,SACAnE,EACID,EADJC,SAEMuC,EAAa5B,cACnB,OAAOK,sBAAY,kBACjBykB,EAAAvlB,EAAAC,cAACmM,EAAA,EAAD,CACEvB,SAAUxI,EAAW+pB,cAAgBA,EACrClqB,QAAS,WACPG,EAAWgqB,eAAeD,GAC1BnoB,EAAS5B,IAEXmC,cAAA,eAAAmE,OAA4ByjB,GAC5BE,oBAAmBjqB,EAAW+pB,cAAgBA,GAE7CtsB,sCChBP,IAAMysB,EAAoBltB,UAAOC,IAAVC,WAAA,CAAAC,YAAA,iCAAAC,YAAA,YAAGJ,CAAH,2NAmBVmtB,EAAgC,SAAA3sB,GAAgC,IAAA4sB,EAAA5sB,EAA7BoE,gBAA6B,IAAAwoB,EAAlBhR,KAAGiR,SAAeD,EAC3E,OACElH,EAAAvlB,EAAAC,cAACssB,EAAD,KACEhH,EAAAvlB,EAAAC,cAAC0sB,EAAD,CACEP,YAAaQ,IAAiBC,UAC9B5oB,SAAUA,GAEVshB,EAAAvlB,EAAAC,cAAA,QAAMC,UAAU,uBAChBqlB,EAAAvlB,EAAAC,cAAC0Z,EAAA,MAAD,CAAAlY,GAAA,uBAEF8jB,EAAAvlB,EAAAC,cAAC0sB,EAAD,CACEP,YAAaQ,IAAiBE,OAC9B7oB,SAAUA,GAEVshB,EAAAvlB,EAAAC,cAAA,QAAMC,UAAU,wBAChBqlB,EAAAvlB,EAAAC,cAAC0Z,EAAA,MAAD,CAAAlY,GAAA,iPC1BD,IAAMwc,EAA+B,SAAApe,GAA6B,IAA1B6D,EAA0B7D,EAA1B6D,QAASsa,EAAiBne,EAAjBme,WAChD7K,EAAQ4Z,cACRC,EAASnoB,IAAM8Y,QAAQsP,EAAe,IAF2BC,ECNlE,WAA0B,IAAAnqB,EACgBlC,cAAhCwB,EADgBU,EACvBnC,MAAyBqc,EADFla,EACJC,KACrBmqB,EAASC,4BACP9jB,EAAYC,6BAAZD,QACF+jB,EAAaxoB,IAAMoB,YAAY,SAAC2X,GACpCvb,EAAWob,eAAeG,IACzB,IAN4B0P,EAQVC,cAAdC,EARwBpqB,OAAAgL,EAAA,EAAAhL,CAAAkqB,EAAA,MAUzBG,EAAe5oB,IAAMoB,YAAY,SAAC2X,GACtC,IAAM6M,EAAsC,CAC1CvN,OAAQU,EACRja,UAAWsZ,EAAUtZ,UACrB+pB,aAAczQ,EAAUyQ,cAE1BF,EAAW/C,EAAW,CACpBkD,mBAAoBC,EAAqBnD,GACzCoD,QAAS,CACPC,SAAS,MAGZ,IAEGC,EAAelpB,IAAMoB,YAAY,WACrCqD,EAAQ8b,KAAK,aACZ,IAEG4I,EAAgBnpB,IAAMoB,YAAY,WACtCqD,EAAQ8b,KAAK,WACZ,IAEH,MAAO,CAAEnI,YAAWoQ,aAAYI,eAAcM,eAAcC,iBAE5D,SAASJ,EACPnD,GAEA,IAAM9d,EAAUwgB,EAAOc,UACrB,CACEC,MAAOC,IACP1D,UAAW,CACT/mB,QAASrB,EAAWqB,QACpBC,UAAWsZ,EAAUtZ,UACrB+pB,aAAczQ,EAAUyQ,gBAG5B,GAEF,GAAK/gB,EAAL,CAGA,IAAMyhB,EAAa3S,KAAG4S,OAAOC,mBAAS7D,EAAUvN,SAChD,MAAO,CACLqR,WAAY,WACZ3S,OAAOxY,OAAAuO,EAAA,EAAAvO,CAAA,GACFuJ,EAAQ/L,MADP,CAEJqJ,WAAY0C,EAAQ/L,MAAMqJ,WAAa,EACvCukB,SAASprB,OAAAuO,EAAA,EAAAvO,CAAA,GACJuJ,EAAQ/L,MAAM4tB,SADX,CAENxqB,OAAQ,IAEVyqB,MAAOhE,EAAU9mB,UACbyqB,EAAWzhB,EAAQ/L,MAAM6tB,OACzB9hB,EAAQ/L,MAAM6tB,MAClBxO,SAAUwK,EAAUiD,aAChBU,EAAWzhB,EAAQ/L,MAAMqf,UACzBtT,EAAQ/L,MAAMqf,cDlDpByO,GALFzR,EALqEiQ,EAKrEjQ,UACAoQ,EANqEH,EAMrEG,WACAI,EAPqEP,EAOrEO,aACAM,EARqEb,EAQrEa,aACAC,EATqEd,EASrEc,cAGIW,EAAqB9pB,IAAMoB,YAC/B,kBACEsf,EAAAvlB,EAAAC,cAACL,EAAA,EAAD,KACE2lB,EAAAvlB,EAAAC,cAACmM,EAAA,EAAD,CAAelK,QAAS8b,EAAagQ,EAAgBD,GAClD/P,EACCuH,EAAAvlB,EAAAC,cAAC0Z,EAAA,MAAD,CAAAlY,GAAA,iBAEA8jB,EAAAvlB,EAAAC,cAAC0Z,EAAA,MAAD,CAAAlY,GAAA,mBAKR,CAACssB,EAAc/P,IAGX4Q,EAAqB/pB,IAAMoB,YAC/B,kBAAMsf,EAAAvlB,EAAAC,cAAC0Z,EAAA,MAAD,CAAAlY,GAAA,0BACN,IAGIuB,EAAO6rB,wBAAc,CACzBC,OAAQ,CACNhX,QAAS3E,EAAM2E,QACfiX,SAAU5b,EAAM2E,QAChBkX,WAAY,QACZC,uBAAwB9b,EAAMC,WAEhC4Z,SACAhP,aACAkR,qBACAC,gBAAiBhc,EAAMic,eACvB/B,aACAI,eACAkB,qBACAC,uBAGF/pB,IAAM6E,UACJ,kBACE2lB,kBAAQ,WACNpS,EAAUqS,cAActsB,EAAKusB,MAAMC,SAAUxsB,EAAKusB,MAAME,cAE5D,IAGF,IAAMrI,EAAOvmB,cAEb,OAAOC,sBAAY,WAAM,IAAA4uB,EACGC,YACxB,CACEjsB,QAASA,EACTC,UAAWsZ,EAAUtZ,UACrB+pB,aAAczQ,EAAUyQ,cAE1B,CACEnoB,MAAO6hB,EAAKG,cAAgB7jB,EAC5BmqB,QAAS,CACPC,SAAS,KATPtoB,EADekqB,EACflqB,KAAMC,EADSiqB,EACTjqB,QAuBd,OATAZ,IAAM6E,UAAU,WACTjE,IACHzC,EAAK4sB,cAAcpqB,EAAK5E,OACpBqc,EAAUtZ,WACZX,EAAK6sB,YAAYrqB,EAAK5E,UAKrBoC,EAAK8sB,gBAIhB,SAAS7C,IACP,MAAO,CACL8C,WAAYxK,EAAAvlB,EAAAC,cAAC0Z,EAAA,MAAD,CAAAlY,GAAA,qBACZuuB,OAAQzK,EAAAvlB,EAAAC,cAAC0Z,EAAA,MAAD,CAAAlY,GAAA,aACRwuB,cAAe,SAAAC,GAAU,OACvB3K,EAAAvlB,EAAAC,cAAC0Z,EAAA,MAAD,CAAAlY,GAAA,8CAAAkW,OAAA,CAAuCuY,iBAEzCC,UAAW5K,EAAAvlB,EAAAC,cAAC0Z,EAAA,MAAD,CAAAlY,GAAA,kBACX2uB,cAAe7K,EAAAvlB,EAAAC,cAAC0Z,EAAA,MAAD,CAAAlY,GAAA,mBACf4uB,WAAY9K,EAAAvlB,EAAAC,cAAC0Z,EAAA,MAAD,CAAAlY,GAAA,WACZ6uB,aAAc/K,EAAAvlB,EAAAC,cAAC0Z,EAAA,MAAD,CAAAlY,GAAA,aACd+sB,SAAUjJ,EAAAvlB,EAAAC,cAAC0Z,EAAA,MAAD,CAAAlY,GAAA,UACV8uB,IAAKhL,EAAAvlB,EAAAC,cAAC0Z,EAAA,MAAD,CAAAlY,GAAA,QACL+uB,kBAAmB,SAAAzX,GAAK,OACtBwM,EAAAvlB,EAAAC,cAAC0Z,EAAA,MAAD,CAAAlY,GAAA,oCAAAkW,OAAA,CAAkCoB,qHE/G3B0X,EAAqB3tB,mBAChC,SAAAjD,GAAiC,IAA9BC,EAA8BD,EAA9BC,SAAU4wB,EAAoB7wB,EAApB6wB,cACIruB,EAAexB,cAAtBD,MACFmZ,EAAa1X,EAAWquB,gBAAkBA,EAChD,OACEnL,EAAAvlB,EAAAC,cAACmM,EAAA,EAAD,CACE9H,SAAUjC,EAAWkC,mBACrBsG,SAAUkP,EACV7X,QAAS,WACPG,EAAWsuB,iBAAiBD,IAE9BlsB,cAAA,sBAAAmE,OAAmC+nB,IAEnCnL,EAAAvlB,EAAAC,cAAC2wB,EAAD,CAAWC,KAAM9W,IAChBja,KAMT,SAAS8wB,EAAT1pB,GACE,OAD8CA,EAA3B2pB,KAEjBtL,EAAAvlB,EAAAC,cAAA,QAAMC,UAAU,0DAEhBqlB,EAAAvlB,EAAAC,cAAA,OAAKC,UAAU,8EC5BnB,IAAM4wB,EAA2BzxB,UAAOC,IAAVC,WAAA,CAAAC,YAAA,+CAAAC,YAAA,gBAAGJ,CAAH,0SAuBjB0xB,EAAqBlsB,IAAMC,KAAK,kBAC3CygB,EAAAvlB,EAAAC,cAAC6wB,EAAD,KACEvL,EAAAvlB,EAAAC,cAACwwB,EAAD,CAAoBC,cAAeM,IAAgBC,OACjD1L,EAAAvlB,EAAAC,cAAA,QAAMC,UAAU,wBACdqlB,EAAAvlB,EAAAC,cAAC0Z,EAAA,MAAD,CAAAlY,GAAA,kBAGJ8jB,EAAAvlB,EAAAC,cAACwwB,EAAD,CAAoBC,cAAeM,IAAgBE,MACjD3L,EAAAvlB,EAAAC,cAAA,QAAMC,UAAU,kBACdqlB,EAAAvlB,EAAAC,cAAC0Z,EAAA,MAAD,CAAAlY,GAAA,mJCvCRtB,EAAAC,EAAAC,EAAA,sBAAA8wB,IAAAhxB,EAAAC,EAAAC,EAAA,sBAAA+wB,IAAAjxB,EAAAC,EAAAC,EAAA,sBAAAgxB,IAAA,IAAAC,EAAAnxB,EAAA,GAAAoxB,EAAApxB,EAAA4I,EAAAuoB,GAAAE,EAAArxB,EAAA,MAGagxB,EAAW,SAAAtxB,GAAA,IAAGC,EAAHD,EAAGC,SAAH,OACtByxB,EAAAvxB,EAAAC,cAACuxB,EAAA,EAAD,CAAKtxB,UAAU,UAAUuxB,GAAG,KAAKC,GAAG,KAAKC,GAAG,KAAKC,GAAG,KACjD9xB,IAIQsxB,EAAe,SAAAlqB,GAAA,IAAGpH,EAAHoH,EAAGpH,SAAH,OAC1ByxB,EAAAvxB,EAAAC,cAACuxB,EAAA,EAAD,CAAKtxB,UAAU,UAAUuxB,GAAG,IAAIC,GAAG,IAAIC,GAAG,IAAIC,GAAG,KAC9C9xB,IAIQuxB,EAAgB,SAAA7oB,GAAA,IAAG1I,EAAH0I,EAAG1I,SAAH,OAC3ByxB,EAAAvxB,EAAAC,cAACuxB,EAAA,EAAD,CAAKtxB,UAAU,UAAUuxB,GAAG,IAAIC,GAAG,IAAIC,GAAG,IAAIC,GAAG,KAC9C9xB,kMCFQ+xB,EAAc,WAEdzO,EAAgBtgB,mBAC3B,SAAAjD,GAMM,IALJyK,EAKIzK,EALJyK,KACAwnB,EAIIjyB,EAJJiyB,MAIIC,EAAAlyB,EAHJkE,YAGI,IAAAguB,EAHG,OAGHA,EAAAC,EAAAnyB,EAFJ4jB,yBAEI,IAAAuO,KADDC,EACC7uB,OAAA8uB,EAAA,EAAA9uB,CAAAvD,EAAA,6CACEwC,EAAa5B,cADf0xB,EAEkBC,YAAS9nB,EAAMvG,GAFjCsuB,EAAAjvB,OAAAC,EAAA,EAAAD,CAAA+uB,EAAA,GAEGG,EAFHD,EAAA,GAEUE,EAFVF,EAAA,GAIEG,EACJ5uB,EAAA5D,EAAAC,cAACoB,EAAA,EAAD,CAAOoxB,IAAKnoB,EAAMoD,QAASokB,GACxBG,EAAQ1pB,aAAeupB,GAItB1sB,EAAYqe,GAAqB8O,EAAKG,QAE5C,OACE9uB,EAAA5D,EAAAC,cAAA2D,EAAA5D,EAAAmK,SAAA,KACGqoB,EACD5uB,EAAA5D,EAAAC,cAAC0yB,EAAA,EAADvvB,OAAAgF,OAAA,GACM6pB,EACAK,EAFN,CAGE7wB,GAAI6I,EACJvG,KAAMA,EACN6uB,MAAOL,EAAKG,UAAYH,EAAK1wB,MAC7BkoB,QAAS3kB,GAAaiN,QAAQkgB,EAAK1wB,OACnCyC,SAAUjC,EAAWkC,sBAEtBa,GAAamtB,EAAK1wB,QAAUgwB,EAC3BjuB,EAAA5D,EAAAC,cAACyB,EAAA,EAAD,CAAckxB,OAAO,EAAOC,SAAS,GAClCN,EAAK1wB,OAEN,0CCpDZ1B,EAAAC,EAAAC,EAAA,sBAAAyyB,IAAA,IAAAjqB,EAAA1I,EAAA,IAAA4yB,EAAA5yB,EAAA,KAuBO,SAAS2yB,EAATjzB,GAKI,IAJTmzB,EAISnzB,EAJTmzB,OAISC,EAAApzB,EAHTqzB,sBAGS,IAAAD,EAHQ,GAAKE,SAGbF,EAAAG,EAAAvzB,EAFTwzB,kCAES,IAAAD,EAFoB,GAEpBA,EAAAE,EAAAzzB,EADT0zB,mCACS,IAAAD,EADqB,GACrBA,EACHE,EAASC,mBAEfC,mBAAS,CACPC,SAAUT,EACVjnB,QAASinB,EAAiB,IAG5B,IAAMU,EAAMJ,IACJvyB,EAAoC+xB,EAApC/xB,OAAQqnB,EAA4B0K,EAA5B1K,YAAaH,EAAe6K,EAAf7K,WAIvB0L,EAAY1L,EAAa2L,8BAAoB3L,EAAYyL,GAAO,EAChEG,EAAYzL,EAAcwL,8BAAoBxL,EAAasL,GAAO,EAyBxE,MALgC,CAC9BI,SAnBE/yB,EACEqnB,GAAeyL,GAAa,EACnB,SAEAE,EAAO3L,EAAaiL,EAA6BK,GACxD,cACA,OAGFzL,GAAc0L,GAAa,EAClB,OAEAI,EAAO9L,EAAYkL,EAA4BO,GACtD,cACA,SAMNC,YACAE,aAKJ,SAASE,EAAOlnB,EAAqBmnB,EAAmBN,GACtD,QAAO7mB,GAAOonB,KAAKC,IAAIN,8BAAoB/mB,EAAM6mB,KAASM,qCCvE5D/zB,EAAAC,EAAAC,EAAA,sBAAAg0B,IAAA,IAAAxrB,EAAA1I,EAAA,IAAAm0B,EAAAn0B,EAAA,IAAAo0B,EAAAp0B,EAAA,KAKO,SAASk0B,IACd,IAAMjN,EAAOvmB,cACPwB,EAAa5B,cACX6I,EAAYC,6BAAZD,QAERoM,kBACE,kBAAM0R,EAAKG,aACX,WACOllB,EAAWsH,UACdL,EAAQ8b,KAAK,0CCdrBjlB,EAAAC,EAAAC,EAAA,sBAAAm0B,IAAA,IAAAlD,EAAAnxB,EAAA,GAAAoxB,EAAApxB,EAAA4I,EAAAuoB,GAAAmD,EAAAt0B,EAAA,IASaq0B,EAAgC,SAAA30B,GAAiB,IAAd0P,EAAc1P,EAAd0P,QAC9C,IAAKA,IAAYA,EAAQ9C,SACvB,OAAO8kB,EAAAvxB,EAAAC,cAAA,YAAOw0B,EAAA,EAAI/vB,EAAA,oBAFwC,IAIpD+H,EAAa8C,EAAb9C,SACR,OACE8kB,EAAAvxB,EAAAC,cAAA,eAAA0I,OAAU8D,EAASioB,OAAnB,KAAA/rB,OAA6B8D,EAASkoB,YAAtC,QAAAhsB,OACE8D,EAASmoB,8GCHFC,EAAqC,SAAAh1B,GAAA,IAChDi1B,EADgDj1B,EAChDi1B,UADgDC,GAAAl1B,EAEhDm1B,cAFgDn1B,EAGhDo1B,cAHgD,IAAAF,KAAAG,EAAAr1B,EAIhDuK,YAJgD,IAAA8qB,EAIzC,UAJyCA,EAKhDp1B,EALgDD,EAKhDC,SALgDq1B,EAAAt1B,EAMhDu1B,iBANgD,IAAAD,EAMpC,MANoCA,EAO7CE,EAP6CjyB,OAAAkyB,EAAA,EAAAlyB,CAAAvD,EAAA,4EAShDgF,IAAM5E,cACJZ,kBAAO+1B,GADT71B,WAAA,CAAAC,YAAA,mBAAAC,YAAA,gBACEJ,CADF,iIAEwB,SAAAoT,GAAK,aAAA9J,OAAW8J,EAAMU,MAAM2hB,GAAvB,MACA,SAAAriB,GAAK,OAAKwiB,EAAQ,QAAU,WAGlC,SAAAxiB,GAAK,OAAIrI,IAE9BirB,EACAv1B,IAGW+0B,wCClCf10B,EAAAC,EAAAC,EAAA,sBAAAk1B,IAAA,IAAAC,EAAAr1B,EAAA,IAAAs1B,EAAAt1B,EAAA,IAGO,SAASo1B,EAAkBrf,GAAe,IACvCtB,EAAa/T,cAAb+T,SACR,OAAO8gB,YACL,CACEC,gBAAiB/gB,EAASghB,WAAa1f,EACvC2f,QAASjhB,EAASihB,QAClB3f,SAAUA,GAAYtB,EAASsB,UAEjC,CACE3Q,MAAOqP,EAASe,QAChBX,YAAa,cACb6Y,QAAS,CAAEC,SAAS,sJCGpBgI,EAAgB,SAACtG,GACrB,MAAO,CACLuG,mBAAmB,EACnBC,gBAAgB,EAChBC,mBAAmB,EACnBC,gBAAgB,EAChBC,gBAAiB,UACjBC,QAAS,GACTC,mBAAoB,CAClBnf,SAAUsY,EACN8G,OAAOC,KAAKC,gBAAgBC,aAC5BH,OAAOC,KAAKC,gBAAgBE,aAKhCC,EAAY,CAAC,UAENC,EAAU9zB,mBACrB,SAAAjD,GAA2C,IAAxCg3B,EAAwCh3B,EAAxCg3B,MAAwCC,EAAAj3B,EAAjC2vB,gBAAiC,IAAAsH,KAAfh3B,EAAeD,EAAfC,SAClB6L,EAAS9K,cAAT8K,KADiCorB,EAGUC,wBAAc,CAC/Dv1B,GAAI,gBACJw1B,QAAS,SACTC,iBAAkBC,IAAUC,cAC5BT,YACA/T,SAAUjX,EAAKiX,WALTyU,EAHiCN,EAGjCM,SAAUC,EAHuBP,EAGvBO,UAAgBC,EAHOR,EAGZxmB,IASvBtE,GAAW6X,OAAOrX,SAASkB,OAAOqM,SAAS,cAiC3Cwd,EAAkBC,QAAQ7mB,IAAIkT,OAAQ,UAE5C,OAAIwT,GAAcD,IAAaG,GAC7BE,SAAOC,UAAU,SAAAC,GACfA,EAAMC,UAAU,CAAEN,iBAClBG,SAAOI,iBAAiBR,KAGxB1zB,EAAA5D,EAAAC,cAAA,UACE2D,EAAA5D,EAAAC,cAACuB,EAAA,MAAD,CAAAC,GAAA,yDAKC41B,EA5CAprB,EAUHrI,EAAA5D,EAAAC,cAAC83B,EAAA,UAAD,CACEtnB,KAAMomB,EAAMpmB,KACZunB,OAAQnB,EAAMmB,OACdC,gBAAiBpB,EAAMqB,eACvBC,cAAetB,EAAMuB,WACrBl2B,QAAS20B,EAAM30B,QACfm2B,OAAQxB,EAAMyB,UACdC,UAAW,kBAAM1B,EAAMyB,UAAU,OACjCE,QAAS1C,EAActG,GACvBiJ,kBAAmB,CACjBC,aAAc,oBACdC,SAAU,SACVC,OAAQpJ,EAAW,OAAS,yBAGT,oBAAb1vB,EAA0BA,IAAaA,GAvB/C8D,EAAA5D,EAAAC,cAAC83B,EAAA,WAAWc,SAAZ,CACE70B,MAAO,IAAIsyB,OAAOC,KAAK3mB,IAAIkpB,SAAS74B,cAAc,SAE7B,oBAAbH,EAA0BA,IAAaA,GAuCvB8D,EAAA5D,EAAAC,cAAC84B,EAAA,EAAD,CAAQp2B,UAAU,wCC/FtDxC,EAAAC,EAAAC,EAAA,sBAAA2V,IAAA,IAAAnN,EAAA1I,EAAA,IAAAm0B,EAAAn0B,EAAA,IAAA64B,EAAA74B,EAAA,IAKO,SAAS6V,EAAiBE,GAAmB,IAC1CvK,EAAS9K,cAAT8K,KACFuF,EAAS+nB,YACb,CAAE/iB,SAAUA,GACZ,CAAE3Q,MAAO2Q,EAAUlB,YAAa,gBAUlC,OAPA1R,sBACE,kBAAMqI,EAAKiX,UACX,WACE1R,EAAOyR,YAIJzR,qQCPHgoB,EAAS,GAAAvwB,OAAMwuB,IAAUgC,eAAhB,cAETC,EAAa,SAAAlqB,GACjBwoB,SAAOC,UAAU,SAAAC,GACfA,EAAMyB,OAAO,cAAeH,GAC5BxB,SAAOI,iBAAiB5oB,MAItBoqB,EAAclsB,mBAAS,SAACuK,EAAyB4hB,GACrDC,IAAYC,QAAQP,EAAW,CAC7BpO,UAAWnT,EAAOmT,UAClBC,SAAUpT,EAAOoT,SACjB2O,MAAO/hB,EAAO+hB,MACd1O,YAAarT,EAAOqT,YACpBC,MAAOtT,EAAOsT,MACd0O,KAAMhiB,EAAOgiB,OAEfJ,KACC,KAMUK,EAAkB/0B,IAAMC,KAAK,WAAM,IACtC6G,EAAS9K,cAAT8K,KACFtC,EAAS3I,cAETm5B,EAAc,SAACC,GACnB12B,OAAO22B,KAAKD,GAAQlY,QAAQ,SAAC0Q,GAC3B,IAAMtuB,EAAQ81B,EAAOxH,GACrBjpB,EAAOsiB,cAAc2G,EAAOtuB,GAC5BqF,EAAO2wB,gBAAgB1H,GAAO,KAEhC3mB,EAAKsuB,mBACLtuB,EAAK8C,IAAI,8BA4BX,OAzBA5J,IAAM6E,UAAU,WAjBT8vB,IAAYU,QAAQhB,GAAWve,MAAMye,GAkB7BroB,KAAK,SAAA+oB,GACZA,EACFD,EAAYC,GAIdK,eACE,kBAAMxuB,EAAKyb,KAAKG,aAChB,WACEsS,EAkBV,SAAyBx3B,GACvBA,EAAWoM,IAAI,uBADiC,IAExCqc,EAAyDzoB,EAAzDyoB,UAAWC,EAA8C1oB,EAA9C0oB,SAAU2O,EAAoCr3B,EAApCq3B,MAAOzO,EAA6B5oB,EAA7B4oB,MAAOD,EAAsB3oB,EAAtB2oB,YAAa2O,EAASt3B,EAATs3B,KACxD,MAAO,CACL7O,YACAC,WACA2O,QACAzO,QACAD,cACA2O,OACAtO,WAAY,IA5BM+O,CAAgBzuB,EAAKyb,KAAKxmB,aAI3C,IAEHiE,IAAM6E,UAAU,WACRiC,EAAK0uB,oBAAsB1uB,EAAK2uB,eAGtChB,EAAYjwB,EAAOsO,OAAQ,WACzBhM,EAAK8C,IAAI,gCAEV,CAACpF,EAAOsO,SAEJ,+FChDF,IAAM4iB,EAAkB,GAElBC,EAA2B,SAAA36B,GAAkB,IAAfC,EAAeD,EAAfC,SACnCuC,EAAa5B,cACX6I,EAAYC,6BAAZD,QAFgDmxB,ECtBnD,WAA2B,IAAA13B,EACQlC,cAAzBwB,EADiBU,EACxBnC,MAAmBgU,EADK7R,EACL6R,SACnBtL,EAAYC,6BAAZD,QAFwBvE,EAIeC,cAJfC,EAAA7B,OAAAgL,EAAA,EAAAhL,CAAA2B,EAAA,GAIzB21B,EAJyBz1B,EAAA,GAIN01B,EAJM11B,EAAA,GAAA21B,EAMIC,YAAiC,CACnE7lB,YAAa,aADR8lB,EANyB13B,OAAAgL,EAAA,EAAAhL,CAAAw3B,EAAA,MAAAG,EAUmCC,mBAAQ53B,OAAA8R,EAAA,EAAA9R,CAAA+R,EAAAnV,EAAAoG,KACzE,SAAAC,IAAA,IAAA3C,EAAAu3B,EAAA/pB,EAAAgqB,EAAAl0B,UAAA,OAAAmO,EAAAnV,EAAAuG,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,UAAOhD,EAAPw3B,EAAAluB,OAAA,QAAAC,IAAAiuB,EAAA,GAAAA,EAAA,GAAiB74B,EAAWqB,QAAUu3B,EAAtCC,EAAAluB,OAAA,EAAAkuB,EAAA,QAAAjuB,EACOvJ,EADP,CAAA8C,EAAAE,KAAA,eAAAF,EAAAG,OAAA,SAEW,MAFX,cAIEtE,EAAW84B,kBAAiB,GAJ9B30B,EAAAE,KAAA,EAKuBo0B,EACnB,CAAEp3B,WACF,CACEmqB,QAAS,CACPuN,oBAAqBH,KAT7B,cAKQ/pB,EALR1K,EAAA6O,KAaEhT,EAAW84B,kBAAiB,GAb9B30B,EAAAG,OAAA,SAcSuK,EAAO1L,KAAO0L,EAAO1L,KAAKwtB,OAAS,MAd5C,yBAAAxsB,EAAAI,SAAAP,MAgBA,CACEg1B,QADF,SACU3zB,GACN,IAAMujB,EAAQrW,EAAS0mB,OAAQrQ,MAC/B0P,EACEtuB,EAAA,EAAI3H,EAAA,mCACJgD,EAAOsF,OACHtF,EAAOgJ,KAAK,UACZrE,EAAA,EAAI3H,EAAA,iGAA2FumB,YAGvGsQ,SAVF,WAWIjyB,EAAQS,QAAQ,cAKtB,MAAO,CAAE2wB,oBAAmBc,oBA3CIT,EAUxBS,oBAiCyCC,kBA3CjBV,EAUHW,gBDgBsBC,GAA3CH,EAJgDf,EAIhDe,oBAAqBd,EAJ2BD,EAI3BC,kBAJ2BkB,EAMlCC,cAAfC,EANiD14B,OAAAgL,EAAA,EAAAhL,CAAAw4B,EAAA,MAQlDG,EAAmBl3B,IAAM8Y,QAC7B,kBACEqe,WAAaC,MAAM,CACjBnR,UAAWkR,WAAaE,SAASrK,KACjC9G,SAAUiR,WAAaE,SAASrK,KAChC7G,YAAagR,WAAaE,SAASrK,KACnC5G,MAAO+Q,WACJE,SAASrK,KACTsK,QAAQ,MAAO9vB,EAAA,EAAI3H,EAAA,mCACtBg1B,MAAOsC,WACJE,SAASrK,KACT6H,MAAMrtB,EAAA,EAAI3H,EAAA,yBACbi1B,KAAMqC,WACHI,cACAC,IACC9B,EACA,SAAArzB,GAAA,IAAGlD,EAAHkD,EAAGlD,MAAH,OACEqI,EAAA,EAAI3H,EAAA,gIAAAkW,EAIK5W,EAAMgJ,OAHNutB,yBASnB,IAGI+B,EAAWz3B,IAAMoB,YAAN,eAAAuC,EAAApF,OAAA8R,EAAA,EAAA9R,CAAA+R,EAAAnV,EAAAoG,KAAkB,SAAAC,EAAOsR,GAAP,IAAA8S,EAAAvZ,EAAAqrB,EAAAC,EAAAC,EAAA,OAAAtnB,EAAAnV,EAAAuG,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,cACjCrE,EAAWq6B,gBAELjS,EAAYkS,EAAmBhlB,EAAQtV,GAHZmE,EAAAE,KAAA,EAIZo1B,EAAYrR,GAJA,UAI3BvZ,EAJ2B1K,EAAA6O,KAAA,CAAA7O,EAAAE,KAAA,eAO/BrE,EAAWu6B,eAPoBp2B,EAAAG,OAAA,oBAAA41B,EAWArrB,EAAO4qB,YAAhCU,EAXyBD,EAWzBC,WAAYC,EAXaF,EAWbE,UAChBD,EAAWxvB,OAZkB,CAAAxG,EAAAE,KAAA,gBAa/BrE,EAAWu6B,aAAaJ,GAbOh2B,EAAAG,OAAA,qBAiBjCtE,EAAWw6B,iBAEPx6B,EAAWquB,gBAAkBM,IAAgBE,KAnBhB,CAAA1qB,EAAAE,KAAA,gBAoB/B4C,EAAQS,QAAR,WApB+BvD,EAAAG,OAAA,kBAwB7BtE,EAAWquB,gBAAkBM,IAAgBC,MAC3CwL,EACFjB,EAAoBiB,IAEpB/E,SAAOC,UAAU,SAAAC,GACfA,EAAMC,UAAU,CAAEpN,cAClBiN,SAAOoF,eAAe,4CAExBz6B,EAAWu6B,iBAGblF,SAAOC,UAAU,SAAAC,GACfA,EAAMC,UAAU,CAAEpN,cAClBiN,SAAOoF,eAAP,wBAAAn0B,OAC0BtG,EAAWquB,kBAGvCruB,EAAWu6B,gBAzCoB,yBAAAp2B,EAAAI,SAAAP,MAAlB,gBAAAQ,GAAA,OAAA2B,EAAA1B,MAAAC,KAAAC,YAAA,GA2Cd,IAEGqC,EAAS0zB,YAAU,CACvBC,cAoCK,CACLlS,UAAW,GACXC,SAAU,GACV2O,MAAO,GACPzO,MAAO,GACPD,YAAa,GACb2O,KAAM,GACNtO,WAAY,IA1CZ0Q,mBACAO,aAmBF,OAhBAz3B,IAAM6E,UAAU,WACdrH,EAAW+kB,KAAKpkB,KAAKi6B,mBAAmB5zB,EAAOgB,eAC9C,CAAChB,EAAOgB,eAEXqM,qBAAW,WACT,IAAMwmB,EAAS76B,EAAW86B,mBAExBD,GACA76B,EAAW+kB,KAAKzb,KAAK2uB,eACgB,IAArCjxB,EAAOsO,OAAOqT,YAAYhe,SAE1B3D,EAAOsiB,cAAc,cAAeuR,GACpC7zB,EAAO2wB,gBAAgB,eAAe,MAKxC9tB,EAAAlM,EAAAC,cAAAiM,EAAAlM,EAAAmK,SAAA,KACGuwB,EACDxuB,EAAAlM,EAAAC,cAACm9B,EAAA,EAAD,CAAgBp5B,MAAOqF,GACrB6C,EAAAlM,EAAAC,cAACknB,EAAA,EAAD,MACAjb,EAAAlM,EAAAC,cAACmC,EAAA,EAAD,MACA8J,EAAAlM,EAAAC,cAACU,EAAA,EAAD,MACAuL,EAAAlM,EAAAC,cAAC25B,EAAD,MACA1tB,EAAAlM,EAAAC,cAACo9B,EAAA,EAAD,CAAMf,SAAUjzB,EAAOi0B,cAAex9B,MAkB9C,SAAS68B,EACPhlB,EACAtV,GAGA,OADAA,EAAWoM,IAAIkJ,GACR,CACLjU,QAASrB,EAAWqB,QACpB65B,SAAU,CACRC,UAAW7lB,EAAOmT,UAClB2S,SAAU9lB,EAAOoT,SACjB2S,OAAQ,CAAC,CAAEhE,MAAO/hB,EAAO+hB,QACzBiE,OAAQ,CAAC,CAAE1S,MAAK,GAAAtiB,OAAKgP,EAAOqT,aAAZriB,OAA0BgP,EAAOsT,UAEnD0O,KAAMhiB,EAAOgiB,KACbl2B,KAAMpB,EAAWoB,KACjBm6B,YAAav7B,EAAWquB,cACxB9lB,UAAWvI,EAAWuI,WAAa2e,kBAAQlnB,EAAWuI,WACtDygB,WAAY1T,EAAO0T,qEElLvBlrB,EAAAC,EAAAC,EAAA,sBAAAw9B,IAAA,IAAAC,EAAA39B,EAAA,KAAA49B,EAAA59B,EAAA,IAAA2I,EAAA3I,EAAA,GAAAJ,EAAAI,EAAA4I,EAAAD,GAAAk1B,EAAA79B,EAAA,IAUa09B,EAAiB/6B,mBAAiB,SAAAjD,GAAmB,IAAhBK,EAAgBL,EAAhBK,UAAgB6C,EACrClC,cAAnB+T,EADwD7R,EACxD6R,SAAUjJ,EAD8C5I,EAC9C4I,KAClB,OAAKiJ,EAASe,QAIZ5V,EAAAC,EAAAC,cAAC69B,EAAA,eAAD,CACEG,mBAAoBrpB,EAAS0mB,OAAQ4C,mBACrCC,iBAAkBxyB,EAAKiX,SACvB3e,SAAU,SAAA2e,GACJA,IAAajX,EAAKiX,WACpBjX,EAAKyyB,eAAexb,GAEpByb,WAAW,WACTva,OAAOrX,SAAS6xB,UACf,OAGPp+B,UAAWA,EACXq+B,gBAAgB,QAChBC,WAAW,YAjBN,yCCbXr+B,EAAAC,EAAAC,EAAA,sBAAAo+B,IAAA,IAAAj9B,EAAArB,EAAA,IAAA49B,EAAA59B,EAAA,IAAA2I,EAAA3I,EAAA,GAAAJ,EAAAI,EAAA4I,EAAAD,GAAAk1B,EAAA79B,EAAA,IAAAu+B,EAAAv+B,EAAA,KAAAw+B,EAAAx+B,EAAA,KAAAy+B,EAAAz+B,EAAA,IAcas+B,EAAyC,SAAA5+B,GAAgB,IAAbmzB,EAAanzB,EAAbmzB,OAC/CrnB,EAAS9K,cAAT8K,KAD4DkzB,EAEpC/L,YAAc,CAC5CE,SAEAE,eAAgB,IAHVc,EAF4D6K,EAE5D7K,SAAUH,EAFkDgL,EAElDhL,UAKlB,OAAO/yB,sBAAY,kBACjBf,EAAAC,EAAAC,cAACy+B,EAAA,EAAD,CACEz9B,QACgB,WAAb+yB,GAAsC,gBAAbA,KACzBroB,EAAKmzB,uBAER5jB,QAASvP,EAAKozB,gBACdv8B,WAAYo8B,EAAA,EAAIl6B,EAAA,4BAEfk6B,EAAA,EAAIl6B,EAAA,8DACS,gBAAbsvB,GACCj0B,EAAAC,EAAAC,cAACuB,EAAA,MAAD,CAAAC,GAAA,0HAAAkW,OAAA,CAGWkc,qDCnCnB1zB,EAAAC,EAAAC,EAAA,sBAAA2+B,IAAA7+B,EAAA,UAAA8+B,EAAA9+B,EAAA,KAAA2I,EAAA3I,EAAA,GAAAJ,EAAAI,EAAA4I,EAAAD,GAKak2B,EAAkB,kBAC7Bj/B,EAAAC,EAAAC,cAAAF,EAAAC,EAAAmK,SAAA,KACEpK,EAAAC,EAAAC,cAAA,OACE2gB,IAAKse,kBAAQ,UACbh/B,UAAU,8BACVsE,cAAY,2BACZqc,IAAI,mBAEN9gB,EAAAC,EAAAC,cAAA,OACE2gB,IAAKse,kBAAQ,cACbh/B,UAAU,gCACV2gB,IAAI,eAEN9gB,EAAAC,EAAAC,cAAA,OACE2gB,IAAKse,kBAAQ,QACbh/B,UAAU,gCACVsE,cAAY,4BACZqc,IAAI,SAEN9gB,EAAAC,EAAAC,cAAA,OACE2gB,IAAKse,kBAAQ,SACbh/B,UAAU,6BACV2gB,IAAI,QACJrc,cAAY,0KCbL26B,EAAoB9/B,UAAO+/B,KAAV7/B,WAAA,CAAAC,YAAA,uCAAAC,YAAA,YAAGJ,CAAH,sCAKjBggC,EAAsBhgC,UAAO+/B,KAAV7/B,WAAA,CAAAC,YAAA,yCAAAC,YAAA,YAAGJ,CAAH,sCAKnBigC,EAAsC,SAAAz/B,GAI7C,IAHJmzB,EAGInzB,EAHJmzB,OACAuM,EAEI1/B,EAFJ0/B,aACAC,EACI3/B,EADJ2/B,WAEQ5+B,EAAUC,cAAVD,MADJi+B,EAEuC/L,YAAc,CACvDE,WADMgB,EAFJ6K,EAEI7K,SAAUH,EAFdgL,EAEchL,UAAWE,EAFzB8K,EAEyB9K,UAI7B,IAAKf,EACH,OAAO,KAGT,IAAsB,IAAlBA,EAAO/xB,OAAkB,CAC3B,IAAK+xB,EAAO7K,WACV,OACEvkB,EAAA5D,EAAAC,cAACo/B,EAAD,KACEz7B,EAAA5D,EAAAC,cAAC4L,EAAA,MAAD,CAAApK,GAAA,wCAIN,IAAMg+B,EAAYzM,EAAOxK,cAAc,GACvC,GAAIiX,GAAaA,EAAUC,WACzB,OAAO97B,EAAA5D,EAAAC,cAACo/B,EAAD,KAAsBI,EAAUC,YAI3C,OAAQ1L,GACN,IAAK,OACH,IAAI2L,EAWJ,OAVI/+B,EAAMonB,0BAA4BgL,EAAO4M,6BAC3CD,EACE/7B,EAAA5D,EAAAC,cAAC4L,EAAA,MAAD,CAAApK,GAAA,8CAAAkW,OAAA,CAA6B4nB,mBAG7B3+B,EAAMqoB,wBAA0B+J,EAAO6M,2BACzCF,EACE/7B,EAAA5D,EAAAC,cAAC4L,EAAA,MAAD,CAAApK,GAAA,oDAAAkW,OAAA,CAAqC6nB,iBAIvC57B,EAAA5D,EAAAC,cAACk/B,EAAD,CAAmB36B,cAAY,qBAC5Bm7B,GAGP,IAAK,cACH,OACE/7B,EAAA5D,EAAAC,cAACo/B,EAAD,KACEz7B,EAAA5D,EAAAC,cAAA4L,EAAA,OAAApK,GAAA,8EAAAkW,OAAA,CACSkc,gBAMf,IAAK,cACH,OACEjwB,EAAA5D,EAAAC,cAACk/B,EAAD,KACEv7B,EAAA5D,EAAAC,cAAA4L,EAAA,OAAApK,GAAA,8EAAAkW,OAAA,CACSoc,gBAMf,IAAK,SACH,OACEnwB,EAAA5D,EAAAC,cAACo/B,EAAD,KACGrM,EAAO7K,WACNvkB,EAAA5D,EAAAC,cAAC4L,EAAA,MAAD,CAAApK,GAAA,sBAAAkW,OAAA,CAAAiD,EAAwBklB,EAAe9M,EAAO7K,eAE9CvkB,EAAA5D,EAAAC,cAAC4L,EAAA,MAAD,CAAApK,GAAA,cAOL,SAASq+B,EAAezW,GAC7B,IAAM0W,EAAa,IAAI3X,KAAKiB,GACtB2W,EAAU,IAAI5X,KAChBpd,EAAqC,CACvCE,KAAM,UACNC,OAAQ,WAQV,OANK80B,oBAAUF,EAAYC,KACzBh1B,EAAM5H,OAAA88B,EAAA,EAAA98B,CAAA,GACD4H,EADC,CAEJC,QAAS,UAGNrH,EAAA5D,EAAAC,cAAC4L,EAAA,WAAD,CAAY7H,MAAO+7B,EAAY/0B,OAAQA,6ICxG1Cm1B,EAA0B9gC,UAAOC,IAAVC,WAAA,CAAAC,YAAA,4CAAAC,YAAA,gBAAGJ,CAAH,wBAIhB+gC,EAAqC,SAAAvgC,GAE5C,IAAAwgC,EAAAxgC,EADJygC,OAAUC,EACNF,EADME,WAAYC,EAClBH,EADkBG,OAEhBC,EAAmB,kBACvB1gC,EAAAC,EAAAC,cAACygC,EAAA,EAAD,CAAMhiB,GAAG,KACP3e,EAAAC,EAAAC,cAAC0gC,EAAA,EAAD,CAAezgC,UAAU,sCACvBH,EAAAC,EAAAC,cAACwC,EAAA,MAAD,CAAAhB,GAAA,yBAIN,OACE1B,EAAAC,EAAAC,cAAAF,EAAAC,EAAAmK,SAAA,KACEpK,EAAAC,EAAAC,cAAC2gC,EAAA,EAAD,MACIL,GAAcC,IACdzgC,EAAAC,EAAAC,cAAA,OAAKC,UAAU,mCACbH,EAAAC,EAAAC,cAAA,OAAKC,UAAU,2CACbH,EAAAC,EAAAC,cAACwC,EAAA,MAAD,CAAAhB,GAAA,4BAEF1B,EAAAC,EAAAC,cAAA,OAAKC,UAAU,gDACbH,EAAAC,EAAAC,cAACwC,EAAA,MAAD,CAAAhB,GAAA,oEAKD8+B,GACCxgC,EAAAC,EAAAC,cAAA,KAAG4gC,KAAMN,EAAWhwB,KAClBxQ,EAAAC,EAAAC,cAACe,EAAA,EAAD,CACEd,UAAU,0CACV+B,MAAM,aAFR,gBASHu+B,GACCzgC,EAAAC,EAAAC,cAAA,KAAG4gC,KAAML,EAAOjwB,KACdxQ,EAAAC,EAAAC,cAACe,EAAA,EAAD,CACEd,UAAU,0CACV+B,MAAM,aAFR,eAURlC,EAAAC,EAAAC,cAACkgC,EAAD,KAA0BM,MAG5B1gC,EAAAC,EAAAC,cAAC2gC,EAAA,EAAD,KACE7gC,EAAAC,EAAAC,cAAA,OACEC,UAAU,6BACV0X,MAAO,CAAEkpB,UAAW,WAEpB/gC,EAAAC,EAAAC,cAAA,OAAKC,UAAU,sCACdugC,0CCzEXtgC,EAAAC,EAAAC,EAAA,sBAAA0gC,IAAA,IAAAzP,EAAAnxB,EAAA,GAAAoxB,EAAApxB,EAAA4I,EAAAuoB,GAAAgD,EAAAn0B,EAAA,IAAA6gC,EAAA7gC,EAAA,KAAA8gC,EAAA9gC,EAAA,IAAA+gC,EAAA/gC,EAAA,KAWa4gC,EAAqC,SAAAlhC,GAAgB,IAAbshC,EAAathC,EAAbshC,OAC3CvgC,EAAUC,cAAVD,MACRyzB,cAFgE,IAAA+M,EAItCC,YAAgB,CACxCnrB,SAAUtV,EAAMsV,SAChBxS,QAAS9C,EAAM8C,UAFT8B,EAJwD47B,EAIxD57B,KAKR,OATgE47B,EAIlD37B,QAML8rB,EAAAvxB,EAAAC,cAAC+gC,EAAA,EAAD,MAGFG,EAAO37B,kICPV87B,EAAejiC,UAAOC,IAAVC,WAAA,CAAAC,YAAA,gCAAAC,YAAA,YAAGJ,CAAH,0BACI,SAAAQ,GAAA,OAAAA,EAAGsT,MAAkB2E,UAGrCypB,EAAcliC,UAAOC,IAAVC,WAAA,CAAAC,YAAA,+BAAAC,YAAA,YAAGJ,CAAH,0BACK,SAAA6H,GAAA,OAAAA,EAAGiM,MAAkB2E,UAGrC0pB,EAAoBniC,UAAOC,IAAVC,WAAA,CAAAC,YAAA,qCAAAC,YAAA,YAAGJ,CAAH,qCACD,SAAAmJ,GAAA,OAAAA,EAAG2K,MAAkB2E,UAG9B2pB,EAAoC,SAAAxpB,GAAA,IAAGrX,EAAHqX,EAAGrX,MAAH,OAC/CG,EAAAf,EAAAC,cAAAc,EAAAf,EAAAmK,SAAA,KACEpJ,EAAAf,EAAAC,cAACqhC,EAAD,CAAcphC,UAAU,wBACtBa,EAAAf,EAAAC,cAAA,OAAKC,UAAU,+BACba,EAAAf,EAAAC,cAAA,QAAMC,UAAU,oDAChBa,EAAAf,EAAAC,cAAA,UACEc,EAAAf,EAAAC,cAACwC,EAAA,MAAD,CAAAhB,GAAA,gCAINV,EAAAf,EAAAC,cAAA,UACEc,EAAAf,EAAAC,cAACwC,EAAA,MAAD,CAAAhB,GAAA,0CAAqD,IAsB3D,SAAAue,GAAmE,IAAzC0hB,EAAyC1hB,EAAzC0hB,cACxB,GAAIA,EAAcrb,KAAKsb,EAAUC,IAAgB1Q,OAC/C,OAAO2Q,EAAA,EAAIn9B,EAAA,2BAEb,GAAIg9B,EAAcrb,KAAKsb,EAAUC,IAAgBE,SAC/C,OAAOD,EAAA,EAAIn9B,EAAA,mBAEb,OAAO,KA5BFq9B,CAAenhC,IAElBG,EAAAf,EAAAC,cAAA,OAAKC,UAAU,uBACba,EAAAf,EAAAC,cAAA,OAAKC,UAAU,iCACba,EAAAf,EAAAC,cAACwC,EAAA,MAAD,CAAAhB,GAAA,8BAEDb,EAAM6tB,MAAM7sB,IAAI,SAAAgc,GAAI,OACnB7c,EAAAf,EAAAC,cAAC+hC,EAAD5+B,OAAAgF,OAAA,CAAWrG,IAAK6b,EAAKnc,IAAQmc,MAE/B7c,EAAAf,EAAAC,cAACuhC,EAAD,CAAmBthC,UAAU,uCAC7Ba,EAAAf,EAAAC,cAACshC,EAAD,CAAarhC,UAAU,8BAqB7B,SAAA+hC,GAA8E,IAAnDP,EAAmDO,EAAnDP,cAAmDO,EAApCzT,SACxC,GAAIkT,EAAcrb,KAAKsb,EAAUC,IAAgB1Q,OAC/C,OAAO2Q,EAAA,EAAIn9B,EAAA,2BAEb,GAAIg9B,EAAcrb,KAAKsb,EAAUC,IAAgBE,SAC/C,OAAOD,EAAA,EAAIn9B,EAAA,qBAEb,OAAO,KA3BAw9B,CAAgBthC,GADnB,IAC2BG,EAAAf,EAAAC,cAAA,SAAIW,EAAM4tB,SAASxV,oBAM9C2oB,EAAY,SAACQ,GAAD,OAAkC,SAClDC,GADkD,OAE/CA,EAAQ1R,cAAcyR,YAAYE,OAASF,IAsBhD,SAASH,EAATM,GAAgE,IAA3CjpB,EAA2CipB,EAA3CjpB,OAAQQ,EAAmCyoB,EAAnCzoB,WAC3B,OACE9Y,EAAAf,EAAAC,cAAA,WACEc,EAAAf,EAAAC,cAAA,SAAIoZ,EAAOP,WACVe,EAAW7M,OAAX,MAAArE,OACSkR,EAAWjY,IAAI6Z,KAAGoC,KAAK,CAAC,SAAU,eAAenN,KAAK,MAC5D,6GC9EJ6xB,EAAwBljC,UAAOW,EAAVT,WAAA,CAAAC,YAAA,2CAAAC,YAAA,gBAAGJ,CAAH,4EAQdmjC,EAAsC,SAAA3iC,GAAA,IAAGy7B,EAAHz7B,EAAGy7B,OAAH,OACjDv7B,EAAAC,EAAAC,cAAA,OAAKC,UAAU,yBACbH,EAAAC,EAAAC,cAAA,UACEF,EAAAC,EAAAC,cAACwC,EAAA,MAAD,CAAAhB,GAAA,gDAEF1B,EAAAC,EAAAC,cAAA,QAAMC,UAAU,oDAChBH,EAAAC,EAAAC,cAAA,QAAMC,UAAU,gCACdH,EAAAC,EAAAC,cAACsiC,EAAD,CAAuB1B,KAAI,OAAAl4B,OAAS2yB,EAAOrQ,QACxCqQ,EAAOrQ,4CC1BhB9qB,EAAA,UAAAsiC,EAAAtiC,EAAA,GAAAuiC,EAAAviC,EAAA4I,EAAA05B,GAWet2B,IAPgB,SAAAtM,GAAA,IAAGC,EAAHD,EAAGC,SAAH,OAC7B4iC,EAAA1iC,EAAAC,cAAA,OAAKC,UAAU,kBACbwiC,EAAA1iC,EAAAC,cAAA,OAAKC,UAAU,wBACfwiC,EAAA1iC,EAAAC,cAAA,OAAKC,UAAU,0BAA0BJ,uCCP7CK,EAAAC,EAAAC,EAAA,sBAAAoW,IAAA,IAAAksB,EAAAxiC,EAAA,KAAAsiC,EAAAtiC,EAAA,GAAAuiC,EAAAviC,EAAA4I,EAAA05B,GAAAG,EAAAziC,EAAA,IAAA0iC,EAAA1iC,EAAA,KAMO,SAASsW,IAAgB,IACtB7U,EAAQf,cAARe,IACF8R,EAASovB,yBAETC,EAAUl+B,IAAM6H,OAAwB,MAa9C,OAAO,SAAC4F,GACN,IAAM7L,EAAOs8B,EAAQp2B,UAElBlG,GACAA,EAAKqI,WAAawD,EAAIxD,UAAYrI,EAAKsI,YAAcuD,EAAIvD,YAf7C,SAACuD,GAChB,GAAKoB,EAAL,CAIA,IAAMsD,EAASpD,YAAetB,GAC9B1Q,EAAI6M,IAAI,gBAAiBuI,GACzBtD,EAAOC,MAAMqD,GACb+rB,EAAQp2B,QAAU2F,OANhB1Q,EAAI6M,IAAI,0CAeR+H,CAASlE,qHCjBT0wB,EAAwB3jC,UAAOC,IAAVC,WAAA,CAAAC,YAAA,yCAAAC,YAAA,gBAAGJ,CAAH,6IAcd4jC,EAAoC,SAAApjC,GAAyB,IAAtBy7B,EAAsBz7B,EAAtBy7B,OAAQp5B,EAAcrC,EAAdqC,QAC1D,OACEnC,EAAAC,EAAAC,cAAC83B,EAAA,YAAD,CACE7gB,SAAUgsB,YAAY5H,EAAOhpB,KAC7B6wB,YAAaC,cAAYC,qBACzBC,uBAAwB,SAACzqB,EAAO+f,GAAR,MAAoB,CAC1C2K,EAAa,IAAV1qB,GAAe,IAAOA,EAAQ,EACjC2qB,EAAc,IAAX5K,GAAgB,IAAOA,EAAS,KAGrC74B,EAAAC,EAAAC,cAAC+iC,EAAD,CACE9iC,UAAU,sBACVsE,cAAY,kBACZwa,MAAOsc,EAAOhxB,KACdpI,QAASA,8HCxBbuhC,EAAU,EAERC,EAAgB,GAEf,SAAS7mB,IAAe,IAAA9Z,EACMlC,cAA3BD,EADqBmC,EACrBnC,MAAaqc,EADQla,EACdC,KACTmqB,EAASC,4BAFcuW,EAITC,YAAc,CAChC/V,QAAS,CAAEC,SAAS,KADfhR,EAJsB1Z,OAAA8B,EAAA,EAAA9B,CAAAugC,EAAA,MAwB7B,OAhByB,SACvBnnB,GAEG,IADH3C,EACG7S,UAAAgG,OAAA,QAAAC,IAAAjG,UAAA,GAAAA,UAAA,GADmB08B,EAEhBjZ,EAAiC,CACrC/mB,QAAS9C,EAAM8C,QACf8Y,WACA3C,aACAlW,UAAWsZ,EAAUtZ,UACrB+pB,aAAczQ,EAAUyQ,cAE1B,OAAO5Q,EAAU2N,EAAW,CAC1BkD,mBAAoBkW,EAAuBpZ,MAM/C,SAASoZ,EACPpZ,GAEA,IAAM9d,EAAUwgB,EAAOc,UACrB,CACEC,MAAOC,IACP1D,UAAW,CACT/mB,QAAS+mB,EAAU/mB,QACnBC,UAAWsZ,EAAUtZ,UACrB+pB,aAAczQ,EAAUyQ,gBAG5B,GAEF,GAAK/gB,EAAL,CAGA,IAAMlL,EAAE,IAAAkH,OAAO86B,KAgDf,MAAO,CACLlV,WAAY,WACZuV,IAAI1gC,OAAA88B,EAAA,EAAA98B,CAAA,GACCuJ,EAAQ/L,MADV,CAEDqJ,WAAY0C,EAAQ/L,MAAMqJ,WAAa,EACvCukB,SAASprB,OAAA88B,EAAA,EAAA98B,CAAA,GACJuJ,EAAQ/L,MAAM4tB,SADX,CAENxqB,OAAQ,IAEVyqB,MAxCY,WACd,IAAKxR,EAAUtZ,UACb,OAAOgJ,EAAQ/L,MAAM6tB,MAEvB,IAAMpV,EAAS8T,EAAO4W,aACpB,CACEtiC,GAAE,UAAAkH,OAAY8hB,EAAUjO,UACxBwnB,SAAUC,IACVC,aAAc,YAEhB,GAEF,OAAK7qB,EAGL,GAAA1Q,OAAAvF,OAAA+gC,EAAA,EAAA/gC,CACKuJ,EAAQ/L,MAAM6tB,OADnB,CAEE,CACEF,WAAY,cACZ6V,WAAW,EACX3iC,KACAsX,MAAO,CACLwV,WAAY,iBACZvV,eAAgB,MAChBhV,OAAQ,GAEVqV,SACAQ,WAAY,MAdPlN,EAAQ/L,MAAM6tB,MA2Bd4V,GACPpkB,SAxDGhD,EAAUyQ,aAGf,GAAA/kB,OAAAvF,OAAA+gC,EAAA,EAAA/gC,CACKuJ,EAAQ/L,MAAMqf,UADnB,CAEE,CACEsO,WAAY,cACZ9sB,KACA4X,OAAQ,CACNkV,WAAY,SACZ9sB,GAAIgpB,EAAUjO,aATX7P,EAAQ/L,MAAMqf,8HCzDvBqkB,EAAqBjlC,kBAAO,SAAAQ,KAAGka,WAAHla,EAAegZ,MAAf,IAAyBpG,EAAzBrP,OAAAkyB,EAAA,EAAAlyB,CAAAvD,EAAA,+BAChCE,EAAAC,EAAAC,cAACskC,EAAA,EAAW9xB,KADUlT,WAAA,CAAAC,YAAA,mCAAAC,YAAA,gBAAGJ,CAAH,yRAKF,SAAAoT,GAAK,OACvBA,EAAMsH,WAAatH,EAAMU,MAAMqxB,SAAW,eACnC,SAAA/xB,GAAK,OACZA,EAAMsH,WAAatH,EAAMU,MAAMsxB,aAAe,WAE9B,SAAAv9B,GAAA,OAAAA,EAAGiM,MAAkBuxB,eAE9B,SAAAjyB,GAAK,OAAIA,EAAMoG,QAabF,EAAiC,SAAAnQ,GAKxC,IAJJuR,EAIIvR,EAJJuR,WAEAja,GAEI0I,EAHJm8B,SAGIn8B,EAFJ1I,UACG4Y,EACCtV,OAAAkyB,EAAA,EAAAlyB,CAAAoF,EAAA,sCACJ,OACEzI,EAAAC,EAAAC,cAACqkC,EAADlhC,OAAAgF,OAAA,CAAoB2R,WAAYA,GAAgBrB,GAC7C5Y","file":"static/js/1.65d02bc3.chunk.js","sourcesContent":["import React from 'react'\nimport styled from 'styled-components/macro'\n\nimport { mediaMobile } from './Responsive'\n\ninterface IProps {}\n\nconst StyledButtonStrip = styled.div`\n  margin: 0;\n  margin-bottom: 1rem;\n  text-align: center;\n  position: sticky;\n  bottom: 1rem;\n\n  ${mediaMobile`\n      position: fixed;\n      bottom: 0;\n      width: 100%;\n  `}\n\n  div.strip {\n    background-color: #d4d4d4;\n    position: relative;\n    top: 3.2rem;\n    z-index: 0;\n    height: 1.6rem;\n    width: 100%;\n  }\n  button {\n    margin: 1rem;\n    padding: 0.8rem 1.6rem;\n    z-index: 1;\n    position: relative;\n  }\n`\n\nexport const ButtonStrip: React.FC<IProps> = ({ children }) => {\n  return (\n    <StyledButtonStrip>\n      <div className=\"strip\" />\n      {children}\n    </StyledButtonStrip>\n  )\n}\n","import { fakerCZ } from '@speedlo/testing/dist/faker'\nimport { useFormikContext } from 'formik'\nimport React from 'react'\n\nimport { SecondaryButton } from '../../common/Buttons'\nimport { useOrderModel } from '../../hooks/useOrderModel'\nimport { NOTE_MAX_LENGTH, OrderFormValues } from './OrderFormSetup'\n\nexport const OrderFormAutoFill: React.FC = () => {\n  const orderModel = useOrderModel()\n  const formik = useFormikContext<OrderFormValues>()\n  if (process.env.REACT_APP_STAGE === 'prod') {\n    return null\n  }\n  return (\n    <SecondaryButton\n      style={{ marginBottom: '0.5rem' }}\n      onClick={() => {\n        formik.setTouched({\n          firstname: true,\n          lastname: true,\n          email: true,\n          phone: true,\n          phonePrefix: true,\n          note: true,\n        })\n        formik.setValues({\n          firstname: fakerCZ.name.firstName(),\n          lastname: fakerCZ.name.lastName(),\n          email: fakerCZ.internet.email(),\n          phone: fakerCZ.phone.phoneNumberFormat(0).replace(/\\s/g, ''),\n          phonePrefix: '+420',\n          note: fakerCZ.lorem.sentence().slice(0, NOTE_MAX_LENGTH - 1),\n          agreements: [],\n        })\n        if (orderModel.usingPaymentMethodWithTips) {\n          orderModel.setTips(15)\n        }\n      }}\n    >\n      Autofill form [DEV ONLY]\n    </SecondaryButton>\n  )\n}\n","import '../../common/Modal.css'\n\nimport { Trans } from '@lingui/macro'\nimport { useObserver } from 'mobx-react-lite'\nimport React from 'react'\nimport { Button, Container, Modal, ModalBody, ModalHeader } from 'reactstrap'\n\nimport { useRoot } from '../../app/useRoot'\n\nexport const OrderErrorModal: React.FC = () => {\n  const { order } = useRoot()\n  return useObserver(() => (\n    <Modal\n      isOpen={order.hasErrors}\n      toggle={order.clearErrors}\n      className=\"modal__container\"\n    >\n      <ModalHeader\n        toggle={order.clearErrors}\n        tag={Container}\n        className=\"modal__header\"\n      >\n        <span>\n          <Trans>Order can not be completed</Trans>\n        </span>\n      </ModalHeader>\n      <ModalBody className=\"modal__body\">\n        <div className=\"modal__body__content\">\n          {order.hasErrors &&\n            order.submitErrors!.map((error, idx) => (\n              <div key={idx}>{error}</div>\n            ))}\n        </div>\n        <div className=\"modal__body__button__line\">\n          <div className=\"modal__body__button__strip\" />\n          <Button\n            className=\"modal__body__button\"\n            color=\"primary\"\n            onClick={order.clearErrors}\n          >\n            <Trans>I understand</Trans>\n          </Button>\n          />\n        </div>\n      </ModalBody>\n    </Modal>\n  ))\n}\n","import { Trans } from '@lingui/macro'\nimport { useObserver } from 'mobx-react-lite'\nimport React from 'react'\nimport styled from 'styled-components/macro'\n\nimport { useRoot } from '../../app/useRoot'\nimport { AlertModal } from '../../common/AlertModal'\nimport Pacman from '../../common/Pacman'\n\nconst TextPadding = styled.div`\n  padding-bottom: 2rem;\n`\n\nexport const OrderGoPayModal: React.FC = () => {\n  const { order: orderModel } = useRoot()\n  return useObserver(() => (\n    <AlertModal isOpen={orderModel.isGoPayChecking} headerText=\"GoPay platba\">\n      <TextPadding>\n        <Trans>Checking your GoPay payment, please wait...</Trans>\n      </TextPadding>\n      <Pacman noMargin={true} />\n    </AlertModal>\n  ))\n}\n","import { useReaction } from '@speedlo/hooks'\nimport { observer } from 'mobx-react-lite'\nimport React from 'react'\nimport FormGroup from 'reactstrap/lib/FormGroup'\nimport Input from 'reactstrap/lib/Input'\nimport styled from 'styled-components/macro'\n\nimport { useRoot } from '../../app/useRoot'\nimport { useMOrderTipUpdate } from '../../graph/generated'\nimport { i18n } from '../../i18n'\n\nconst StyledOrderFormTipInput = styled.div`\n  margin: 0.8rem 0 1.4rem 0;\n`\n\nexport const OrderFormTipInput = observer(() => {\n  const { order, cart } = useRoot()\n  const [updateTip] = useMOrderTipUpdate()\n\n  // TODO: Vyresit aby se nespoustelo po navratu z GoPay\n  useReaction(\n    () => (order.usingPaymentMethodWithTips ? Number(order.tips) : 0),\n    tips => {\n      updateTip({\n        tips,\n        orderId: order.orderId!,\n        withGoods: cart.withGoods,\n      })\n    },\n  )\n\n  if (!order.usingPaymentMethodWithTips) {\n    return null\n  }\n\n  return (\n    <StyledOrderFormTipInput>\n      <FormGroup>\n        <Input\n          type=\"select\"\n          value={order.tips}\n          onChange={ev => {\n            order.setTips(Number.parseInt(ev.target.value, 10))\n          }}\n          disabled={order.disableInteraction}\n          data-testid=\"orderTipsSelect\"\n        >\n          <option value={0}>{i18n.t`Without tips`}</option>\n          <option value={5}>{i18n.t`Tips 5%`}</option>\n          <option value={10}>{i18n.t`Tips 10%`}</option>\n          <option value={15}>{i18n.t`Tips 15%`}</option>\n          <option value={20}>{i18n.t`Tips 20%`}</option>\n          <option value={25}>{i18n.t`Tips 25%`}</option>\n        </Input>\n      </FormGroup>\n    </StyledOrderFormTipInput>\n  )\n})\n","import { useOrderPromoCodes } from '@speedlo/ui'\nimport { useObserver } from 'mobx-react-lite'\nimport React from 'react'\nimport { FormGroup, Input, InputGroup } from 'reactstrap'\nimport styled from 'styled-components/macro'\n\nimport { useRoot } from '../../app/useRoot'\nimport { SecondaryButton } from '../../common/Buttons'\nimport {\n  useMOrderPromoAdd,\n  useMOrderPromoRemove,\n  useQOrderPromoCodes,\n} from '../../graph/generated'\nimport { useAlertModal } from '../../hooks/useAlertModal'\nimport { i18n } from '../../i18n'\n\nconst CodesPanel = styled.div`\n  margin-top: 0.5rem;\n  & button {\n    margin-right: 0.5rem;\n    font-size: 0.7rem;\n  }\n`\n\nexport const OrderPromoInput = React.memo(() => {\n  const { order: orderModel, cart } = useRoot()\n  const [errorModal, showError] = useAlertModal()\n\n  const { data, loading } = useQOrderPromoCodes(\n    { orderId: orderModel.orderId! },\n    { skip: !orderModel.orderId },\n  )\n  const [addCodeMutation] = useMOrderPromoAdd()\n  const [removeCodeMutation] = useMOrderPromoRemove()\n\n  const onCodeAdd = React.useCallback(async (code: string) => {\n    if (!orderModel.orderId) {\n      return\n    }\n    return addCodeMutation({\n      code,\n      orderId: orderModel.orderId,\n      withGoods: cart.withGoods,\n    })\n  }, [])\n\n  const onCodeRemove = async (codeId: ID) => {\n    if (orderModel.orderId) {\n      removeCodeMutation({\n        codeId,\n        orderId: orderModel.orderId,\n        withGoods: cart.withGoods,\n      })\n    }\n  }\n\n  const onCodeErrors = (code, errors) => {\n    showError(\n      i18n.t`Promo code \"${code}\" is invalid`,\n      <div>\n        {errors.map(msg => (\n          <div key={msg}>{msg}</div>\n        ))}\n      </div>,\n    )\n  }\n\n  const { inputProps, inputRef } = useOrderPromoCodes({\n    onCodeAdd,\n    onCodeErrors,\n    getValidatingMessage: code => i18n.t`Validating promo code ${code}...`,\n  })\n\n  const codes = loading ? [] : data.order.promoCodes\n\n  return useObserver(() => (\n    <FormGroup>\n      {errorModal}\n      <InputGroup>\n        <Input\n          innerRef={inputRef}\n          autoComplete=\"off\"\n          placeholder={i18n.t`Promo codes`}\n          {...inputProps}\n          disabled={inputProps.disabled || orderModel.disableInteraction}\n        />\n      </InputGroup>\n      <CodesPanel data-testid=\"promoCodesPanel\">\n        {codes.map(({ id, code }) => (\n          <SecondaryButton\n            key={id}\n            role=\"button\"\n            disabled={orderModel.disableInteraction}\n            onClick={() => onCodeRemove(id)}\n          >\n            {`${code} `}\n          </SecondaryButton>\n        ))}\n      </CodesPanel>\n    </FormGroup>\n  ))\n})\n","import { useRouterContext } from '@speedlo/hooks'\nimport { useFormikContext } from 'formik'\nimport React from 'react'\nimport Spinner from 'react-spinkit'\n\nimport { PrimaryButton } from '../../common/Buttons'\nimport { OrderStateCategoryEnum, useQOrderForm } from '../../graph/generated'\nimport { useOrderModel } from '../../hooks/useOrderModel'\n\ninterface IProps {\n  children: ReactNode\n}\n\nexport const OrderSubmitButton: React.FC<IProps> = ({ children }) => {\n  const formik = useFormikContext()\n  const { history } = useRouterContext()\n  const orderModel = useOrderModel()\n\n  const { data, loading } = useQOrderForm(\n    { orderId: orderModel.orderId! },\n    { skip: !orderModel.orderId },\n  )\n\n  React.useEffect(() => {\n    if (!orderModel.hasOrder || loading) {\n      return\n    }\n    // ensure order is still in cart, otherwise redirect user away\n    if (data.order.orderStateCategory !== OrderStateCategoryEnum.InCart) {\n      history.replace('/')\n    }\n  })\n\n  const canSubmit =\n    !loading && data.order.countWares > 0 && orderModel.isVamInitialized\n\n  return (\n    <>\n      <PrimaryButton\n        type=\"submit\"\n        color=\"primary\"\n        size=\"md\"\n        disabled={!canSubmit || formik.isSubmitting}\n        data-testid=\"OrderSubmitButton\"\n      >\n        {formik.isSubmitting ? (\n          <Spinner name=\"circle\" fadeIn=\"none\" color=\"#ccc\" />\n        ) : (\n          children\n        )}\n      </PrimaryButton>\n    </>\n  )\n}\n","import { DateFormat, Trans } from '@lingui/react'\nimport { useObserver } from 'mobx-react-lite'\nimport React from 'react'\nimport styled from 'styled-components/macro'\n\nimport { SelectButtonThemed } from '../../common/Buttons'\nimport { useOrderModel } from '../../hooks/useOrderModel'\n\nconst StyledOrderTimeButtons = styled.div`\n  margin: 0 0 1.4rem 0;\n  button {\n    position: relative;\n    padding-top: 0.3rem;\n    margin-bottom: 0.2rem;\n    height: 2.8rem;\n  }\n  button:first-of-type {\n    margin-right: 0.8rem;\n  }\n`\n\nexport const OrderTimeButtons: React.FC = () => {\n  const orderModel = useOrderModel()\n\n  return useObserver(() => {\n    if (!orderModel.delayedOrderEnabled) {\n      return null\n    }\n    const isDelayed = orderModel.deliverAt !== null\n    return (\n      <StyledOrderTimeButtons>\n        <SelectButtonThemed\n          data-testid=\"orderTimeButtonNow\"\n          selected={!isDelayed}\n          disabled={orderModel.disableInteraction}\n          onClick={() => orderModel.setDeliverAt(null)}\n        >\n          <Trans>When possible</Trans>\n        </SelectButtonThemed>\n        <SelectButtonThemed\n          data-testid=\"orderTimeButtonLater\"\n          selected={isDelayed}\n          disabled={orderModel.disableInteraction}\n          onClick={orderModel.openTimePicker}\n        >\n          {isDelayed ? (\n            <DateFormat\n              value={orderModel.deliverAt}\n              format={{ weekday: 'long', hour: 'numeric', minute: 'numeric' }}\n            />\n          ) : (\n            <Trans>Choose time</Trans>\n          )}\n        </SelectButtonThemed>\n      </StyledOrderTimeButtons>\n    )\n  })\n}\n","import { Trans } from '@lingui/macro'\nimport { useObserver } from 'mobx-react-lite'\nimport React from 'react'\nimport { Alert, Button } from 'reactstrap'\nimport styled from 'styled-components/macro'\n\nimport { useRoot } from '../../app/useRoot'\nimport { mediaDesktop, mediaMobile } from '../../common/Responsive'\n\ninterface IProps {}\n\nconst NoticeButton = styled(Button)`\n  font-size: 0.9rem;\n  margin: 0.2rem 1rem;\n  padding: 0.5em 1rem;\n`\n\nconst StorageNotice = styled(Alert)`\n  width: 100%;\n  z-index: 5;\n  ${mediaDesktop`\n    font-size: 0.9rem;\n    position: sticky;\n    bottom: 0;\n  `};\n  ${mediaMobile`\n    position: fixed;\n    top: 5rem;\n    font-size: 0.8rem;\n    `};\n  padding: 0.5rem 1rem;\n  background-color: #d4eddadc;\n`\n\nexport const OrderFormStorageNotice: React.FC<IProps> = () => {\n  const { user } = useRoot()\n\n  return useObserver(() => {\n    if (user.rememberForm !== null) {\n      return null\n    }\n    return (\n      <StorageNotice\n        data-testid=\"OrderFormStorageNotice\"\n        className=\"animated slideInUp\"\n      >\n        <p>\n          <Trans>\n            This app is using secure storage for keeping filled form data. It's\n            not cookies, these are stored in your browser only.\n          </Trans>\n        </p>\n\n        <NoticeButton\n          color=\"success\"\n          size=\"sm\"\n          onClick={user.setFormRememberYes}\n          data-testid=\"orderFormStorageNotice__Yes\"\n        >\n          <Trans>Always remember</Trans>\n        </NoticeButton>\n        <NoticeButton\n          color=\"secondary\"\n          size=\"sm\"\n          onClick={user.setFormRememberNo}\n          data-testid=\"orderFormStorageNotice__No\"\n        >\n          <Trans>Do not store</Trans>\n        </NoticeButton>\n      </StorageNotice>\n    )\n  })\n}\n","import React from 'react'\n\nimport { PrimaryButton } from '../../common/Buttons'\nimport ButtonStripe from '../../common/ButtonStripe'\nimport { i18n } from '../../i18n'\n\ninterface IProps {\n  enabled: boolean\n  onClick(): void\n}\n\nexport const AddressSubmit: React.FC<IProps> = ({ enabled, onClick }) => (\n  <ButtonStripe>\n    <PrimaryButton\n      color=\"primary\"\n      disabled={!enabled}\n      onClick={onClick}\n      data-testid=\"AddressSubmit\"\n    >\n      {i18n.t`Confirm address`}\n    </PrimaryButton>\n  </ButtonStripe>\n)\n\nexport default AddressSubmit\n","import { cn } from '@speedlo/ui'\nimport { observer } from 'mobx-react-lite'\nimport React from 'react'\nimport { Input, InputProps } from 'reactstrap'\n\nimport { useRoot } from '../../../app/useRoot'\nimport { useDebounce } from '../../../hooks/useDebounce'\n\ninterface IProps {\n  onSearch: () => void\n  isVisible: boolean\n  inputProps: InputProps\n}\n\nexport const AddressSearchInput = observer<IProps>(\n  ({ onSearch, inputProps, isVisible }) => {\n    const { location } = useRoot()\n    const inputRef = React.useRef<Maybe<HTMLInputElement>>(null)\n\n    React.useEffect(\n      function autoFocus() {\n        if (isVisible && inputRef.current !== null) {\n          inputRef.current.focus()\n        }\n      },\n      [isVisible],\n    )\n\n    const onSearchDebounced = useDebounce(onSearch, 2000)\n\n    React.useEffect(() => {\n      return () => onSearchDebounced.clear()\n    }, [])\n\n    const onChange = function searchOnChangeDebounced(\n      ev: React.ChangeEvent<HTMLInputElement>,\n    ) {\n      const search = ev.target.value || ''\n      location.setSearchValue(search)\n      if (search.trim().length === 0) {\n        location.clearAddress()\n      }\n      onSearchDebounced()\n    }\n\n    const onKeyPress = function searchOnEnterKey(\n      ev: React.KeyboardEvent<HTMLInputElement>,\n    ) {\n      if (ev.key === 'Enter') {\n        onSearchDebounced.clear()\n        onSearch()\n      }\n    }\n\n    const onFocus = function autoSelectOnFocus() {\n      inputRef.current!.select()\n    }\n\n    return (\n      <Input\n        className={cn({ hidden: !isVisible })}\n        onChange={onChange}\n        onKeyPress={onKeyPress}\n        onFocus={onFocus}\n        value={location.searchValue}\n        innerRef={inputRef}\n        data-testid=\"SearchInput\"\n        {...inputProps}\n      />\n    )\n  },\n)\n","import debounce from 'debounce'\nimport React from 'react'\n\nexport function useDebounce(\n  cb: AnyFunction,\n  time: number = 300,\n  deps: React.DependencyList = [],\n) {\n  const debounced = React.useCallback(debounce(cb, time), [...deps, cb, time])\n\n  React.useEffect(() => {\n    return () => {\n      debounced.clear()\n    }\n  }, [debounced])\n\n  return debounced\n}\n","import { observer } from 'mobx-react-lite'\nimport React from 'react'\n\nimport { useRoot } from '../../../app/useRoot'\nimport { useAlertModal } from '../../../hooks/useAlertModal'\nimport { i18n } from '../../../i18n'\n\nexport const GeolocationButton = observer(() => {\n  const { location } = useRoot()\n\n  const [alert, makeAlert] = useAlertModal()\n\n  if (!location.isGeolocationAvailable || location.isResolving) {\n    return null\n  }\n\n  const attemptGeolocation = () => {\n    location.log('geolocating...')\n    navigator.geolocation.getCurrentPosition(\n      ({ coords }) => {\n        const { latitude, longitude } = coords\n        location.log(\n          'geolocated at coords %s, %s (acc: %s)',\n          coords.latitude,\n          coords.longitude,\n          coords.accuracy,\n        )\n        location.setGeolocationPoint({ latitude, longitude })\n      },\n      err => {\n        location.log('failed geolocation', err)\n        location.disableGeolocation()\n        makeAlert(\n          i18n.t`Geolocation failed`,\n          i18n.t`Your browser does not support geolocation.`,\n        )\n      },\n      {\n        enableHighAccuracy: true,\n        maximumAge: 60 * 1000,\n      },\n    )\n  }\n\n  return (\n    <>\n      {alert}\n      <div className=\"gps\" onClick={attemptGeolocation}>\n        <span className=\"flaticon-gps\" />\n      </div>\n    </>\n  )\n})\n\nexport default GeolocationButton\n","import { cn } from '@speedlo/ui'\nimport React from 'react'\nimport Spinner from 'react-spinkit'\n\ninterface IProps {\n  address: string\n  isVisible: boolean\n  isResolving: boolean\n  onValidClick(): void\n}\n\nexport const ResolvedAddress: React.FC<IProps> = ({\n  address,\n  isVisible,\n  isResolving,\n  onValidClick,\n}) => {\n  return (\n    <div\n      data-testid=\"ResolvedAddress\"\n      className={cn('resolved__address', {\n        wait: isResolving,\n        hidden: !isVisible,\n      })}\n      onClick={isResolving ? undefined : onValidClick}\n    >\n      {isResolving ? <Spinner name=\"ball-beat\" fadeIn=\"none\" /> : address}\n    </div>\n  )\n}\n","import { useReaction } from '@speedlo/hooks'\nimport { debounce } from 'debounce'\nimport { reaction } from 'mobx'\nimport { useLocalStore } from 'mobx-react-lite'\nimport React from 'react'\n\nimport { useRoot } from '../../../app/useRoot'\n\ninterface IAddressSearchOptions {\n  count?: number\n  watchLocation?: boolean\n}\n\nexport type AddressSearchResult = ReturnType<typeof mapResult>\n\nconst urlCache = new Map()\n\nexport function useAddressSearch({\n  count = 1,\n  watchLocation = false,\n}: IAddressSearchOptions = {}) {\n  const { map, location } = useRoot()\n\n  const state = useLocalStore(() => ({\n    results: null as RoA<AddressSearchResult> | null,\n    phrase: location.searchValue,\n    searching: false,\n    get url() {\n      const params = [\n        `count=${count}`,\n        `lon=${map.longitude}`,\n        `lat=${map.latitude}`,\n        `zoom=${map.zoom}`,\n        `lang=cs,sk,en`,\n        `enableCategories=1`,\n      ]\n      return `https://api.mapy.cz/suggest/?${params.join('&')}`\n    },\n  }))\n\n  const doFetch = React.useCallback(() => {\n    if (state.phrase.length === 0) {\n      state.results = null\n      return\n    }\n\n    location.log(`searching phrase: ${state.phrase}`)\n    const url = `${state.url}&phrase=${state.phrase}`\n\n    if (urlCache.has(url)) {\n      state.results = urlCache.get(url)\n      return\n    }\n\n    state.searching = true\n\n    fetch(url)\n      .then(resp => resp.json())\n      .then(json => {\n        const results = json.result.filter(validateResult).map(mapResult)\n        urlCache.set(url, results)\n        state.results = results\n      })\n      .finally(() => {\n        state.searching = false\n      })\n  }, [])\n\n  const debouncedFetch = React.useRef(debounce(doFetch, 500))\n\n  const onSearch = React.useCallback(\n    (nextPhrase: string = location.searchValue) => {\n      location.log(`onSearch ${nextPhrase}`)\n      state.phrase = nextPhrase.trim()\n      debouncedFetch.current.clear()\n      doFetch()\n    },\n    [doFetch],\n  )\n\n  useReaction(\n    () => location.searchValue,\n    value => {\n      if (value.length === 0) {\n        state.phrase = ''\n        state.results = null\n        debouncedFetch.current.clear()\n      }\n    },\n  )\n\n  React.useEffect(\n    () =>\n      reaction(\n        () => state.url,\n        () => {\n          if (watchLocation) {\n            debouncedFetch.current()\n          }\n        },\n      ),\n    [watchLocation],\n  )\n\n  return { ...state, onSearch }\n}\n\nfunction validateResult({ userData }) {\n  const { latitude, longitude } = userData\n  return latitude && longitude\n}\n\nfunction mapResult({ category, userData }) {\n  const {\n    id,\n    latitude,\n    longitude,\n    suggestFirstRow,\n    suggestSecondRow,\n    municipality,\n    district,\n    country,\n  } = userData\n\n  const suffix =\n    [municipality, district, country, suggestSecondRow].find(Boolean) || ''\n\n  return {\n    id,\n    category,\n    gps: {\n      latitude,\n      longitude,\n    },\n    address: `${suggestFirstRow}${suffix ? `, ${suffix}` : ''}`,\n  }\n}\n","import { Trans } from '@lingui/macro'\nimport { useReaction } from '@speedlo/hooks'\nimport { cn } from '@speedlo/ui'\nimport { observer, useLocalStore } from 'mobx-react-lite'\nimport React from 'react'\nimport { Button } from 'reactstrap'\nimport styled from 'styled-components'\n\nimport { useRoot } from '../../app/useRoot'\nimport { useAddressSearch } from './hooks/useAddressSearch'\n\ninterface IProps {}\n\nconst Styled = styled.div`\n  position: absolute;\n  margin-top: 0.1rem;\n\n  > div,\n  button.hint:hover {\n    background-color: #ffffffaa;\n  }\n\n  > div {\n    display: flex;\n    flex-direction: column;\n    align-items: flex-start;\n    border: 1px solid transparent;\n    border-radius: 0.4rem;\n    padding: 0.375rem 0.75rem;\n    font-size: 1rem;\n    line-height: 1.5;\n    max-width: 25rem;\n    text-align: left;\n\n    & > p {\n      font-size: 0.8rem;\n      color: gray;\n    }\n\n    button {\n      &:hover,\n      &:hover:focus {\n        text-decoration: none;\n      }\n    }\n\n    button.done {\n      color: darkgray;\n    }\n  }\n\n  button.hint {\n    color: coral;\n    text-shadow: 0.5px 0.5px darkgray;\n    &:hover {\n      text-decoration: none;\n      transition: background-color 0.5s ease;\n    }\n  }\n`\n\nexport const ExtraAddressResult = observer<IProps>(props => {\n  const { location } = useRoot()\n  const state = useLocalStore(() => ({\n    open: false,\n  }))\n\n  const { results, searching, onSearch } = useAddressSearch({\n    count: 5,\n    watchLocation: state.open,\n  })\n\n  useReaction(\n    () => state.open,\n    open => {\n      if (open) {\n        onSearch()\n      }\n    },\n  )\n\n  useReaction(\n    () => location.searchValue,\n    () => {\n      state.open = false\n    },\n  )\n\n  if (!location.hasSearchValue) {\n    return null\n  }\n\n  const usefulResults =\n    results && results.filter(({ address }) => address !== location.address)\n\n  const renderHint = () => (\n    <Button\n      className=\"hint\"\n      color=\"link\"\n      onClick={() => {\n        state.open = true\n      }}\n    >\n      <Trans>Looking for a different address?</Trans>\n    </Button>\n  )\n\n  const renderResults = () => (\n    <div>\n      <p>\n        <Trans>\n          Hint: Try moving map around and zooming closer to your location to\n          improve these results.\n        </Trans>\n      </p>\n      {searching && <div>...</div>}\n      {usefulResults &&\n        usefulResults.map(result => (\n          <Button\n            size=\"sm\"\n            color=\"link\"\n            key={result.id}\n            onClick={() => {\n              location.setSearchResult(result)\n              state.open = false\n            }}\n          >\n            {result.address}\n          </Button>\n        ))}\n      <Button\n        size=\"sm\"\n        color=\"link\"\n        onClick={() => {\n          state.open = false\n        }}\n        className=\"done\"\n      >\n        {usefulResults && usefulResults.length === 0 ? (\n          <Trans>No match for map location</Trans>\n        ) : (\n          <Trans>I don't see anything useful here.</Trans>\n        )}\n      </Button>\n    </div>\n  )\n\n  return (\n    <Styled\n      className={cn('animated', {\n        bounceInLeft: state.open,\n        bounceIn: !state.open,\n      })}\n      key={state.open.toString()}\n    >\n      {state.open ? renderResults() : renderHint()}\n    </Styled>\n  )\n})\n","import { Trans } from '@lingui/macro'\nimport { observer } from 'mobx-react-lite'\nimport React from 'react'\nimport { Alert } from 'reactstrap'\nimport styled from 'styled-components/macro'\n\nimport { useRoot } from '../../app/useRoot'\nimport { gpsToLatLngLit } from '../../helpers/gps'\nimport { i18n } from '../../i18n'\nimport { AddressSearchInput } from './destination/AddressSearchInput'\nimport GeolocationButton from './destination/GeolocationButton'\nimport { ResolvedAddress } from './destination/ResolvedAddress'\nimport { ExtraAddressResult } from './ExtraAddressResult'\nimport { useAddressSearch } from './hooks/useAddressSearch'\n\nconst Styled = styled.div`\n  width: 90%;\n  min-width: 14rem;\n  margin: 1rem auto;\n  text-align: center;\n\n  div.container {\n    display: flex;\n    border-radius: 1rem;\n    border: 1px solid #d4d4d4;\n    background-color: white;\n    height: 2.3rem;\n  }\n  input {\n    height: auto;\n    background: transparent;\n    border: none;\n    &:focus {\n      box-shadow: initial;\n    }\n    &.hidden {\n      display: none;\n    }\n  }\n\n  div.gps {\n    color: ${({ theme }) => theme.secondary};\n    cursor: pointer;\n    position: relative;\n    top: 0.2rem;\n  }\n\n  div.resolved__address {\n    margin: 0.4rem 0.7rem 0.4rem 0.7rem;\n    font-size: 1rem;\n    color: green;\n    width: 100%;\n    cursor: pointer;\n    &.hidden {\n      display: none;\n    }\n    &.wait {\n      display: flex;\n      justify-content: center;\n      font-size: 0.5rem;\n      cursor: wait;\n    }\n  }\n\n  .alert {\n    pointer-events: none;\n    margin-bottom: 0;\n  }\n`\n\nexport const DeliveryAddressSearch = observer(() => {\n  const { map, location } = useRoot()\n\n  const { results, searching, onSearch } = useAddressSearch()\n\n  // useWhen(\n  //   () => location.root.initialized,\n  //   () => {\n  //     if (location.hasAddress) {\n  //     }\n  //   },\n  // )\n\n  React.useEffect(() => {\n    if (searching) {\n      location.setIsResolving(searching)\n    }\n  }, [searching])\n\n  React.useEffect(() => {\n    if (results === null) {\n      return\n    }\n\n    if (results.length === 0) {\n      location.log('no result from direct geocoder api')\n      location.setAsNotResolved()\n      return\n    }\n\n    const [singleResult] = results\n    const {\n      category,\n      gps: { latitude, longitude },\n    } = singleResult\n\n    if (map.mapRef) {\n      map.log(`panning to result gps ${latitude} / ${longitude}`)\n      map.mapRef.panTo(gpsToLatLngLit(singleResult.gps))\n    }\n\n    if (!(category && category.startsWith('address'))) {\n      location.log('result with category %s', category)\n      location.setAsNotAddress()\n      return\n    }\n\n    location.log(`found address ${singleResult.address}`)\n    if (location.latitude !== latitude && location.longitude !== longitude) {\n      location.resetResolution()\n    }\n    location.setSearchResult(singleResult)\n  }, [results])\n\n  return (\n    <Styled>\n      <div className=\"container\">\n        <ResolvedAddress\n          address={location.address || ''}\n          isVisible={location.hasAddress}\n          isResolving={location.isResolving}\n          onValidClick={location.clearAddress}\n        />\n        <AddressSearchInput\n          inputProps={{\n            placeholder: i18n.t`Type address or choose it from map`,\n            autoComplete: 'shipping street-address',\n          }}\n          onSearch={onSearch}\n          isVisible={!(location.hasAddress || location.isResolving)}\n        />\n        <GeolocationButton />\n      </div>\n      <ErrorMessage />\n      <ExtraAddressResult />\n    </Styled>\n  )\n})\n\nfunction ErrorMessage() {\n  const { location } = useRoot()\n  if (!location.hasResolutionResult) {\n    return null\n  }\n  if (location.isResolved === false) {\n    return (\n      <Alert color=\"danger\">\n        <Trans>Address was not recognized.</Trans>\n      </Alert>\n    )\n  }\n  if (location.isStreetAddress === false) {\n    return (\n      <Alert color=\"warning\">\n        <Trans>Please enter address with house number.</Trans>\n      </Alert>\n    )\n  }\n  if (location.inDeliveryLocation === false) {\n    return (\n      <Alert color=\"warning\">\n        <Trans>\n          Meal can't be delivered to your chosen address by any restaurant.\n        </Trans>\n      </Alert>\n    )\n  }\n  return null\n}\n","import { Marker } from '@react-google-maps/api'\nimport { useReaction, useWhen } from '@speedlo/hooks'\nimport { observer } from 'mobx-react-lite'\nimport React from 'react'\nimport styled from 'styled-components/macro'\n\nimport { useRoot } from '../../app/useRoot'\nimport { GeoPoint, latLngToGps } from '../../helpers/gps'\nimport { useLocationResolver } from '../../hooks/useLocationResolver'\nimport { useFoodMenuQuery } from '../foodMenu/hooks/useFoodMenuQuery'\nimport { AddressSubmit } from './AddressSubmit'\nimport { DeliveryAddressSearch } from './DeliveryAddressSearch'\nimport { useDeliveryMapPanning } from './hooks/useDeliveryMapPanning'\nimport { useOrderCreate } from './hooks/useOrderCreate'\n\ninterface IProps {\n  onConfirm(): void\n}\n\nconst StyledDeliveryMap = styled.div`\n  .delivery__map__address {\n    position: absolute;\n    top: 0;\n    left: 2.3rem;\n    right: 2.3rem;\n  }\n  .delivery__map__submit {\n    position: absolute;\n    bottom: 3rem;\n    width: 100%;\n  }\n`\n\nexport const DeliveryMap = observer<IProps>(({ onConfirm }) => {\n  const { map, location, business } = useRoot()\n\n  const resolver = useLocationResolver()\n\n  const resolveUserLocation = (gps: GeoPoint) => {\n    location.resetResolution()\n    location.setSearchValue('')\n    location.setLocation(gps)\n  }\n\n  useWhen(\n    () => business.isValid,\n    () => {\n      if (location.hasLocation) {\n        location.log('resolving initial gps')\n        resolver(location.geoPoint!)\n      }\n    },\n  )\n\n  useReaction(\n    () => location.geoPoint,\n    gps => {\n      if (gps) {\n        location.log('resolving on gps change')\n        resolver(gps)\n      }\n    },\n  )\n\n  useReaction(\n    () => map.clickPoint,\n    clickPoint => {\n      if (clickPoint) {\n        location.log(`resolve with clickpoint`)\n        resolveUserLocation(clickPoint)\n        map.clearClickPoint()\n      }\n    },\n  )\n\n  // prefetch food menu when correct address is resolved\n  useFoodMenuQuery(location.isDeliveryAddress ? location.branchId : null)\n  useDeliveryMapPanning()\n\n  const { createDeliveryOrder } = useOrderCreate(onConfirm)\n\n  return (\n    <StyledDeliveryMap data-testid=\"DeliverMap\">\n      {location.latLng ? (\n        <Marker\n          position={location.latLng}\n          draggable={true}\n          onDragEnd={({ latLng }) => {\n            location.log(`resolve with drag`)\n            resolveUserLocation(latLngToGps(latLng))\n          }}\n        />\n      ) : null}\n      <div className=\"delivery__map__address\">\n        <DeliveryAddressSearch />\n      </div>\n      <div className=\"delivery__map__submit\">\n        <AddressSubmit\n          enabled={location.isDeliveryAddress}\n          onClick={createDeliveryOrder}\n        />\n      </div>\n    </StyledDeliveryMap>\n  )\n})\n","import React from 'react'\n\nimport { useRoot } from '../app/useRoot'\nimport { useExecutableQResolveLocation } from '../graph/generated'\nimport { GeoPoint } from '../helpers/gps'\n\nexport function useLocationResolver() {\n  const { location } = useRoot()\n\n  const [resolveLocation] = useExecutableQResolveLocation({\n    fetchPolicy: 'cache-first',\n  })\n\n  const resolver = React.useCallback(\n    async (gps: GeoPoint) => {\n      location.setIsResolving(true)\n\n      const { data } = await resolveLocation({\n        ...location.resolutionTarget,\n        ...gps,\n      })\n\n      if (data !== null) {\n        location.setResolutionResult(data.resolveLocation)\n      }\n      location.setIsResolving(false)\n    },\n    [resolveLocation],\n  )\n\n  return resolver\n}\n","import { useAutorun, useReaction } from '@speedlo/hooks'\nimport { useAsObservableSource } from 'mobx-react-lite'\n\nimport { useRoot } from '../../../app/useRoot'\nimport { useQInitialDeliveryLocation } from '../../../graph/generated'\nimport { useMapPanning } from './useMapPanning'\n\nexport const useDeliveryMapPanning = () => {\n  const { location } = useRoot()\n  const { data, loading } = useQInitialDeliveryLocation(\n    {},\n    {\n      fetchPolicy: 'cache-first',\n      skip: location.hasAddress,\n    },\n  )\n\n  const source = useAsObservableSource({\n    initial: loading ? null : data.location,\n  })\n\n  const panToGps = useMapPanning()\n\n  useAutorun(() => {\n    if (location.geoPoint) {\n      location.log('pan to user location', location.geoPoint)\n      panToGps(location.geoPoint)\n    } else if (location.geolocationPoint) {\n      location.log('pan to geolocation', location.geolocationPoint)\n      panToGps(location.geolocationPoint)\n    } else if (source.initial && source.initial.gpsCoordinates) {\n      location.log('pan to initial location', source.initial.gpsCoordinates)\n      panToGps(source.initial.gpsCoordinates)\n    }\n  })\n\n  useReaction(\n    () => location.geolocationPoint,\n    gps => {\n      if (gps) {\n        panToGps(gps)\n      }\n    },\n  )\n}\n","import { t } from '@lingui/macro'\nimport React, { CSSProperties } from 'react'\n\nimport { i18n } from '../../i18n'\n\ninterface IProps {\n  minCount: number\n  maxCount: number\n  isValid: boolean\n}\n\nexport const CategoryValidationMessage: React.FC<IProps> = ({\n  minCount,\n  maxCount,\n  isValid,\n}) => {\n  let message = ''\n  if (minCount === 0) {\n    if (maxCount > 0) {\n      message = i18n._(t`maximum ${maxCount}`)\n    } else {\n      return null\n    }\n  } else if (maxCount === 0) {\n    message = i18n._(t`minimum ${minCount}`)\n  } else if (minCount === maxCount) {\n    const count = minCount\n    message = i18n._(t`only ${count}`)\n  } else {\n    message = i18n._(t`minimum ${minCount} and maximum ${maxCount}`)\n  }\n  const style: CSSProperties = {}\n  if (!isValid) {\n    style.color = 'red'\n  }\n  return (\n    <span style={style}>\n      {'('}\n      {message}\n      {')'}\n    </span>\n  )\n}\n","import React from 'react'\nimport styled from 'styled-components'\n\ninterface IProps {\n  onClick(): void\n}\n\nconst StyledSidedishRemoveButton = styled.div`\n  position: absolute;\n  left: -0.6rem;\n  top: -0.4rem;\n  width: 2rem;\n  height: 2rem;\n  border-radius: 1rem;\n  background: ${({ theme }) => theme.primary};\n\n  &:hover {\n    background: ${({ theme }) => theme.primaryHover} !important;\n  }\n  &:active {\n    background: ${({ theme }) => theme.primary} !important;\n  }\n  & .rectangle {\n    width: 45%;\n    position: absolute;\n    top: 45%;\n    left: 30%;\n    height: 4px;\n    background: white;\n  }\n`\nexport const SidedishRemoveButton: React.FC<IProps> = ({\n  onClick,\n  ...props\n}) => {\n  return (\n    <StyledSidedishRemoveButton\n      onClick={onClick}\n      className=\"animated bounceIn\"\n      data-testid=\"SidedishRemoveButton\"\n      {...props}\n    >\n      <div className=\"rectangle\" />\n    </StyledSidedishRemoveButton>\n  )\n}\n","import React from 'react'\nimport { ButtonProps } from 'reactstrap'\nimport styled from 'styled-components/macro'\n\nimport { PickerButton } from '../../common/PickerButton'\nimport { FRecipeDetailSideDishes } from '../../graph/generated'\nimport { SidedishRemoveButton } from './SidedishRemoveButton'\n\ninterface IProps extends ButtonProps {\n  sidedish: FRecipeDetailSideDishes\n  count: number\n  isSelected: boolean\n  canBeSelected: boolean\n  canBeRemoved: boolean\n  onAdd(): void\n  onRemove(): void\n}\n\nconst StyledSidedishCheckbox = styled.div`\n  display: inline-block;\n  position: relative;\n\n  & .name {\n    float: left;\n    text-align: left;\n    white-space: normal;\n    max-width: 13rem;\n  }\n\n  & .price {\n    font-weight: bold;\n    float: right;\n  }\n\n  & .count {\n    display: inline-block;\n    margin-left: 0.5rem;\n  }\n`\n\nexport const SidedishCheckbox = React.memo<IProps>(\n  ({\n    sidedish,\n    count,\n    canBeSelected,\n    canBeRemoved,\n    className,\n    onAdd,\n    onRemove,\n    ...buttonProps\n  }) => {\n    const onClick = React.useCallback(() => {\n      if (canBeSelected) {\n        onAdd()\n      }\n    }, [canBeSelected, onAdd])\n    return (\n      <StyledSidedishCheckbox className={className}>\n        <PickerButton\n          onClick={onClick}\n          disabled={!canBeSelected}\n          size=\"xs\"\n          outline={true}\n          width=\"17.5rem\"\n          data-testid={`sidedishCheckbox__${sidedish.id}`}\n          {...buttonProps}\n        >\n          <div className=\"name\">\n            {sidedish.nameLabel}\n            <span key={count} className=\"animated heartBeat count\">\n              {count > 1 && `${count}x`}\n            </span>\n          </div>\n          <div className=\"price\">{sidedish.price.formattedValue}</div>\n        </PickerButton>\n        {canBeRemoved && <SidedishRemoveButton onClick={onRemove} />}\n      </StyledSidedishCheckbox>\n    )\n  },\n)\n","import { useSideDishValidator } from '@speedlo/cart'\nimport React, { Fragment } from 'react'\nimport styled from 'styled-components'\n\nimport { FRecipeDetailFragment } from '../../graph/generated'\nimport { CategoryValidationMessage } from './CategoryValidationMessage'\nimport { SidedishCheckbox } from './SidedishCheckbox'\n\ninterface IProps {\n  recipe: FRecipeDetailFragment\n  selection: ReadonlyArray<ID>\n  onAdd(item: ID): void\n  onRemove(item: ID): void\n}\n\nconst StyledSidedishPicker = styled.div`\n  margin-top: 1rem;\n\n  & .sidedish__picker__checkbox {\n    @media (max-width: 370px) {\n      width: 100%;\n    }\n  }\n\n  & .sidedish__picker__category {\n    font-size: 1rem;\n    font-weight: bold;\n    text-align: left;\n    margin: 0 0 0.2rem 0.2rem;\n  }\n`\n\nexport const SidedishPicker: React.FC<IProps> = ({\n  recipe,\n  selection,\n  onAdd,\n  onRemove,\n}) => {\n  const { canBeSelected, isCategoryValid } = useSideDishValidator(\n    recipe.categories,\n    selection,\n  )\n\n  return (\n    <StyledSidedishPicker className=\"food__sidedish__picker\">\n      {recipe.categories.map(category => (\n        <Fragment key={category.id}>\n          <div className=\"sidedish__picker__category\">\n            {category.nameLabel}{' '}\n            <CategoryValidationMessage\n              minCount={category.minCount}\n              maxCount={category.maxCount}\n              isValid={isCategoryValid(category)}\n            />\n          </div>\n          {category.sideDishes.map(sidedish => (\n            <SidedishCheckbox\n              key={`${sidedish.id}-${category.id}`}\n              sidedish={sidedish}\n              count={selection.filter(i => i === sidedish.id).length}\n              isSelected={selection.includes(sidedish.id)}\n              canBeRemoved={selection.includes(sidedish.id)}\n              canBeSelected={canBeSelected(category, sidedish)}\n              onAdd={() => onAdd(sidedish.id)}\n              onRemove={() => onRemove(sidedish.id)}\n              className=\"sidedish__picker__checkbox\"\n            />\n          ))}\n        </Fragment>\n      ))}\n    </StyledSidedishPicker>\n  )\n}\n","import { useSideDishValidator } from '@speedlo/cart'\nimport { cn } from '@speedlo/ui'\nimport React from 'react'\n\nimport { PrimaryButton } from '../../common/Buttons'\nimport { FRecipeDetailFragment } from '../../graph/generated'\nimport { i18n } from '../../i18n'\n\ninterface IProps {\n  selection: ReadonlyArray<ID>\n  recipe: Maybe<FRecipeDetailFragment>\n  onConfirm(): Promise<boolean>\n}\n\nexport const CartOrderButton = React.memo<IProps>(\n  ({ selection, recipe, onConfirm }) => {\n    const [isConfirming, setConfirming] = React.useState(false)\n    const { isCategoryValid } = useSideDishValidator(\n      recipe ? recipe.categories : [],\n      selection,\n    )\n\n    return (\n      <PrimaryButton\n        className={cn('modal__body__button', 'animated', {\n          heartBeat: isConfirming,\n        })}\n        disabled={\n          isConfirming || !recipe || !recipe.categories.every(isCategoryValid)\n        }\n        data-testid=\"CartOrderButton\"\n        onClick={() => {\n          setConfirming(true)\n          onConfirm().catch(() => {\n            setConfirming(false)\n          })\n        }}\n      >\n        {i18n.plural({\n          value: selection.length,\n          0: 'Order without sidedish',\n          one: 'Order with this sidedish',\n          other: 'Order with # sidedishes',\n        })}\n      </PrimaryButton>\n    )\n  },\n)\n","import '../../common/Modal.css'\n\nimport { Trans } from '@lingui/macro'\nimport { RM } from '@speedlo/tools'\nimport React from 'react'\nimport { Container, Modal, ModalBody, ModalHeader } from 'reactstrap'\n\nimport Pacman from '../../common/Pacman'\nimport { FRecipeDetailFragment } from '../../graph/generated'\nimport { SidedishPicker } from '../sidedishPicker/SidedishPicker'\nimport { CartOrderButton } from './CartOrderButton'\n\ninterface IProps {\n  recipe: Maybe<FRecipeDetailFragment>\n  isLoading: boolean\n  initialSideDishes?: ID[]\n  onConfirm(selection: ID[]): Promise<boolean>\n  onClose(): void\n}\n\nconst EMPTY_SELECTION = []\n\nexport const CartModal: React.FC<IProps> = ({\n  recipe,\n  isLoading,\n  initialSideDishes = EMPTY_SELECTION,\n  onConfirm,\n  onClose,\n}) => {\n  const [selection, updateSelection] = React.useState([] as string[])\n\n  React.useEffect(() => {\n    updateSelection(initialSideDishes)\n  }, [initialSideDishes])\n\n  const onCloseModal = React.useCallback(() => {\n    updateSelection([])\n    onClose()\n  }, [onClose])\n\n  const onConfirmAndClose = async () => {\n    if (await onConfirm(selection)) {\n      onCloseModal()\n      return true\n    }\n    return false\n  }\n\n  const onAddSidedish = (sidedishId: ID) => {\n    updateSelection(sel => {\n      return RM.append(sidedishId, sel)\n    })\n  }\n\n  const onRemoveSidedish = (sidedishId: ID) => {\n    updateSelection(sel => {\n      return RM.remove(RM.indexOf(sidedishId, sel), 1, sel)\n    })\n  }\n\n  const renderBody = () => {\n    if (isLoading) {\n      return <Pacman />\n    }\n    if (!recipe) {\n      return (\n        <Trans>We sorry, but the item is unavailable at this moment.</Trans>\n      )\n    }\n    return (\n      <>\n        <h3 className=\"modal__body__food__name\">{recipe.nameLabel}</h3>\n        <span className=\"modal__body__food_description\">\n          {recipe.descriptionLabel}\n        </span>\n        <SidedishPicker\n          recipe={recipe}\n          selection={selection}\n          onAdd={onAddSidedish}\n          onRemove={onRemoveSidedish}\n        />\n      </>\n    )\n  }\n\n  return (\n    <Modal\n      isOpen={recipe !== null}\n      toggle={onCloseModal}\n      className=\"modal__container\"\n      autoFocus={true}\n      backdrop=\"static\"\n      fade={false}\n      data-testid=\"CartModal\"\n    >\n      <ModalHeader\n        toggle={onCloseModal}\n        tag={Container}\n        className=\"modal__header\"\n      >\n        <span>\n          <Trans>Do you want to add something?</Trans>\n        </span>\n      </ModalHeader>\n      <ModalBody className=\"modal__body\">\n        <div className=\"modal__body__content\">{renderBody()}</div>\n        <div className=\"modal__body__button__line\">\n          <div className=\"modal__body__button__strip\" />\n          <CartOrderButton\n            recipe={recipe}\n            selection={selection}\n            onConfirm={onConfirmAndClose}\n          />\n        </div>\n      </ModalBody>\n    </Modal>\n  )\n}\n","import { observer } from 'mobx-react-lite'\nimport React from 'react'\n\nimport { useQCartRecipe } from '../../graph/generated'\nimport { useAddToCart } from '../../hooks/useAddToCart'\nimport { useOrderModel } from '../../hooks/useOrderModel'\nimport { CartModal } from './CartModal'\n\ninterface IProps {\n  orderId: MaybeID\n}\n\nexport const AddToCartModal = observer<IProps>(({ orderId }) => {\n  const orderModel = useOrderModel()\n\n  const recipeId = orderModel.addToCartRecipeId\n\n  const { data, loading } = useQCartRecipe(\n    {\n      recipeId: recipeId!,\n    },\n    { skip: orderId === null || recipeId === null, fetchPolicy: 'cache-first' },\n  )\n\n  const executeAddToCart = useAddToCart()\n\n  const onConfirm = React.useCallback(\n    async sideDishes => {\n      if (orderId === null || recipeId === null) {\n        return false\n      }\n      const result = await executeAddToCart(recipeId, sideDishes)\n      return Boolean(result)\n    },\n    [orderId, recipeId],\n  )\n\n  const onClose = React.useCallback(() => {\n    orderModel.addToCart(null)\n  }, [history])\n\n  return (\n    <CartModal\n      recipe={loading ? null : data.recipe}\n      onConfirm={onConfirm}\n      onClose={onClose}\n      isLoading={loading}\n    />\n  )\n})\n","import { RM } from '@speedlo/tools'\nimport { observer } from 'mobx-react-lite'\nimport React from 'react'\n\nimport { useRoot } from '../../app/useRoot'\nimport { useMChangeCartItem, useQCartItem } from '../../graph/generated'\nimport { CartModal } from './CartModal'\n\ninterface IProps {\n  orderId: MaybeID\n}\n\nexport const ChangeCartModal = observer<IProps>(({ orderId }) => {\n  const { order: orderModel, cart: cartModel } = useRoot()\n\n  const itemId = orderModel.changeCartItemId\n\n  const { data, loading } = useQCartItem(\n    {\n      itemId: itemId!,\n    },\n    { skip: orderId === null || itemId === null },\n  )\n\n  const [changeItem] = useMChangeCartItem()\n\n  const onConfirm = React.useCallback(\n    async sideDishes => {\n      if (orderId === null || itemId === null) {\n        return false\n      }\n      const result = await changeItem({\n        itemId,\n        sideDishes,\n        orderId,\n        withGoods: cartModel.withGoods,\n      })\n      return Boolean(result)\n    },\n    [orderId, itemId],\n  )\n\n  const onClose = React.useCallback(() => {\n    orderModel.changeCartItem(null)\n  }, [history])\n\n  const sideDishesSelection = React.useMemo(\n    () =>\n      loading\n        ? undefined\n        : (data.item.sideDishes.map(RM.path(['recipe', 'id'])) as string[]),\n    [loading, data],\n  )\n\n  return (\n    <CartModal\n      recipe={loading ? null : data.item.recipe}\n      initialSideDishes={sideDishesSelection}\n      onConfirm={onConfirm}\n      onClose={onClose}\n      isLoading={loading}\n    />\n  )\n})\n","import { observer } from 'mobx-react-lite'\nimport React from 'react'\n\nimport { useOrderModel } from '../../hooks/useOrderModel'\nimport { AddToCartModal } from './AddToCartModal'\nimport { CartSystem } from './CartSystem'\nimport { ChangeCartModal } from './ChangeCartModal'\n\ninterface IProps {\n  isReadonly?: boolean\n}\n\nexport const CartView = observer<IProps>(({ isReadonly = false }) => {\n  const orderModel = useOrderModel()\n  const orderId = orderModel.orderId\n  return (\n    <>\n      <AddToCartModal orderId={orderId} />\n      <ChangeCartModal orderId={orderId} />\n      <CartSystem\n        orderId={orderId}\n        isReadonly={isReadonly || orderModel.disableInteraction}\n      />\n    </>\n  )\n})\n","import { cn } from '@speedlo/ui'\nimport React, { useState } from 'react'\nimport Scroll from 'react-scroll'\nimport Truncate from 'react-truncate'\nimport styled from 'styled-components/macro'\n\nimport { mediaDesktop, mediaMobile } from '../../common/Responsive'\nimport { FFoodMenuCategoryFragment } from '../../graph/generated'\n\ninterface IProps {\n  categories: ReadonlyArray<FFoodMenuCategoryFragment>\n}\n\nconst StyledCategoryNavigator = styled.div`\n  background-color: #d4d4d4;\n  border-top-left-radius: 0.6rem;\n  padding: 0.7rem 0.5rem 0 0.2rem;\n  position: sticky;\n  top: 0;\n  z-index: 1;\n  user-select: none;\n  display: flex;\n  ${mediaDesktop`\n    flex-wrap: wrap;\n  `}\n  ${mediaMobile`\n    flex-wrap: nowrap;\n    overflow-x: auto;\n    overflow-y: hidden;\n    box-shadow: inset -15px -5px 15px -14px rgba(0, 0, 0, 0.6);\n    margin: 0;\n    border-top-left-radius: 0;\n    background-color: #f3f3f3;\n    opacity: 0.94;\n  `}\n\n  a.link {\n    text-align: center;\n    color: #595959 !important;\n    display: inline-block;\n    min-width: 4rem;\n    cursor: pointer;\n    margin: 0 0.2rem;\n    &:hover,\n    &.active {\n      color: #5ca651 !important;\n      border-color: #5ca651;\n    }\n  }\n  div.circle {\n    background-color: white;\n    border: 1px solid #595959;\n    border-radius: 2rem;\n    width: 2.6rem;\n    height: 2.6rem;\n    margin: 0 auto;\n    padding: 0;\n    &:hover,\n    a.link.active > & {\n      border-color: #5ca651;\n    }\n    & span::before,\n    & span::after {\n      margin: 0;\n      padding: 0;\n      font-size: 1.7rem;\n    }\n  }\n\n  div.description {\n    font-size: 0.9rem;\n    margin-top: 0.2rem;\n    max-width: 5rem;\n  }\n`\nconst CategoryNavigator: React.FC<IProps> = ({ categories }) => {\n  const [activeCategoryIndex, setActiveCategoryIndex] = useState(0)\n  return (\n    <StyledCategoryNavigator data-testid=\"CategoryNavigator\">\n      {categories.length === 0\n        ? null\n        : categories.map((category, idx) => (\n            <Scroll.Link\n              to={category.nameLabel}\n              key={category.id}\n              className={cn('link', {\n                active: activeCategoryIndex === idx,\n              })}\n              onSetActive={() => setActiveCategoryIndex(idx)}\n              offset={-168}\n              smooth={true}\n              spy={true}\n              title={category.nameLabel}\n            >\n              <div className=\"circle\">\n                <span className={`flaticon-${category.pictogram}`} />\n              </div>\n              <div className=\"description\">\n                <Truncate lines={2}>{category.nameLabel}</Truncate>\n              </div>\n            </Scroll.Link>\n          ))}\n    </StyledCategoryNavigator>\n  )\n}\n\nexport default CategoryNavigator\n","import React from 'react'\nimport Scroll from 'react-scroll'\nimport styled from 'styled-components/macro'\n\nimport { mediaMobile } from '../../common/Responsive'\nimport { FFoodMenuCategoryFragment } from '../../graph/generated'\n\ninterface IProps {\n  category: FFoodMenuCategoryFragment\n}\n\nconst FoodCategoryStyled = styled.div`\n  color: #474747;\n  display: block;\n  font-size: 1.6rem;\n  & a {\n    text-decoration: none;\n  }\n`\n\nconst FoodCategoryTitleStyled = styled('h3')`\n  ${mediaMobile`margin: 1rem 0 0.4rem 1rem;`};\n`\n\nconst FoodCategory: React.FC<IProps> = ({ category, children }) => (\n  <Scroll.Element name={category.nameLabel}>\n    <FoodCategoryStyled>\n      <FoodCategoryTitleStyled>{category.nameLabel}</FoodCategoryTitleStyled>\n      {children}\n    </FoodCategoryStyled>\n  </Scroll.Element>\n)\n\nexport default React.memo(FoodCategory)\n","import './FoodMenuItem.css'\n\nimport { cn } from '@speedlo/ui'\nimport { useObserver } from 'mobx-react-lite'\nimport React from 'react'\nimport Truncate from 'react-truncate'\nimport styled from 'styled-components/macro'\n\nimport { mediaMobile } from '../../common/Responsive'\nimport {\n  FFoodMenuRecipeFragment,\n  useExecutableQCartRecipe,\n} from '../../graph/generated'\nimport { useOrderModel } from '../../hooks/useOrderModel'\nimport { TFoodMenuPresence } from './hooks/useFoodMenuPresence'\n\ninterface IProps {\n  recipe: FFoodMenuRecipeFragment\n  presence: TFoodMenuPresence\n  onAddToCart(recipeId: ID, hasSideDish: boolean): void\n}\n\nconst FoodMenuItemStyled = styled.div`\n  padding: 1rem 0.5rem 0.3rem 1.1rem;\n  border: 1px solid #d5d5d5 !important;\n  margin: 0 0 0.4rem 0;\n  border-radius: 0.8rem;\n  cursor: pointer;\n  position: relative;\n  min-height: 6rem;\n  user-select: none;\n  &:hover {\n    background-color: #c9e8d7;\n  }\n  background-color: ${({ isActive }: { isActive: boolean }) =>\n    isActive ? '#b3ebcc' : 'white'};\n  h4 {\n    font-size: 1rem;\n    font-weight: 700;\n    color: #404040;\n    margin-bottom: 0.1rem;\n    margin-right: 6rem;\n  }\n  p {\n    color: #666666;\n    margin: 0.6rem 0 0 0;\n    font-size: 0.9rem;\n    max-height: 2.5rem;\n    -webkit-line-clamp: 2;\n    overflow: hidden;\n  }\n\n  & div.presence {\n    background-color: ${({ theme }) => theme.secondary};\n    float: left;\n    position: absolute;\n    left: -1.2rem;\n    padding: 0.4rem 0.6rem;\n    color: white;\n    border-radius: 1.8rem;\n    font-size: 0.9rem;\n    ${mediaMobile`\n    left: -0.6rem;\n    top: -0.7rem;\n  `};\n  }\n`\nconst FoodMenuItemImage = styled.img`\n  width: 6rem;\n  height: 6rem;\n  display: block;\n  float: left;\n  margin: -1.05rem 1rem 0 -1.2rem;\n  border-radius: 0.8rem 0 0 0.8rem;\n  object-fit: cover;\n`\n\nconst FoodMenuItemPriceCorner = styled.div`\n  border-top-width: 1.8rem;\n  border-top-style: solid;\n  border-top-color: ${({ theme }) => theme.primary} !important;\n  position: absolute;\n  right: 4.799rem;\n  top: 1rem;\n  width: 0;\n  height: 0;\n  border-left: 1.8rem solid transparent;\n`\n\nconst FoodMenuItemPrice = styled.div`\n  background-color: ${({ theme }) => theme.primary} !important;\n  position: absolute;\n  right: 0;\n  top: 1rem;\n  width: 4.8rem;\n  height: 1.8rem;\n  padding: 0.12rem 0.7rem 0.3rem 0rem;\n  font-weight: 500;\n  font-size: 1.1rem;\n  color: white;\n  text-align: right;\n  overflow: hidden;\n  white-space: nowrap;\n`\n\nconst FoodMenuItem = React.memo<IProps>(({ recipe, presence, onAddToCart }) => {\n  const orderModel = useOrderModel()\n\n  const hasSideDishes = recipe.sideDishCount > 0\n\n  const onClick = React.useCallback(() => {\n    onAddToCart(recipe.id, hasSideDishes)\n  }, [hasSideDishes, onAddToCart])\n\n  const [prefetchFoodItem] = useExecutableQCartRecipe({\n    fetchPolicy: 'cache-first',\n  })\n\n  const onMouseEnter = React.useCallback(() => {\n    if (process.env.NODE_ENV !== 'development' && hasSideDishes) {\n      prefetchFoodItem({ recipeId: recipe.id })\n    }\n  }, [hasSideDishes, prefetchFoodItem])\n\n  const previousPresence = React.useRef(-1)\n\n  const renderPresence = () => {\n    const recipePresence = presence.get(recipe.id)\n    if (!recipePresence) {\n      previousPresence.current = -1\n      return null\n    }\n    const className = cn('presence', 'animated', {\n      pulse: recipePresence > 1 || previousPresence.current > 0,\n      zoomIn:\n        (recipePresence === 1 && previousPresence.current === 0) ||\n        previousPresence.current === -1,\n    })\n    previousPresence.current = recipePresence\n    return (\n      <div\n        key={recipePresence}\n        className={className}\n      >{`${recipePresence}x`}</div>\n    )\n  }\n\n  return useObserver(() => (\n    <FoodMenuItemStyled\n      onClick={onClick}\n      onMouseEnter={onMouseEnter}\n      isActive={orderModel.lastActiveRecipeId === recipe.id}\n      data-testid={`foodMenuItem__${recipe.id}`}\n    >\n      {recipe.image && (\n        <FoodMenuItemImage src={recipe.image} alt={recipe.nameLabel} />\n      )}\n\n      <FoodMenuItemPriceCorner />\n      <FoodMenuItemPrice data-testid={`foodMenuItem__Price__${recipe.id}`}>\n        {recipe.price.formattedValue}\n      </FoodMenuItemPrice>\n      {renderPresence()}\n      <h4 title={recipe.nameLabel}>\n        <Truncate lines={2} data-testid={`foodMenuItem__Name__${recipe.id}`}>\n          {recipe.nameLabel}\n        </Truncate>\n      </h4>\n      <p>\n        <Truncate\n          lines={2}\n          data-testid={`foodMenuItem__Description__${recipe.id}`}\n        >\n          {recipe.descriptionLabel}\n        </Truncate>\n      </p>\n    </FoodMenuItemStyled>\n  ))\n})\n\nexport default FoodMenuItem\n","import { Trans } from '@lingui/macro'\nimport React from 'react'\nimport styled from 'styled-components/macro'\n\nimport { useRoot } from '../../app/useRoot'\nimport Pacman from '../../common/Pacman'\nimport { mediaDesktop, mediaMobile } from '../../common/Responsive'\nimport { QFoodMenuWareCategories } from '../../graph/generated'\nimport { useAddToCart } from '../../hooks/useAddToCart'\nimport FoodCategory from './FoodCategory'\nimport FoodMenuItem from './FoodMenuItem'\nimport { useFoodMenuPresence } from './hooks/useFoodMenuPresence'\n\ninterface IProps {\n  orderId: MaybeID\n  categories: ReadonlyArray<QFoodMenuWareCategories>\n  isLoading: boolean\n}\n\nconst StyledFoodMenu = styled.div`\n  border-radius: 0 0 0.6rem 0.6rem;\n  ${mediaDesktop`background: white;`};\n  ${mediaMobile`\n    background: #eee9e7;\n    background-size: cover;\n    background-attachment: scroll;\n  `};\n\n  & > div {\n    ${mediaDesktop`\n      margin: 0 1.4rem 1rem 1.6rem;\n      padding: 2rem 0 2rem 0;\n    `};\n    ${mediaMobile`\n      margin: 0 0.7rem 1rem 0.7rem;\n      padding: 0 0 4rem 0;\n    `};\n  }\n`\n\nconst FoodMenu: React.FC<IProps> = ({ orderId, categories, isLoading }) => {\n  const { order: orderModel, config, user } = useRoot()\n\n  const presence = useFoodMenuPresence(orderId)\n\n  const executeAddToCart = useAddToCart()\n  const onAddToCart = React.useCallback(\n    (recipeId: ID, hasSideDish: boolean) => {\n      if (orderModel.disableInteraction) {\n        return\n      }\n      if (presence.size >= config.orderItemsMax) {\n        user.showOrderLimit()\n      } else if (hasSideDish) {\n        // history.push(`/order/add/${recipeId}`)\n        orderModel.addToCart(recipeId)\n      } else {\n        orderModel.setUsedRecipeId(recipeId)\n        executeAddToCart(recipeId)\n      }\n    },\n    [executeAddToCart],\n  )\n\n  const render = () => {\n    if (isLoading) {\n      return <Pacman noMargin={true} />\n    }\n    if (categories.length === 0) {\n      return (\n        <h3>\n          <Trans>Food menu is empty. We are sorry.</Trans>\n        </h3>\n      )\n    }\n    return (\n      <>\n        {categories.map(category => (\n          <FoodCategory key={category.id} category={category}>\n            {category.recipes.map(recipe => (\n              <FoodMenuItem\n                key={recipe.id}\n                recipe={recipe}\n                presence={presence}\n                onAddToCart={onAddToCart}\n              />\n            ))}\n          </FoodCategory>\n        ))}\n      </>\n    )\n  }\n\n  return (\n    <StyledFoodMenu data-testid=\"FoodMenu\">\n      <div>{render()}</div>\n    </StyledFoodMenu>\n  )\n}\n\nexport default React.memo(FoodMenu)\n","import { observable, ObservableMap, runInAction } from 'mobx'\nimport React from 'react'\n\nimport { useQFoodMenuCartPresence } from '../../../graph/generated'\n\nexport function useFoodMenuPresence(orderId: MaybeID) {\n  const { data, loading } = useQFoodMenuCartPresence(\n    {\n      orderId: orderId!,\n    },\n    {\n      skip: !orderId,\n      fetchPolicy: 'cache-only',\n    },\n  )\n\n  const [presence] = React.useState(() => observable.map<ID, number>())\n\n  if (!loading) {\n    runInAction(() => {\n      presence.clear()\n      data.order.presence.forEach(({ recipe: { id } }) => {\n        if (!presence.has(id)) {\n          presence.set(id, 0)\n        }\n        presence.set(id, presence.get(id)! + 1)\n      })\n    })\n  }\n\n  return presence\n}\n\nexport type TFoodMenuPresence = ObservableMap<ID, number>\n","import { useObserver } from 'mobx-react-lite'\nimport React from 'react'\n\nimport { useRoot } from '../../app/useRoot'\nimport { AlertModal } from '../../common/AlertModal'\nimport { i18n } from '../../i18n'\n\nexport const OrderLimitModal: React.FC = () => {\n  const { user } = useRoot()\n  return useObserver(() => (\n    <AlertModal\n      isOpen={!user.orderLimitAlertHidden}\n      onClose={user.hideOrderLimit}\n      headerText={i18n.t`Limit has been reached`}\n    >\n      {i18n.t`The maximum number of items in the order has been reached`}\n    </AlertModal>\n  ))\n}\n","import { useReaction } from '@speedlo/hooks'\nimport { observer } from 'mobx-react-lite'\nimport React from 'react'\n\nimport { useRoot } from '../../app/useRoot'\nimport CategoryNavigator from './CategoryNavigator'\nimport FoodMenu from './FoodMenu'\nimport { useFoodMenuQuery } from './hooks/useFoodMenuQuery'\nimport { OrderLimitModal } from './OrderLimitModal'\n\nexport const FoodMenuView = observer(() => {\n  const { order: orderModel, user } = useRoot()\n\n  const { data, loading, refetch } = useFoodMenuQuery(orderModel.branchId)\n\n  useReaction(() => user.language, () => refetch())\n\n  const categories = React.useMemo(\n    () =>\n      loading ? [] : data.wareCategories.filter(cat => cat.recipes.length > 0),\n    [loading, data],\n  )\n\n  return (\n    <>\n      <OrderLimitModal />\n      <CategoryNavigator categories={categories} />\n      <FoodMenu\n        orderId={orderModel.orderId}\n        categories={categories}\n        isLoading={loading}\n      />\n    </>\n  )\n})\n","import React from 'react'\nimport { FormGroup } from 'reactstrap'\n\nimport { FormTextInput } from '../../forms/FormTextInput'\nimport { i18n } from '../../i18n'\n\nexport const OrderEmailInput: React.FC = () => (\n  <FormGroup>\n    <FormTextInput\n      name=\"email\"\n      type=\"email\"\n      autoComplete=\"email\"\n      placeholder={i18n.t`E-mail`}\n    />\n  </FormGroup>\n)\n","import React from 'react'\nimport { FormGroup, InputGroup } from 'reactstrap'\n\nimport { FormTextInput } from '../../forms/FormTextInput'\nimport { i18n } from '../../i18n'\n\nexport const OrderNameInput: React.FC = () => (\n  <FormGroup>\n    <InputGroup>\n      <FormTextInput\n        name=\"firstname\"\n        autoComplete=\"given-name\"\n        placeholder={i18n.t`First name`}\n      />\n      <FormTextInput\n        name=\"lastname\"\n        autoComplete=\"family-name\"\n        placeholder={i18n.t`Last name`}\n      />\n    </InputGroup>\n  </FormGroup>\n)\n","import React from 'react'\nimport { FormGroup, FormText } from 'reactstrap'\n\nimport { FormTextInput } from '../../forms/FormTextInput'\nimport { i18n } from '../../i18n'\n\nexport const OrderNoteInput: React.FC = () => {\n  const ingredientsDescription = i18n.t`eg. ingredients change, company...`\n  return (\n    <FormGroup>\n      <FormTextInput\n        name=\"note\"\n        type=\"textarea\"\n        placeholder={i18n.t`Note`}\n        title={ingredientsDescription}\n        errorForceDisplay={true}\n      />\n      <FormText>{ingredientsDescription}</FormText>\n    </FormGroup>\n  )\n}\n","import React from 'react'\nimport { FormGroup, InputGroup } from 'reactstrap'\nimport { UAParser } from 'ua-parser-js'\n\nimport { FormTextInput } from '../../forms/FormTextInput'\nimport { i18n } from '../../i18n'\n\nexport const OrderPhoneInput: React.FC = () => {\n  const agent = new UAParser(window.navigator.userAgent)\n  const isMobileSafari = agent.getBrowser().name === 'Mobile Safari'\n  return (\n    <FormGroup>\n      <InputGroup>\n        <FormTextInput\n          name=\"phonePrefix\"\n          autoComplete={isMobileSafari ? 'off' : 'tel-country-code'}\n          placeholder=\"Prefix\"\n        />\n        <FormTextInput\n          name=\"phone\"\n          type=\"tel\"\n          autoComplete=\"tel-national\"\n          placeholder={i18n.t`Phone`}\n          style={{ width: '55%' }}\n        />\n      </InputGroup>\n    </FormGroup>\n  )\n}\n","import React from 'react'\n\nimport { OrderEmailInput } from './OrderEmailInput'\nimport { OrderNameInput } from './OrderNameInput'\nimport { OrderNoteInput } from './OrderNoteInput'\nimport { OrderPhoneInput } from './OrderPhoneInput'\n\nexport const OrderFormInputs = () => (\n  <>\n    <OrderNameInput />\n    <OrderPhoneInput />\n    <OrderEmailInput />\n    <OrderNoteInput />\n  </>\n)\n","import {\n  addMinutes,\n  endOfMinute,\n  getMinutes,\n  startOfMinute,\n  subMinutes,\n} from 'date-fns'\n\nexport function createTimeSteps(start: Date, end: Date, minuteStep: number) {\n  let current = startOfMinute(timeClampUp(start, minuteStep))\n  const steps: Date[] = []\n  const endMinute = endOfMinute(subMinutes(end, 1))\n  do {\n    steps.push(current)\n    current = addMinutes(current, minuteStep)\n  } while (current <= endMinute)\n  return steps\n}\n\nexport function timeClampUp(time: Date, minuteStep: number) {\n  return addMinutes(timeClampDown(time, minuteStep), minuteStep)\n}\n\nexport function timeClampDown(time: Date, minuteStep: number) {\n  return subMinutes(time, getMinutes(time) % minuteStep)\n}\n","import React from 'react'\nimport { ButtonProps } from 'reactstrap'\nimport styled from 'styled-components/macro'\n\nimport { PickerButton } from '../../common/PickerButton'\nimport { formatTime } from '../../helpers/formats'\n\ninterface IProps extends ButtonProps {\n  time: Date\n  isSelected: boolean\n  canBeSelected: boolean\n}\n\nconst Time = styled.div`\n  font-size: 1.2rem;\n`\n\nexport const TimePickerButton: React.FC<IProps> = ({\n  time,\n  ...buttonProps\n}) => (\n  <PickerButton\n    size=\"xs\"\n    outline={true}\n    width=\"10rem\"\n    data-testid={`timePickerButton__${time.getTime()}`}\n    {...buttonProps}\n  >\n    <Time>{formatTime(time)}</Time>\n  </PickerButton>\n)\n","import { DateFormat } from '@lingui/macro'\nimport {\n  closestIndexTo,\n  eachDayOfInterval,\n  isEqual,\n  startOfDay,\n} from 'date-fns'\nimport { isWithinInterval } from 'date-fns/fp'\nimport React, { Fragment } from 'react'\nimport styled from 'styled-components/macro'\n\nimport { createTimeSteps } from './createTimeSteps'\nimport { TimePickerButton } from './TimePickerButton'\n\ninterface IProps {\n  minDate: Date\n  maxDate: Date\n  minuteStep: number\n  onStepChange(step: Date): void\n  initialTime?: Maybe<Date>\n  filterIntervals?: Interval[]\n}\n\nconst TimePickerContainer = styled.div`\n  margin-top: 1rem;\n`\n\nconst TimePickerDay = styled.div`\n  font-size: 1rem;\n  font-weight: bold;\n  text-align: left;\n  margin: 0 0 0.2rem 0.2rem;\n`\n\nexport const TimePicker: React.FC<IProps> = ({\n  minDate,\n  maxDate,\n  minuteStep,\n  onStepChange,\n  initialTime,\n  filterIntervals = [],\n}) => {\n  const steps = React.useMemo(() => {\n    const allSteps = createTimeSteps(minDate, maxDate, minuteStep)\n    if (filterIntervals.length) {\n      return allSteps.filter(step =>\n        filterIntervals.some(isWithinInterval(step)),\n      )\n    }\n    return allSteps\n  }, [minDate, maxDate, minuteStep, filterIntervals])\n\n  const days = React.useMemo(() => {\n    return eachDayOfInterval({ start: minDate, end: maxDate })\n  }, [minDate, maxDate])\n\n  const [stepIdx, setStepIdx] = React.useState(0)\n\n  React.useEffect(() => {\n    if (initialTime) {\n      setStepIdx(closestIndexTo(initialTime, steps))\n    }\n  }, [initialTime])\n\n  React.useEffect(() => {\n    onStepChange(steps[stepIdx])\n  }, [])\n\n  return (\n    <TimePickerContainer>\n      {days.map(day => (\n        <Fragment key={day.getDate()}>\n          <TimePickerDay>\n            <DateFormat\n              value={day}\n              format={{ month: 'long', day: 'numeric', weekday: 'long' }}\n            />\n          </TimePickerDay>\n          {steps.map((step, idx) =>\n            isEqual(day, startOfDay(step)) ? (\n              <TimePickerButton\n                key={step.getTime()}\n                time={step}\n                isSelected={idx === stepIdx}\n                canBeSelected={true}\n                onClick={() => {\n                  setStepIdx(idx)\n                  onStepChange(step)\n                }}\n              />\n            ) : null,\n          )}\n        </Fragment>\n      ))}\n    </TimePickerContainer>\n  )\n}\n","import '../../common/Modal.css'\n\nimport { Trans } from '@lingui/macro'\nimport { isoDate } from '@speedlo/graphql'\nimport { RM } from '@speedlo/tools'\nimport { addMinutes, isAfter } from 'date-fns'\nimport { observer } from 'mobx-react-lite'\nimport React from 'react'\nimport { Container, Modal, ModalBody, ModalHeader } from 'reactstrap'\n\nimport { useRoot } from '../../app/useRoot'\nimport { PrimaryButton } from '../../common/Buttons'\nimport {\n  useMOrderDeliveryTime,\n  useQOrderTimePicker,\n} from '../../graph/generated'\nimport { i18n } from '../../i18n'\nimport { TimePicker } from '../timePicker/TimePicker'\n\nexport const OrderTimePicker = observer(() => {\n  const root = useRoot()\n  const { order, cart } = useRoot()\n\n  const { data, loading } = useQOrderTimePicker(\n    { branchId: order.branchId! },\n    { skip: !root.initialized || !order.branchId },\n  )\n\n  const [updateOrder] = useMOrderDeliveryTime()\n\n  const selectedTime = React.useRef<Maybe<Date>>(order.deliverAt)\n  const onConfirmAndClose = () => {\n    const time = selectedTime.current\n    updateOrder({\n      orderId: order.orderId!,\n      deliverAt: time && isoDate(time),\n      withGoods: cart.withGoods,\n    })\n    order.setDeliverAt(time)\n    order.closeTimePicker()\n  }\n\n  const getStartTime = () => {\n    const { companyBranch } = data\n    const openAt =\n      companyBranch.isOpen || !companyBranch.willOpenAt\n        ? new Date()\n        : new Date(companyBranch.willOpenAt)\n    return openAt\n  }\n\n  const getEndTime = () => {\n    const { companyBranch } = data\n    if (companyBranch.isOpen && companyBranch.willCloseAt) {\n      return new Date(companyBranch.willCloseAt)\n    }\n    const nextBusinessHour = companyBranch.businessHours.find(\n      RM.propEq('closed', false),\n    )\n    return nextBusinessHour ? new Date(nextBusinessHour.closeAt) : null\n  }\n\n  const getFilterIntervals = (): Interval[] => {\n    const { companyBranch } = data\n    return companyBranch.businessHours\n      .filter(RM.propEq('closed', true))\n      .map(bhour => ({\n        start: new Date(bhour.openAt),\n        end: new Date(bhour.closeAt),\n      }))\n  }\n\n  const getMinuteOffset = () => {\n    const { defaultDeliveryTime, defaultPickupTime } = data.companyBranch\n\n    if (order.usingDeliveryOrderMethod) {\n      return defaultDeliveryTime\n    }\n    if (order.usingPickupOrderMethod) {\n      return defaultPickupTime\n    }\n\n    return 0\n  }\n\n  const renderModalContent = () => {\n    if (loading) {\n      return null\n    }\n\n    const minDate = getStartTime()\n    const maxDate = getEndTime()\n    if (maxDate === null || isAfter(minDate, maxDate)) {\n      return (\n        <Trans>\n          It's not possible to pick a specific order time at this moment.\n        </Trans>\n      )\n    }\n\n    const minuteOffset = getMinuteOffset()\n\n    return (\n      <TimePicker\n        minuteStep={15}\n        minDate={addMinutes(minDate, minuteOffset)}\n        maxDate={addMinutes(maxDate, minuteOffset)}\n        initialTime={selectedTime.current}\n        filterIntervals={getFilterIntervals()}\n        onStepChange={time => (selectedTime.current = time)}\n      />\n    )\n  }\n\n  React.useEffect(() => {\n    if (\n      data &&\n      data.companyBranch &&\n      data.companyBranch.delayedDeliveryEnabled\n    ) {\n      order.enableDelayedOrder()\n    }\n  }, [data])\n\n  const header = order.usingDeliveryOrderMethod\n    ? i18n.t`Deliver at what time?`\n    : i18n.t`When you will pickup the order?`\n\n  return (\n    <Modal\n      isOpen={order.timePickerOpen}\n      toggle={order.closeTimePicker}\n      className=\"modal__container\"\n      autoFocus={true}\n      backdrop=\"static\"\n      fade={false}\n    >\n      <ModalHeader\n        toggle={order.closeTimePicker}\n        tag={Container}\n        className=\"modal__header\"\n      >\n        <span>{header}</span>\n      </ModalHeader>\n      <ModalBody className=\"modal__body\">\n        <div className=\"modal__body__content\">{renderModalContent()}</div>\n        <div className=\"modal__body__button__line\">\n          <div className=\"modal__body__button__strip\" />\n          <PrimaryButton\n            onClick={onConfirmAndClose}\n            size=\"md\"\n            className=\"modal__body__button\"\n          >\n            <Trans>Confirm time</Trans>\n          </PrimaryButton>\n        </div>\n      </ModalBody>\n    </Modal>\n  )\n})\n","import { cn } from '@speedlo/ui'\nimport { useField } from 'formik'\nimport React from 'react'\nimport { Input } from 'reactstrap'\nimport styled from 'styled-components/macro'\n\ninterface IProps extends React.InputHTMLAttributes<HTMLInputElement> {\n  name: string\n  children: ReactNode\n}\n\nexport const StyledFormCheckbox = styled.div`\n  display: flex;\n  margin-bottom: 0.5rem;\n\n  input {\n    -webkit-appearance: none;\n    -moz-appearance: none;\n    background-color: white;\n    border: 1px solid;\n    border-color: #c5c5c5;\n    width: 2rem;\n    height: 2rem;\n    min-width: 2rem;\n    border-radius: 0.25rem;\n    position: relative;\n    margin: 0;\n    outline: none;\n    &:checked {\n      background-color: white;\n    }\n    &:checked:after {\n      content: '\\\\2714';\n      font-size: 2rem;\n      position: absolute;\n      top: -0.5rem;\n      left: 0.1rem;\n      color: #1d1d1d;\n      overflow: hidden;\n    }\n    &.is-invalid {\n      border-color: red;\n    }\n  }\n  label {\n    margin: 0 0 0 0.8rem;\n    vertical-align: top;\n  }\n`\n\nexport const FormCheckbox: React.FC<IProps> = ({\n  name,\n  children,\n  ...element\n}) => {\n  const [field, meta] = useField(name, 'checkbox')\n  return (\n    <StyledFormCheckbox\n      className={cn({ 'is-invalid': meta.touched && Boolean(meta.error) })}\n    >\n      <Input {...element} {...field} type=\"checkbox\" id={name} />\n      <label htmlFor={name}>{children}</label>\n    </StyledFormCheckbox>\n  )\n}\n","import { IAgreementBoxProps } from '@speedlo/ui'\nimport { observer } from 'mobx-react-lite'\nimport React from 'react'\nimport { Button, Collapse, Input } from 'reactstrap'\nimport styled from 'styled-components/macro'\n\nimport { StyledFormCheckbox } from '../../forms/FormCheckbox'\nimport { useOrderModel } from '../../hooks/useOrderModel'\nimport { i18n } from '../../i18n'\n\nconst StyledOrderAgreementBox = styled.div`\n  button {\n    padding: 0 0.5rem;\n    font-size: 0.8rem;\n    min-width: 5rem;\n    color: darkgray;\n  }\n  div.description {\n    font-size: 0.8rem !important;\n    color: darkgray;\n    margin: 0.5rem 0 0.5rem 0;\n    & .row {\n      margin: 0;\n    }\n  }\n`\n\nexport const OrderAgreementBox = observer<IAgreementBoxProps>(\n  ({\n    agreement,\n    isValid,\n    isCollapsed,\n    titleNode,\n    descriptionNode,\n    inputProps,\n    buttonProps,\n  }) => {\n    const orderModel = useOrderModel()\n    const id = `agreement-${agreement.id}`\n\n    return (\n      <StyledOrderAgreementBox>\n        <StyledFormCheckbox>\n          <Input\n            {...inputProps}\n            id={id}\n            type=\"checkbox\"\n            disabled={orderModel.disableInteraction}\n            invalid={!isValid}\n            onInvalid={ev => {\n              if (!isValid) {\n                ;(ev.target as HTMLInputElement).setCustomValidity(\n                  i18n.t`Please check this box if you want to proceed.`,\n                )\n              }\n            }}\n            onClick={ev => {\n              ;(ev.target as HTMLInputElement).setCustomValidity('')\n            }}\n            data-testid={`OrderAgreement${\n              agreement.isMandatory ? 'Mandatory' : ''\n            }`}\n          />\n          <label htmlFor={id}>\n            {titleNode}\n            {agreement.isMandatory && ' * '}\n          </label>\n          <Button {...buttonProps} color=\"link\">\n            {isCollapsed\n              ? i18n.t`More...`.toLocaleLowerCase()\n              : i18n.t`Less`.toLocaleLowerCase()}\n          </Button>\n        </StyledFormCheckbox>\n        <Collapse isOpen={!isCollapsed} className=\"description\">\n          {descriptionNode}\n        </Collapse>\n      </StyledOrderAgreementBox>\n    )\n  },\n)\n","import { Trans } from '@lingui/macro'\nimport { useAutorun, useDebounceCallback } from '@speedlo/hooks'\nimport { useVamAgreements } from '@speedlo/ui'\nimport { useFormikContext } from 'formik'\nimport React from 'react'\n\nimport { useQOrderFormAgreements } from '../../graph/generated'\nimport { useOrderModel } from '../../hooks/useOrderModel'\nimport { OrderAgreementBox } from './OrderAgreementBox'\nimport { OrderFormValues, TAgreement } from './OrderFormSetup'\n\nconst EMPTY_ARRAY = []\n\nexport const OrderAgreements: React.FC = () => {\n  const orderModel = useOrderModel()\n  const formik = useFormikContext<OrderFormValues>()\n  const [variables, setVariables] = React.useState(extractVariables)\n  const updateVariablesLater = useDebounceCallback(setVariables, 2000)\n\n  function extractVariables() {\n    const { firstname, lastname, phonePrefix, phone } = formik.values\n    return {\n      input: {\n        orderId: orderModel.orderId!,\n        firstname,\n        lastname,\n        phone: `${phonePrefix.trim()}${phone.trim()}`,\n      },\n    }\n  }\n\n  React.useEffect(() => {\n    updateVariablesLater(extractVariables())\n    return () => updateVariablesLater.clear()\n  }, [formik.values])\n\n  const { data, errors, loading } = useQOrderFormAgreements(variables)\n\n  // remember latest agreements to prevent rendering to blank on update of form values\n  const agreements = React.useRef<RoA<TAgreement>>(EMPTY_ARRAY)\n  const hasFailed = errors && errors.length > 0\n\n  if (!(loading || hasFailed)) {\n    agreements.current = data.agreements\n  }\n\n  React.useEffect(() => {\n    if (agreements.current.length > 0) {\n      orderModel.initVam()\n    }\n  })\n\n  const { state, renderVamAgreements } = useVamAgreements(agreements.current)\n\n  useAutorun(() => {\n    // confirmed agreements are passed to formik to be collected for a submission later\n    formik.setFieldValue('agreements', Array.from(state.confirmedAgreements))\n  })\n\n  // setup validation for mandatory agreements\n  React.useEffect(() => {\n    formik.registerField('agreements', {\n      validate: () => {\n        const result = agreements.current.some(agreement => {\n          return (\n            agreement.isMandatory &&\n            !state.confirmedAgreements.has(agreement.id)\n          )\n        })\n        return result ? 'mandatory' : ''\n      },\n    })\n    return () => formik.unregisterField('agreements')\n  }, [])\n\n  if (hasFailed) {\n    return (\n      <Trans>\n        Failed retrieving company agreements. Please try again later or contact\n        us.\n      </Trans>\n    )\n  }\n\n  return renderVamAgreements({ AgreementBox: OrderAgreementBox })\n}\n","import { useObserver } from 'mobx-react-lite'\nimport React from 'react'\n\nimport { SelectButtonThemed } from '../../../common/Buttons'\nimport { DeliveryTypeEnum } from '../../../graph/generated'\nimport { useOrderModel } from '../../../hooks/useOrderModel'\nimport { TOrderModel } from '../../../models/OrderModel'\n\ninterface IProps {\n  orderMethod: DeliveryTypeEnum\n  onChange(order: TOrderModel): void\n}\n\nexport const OrderMethodButton: React.FC<IProps> = ({\n  orderMethod,\n  onChange,\n  children,\n}) => {\n  const orderModel = useOrderModel()\n  return useObserver(() => (\n    <SelectButtonThemed\n      selected={orderModel.orderMethod === orderMethod}\n      onClick={() => {\n        orderModel.useOrderMethod(orderMethod)\n        onChange(orderModel)\n      }}\n      data-testid={`orderMethod-${orderMethod}`}\n      data-testselected={orderModel.orderMethod === orderMethod}\n    >\n      {children}\n    </SelectButtonThemed>\n  ))\n}\n","import { Trans } from '@lingui/react'\nimport { RM } from '@speedlo/tools'\nimport React from 'react'\nimport styled from 'styled-components/macro'\n\nimport { DeliveryTypeEnum } from '../../../graph/generated'\nimport { TOrderModel } from '../../../models/OrderModel'\nimport { OrderMethodButton } from './OrderMethodButton'\n\ninterface IProps {\n  onChange?(order: TOrderModel): void\n}\n\nconst StyledOrderMethod = styled.div`\n  padding: 0.2rem;\n\n  & button {\n    font-size: 1.3rem;\n    margin: 0.3rem 1rem 0.3rem 1rem;\n    padding: 0.3rem 1.2rem;\n    height: 2.7rem;\n    line-height: 1rem;\n    white-space: nowrap;\n\n    span:before {\n      margin: 0 0.8rem 0 0;\n      font-size: 2rem;\n      font-weight: initial;\n    }\n  }\n`\n\nexport const OrderMethod: React.FC<IProps> = ({ onChange = RM.identity }) => {\n  return (\n    <StyledOrderMethod>\n      <OrderMethodButton\n        orderMethod={DeliveryTypeEnum.Messenger}\n        onChange={onChange}\n      >\n        <span className=\"flaticon-transport\" />\n        <Trans>I want to deliver</Trans>\n      </OrderMethodButton>\n      <OrderMethodButton\n        orderMethod={DeliveryTypeEnum.Pickup}\n        onChange={onChange}\n      >\n        <span className=\"flaticon-restaurant\" />\n        <Trans>I'll pick up</Trans>\n      </OrderMethodButton>\n    </StyledOrderMethod>\n  )\n}\n","import './CartView.css'\n\nimport { Trans } from '@lingui/macro'\nimport { CartLabels, useCartSystem } from '@speedlo/cart'\nimport { autorun } from 'mobx'\nimport { useObserver } from 'mobx-react-lite'\nimport React from 'react'\n\nimport { useTheme } from '../../app/ThemeSwitchProvider'\nimport { useRoot } from '../../app/useRoot'\nimport { PrimaryButton } from '../../common/Buttons'\nimport { ButtonStrip } from '../../common/ButtonStrip'\nimport { mobileBreakpoint } from '../../common/Responsive'\nimport { useQCart } from '../../graph/generated'\nimport { useCartControl } from './hooks/useCartControl'\n\ninterface IProps {\n  orderId: MaybeID\n  isReadonly: boolean\n}\n\nexport const CartSystem: React.FC<IProps> = ({ orderId, isReadonly }) => {\n  const theme = useTheme()\n  const labels = React.useMemo(getCartLabels, [])\n\n  const {\n    cartModel,\n    onItemEdit,\n    onItemRemove,\n    onPlaceOrder,\n    onChangeOrder,\n  } = useCartControl()\n\n  const renderMobileSubmit = React.useCallback(\n    () => (\n      <ButtonStrip>\n        <PrimaryButton onClick={isReadonly ? onChangeOrder : onPlaceOrder}>\n          {isReadonly ? (\n            <Trans>Change order</Trans>\n          ) : (\n            <Trans>Place order</Trans>\n          )}\n        </PrimaryButton>\n      </ButtonStrip>\n    ),\n    [onPlaceOrder, isReadonly],\n  )\n\n  const renderGoodsLoading = React.useCallback(\n    () => <Trans>Accessing your order</Trans>,\n    [],\n  )\n\n  const cart = useCartSystem({\n    colors: {\n      primary: theme.primary,\n      sumRowBg: theme.primary,\n      sumRowText: 'white',\n      mobileSummaryItemCount: theme.secondary,\n    },\n    labels,\n    isReadonly,\n    mobileBreakpoint,\n    backgroundImage: theme.backgroundCart,\n    onItemEdit,\n    onItemRemove,\n    renderMobileSubmit,\n    renderGoodsLoading,\n  })\n\n  React.useEffect(\n    () =>\n      autorun(() => {\n        cartModel.updateDisplay(cart.store.isMobile, cart.store.showGoods)\n      }),\n    [],\n  )\n\n  const root = useRoot()\n\n  return useObserver(() => {\n    const { data, loading } = useQCart(\n      {\n        orderId: orderId!,\n        withGoods: cartModel.withGoods,\n        withPresence: cartModel.withPresence,\n      },\n      {\n        skip: !root.initialized || !orderId,\n        context: {\n          noBatch: true,\n        },\n      },\n    )\n\n    React.useEffect(() => {\n      if (!loading) {\n        cart.updateSummary(data.order)\n        if (cartModel.withGoods) {\n          cart.updateGoods(data.order)\n        }\n      }\n    })\n\n    return cart.renderCart()\n  })\n}\n\nfunction getCartLabels(): CartLabels {\n  return {\n    noSideDish: <Trans>Without sidedish</Trans>,\n    noCost: <Trans>For free</Trans>,\n    cartSumHeader: totalPrice => (\n      <Trans>In the cart you have goods for {totalPrice}</Trans>\n    ),\n    emptyCart: <Trans>Cart is empty</Trans>,\n    totalDiscount: <Trans>Total discount</Trans>,\n    coverPrice: <Trans>Covers</Trans>,\n    transportFee: <Trans>Delivery</Trans>,\n    totalSum: <Trans>Total</Trans>,\n    tip: <Trans>Tip</Trans>,\n    minimalOrderPrice: price => (\n      <Trans>Minimal price of order is {price}</Trans>\n    ),\n  }\n}\n","import { useApolloClient } from '@speedlo/graphql'\nimport { useRouterContext } from '@speedlo/hooks'\nimport { idPropEq, RM } from '@speedlo/tools'\nimport React from 'react'\n\nimport { useRoot } from '../../../app/useRoot'\nimport {\n  MRemoveCartItemMutation,\n  MRemoveCartItemVariables,\n  QCartDocument,\n  QCartQuery,\n  QCartVariables,\n  useMRemoveCartItem,\n} from '../../../graph/generated'\n\nexport function useCartControl() {\n  const { order: orderModel, cart: cartModel } = useRoot()\n  const client = useApolloClient()\n  const { history } = useRouterContext()\n  const onItemEdit = React.useCallback((item: ID) => {\n    orderModel.changeCartItem(item)\n  }, [])\n\n  const [removeItem] = useMRemoveCartItem()\n\n  const onItemRemove = React.useCallback((item: ID) => {\n    const variables: MRemoveCartItemVariables = {\n      itemId: item,\n      withGoods: cartModel.withGoods,\n      withPresence: cartModel.withPresence,\n    }\n    removeItem(variables, {\n      optimisticResponse: makeOptimisticRemove(variables),\n      context: {\n        noBatch: true,\n      },\n    })\n  }, [])\n\n  const onPlaceOrder = React.useCallback(() => {\n    history.push('/confirm')\n  }, [])\n\n  const onChangeOrder = React.useCallback(() => {\n    history.push('/order')\n  }, [])\n\n  return { cartModel, onItemEdit, onItemRemove, onPlaceOrder, onChangeOrder }\n\n  function makeOptimisticRemove(\n    variables: MRemoveCartItemVariables,\n  ): MRemoveCartItemMutation | undefined {\n    const current = client.readQuery<QCartQuery, QCartVariables>(\n      {\n        query: QCartDocument,\n        variables: {\n          orderId: orderModel.orderId!,\n          withGoods: cartModel.withGoods,\n          withPresence: cartModel.withPresence,\n        },\n      },\n      true,\n    )\n    if (!current) {\n      return undefined\n    }\n    const rejectItem = RM.reject(idPropEq(variables.itemId))\n    return {\n      __typename: 'Mutation',\n      remove: {\n        ...current.order,\n        countWares: current.order.countWares - 1,\n        totalSum: {\n          ...current.order.totalSum,\n          value: -1,\n        },\n        items: variables.withGoods\n          ? rejectItem(current.order.items)\n          : current.order.items,\n        presence: variables.withPresence\n          ? rejectItem(current.order.presence)\n          : current.order.presence,\n      },\n    }\n  }\n}\n","import { observer } from 'mobx-react-lite'\nimport React from 'react'\n\nimport { useRoot } from '../../app/useRoot'\nimport { SelectButtonThemed } from '../../common/Buttons'\nimport { PaymentGateEnum } from '../../graph/types'\n\nexport interface IPaymentButtonProps {\n  paymentMethod: PaymentGateEnum\n}\n\nexport const OrderPaymentButton = observer<IPaymentButtonProps>(\n  ({ children, paymentMethod }) => {\n    const { order: orderModel } = useRoot()\n    const isSelected = orderModel.paymentMethod === paymentMethod\n    return (\n      <SelectButtonThemed\n        disabled={orderModel.disableInteraction}\n        selected={isSelected}\n        onClick={() => {\n          orderModel.setPaymentMethod(paymentMethod)\n        }}\n        data-testid={`orderPaymentMethod-${paymentMethod}`}\n      >\n        <Checkmark show={isSelected} />\n        {children}\n      </SelectButtonThemed>\n    )\n  },\n)\n\nfunction Checkmark({ show }: { show: boolean }) {\n  return show ? (\n    <span className=\"flaticon-mark order__payment__method__button__checked\" />\n  ) : (\n    <div className=\"order__payment__method__button__unchecked\" />\n  )\n}\n","import { Trans } from '@lingui/macro'\nimport React from 'react'\nimport styled from 'styled-components/macro'\n\nimport { PaymentGateEnum } from '../../graph/generated'\nimport { OrderPaymentButton } from './OrderPaymentButton'\n\nconst StyledOrderPaymentMethod = styled.div`\n  margin: 0 0 1.4rem 0;\n  span::before {\n    margin-left: 0;\n    margin-right: 0.5rem;\n  }\n  button {\n    position: relative;\n    padding-top: 0.3rem;\n    margin-bottom: 0.2rem;\n    height: 2.8rem;\n  }\n  button:first-of-type {\n    margin-right: 0.8rem;\n  }\n  .order__payment__method__button__unchecked {\n    width: 1.75rem;\n    height: 1.4rem;\n    margin: 0;\n    display: inline-block;\n  }\n`\n\nexport const OrderPaymentMethod = React.memo(() => (\n  <StyledOrderPaymentMethod>\n    <OrderPaymentButton paymentMethod={PaymentGateEnum.Gopay}>\n      <span className=\"flaticon-credit-card\">\n        <Trans>Pay by card</Trans>\n      </span>\n    </OrderPaymentButton>\n    <OrderPaymentButton paymentMethod={PaymentGateEnum.Cash}>\n      <span className=\"flaticon-money\">\n        <Trans>Pay by cash</Trans>\n      </span>\n    </OrderPaymentButton>\n  </StyledOrderPaymentMethod>\n))\n","import React from 'react'\nimport { Col } from 'reactstrap'\n\nexport const ColStyle = ({ children }) => (\n  <Col className=\"pl-sm-0\" sm=\"12\" md=\"12\" lg=\"10\" xl=\"8\">\n    {children}\n  </Col>\n)\n\nexport const ColStyleLeft = ({ children }) => (\n  <Col className=\"pl-sm-0\" sm=\"8\" md=\"8\" lg=\"6\" xl=\"5\">\n    {children}\n  </Col>\n)\n\nexport const ColStyleRight = ({ children }) => (\n  <Col className=\"pl-sm-0\" sm=\"4\" md=\"4\" lg=\"4\" xl=\"3\">\n    {children}\n  </Col>\n)\n","import { useField } from 'formik'\nimport { observer } from 'mobx-react-lite'\nimport React from 'react'\nimport { FormFeedback, Input, Label } from 'reactstrap'\nimport { InputType } from 'reactstrap/lib/Input'\n\nimport { useOrderModel } from '../hooks/useOrderModel'\n\ninterface IProps extends React.InputHTMLAttributes<HTMLInputElement> {\n  name: string\n  label?: string\n  type?: InputType\n  errorForceDisplay?: boolean\n}\n\nexport const hiddenError = '<hidden>'\n\nexport const FormTextInput = observer<IProps>(\n  ({\n    name,\n    label,\n    type = 'text' as InputType,\n    errorForceDisplay = false,\n    ...element\n  }) => {\n    const orderModel = useOrderModel()\n    const [field, meta] = useField(name, type)\n\n    const labelNode = (\n      <Label for={name} hidden={!label}>\n        {element.placeholder || label}\n      </Label>\n    )\n\n    const showError = errorForceDisplay || meta.touched\n\n    return (\n      <>\n        {labelNode}\n        <Input\n          {...element}\n          {...field}\n          id={name}\n          type={type}\n          valid={meta.touched && !meta.error}\n          invalid={showError && Boolean(meta.error)}\n          disabled={orderModel.disableInteraction}\n        />\n        {showError && meta.error !== hiddenError ? (\n          <FormFeedback valid={false} tooltip={false}>\n            {meta.error}\n          </FormFeedback>\n        ) : null}\n      </>\n    )\n  },\n)\n","import { SECOND, useNow, useTimer } from '@speedlo/hooks'\nimport { differenceInMinutes } from 'date-fns'\n\nimport { FCompanyBranchStatusFragment } from '../graph/generated'\n\nexport type TStatus = FCompanyBranchStatusFragment\n\nexport type TStatusDecision = 'Open' | 'Closed' | 'ClosingSoon' | 'OpeningSoon'\n\ninterface IProps {\n  status: TStatus\n  updateInterval?: number\n  openSoonThresholdInMinutes?: number\n  closeSoonThresholdInMinutes?: number\n  onRefresh?(): void\n}\n\nexport interface IShopStatus {\n  decision: TStatusDecision\n  openingIn: number\n  closingIn: number\n}\n\nexport function useShopStatus({\n  status,\n  updateInterval = 30 * SECOND,\n  openSoonThresholdInMinutes = 30,\n  closeSoonThresholdInMinutes = 30,\n}: IProps) {\n  const getNow = useNow()\n\n  useTimer({\n    interval: updateInterval,\n    enabled: updateInterval > 0,\n  })\n\n  const now = getNow()\n  const { isOpen, willCloseAt, willOpenAt } = status\n\n  let decision: TStatusDecision\n\n  const openingIn = willOpenAt ? differenceInMinutes(willOpenAt, now) : 0\n  const closingIn = willCloseAt ? differenceInMinutes(willCloseAt, now) : 0\n\n  if (isOpen) {\n    if (willCloseAt && closingIn <= 0) {\n      decision = 'Closed'\n    } else {\n      decision = isSoon(willCloseAt, closeSoonThresholdInMinutes, now)\n        ? 'ClosingSoon'\n        : 'Open'\n    }\n  } else {\n    if (willOpenAt && openingIn <= 0) {\n      decision = 'Open'\n    } else {\n      decision = isSoon(willOpenAt, openSoonThresholdInMinutes, now)\n        ? 'OpeningSoon'\n        : 'Closed'\n    }\n  }\n\n  const shopStatus: IShopStatus = {\n    decision,\n    openingIn,\n    closingIn,\n  }\n  return shopStatus\n}\n\nfunction isSoon(time: Maybe<string>, threshold: number, now: Date) {\n  return time ? Math.abs(differenceInMinutes(time, now)) <= threshold : false\n}\n","import { useRouterContext, useWhen } from '@speedlo/hooks'\n\nimport { useRoot } from '../app/useRoot'\nimport { useOrderModel } from './useOrderModel'\n\nexport function useEmptyOrderRedirect() {\n  const root = useRoot()\n  const orderModel = useOrderModel()\n  const { history } = useRouterContext()\n\n  useWhen(\n    () => root.initialized,\n    () => {\n      if (!orderModel.hasOrder) {\n        history.push('/')\n      }\n    },\n  )\n}\n","import React from 'react'\n\nimport { FAddressFragment } from '../graph/generated'\nimport { i18n } from '../i18n'\n\ninterface IProps {\n  address: Maybe<FAddressFragment>\n}\n\nexport const ShopAddress: React.FC<IProps> = ({ address }) => {\n  if (!address || !address.location) {\n    return <span>{i18n.t`Unknown address`}</span>\n  }\n  const { location } = address\n  return (\n    <span>{`${location.street} ${location.houseNumber},\\n ${\n      location.city\n    }`}</span>\n  )\n}\n","import React from 'react'\nimport styled from 'styled-components/macro'\n\ninterface IProps {\n  imageName: string\n  className?: string\n  fallbackColor?: string\n  fixed?: boolean\n  size?: 'cover' | 'contain' | 'inherit'\n  children?: any\n  component?: any\n}\n\nexport const BackgroundThemed: React.FC<IProps> = ({\n  imageName,\n  fallbackColor = '#5b453c',\n  fixed = false,\n  size = 'inherit',\n  children,\n  component = 'div',\n  ...otherProps\n}) =>\n  React.createElement(\n    styled(component)`\n      background-image: ${props => `url(${props.theme[imageName]})`};\n      background-attachment: ${props => (fixed ? 'fixed' : 'inherit')};\n      background-repeat: no-repeat;\n      background-position: left top;\n      background-size: ${props => size};\n    `,\n    otherProps,\n    children,\n  )\n\nexport default BackgroundThemed\n","import { useRoot } from '../../../app/useRoot'\nimport { useQPickupMap } from '../../../graph/generated'\n\nexport function usePickupMapQuery(branchId?: ID) {\n  const { business } = useRoot()\n  return useQPickupMap(\n    {\n      branchSpecific: !business.isBrand || !!branchId,\n      brandId: business.brandId,\n      branchId: branchId || business.branchId!,\n    },\n    {\n      skip: !business.isValid,\n      fetchPolicy: 'cache-first',\n      context: { noBatch: true },\n    },\n  )\n}\n","import { Trans } from '@lingui/macro'\nimport { GoogleMap, MapContext, useLoadScript } from '@react-google-maps/api'\nimport { Sentry } from '@speedlo/sentry'\nimport { observer } from 'mobx-react-lite'\nimport React from 'react'\n\nimport { useRoot } from '../app/useRoot'\nimport { appConfig } from '../config'\nimport { TMapModel } from '../models/MapModel'\nimport Pacman from './Pacman'\n\ninterface IBaseMapProps {\n  model: TMapModel\n  children?: ReactNode | ReactNode[] | (() => ReactNode | ReactNode[])\n  isMobile?: boolean\n}\n\nconst getMapOptions = (isMobile: boolean): google.maps.MapOptions => {\n  return {\n    streetViewControl: false,\n    mapTypeControl: false,\n    fullscreenControl: false,\n    clickableIcons: false,\n    draggableCursor: 'default',\n    minZoom: 10,\n    zoomControlOptions: {\n      position: isMobile\n        ? google.maps.ControlPosition.RIGHT_CENTER\n        : google.maps.ControlPosition.RIGHT_TOP,\n    },\n  }\n}\n\nconst libraries = ['places']\n\nexport const BaseMap = observer<IBaseMapProps>(\n  ({ model, isMobile = false, children }) => {\n    const { user } = useRoot()\n\n    const { isLoaded, loadError, url: googleMapUrl } = useLoadScript({\n      id: 'script-loader',\n      version: 'weekly',\n      googleMapsApiKey: appConfig.googleMapsApi!,\n      libraries,\n      language: user.language,\n    })\n\n    // useful in tests\n    const enabled = !window.location.search.includes('disableMap')\n\n    const renderMap = () => {\n      if (!enabled) {\n        return (\n          <MapContext.Provider\n            value={new google.maps.Map(document.createElement('div'))}\n          >\n            {typeof children === 'function' ? children() : children}\n          </MapContext.Provider>\n        )\n      }\n      return (\n        <GoogleMap\n          zoom={model.zoom}\n          center={model.center}\n          onCenterChanged={model.updatePosition}\n          onZoomChanged={model.updateZoom}\n          onClick={model.onClick}\n          onLoad={model.setMapRef}\n          onUnmount={() => model.setMapRef(null)}\n          options={getMapOptions(isMobile)}\n          mapContainerStyle={{\n            borderRadius: '0 0 0.5rem 0.5rem',\n            overflow: 'hidden',\n            height: isMobile ? '100%' : 'calc(100% - 3.75rem)',\n          }}\n        >\n          {typeof children === 'function' ? children() : children}\n        </GoogleMap>\n      )\n    }\n\n    const googleAvailable = Reflect.has(window, 'google')\n\n    if (loadError || (isLoaded && !googleAvailable)) {\n      Sentry.withScope(scope => {\n        scope.setExtras({ googleMapUrl })\n        Sentry.captureException(loadError)\n      })\n      return (\n        <h2>\n          <Trans>Cannot load map right now. Please try again later.</Trans>\n        </h2>\n      )\n    }\n\n    return isLoaded ? renderMap() : <Pacman noMargin={true} />\n  },\n)\n","import { useReaction } from '@speedlo/hooks'\n\nimport { useRoot } from '../../../app/useRoot'\nimport { useQFoodMenu } from '../../../graph/generated'\n\nexport function useFoodMenuQuery(branchId: MaybeID) {\n  const { user } = useRoot()\n  const result = useQFoodMenu(\n    { branchId: branchId! },\n    { skip: !branchId, fetchPolicy: 'cache-first' },\n  )\n\n  useReaction(\n    () => user.language,\n    () => {\n      result.refetch()\n    },\n  )\n\n  return result\n}\n","import { Sentry } from '@speedlo/sentry'\nimport { debounce } from 'debounce'\nimport { useFormikContext } from 'formik'\nimport localforage from 'localforage'\nimport { when } from 'mobx'\nimport React from 'react'\n\nimport { useRoot } from '../../app/useRoot'\nimport { appConfig } from '../../config'\nimport { TOrderModel } from '../../models/OrderModel'\nimport { OrderFormValues } from './OrderFormSetup'\n\nconst memoryKey = `${appConfig.persistenceKey}_orderForm`\n\nconst catchError = err => {\n  Sentry.withScope(scope => {\n    scope.setTag('persistence', memoryKey)\n    Sentry.captureException(err)\n  })\n}\n\nconst writeMemory = debounce((values: OrderFormValues, done: () => void) => {\n  localforage.setItem(memoryKey, {\n    firstname: values.firstname,\n    lastname: values.lastname,\n    email: values.email,\n    phonePrefix: values.phonePrefix,\n    phone: values.phone,\n    note: values.note,\n  })\n  done()\n}, 3000)\n\nconst readMemory = (): Promise<any> => {\n  return localforage.getItem(memoryKey).catch(catchError)\n}\n\nexport const OrderFormMemory = React.memo(() => {\n  const { user } = useRoot()\n  const formik = useFormikContext<OrderFormValues>()\n\n  const applyMemory = (memory: OrderFormValues) => {\n    Object.keys(memory).forEach((field: any) => {\n      const value = memory[field]\n      formik.setFieldValue(field, value)\n      formik.setFieldTouched(field, true)\n    })\n    user.setMemoryApplied()\n    user.log('applied order form memory')\n  }\n\n  React.useEffect(() => {\n    readMemory().then(memory => {\n      if (memory) {\n        applyMemory(memory)\n        return\n      }\n      // legacy memory from OrderModel\n      when(\n        () => user.root.initialized,\n        () => {\n          applyMemory(getLegacyMemory(user.root.order))\n        },\n      )\n    })\n  }, [])\n\n  React.useEffect(() => {\n    if (!(user.shouldRememberForm && user.memoryApplied)) {\n      return\n    }\n    writeMemory(formik.values, () => {\n      user.log('written order form memory')\n    })\n  }, [formik.values])\n\n  return null\n})\n\nfunction getLegacyMemory(orderModel: TOrderModel) {\n  orderModel.log('using legacy memory')\n  const { firstname, lastname, email, phone, phonePrefix, note } = orderModel\n  return {\n    firstname,\n    lastname,\n    email,\n    phone,\n    phonePrefix,\n    note,\n    agreements: [],\n  }\n}\n","import { isoDate } from '@speedlo/graphql'\nimport { useAutorun, useRouterContext } from '@speedlo/hooks'\nimport { Sentry } from '@speedlo/sentry'\nimport { FormikProvider, useFormik } from 'formik'\nimport React from 'react'\nimport { Form } from 'reactstrap'\nimport * as Yup from 'yup'\n\nimport { hiddenError } from '../../forms/FormTextInput'\nimport {\n  MSubmitOrderVariables,\n  PaymentGateEnum,\n  QOrderFormAgreementsAgreements,\n  useMSubmitOrder,\n} from '../../graph/generated'\nimport { useOrderModel } from '../../hooks/useOrderModel'\nimport { i18n } from '../../i18n'\nimport { TOrderModel } from '../../models/OrderModel'\nimport { useOrderPayment } from './hooks/useOrderPayment'\nimport { OrderErrorModal } from './OrderErrorModal'\nimport { OrderFormMemory } from './OrderFormMemory'\nimport { OrderGoPayModal } from './OrderGoPayModal'\nimport { OrderTimePicker } from './OrderTimePicker'\n\nexport type TAgreement = QOrderFormAgreementsAgreements\n\nexport type OrderFormValues = ReturnType<typeof getInitialValues>\n\nexport const NOTE_MAX_LENGTH = 50\n\nexport const OrderFormSetup: React.FC = ({ children }) => {\n  const orderModel = useOrderModel()\n  const { history } = useRouterContext()\n\n  const { executeGoPayPayment, paymentErrorModal } = useOrderPayment()\n\n  const [submitOrder] = useMSubmitOrder()\n\n  const validationSchema = React.useMemo(\n    () =>\n      Yup.object().shape({\n        firstname: Yup.string().required(hiddenError),\n        lastname: Yup.string().required(hiddenError),\n        phonePrefix: Yup.string().required(hiddenError),\n        phone: Yup.string()\n          .required(hiddenError)\n          .matches(/\\d+/, i18n.t`Only numbers allowed for phone`),\n        email: Yup.string()\n          .required(hiddenError)\n          .email(i18n.t`Invalid email format`),\n        note: Yup.string()\n          .notRequired()\n          .max(\n            NOTE_MAX_LENGTH,\n            ({ value }) =>\n              i18n.t`Maximum length is ${i18n.plural({\n                value: NOTE_MAX_LENGTH,\n                other: '# characters',\n              })}. Typed ${i18n.plural({\n                value: value.length,\n                one: '# character',\n                other: '# characters',\n              })}`,\n          ),\n      }),\n    [],\n  )\n\n  const onSubmit = React.useCallback(async (values: OrderFormValues) => {\n    orderModel.submitStarted()\n\n    const variables = getSubmitVariables(values, orderModel)\n    const result = await submitOrder(variables)\n\n    if (!result) {\n      orderModel.submitFailed()\n      return\n    }\n\n    const { userErrors, gopayUrl } = result.submitOrder\n    if (userErrors.length) {\n      orderModel.submitFailed(userErrors)\n      return\n    }\n\n    orderModel.submitFinished()\n\n    if (orderModel.paymentMethod === PaymentGateEnum.Cash) {\n      history.replace(`/finish`)\n      return\n    }\n\n    if (orderModel.paymentMethod === PaymentGateEnum.Gopay) {\n      if (gopayUrl) {\n        executeGoPayPayment(gopayUrl)\n      } else {\n        Sentry.withScope(scope => {\n          scope.setExtras({ variables })\n          Sentry.captureMessage('No gopayUrl received for GoPay payment')\n        })\n        orderModel.submitFailed()\n      }\n    } else {\n      Sentry.withScope(scope => {\n        scope.setExtras({ variables })\n        Sentry.captureMessage(\n          `Unknown payment mode ${orderModel.paymentMethod}`,\n        )\n      })\n      orderModel.submitFailed()\n    }\n  }, [])\n\n  const formik = useFormik({\n    initialValues: getInitialValues(),\n    validationSchema,\n    onSubmit,\n  })\n\n  React.useEffect(() => {\n    orderModel.root.cart.setOrderSubmitting(formik.isSubmitting)\n  }, [formik.isSubmitting])\n\n  useAutorun(() => {\n    const prefix = orderModel.defaultPhonePrefix\n    if (\n      prefix &&\n      orderModel.root.user.memoryApplied &&\n      formik.values.phonePrefix.length === 0\n    ) {\n      formik.setFieldValue('phonePrefix', prefix)\n      formik.setFieldTouched('phonePrefix', true)\n    }\n  })\n\n  return (\n    <>\n      {paymentErrorModal}\n      <FormikProvider value={formik}>\n        <OrderTimePicker />\n        <OrderGoPayModal />\n        <OrderErrorModal />\n        <OrderFormMemory />\n        <Form onSubmit={formik.handleSubmit}>{children}</Form>\n      </FormikProvider>\n    </>\n  )\n}\n\nfunction getInitialValues() {\n  return {\n    firstname: '',\n    lastname: '',\n    email: '',\n    phone: '',\n    phonePrefix: '',\n    note: '',\n    agreements: [] as RoA<ID>,\n  }\n}\n\nfunction getSubmitVariables(\n  values: OrderFormValues,\n  orderModel: TOrderModel,\n): MSubmitOrderVariables {\n  orderModel.log(values)\n  return {\n    orderId: orderModel.orderId!,\n    customer: {\n      firstName: values.firstname,\n      lastName: values.lastname,\n      emails: [{ email: values.email }],\n      phones: [{ phone: `${values.phonePrefix}${values.phone}` }],\n    },\n    note: values.note,\n    tips: orderModel.tips,\n    paymentGate: orderModel.paymentMethod as PaymentGateEnum,\n    deliverAt: orderModel.deliverAt && isoDate(orderModel.deliverAt),\n    agreements: values.agreements,\n  }\n}\n","import { useRouterContext } from '@speedlo/hooks'\nimport { useGoPay } from '@speedlo/payments'\n\nimport { useRoot } from '../../../app/useRoot'\nimport { useExecutableQOrderPaymentStatus } from '../../../graph/generated'\nimport { useAlertModal } from '../../../hooks/useAlertModal'\nimport { i18n } from '../../../i18n'\n\nexport function useOrderPayment() {\n  const { order: orderModel, business } = useRoot()\n  const { history } = useRouterContext()\n\n  const [paymentErrorModal, alertPaymentError] = useAlertModal()\n\n  const [executePaymentStatusCheck] = useExecutableQOrderPaymentStatus({\n    fetchPolicy: 'no-cache',\n  })\n\n  const { executeGoPayPayment, paymentLoading: paymentProcessing } = useGoPay(\n    async (orderId = orderModel.orderId!, userToken) => {\n      if (!orderId) {\n        return null\n      }\n      orderModel.goPayStatusCheck(true)\n      const result = await executePaymentStatusCheck(\n        { orderId },\n        {\n          context: {\n            invalidateWithToken: userToken,\n          },\n        },\n      )\n      orderModel.goPayStatusCheck(false)\n      return result.data ? result.data.status : null\n    },\n    {\n      onError(errors) {\n        const phone = business.branch!.phone\n        alertPaymentError(\n          i18n.t`Payment status check has failed`,\n          errors.length\n            ? errors.join('<br />')\n            : i18n.t`We were unable to verify status of your payment. Please contact operator using number ${phone}`,\n        )\n      },\n      onFinish() {\n        history.replace('/finish')\n      },\n    },\n  )\n\n  return { paymentErrorModal, executeGoPayPayment, paymentProcessing }\n}\n","import { LanguagePicker as LangPick } from '@speedlo/ui'\nimport { observer } from 'mobx-react-lite'\nimport React from 'react'\n\nimport { useRoot } from '../app/useRoot'\n\ninterface IProps {\n  className?: string\n}\n\nexport const LanguagePicker = observer<IProps>(({ className }) => {\n  const { business, user } = useRoot()\n  if (!business.isValid) {\n    return null\n  }\n  return (\n    <LangPick\n      availableLanguages={business.branch!.supportedLanguages}\n      selectedLanguage={user.language}\n      onChange={language => {\n        if (language !== user.language) {\n          user.selectLanguage(language)\n          // TODO: Figure out way to flush model persistence\n          setTimeout(() => {\n            window.location.reload()\n          }, 300)\n        }\n      }}\n      className={className}\n      backgroundColor=\"white\"\n      arrowColor=\"#5A5A5A\"\n    />\n  )\n})\n","import { Plural, Trans } from '@lingui/react'\nimport { useObserver } from 'mobx-react-lite'\nimport React from 'react'\n\nimport { useRoot } from '../../app/useRoot'\nimport { AlertModal } from '../../common/AlertModal'\nimport { FCompanyBranchStatusFragment } from '../../graph/generated'\nimport { useShopStatus } from '../../hooks/useShopStatus'\nimport { i18n } from '../../i18n'\n\ninterface IProps {\n  status: FCompanyBranchStatusFragment\n}\n\nexport const ShopClosingTimeModal: React.FC<IProps> = ({ status }) => {\n  const { user } = useRoot()\n  const { decision, openingIn } = useShopStatus({\n    status,\n    // Do not want update here as it would be showing modal every time :)\n    updateInterval: 0,\n  })\n  return useObserver(() => (\n    <AlertModal\n      isOpen={\n        (decision === 'Closed' || decision === 'OpeningSoon') &&\n        !user.closingTimeAlertHidden\n      }\n      onClose={user.hideClosingTime}\n      headerText={i18n.t`We are closed right now`}\n    >\n      {i18n.t`We're sorry, but we do not accept new orders at this time.`}\n      {decision === 'OpeningSoon' && (\n        <Trans>\n          You can prepare your order because we are{' '}\n          <Plural\n            value={openingIn}\n            one=\"opening in 1 minute\"\n            other=\"opening in # minutes\"\n          />\n          !\n        </Trans>\n      )}\n    </AlertModal>\n  ))\n}\n","import './ShopHeaderIcons.css'\n\nimport { getLogo } from '@speedlo/assets'\nimport React from 'react'\n\nexport const ShopHeaderIcons = () => (\n  <>\n    <img\n      src={getLogo('doveze')}\n      className=\"shop__header__icons__doveze\"\n      data-testid=\"ShopHeaderIcons__AppLogo\"\n      alt=\"logo Doveze.cz\"\n    />\n    <img\n      src={getLogo('mastercard')}\n      className=\"shop__header__icons__commerce\"\n      alt=\"MasterCard\"\n    />\n    <img\n      src={getLogo('visa')}\n      className=\"shop__header__icons__commerce\"\n      data-testid=\"ShopHeaderIcons__VisaLogo\"\n      alt=\"VISA\"\n    />\n    <img\n      src={getLogo('gopay')}\n      className=\"shop__header__icons__gopay\"\n      alt=\"GoPay\"\n      data-testid=\"ShopHeaderIcons__GoPayLogo\"\n    />\n  </>\n)\n","import { DateFormat, Plural, Trans } from '@lingui/react'\nimport { isSameDay } from 'date-fns'\nimport React from 'react'\nimport styled from 'styled-components/macro'\n\nimport { useRoot } from '../../app/useRoot'\nimport { FCompanyBranchStatusFragment } from '../../graph/generated'\nimport { useShopStatus } from '../../hooks/useShopStatus'\n\ninterface IProps {\n  status: FCompanyBranchStatusFragment\n  deliveryTime: number\n  pickupTime: number\n}\n\nexport const StatusDisplayOpen = styled.span`\n  font-style: italic;\n  color: #0f9849;\n`\n\nexport const StatusDisplayClosed = styled.span`\n  font-style: italic;\n  color: #b40000;\n`\n\nexport const ShopStatusDisplay: React.FC<IProps> = ({\n  status,\n  deliveryTime,\n  pickupTime,\n}) => {\n  const { order } = useRoot()\n  const { decision, openingIn, closingIn } = useShopStatus({\n    status,\n  })\n\n  if (!status) {\n    return null\n  }\n\n  if (status.isOpen === false) {\n    if (!status.willOpenAt) {\n      return (\n        <StatusDisplayClosed>\n          <Trans>We are closed until further notice</Trans>\n        </StatusDisplayClosed>\n      )\n    }\n    const closestBH = status.businessHours[0]\n    if (closestBH && closestBH.closedNote) {\n      return <StatusDisplayClosed>{closestBH.closedNote}</StatusDisplayClosed>\n    }\n  }\n\n  switch (decision) {\n    case 'Open':\n      let timingDisplay\n      if (order.usingDeliveryOrderMethod && status.defaultDeliveryTimeEnabled) {\n        timingDisplay = (\n          <Trans>We are delivering in {deliveryTime} minutes</Trans>\n        )\n      }\n      if (order.usingPickupOrderMethod && status.defaultPickupTimeEnabled) {\n        timingDisplay = (\n          <Trans>We can prepare your order in {pickupTime} minutes</Trans>\n        )\n      }\n      return (\n        <StatusDisplayOpen data-testid=\"statusDisplayOpen\">\n          {timingDisplay}\n        </StatusDisplayOpen>\n      )\n    case 'OpeningSoon':\n      return (\n        <StatusDisplayClosed>\n          <Plural\n            value={openingIn}\n            one=\"Opening in 1 minute\"\n            other=\"Opening in # minutes\"\n          />\n        </StatusDisplayClosed>\n      )\n    case 'ClosingSoon':\n      return (\n        <StatusDisplayOpen>\n          <Plural\n            value={closingIn}\n            one=\"Closing in 1 minute\"\n            other=\"Closing in # minutes\"\n          />\n        </StatusDisplayOpen>\n      )\n    case 'Closed':\n      return (\n        <StatusDisplayClosed>\n          {status.willOpenAt ? (\n            <Trans>We will open at {formatOpenTime(status.willOpenAt)}</Trans>\n          ) : (\n            <Trans>Closed</Trans>\n          )}\n        </StatusDisplayClosed>\n      )\n  }\n}\n\nexport function formatOpenTime(openAt: string) {\n  const openAtDate = new Date(openAt)\n  const nowDate = new Date()\n  let format: Intl.DateTimeFormatOptions = {\n    hour: 'numeric',\n    minute: 'numeric',\n  }\n  if (!isSameDay(openAtDate, nowDate)) {\n    format = {\n      ...format,\n      weekday: 'long',\n    }\n  }\n  return <DateFormat value={openAtDate} format={format} />\n}\n","import { Trans } from '@lingui/macro'\nimport React from 'react'\nimport { Link } from 'react-router-dom'\nimport { Button } from 'reactstrap'\nimport styled from 'styled-components/macro'\n\nimport { PrimaryButton } from '../../common/Buttons'\nimport { Desktop, Mobile } from '../../common/Responsive'\nimport { QOrderFinishQuery } from '../../graph/generated'\n\ninterface IProps {\n  finish: QOrderFinishQuery\n}\nconst CenteredButtonContainer = styled.div`\n  text-align: center;\n`\n\nexport const FinishViewFooter: React.FC<IProps> = ({\n  finish: { androidApp, iosApp },\n}) => {\n  const renderHomeButton = () => (\n    <Link to=\"/\">\n      <PrimaryButton className=\"finish__view__submit__line__button\">\n        <Trans>Back to home page</Trans>\n      </PrimaryButton>\n    </Link>\n  )\n  return (\n    <>\n      <Desktop>\n        {(androidApp || iosApp) && (\n          <div className=\"finish__view__apps__propagation\">\n            <div className=\"finish__view__apps__propagation__header\">\n              <Trans>What about mobile app?</Trans>\n            </div>\n            <div className=\"finish__view__apps__propagation__description\">\n              <Trans>\n                We have prepared mobile app, so you could order from anywhere!\n              </Trans>\n            </div>\n\n            {androidApp && (\n              <a href={androidApp.url}>\n                <Button\n                  className=\"finish__view__apps__propagation__button\"\n                  color=\"secondary\"\n                >\n                  Google Play\n                </Button>\n              </a>\n            )}\n\n            {iosApp && (\n              <a href={iosApp.url}>\n                <Button\n                  className=\"finish__view__apps__propagation__button\"\n                  color=\"secondary\"\n                >\n                  App Store\n                </Button>\n              </a>\n            )}\n          </div>\n        )}\n        <CenteredButtonContainer>{renderHomeButton()}</CenteredButtonContainer>\n      </Desktop>\n\n      <Mobile>\n        <div\n          className=\"finish__view__submit__line\"\n          style={{ textAlign: 'center' }}\n        >\n          <div className=\"finish__view__submit__line__strip\" />\n          {renderHomeButton()}\n        </div>\n      </Mobile>\n    </>\n  )\n}\n","import React from 'react'\n\nimport { useRoot } from '../../app/useRoot'\nimport Pacman from '../../common/Pacman'\nimport { QOrderFinishQuery, useQOrderFinish } from '../../graph/generated'\nimport { useEmptyOrderRedirect } from '../../hooks/useEmptyOrderRedirect'\n\ninterface IProps {\n  render(result: QOrderFinishQuery): ReactNode\n}\n\nexport const FinishViewLoader: React.FC<IProps> = ({ render }) => {\n  const { order } = useRoot()\n  useEmptyOrderRedirect()\n\n  const { data, loading } = useQOrderFinish({\n    branchId: order.branchId!,\n    orderId: order.orderId!,\n  })\n\n  if (loading) {\n    return <Pacman />\n  }\n\n  return render(data)\n}\n","import { Trans } from '@lingui/macro'\nimport { RM } from '@speedlo/tools'\nimport React from 'react'\nimport styled from 'styled-components/macro'\n\nimport {\n  FOrderFinishedFragment,\n  FOrderFinishedItems,\n  FOrderFinishedOrderPayments,\n  PaymentTypeEnum,\n} from '../../graph/generated'\nimport { i18n } from '../../i18n'\n\ninterface IProps {\n  order: FOrderFinishedFragment\n}\n\nconst HeaderThemed = styled.div`\n  background-color: ${({ theme }) => theme.primary};\n`\n\nconst PriceThemed = styled.div`\n  background-color: ${({ theme }) => theme.primary};\n`\n\nconst PriceCornerThemed = styled.div`\n  border-top-color: ${({ theme }) => theme.primary} !important;\n`\n\nexport const FinishViewOrder: React.FC<IProps> = ({ order }) => (\n  <>\n    <HeaderThemed className=\"finish__view__header\">\n      <div className=\"finish__view__header__inner\">\n        <span className=\"flaticon-transport-1 finish__view__header__icon\" />\n        <h3>\n          <Trans>It's done! Thank you :-)</Trans>\n        </h3>\n      </div>\n    </HeaderThemed>\n    <h4>\n      <Trans>Your order was successfully accepted!</Trans>{' '}\n      {getPaymentInfo(order)}\n    </h4>\n    <div className=\"finish__view__items\">\n      <div className=\"finish__view__items__look__to\">\n        <Trans>You can look forward to:</Trans>\n      </div>\n      {order.items.map(item => (\n        <OrderItem key={item.id} {...item} />\n      ))}\n      <PriceCornerThemed className=\"finish__view__items__price__corner\" />\n      <PriceThemed className=\"finish__view__items__price\">\n        {getPaymentPrice(order)} <b>{order.totalSum.formattedValue}</b>\n      </PriceThemed>\n    </div>\n  </>\n)\n\nconst hasMethod = (paymentType: PaymentTypeEnum) => (\n  payment: FOrderFinishedOrderPayments,\n) => payment.paymentMethod.paymentType.enum === paymentType\n\nfunction getPaymentInfo({ orderPayments }: FOrderFinishedFragment) {\n  if (orderPayments.some(hasMethod(PaymentTypeEnum.Cash))) {\n    return i18n.t`You will pay at pickup.`\n  }\n  if (orderPayments.some(hasMethod(PaymentTypeEnum.Credit))) {\n    return i18n.t`You have payed.`\n  }\n  return null\n}\n\nfunction getPaymentPrice({ orderPayments, totalSum }: FOrderFinishedFragment) {\n  if (orderPayments.some(hasMethod(PaymentTypeEnum.Cash))) {\n    return i18n.t`Total cost to be payed:`\n  }\n  if (orderPayments.some(hasMethod(PaymentTypeEnum.Credit))) {\n    return i18n.t`Total cost payed:`\n  }\n  return null\n}\n\nfunction OrderItem({ recipe, sideDishes }: FOrderFinishedItems) {\n  return (\n    <div>\n      <b>{recipe.nameLabel}</b>\n      {sideDishes.length\n        ? ` + ${sideDishes.map(RM.path(['recipe', 'nameLabel'])).join(',')}`\n        : null}\n    </div>\n  )\n}\n","import { Trans } from '@lingui/macro'\nimport React from 'react'\nimport styled from 'styled-components/macro'\n\nimport { QOrderFinishCompanyBranch } from '../../graph/generated'\n\ninterface IProps {\n  branch: QOrderFinishCompanyBranch\n}\n\nconst PhoneNumberLinkStyled = styled.a`\n  color: inherit;\n  text-decoration: none;\n  &:hover {\n    text-decoration: underline;\n  }\n`\n\nexport const FinishViewSupport: React.FC<IProps> = ({ branch }) => (\n  <div className=\"finish__view__support\">\n    <h4>\n      <Trans>Any question? Do you have a problem? Call:</Trans>\n    </h4>\n    <span className=\"flaticon-technology finish__view__support__icon\" />\n    <span className=\"finish__view__support__phone\">\n      <PhoneNumberLinkStyled href={`tel:${branch.phone}`}>\n        {branch.phone}\n      </PhoneNumberLinkStyled>\n    </span>\n  </div>\n)\n","import './ButtonStripe.css'\n\nimport React from 'react'\n\nconst ButtonStripe: React.FC = ({ children }) => (\n  <div className=\"button__stripe\">\n    <div className=\"button__stripe__bar\" />\n    <div className=\"button__stripe__button\">{children}</div>\n  </div>\n)\n\nexport default ButtonStripe\n","import { useGoogleMap } from '@react-google-maps/api'\nimport React from 'react'\n\nimport { useRoot } from '../../../app/useRoot'\nimport { GeoPoint, gpsToLatLngLit } from '../../../helpers/gps'\n\nexport function useMapPanning() {\n  const { map } = useRoot()\n  const mapRef = useGoogleMap()\n\n  const prevGps = React.useRef<Maybe<GeoPoint>>(null)\n\n  const panToGps = (gps: GeoPoint) => {\n    if (!mapRef) {\n      map.log('cannot pan map as ref is not available')\n      return\n    }\n    const latLng = gpsToLatLngLit(gps)\n    map.log('panning to %j', latLng)\n    mapRef.panTo(latLng)\n    prevGps.current = gps\n  }\n\n  return (gps: GeoPoint) => {\n    const prev = prevGps.current\n    if (\n      !prev ||\n      (prev.latitude !== gps.latitude && prev.longitude !== gps.longitude)\n    ) {\n      panToGps(gps)\n    }\n  }\n}\n","import { OverlayView } from '@react-google-maps/api'\nimport React from 'react'\nimport styled from 'styled-components/macro'\n\nimport { FPickupBranchFragment } from '../graph/generated'\nimport { gpsToLatLng } from '../helpers/gps'\n\ninterface IProps {\n  branch: FPickupBranchFragment\n  onClick?: () => void\n}\n\nconst StyledPickupMapMarker = styled.div`\n  cursor: pointer;\n  color: white;\n  opacity: 0.5;\n\n  &::before {\n    font-size: 1.3rem;\n    margin: 0;\n    padding: 0.5rem;\n    background-color: #ff0000;\n    border-radius: 1rem;\n  }\n`\n\nexport const MapBranchMarker: React.FC<IProps> = ({ branch, onClick }) => {\n  return (\n    <OverlayView\n      position={gpsToLatLng(branch.gps)}\n      mapPaneName={OverlayView.OVERLAY_MOUSE_TARGET}\n      getPixelPositionOffset={(width, height) => ({\n        x: width === 0 ? -12 : -(width / 2),\n        y: height === 0 ? -12 : -(height / 2),\n      })}\n    >\n      <StyledPickupMapMarker\n        className=\"flaticon-restaurant\"\n        data-testid=\"PickupMapMarker\"\n        title={branch.name}\n        onClick={onClick}\n      />\n    </OverlayView>\n  )\n}\n","import { useApolloClient } from '@speedlo/graphql'\n\nimport { useRoot } from '../app/useRoot'\nimport {\n  FCartGoodsItems,\n  FCartPresencePresence,\n  FRecipeFragment,\n  FRecipeFragmentDoc,\n  MAddToCartMutation,\n  MAddToCartVariables,\n  QCartDocument,\n  QCartQuery,\n  QCartVariables,\n  useMAddToCart,\n} from '../graph/generated'\n\nlet counter = 1\n\nconst NO_SIDEDISHES = []\n\nexport function useAddToCart() {\n  const { order, cart: cartModel } = useRoot()\n  const client = useApolloClient()\n\n  const [addToCart] = useMAddToCart({\n    context: { noBatch: true },\n  })\n\n  const executeAddToCart = (\n    recipeId: ID,\n    sideDishes: RoA<ID> = NO_SIDEDISHES,\n  ) => {\n    const variables: MAddToCartVariables = {\n      orderId: order.orderId!,\n      recipeId,\n      sideDishes,\n      withGoods: cartModel.withGoods,\n      withPresence: cartModel.withPresence,\n    }\n    return addToCart(variables, {\n      optimisticResponse: makeOptimisticResponse(variables),\n    })\n  }\n\n  return executeAddToCart\n\n  function makeOptimisticResponse(\n    variables: MAddToCartVariables,\n  ): MAddToCartMutation | undefined {\n    const current = client.readQuery<QCartQuery, QCartVariables>(\n      {\n        query: QCartDocument,\n        variables: {\n          orderId: variables.orderId,\n          withGoods: cartModel.withGoods,\n          withPresence: cartModel.withPresence,\n        },\n      },\n      true,\n    )\n    if (!current) {\n      return undefined\n    }\n    const id = `-${counter++}`\n    const addPresence = (): RoA<FCartPresencePresence> => {\n      if (!cartModel.withPresence) {\n        return current.order.presence\n      }\n      return [\n        ...current.order.presence,\n        {\n          __typename: 'OrderRecipe',\n          id,\n          recipe: {\n            __typename: 'Recipe',\n            id: variables.recipeId,\n          },\n        },\n      ]\n    }\n    const addItem = (): RoA<FCartGoodsItems> => {\n      if (!cartModel.withGoods) {\n        return current.order.items\n      }\n      const recipe = client.readFragment<FRecipeFragment>(\n        {\n          id: `Recipe-${variables.recipeId}`,\n          fragment: FRecipeFragmentDoc,\n          fragmentName: 'FRecipe',\n        },\n        true,\n      )\n      if (!recipe) {\n        return current.order.items\n      }\n      return [\n        ...current.order.items,\n        {\n          __typename: 'OrderRecipe',\n          automatic: false,\n          id,\n          price: {\n            __typename: 'PriceConverted',\n            formattedValue: '???',\n            value: -1,\n          },\n          recipe,\n          sideDishes: [],\n        },\n      ]\n    }\n    return {\n      __typename: 'Mutation',\n      add: {\n        ...current.order,\n        countWares: current.order.countWares + 1,\n        totalSum: {\n          ...current.order.totalSum,\n          value: -1,\n        },\n        items: addItem(),\n        presence: addPresence(),\n      },\n    }\n  }\n}\n","import React from 'react'\nimport { Button, ButtonProps } from 'reactstrap'\nimport styled from 'styled-components/macro'\n\ninterface IProps extends ButtonProps {\n  isSelected: boolean\n  width: string\n}\n\nconst PickerButtonStyled = styled(({ isSelected, width, ...props }) => (\n  <Button {...props} />\n))`\n  border-radius: 0.6rem;\n  margin: 0.5rem;\n  background-color: ${props =>\n    props.isSelected ? props.theme.tertiary : 'transparent'} !important;\n  color: ${props =>\n    props.isSelected ? props.theme.tertiaryText : 'initial'} !important;\n  &:hover {\n    border-color: ${({ theme }) => theme.tertiaryHover} !important;\n  }\n  width: ${props => props.width};\n  @media (max-width: 370px) {\n    width: 100%;\n  }\n  &.btn-outline-secondary {\n    color: #2e2e2e;\n    border-color: #d4d4d4;\n  }\n  &.btn-outline-secondary.active {\n    color: white;\n  }\n`\n\nexport const PickerButton: React.FC<IProps> = ({\n  isSelected,\n  onSelect,\n  children,\n  ...buttonProps\n}) => {\n  return (\n    <PickerButtonStyled isSelected={isSelected} {...buttonProps}>\n      {children}\n    </PickerButtonStyled>\n  )\n}\n"],"sourceRoot":""}