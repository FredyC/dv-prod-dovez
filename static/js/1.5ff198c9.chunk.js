(window.webpackJsonpdoveze=window.webpackJsonpdoveze||[]).push([[1],{1e3:function(e,t,n){"use strict";n.d(t,"a",function(){return b});var r=n(98),a=n(34),o=n(79),i=n(135),c=n(0),l=n.n(c),s=n(63),u=n(24),d=n(950);function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}var p=a.d.span.withConfig({displayName:"StyledStatusDisplayOpen",componentId:"ul92ph-0"})(["font-style:italic;color:#0f9849;"]),f=a.d.span.withConfig({displayName:"StyledStatusDisplayClosed",componentId:"ul92ph-1"})(["font-style:italic;color:#b40000;"]),b=function(e){var t=e.status,n=e.deliveryTime,r=e.pickupTime,a=Object(u.b)().order,i=Object(d.a)({status:t}),c=i.decision,m=i.openingIn,b=i.closingIn;if(!t)return null;if(!1===t.isOpen){if(!t.willOpenAt)return l.a.createElement(f,null,l.a.createElement(o.Trans,{id:"We are closed until further notice"}));var g=t.businessHours[0];if(g&&g.closedNote)return l.a.createElement(f,null,g.closedNote)}switch(c){case"Open":var v;return a.usingDeliveryOrderMethod&&t.defaultDeliveryTimeEnabled&&(v=l.a.createElement(o.Trans,{id:"We are delivering in {deliveryTime} minutes",values:{deliveryTime:n}})),a.usingPickupOrderMethod&&t.defaultPickupTimeEnabled&&(v=l.a.createElement(o.Trans,{id:"We can prepare your order in {pickupTime} minutes",values:{pickupTime:r}})),l.a.createElement(s.a,{path:"/order",render:function(){return l.a.createElement(p,{"data-testid":"statusDisplayOpen"},v)}});case"OpeningSoon":return l.a.createElement(f,null,l.a.createElement(o.Trans,{id:"{openingIn, plural, one {Opening in 1 minute} other {Opening in # minutes}}",values:{openingIn:m}}));case"ClosingSoon":return l.a.createElement(p,null,l.a.createElement(o.Trans,{id:"{closingIn, plural, one {Closing in 1 minute} other {Closing in # minutes}}",values:{closingIn:b}}));case"Closed":return l.a.createElement(f,null,t.willOpenAt?l.a.createElement(o.Trans,{id:"We will open at {0}",values:{0:h(t.willOpenAt)}}):l.a.createElement(o.Trans,{id:"Closed"}))}};function h(e){var t=new Date(e),n=new Date,a={hour:"numeric",minute:"numeric"};return Object(i.isSameDay)(t,n)||(a=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(n,!0).forEach(function(t){Object(r.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},a,{weekday:"long"})),l.a.createElement(o.DateFormat,{value:t,format:a})}},1001:function(e,t,n){"use strict";n.d(t,"a",function(){return m});var r=n(34),a=n(79),o=n(0),i=n.n(o),c=n(160),l=n(227),s=n(95),u=n(96),d=r.d.div.withConfig({displayName:"CenteredButtonContainer",componentId:"sc-1yzqtn3-0"})(["text-align:center;"]),m=function(e){var t=e.finish,n=t.androidApp,r=t.iosApp,o=function(){return i.a.createElement(c.b,{to:"/"},i.a.createElement(s.a,{className:"finish__view__submit__line__button"},i.a.createElement(a.Trans,{id:"Back to home page"})))};return i.a.createElement(i.a.Fragment,null,i.a.createElement(u.a,null,(n||r)&&i.a.createElement("div",{className:"finish__view__apps__propagation"},i.a.createElement("div",{className:"finish__view__apps__propagation__header"},i.a.createElement(a.Trans,{id:"What about mobile app?"})),i.a.createElement("div",{className:"finish__view__apps__propagation__description"},i.a.createElement(a.Trans,{id:"We have prepared mobile app, so you could order from anywhere!"})),n&&i.a.createElement("a",{href:n.url},i.a.createElement(l.a,{className:"finish__view__apps__propagation__button",color:"secondary"},"Google Play")),r&&i.a.createElement("a",{href:r.url},i.a.createElement(l.a,{className:"finish__view__apps__propagation__button",color:"secondary"},"App Store"))),i.a.createElement(d,null,o())),i.a.createElement(u.b,null,i.a.createElement("div",{className:"finish__view__submit__line",style:{textAlign:"center"}},i.a.createElement("div",{className:"finish__view__submit__line__strip"}),o())))}},1002:function(e,t,n){"use strict";n.d(t,"a",function(){return s});var r=n(0),a=n.n(r),o=n(24),i=n(229),c=n(42),l=n(951),s=function(e){var t=e.render,n=Object(o.b)().order;Object(l.a)();var r=Object(c.E)({branchId:n.branchId,orderId:n.orderId}),s=r.data;return r.loading?a.a.createElement(i.a,null):t(s)}},1003:function(e,t,n){"use strict";n.d(t,"a",function(){return p});var r=n(34),a=n(79),o=n(52),i=n(0),c=n.n(i),l=n(42),s=n(35),u=r.d.div.withConfig({displayName:"HeaderThemed",componentId:"s65dzo-0"})(["background-color:",";"],function(e){return e.theme.primary}),d=r.d.div.withConfig({displayName:"PriceThemed",componentId:"s65dzo-1"})(["background-color:",";"],function(e){return e.theme.primary}),m=r.d.div.withConfig({displayName:"PriceCornerThemed",componentId:"s65dzo-2"})(["border-top-color:"," !important;"],function(e){return e.theme.primary}),p=function(e){var t=e.order;return c.a.createElement(c.a.Fragment,null,c.a.createElement(u,{className:"finish__view__header"},c.a.createElement("div",{className:"finish__view__header__inner"},c.a.createElement("span",{className:"flaticon-transport-1 finish__view__header__icon"}),c.a.createElement("h3",null,c.a.createElement(a.Trans,{id:"It's done! Thank you :-)"})))),c.a.createElement("h4",null,c.a.createElement(a.Trans,{id:"Your order was successfully accepted!"})," ",function(e){var t=e.orderPayments;if(t.some(f(l.g.Cash)))return s.b._("You will pay at pickup.");if(t.some(f(l.g.Credit)))return s.b._("You have payed.");return null}(t)),c.a.createElement("div",{className:"finish__view__items"},c.a.createElement("div",{className:"finish__view__items__look__to"},c.a.createElement(a.Trans,{id:"You can look forward to:"})),t.items.map(function(e){return c.a.createElement(b,Object.assign({key:e.id},e))}),c.a.createElement(m,{className:"finish__view__items__price__corner"}),c.a.createElement(d,{className:"finish__view__items__price"},function(e){var t=e.orderPayments;e.totalSum;if(t.some(f(l.g.Cash)))return s.b._("Total cost to be payed:");if(t.some(f(l.g.Credit)))return s.b._("Total cost payed:");return null}(t)," ",c.a.createElement("b",null,t.totalSum.formattedValue))))},f=function(e){return function(t){return t.paymentMethod.paymentType.enum===e}};function b(e){var t=e.recipe,n=e.sideDishes;return c.a.createElement("div",null,c.a.createElement("b",null,t.nameLabel),n.length?" + ".concat(n.map(o.RM.path(["recipe","nameLabel"])).join(",")):null)}},1004:function(e,t,n){"use strict";n.d(t,"a",function(){return l});var r=n(34),a=n(79),o=n(0),i=n.n(o),c=r.d.a.withConfig({displayName:"PhoneNumberLinkStyled",componentId:"sc-1y14w99-0"})(["color:inherit;text-decoration:none;&:hover{text-decoration:underline;}"]),l=function(e){var t=e.branch;return i.a.createElement("div",{className:"finish__view__support"},i.a.createElement("h4",null,i.a.createElement(a.Trans,{id:"Any question? Do you have a problem? Call:"})),i.a.createElement("span",{className:"flaticon-technology finish__view__support__icon"}),i.a.createElement("span",{className:"finish__view__support__phone"},i.a.createElement(c,{href:"tel:".concat(t.phone)},t.phone)))}},1005:function(e,t,n){"use strict";n(1076);var r=n(0),a=n.n(r);t.a=function(e){var t=e.children;return a.a.createElement("div",{className:"button__stripe"},a.a.createElement("div",{className:"button__stripe__bar"}),a.a.createElement("div",{className:"button__stripe__button"},t))}},1006:function(e,t,n){"use strict";n.d(t,"a",function(){return l});var r=n(949),a=n(0),o=n.n(a),i=n(24),c=n(113);function l(){var e=Object(i.b)().map,t=Object(r.d)(),n=o.a.useRef(null);return function(r){var a=n.current;(!a||a.latitude!==r.latitude&&a.longitude!==r.longitude)&&function(r){if(t){var a=Object(c.b)(r);e.log("panning to %j",a),t.panTo(a),n.current=r}else e.log("cannot pan map as ref is not available")}(r)}}},1007:function(e,t,n){"use strict";n.d(t,"a",function(){return s});var r=n(34),a=n(949),o=n(0),i=n.n(o),c=n(113),l=r.d.div.withConfig({displayName:"StyledPickupMapMarker",componentId:"sc-18o5u5p-0"})(["cursor:pointer;color:white;opacity:0.5;&::before{font-size:1.3rem;margin:0;padding:0.5rem;background-color:#ff0000;border-radius:1rem;}"]),s=function(e){var t=e.branch,n=e.onClick;return i.a.createElement(a.c,{position:Object(c.a)(t.gps),mapPaneName:a.c.OVERLAY_MOUSE_TARGET,getPixelPositionOffset:function(e,t){return{x:0===e?-12:-e/2,y:0===t?-12:-t/2}}},i.a.createElement(l,{className:"flaticon-restaurant","data-testid":"PickupMapMarker",title:t.name,onClick:n}))}},1008:function(e,t,n){"use strict";n.d(t,"a",function(){return p});var r=n(98),a=n(152),o=n(37),i=n(12),c=n(24),l=n(42);function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(n,!0).forEach(function(t){Object(r.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var d=1,m=[];function p(){var e=Object(c.b)(),t=e.order,n=e.cart,r=Object(i.useApolloClient)(),s=Object(l.l)({context:{noBatch:!0}}),p=Object(o.a)(s,1)[0];return function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:m,a={orderId:t.orderId,recipeId:e,sideDishes:r,withGoods:n.withGoods,withPresence:n.withPresence};return p(a,{optimisticResponse:f(a)})};function f(e){var t=r.readQuery({query:l.h,variables:{orderId:e.orderId,withGoods:n.withGoods,withPresence:n.withPresence}},!0);if(t){var o="-".concat(d++);return{__typename:"Mutation",add:u({},t.order,{countWares:t.order.countWares+1,totalSum:u({},t.order.totalSum,{value:-1}),items:function(){if(!n.withGoods)return t.order.items;var i=r.readFragment({id:"Recipe-".concat(e.recipeId),fragment:l.b,fragmentName:"FRecipe"},!0);return i?[].concat(Object(a.a)(t.order.items),[{__typename:"OrderRecipe",automatic:!1,id:o,price:{__typename:"PriceConverted",formattedValue:"???",value:-1},recipe:i,sideDishes:[]}]):t.order.items}(),presence:n.withPresence?[].concat(Object(a.a)(t.order.presence),[{__typename:"OrderRecipe",id:o,recipe:{__typename:"Recipe",id:e.recipeId}}]):t.order.presence})}}}}},1009:function(e,t,n){"use strict";n.d(t,"a",function(){return s});var r=n(97),a=n(34),o=n(0),i=n.n(o),c=n(227),l=Object(a.d)(function(e){e.isSelected,e.width;var t=Object(r.a)(e,["isSelected","width"]);return i.a.createElement(c.a,t)}).withConfig({displayName:"PickerButtonStyled",componentId:"sc-19g322n-0"})(["border-radius:0.6rem;margin:0.5rem;background-color:"," !important;color:"," !important;&:hover{border-color:"," !important;}width:",";@media (max-width:370px){width:100%;}&.btn-outline-secondary{color:#2e2e2e;border-color:#d4d4d4;}&.btn-outline-secondary.active{color:white;}"],function(e){return e.isSelected?e.theme.tertiary:"transparent"},function(e){return e.isSelected?e.theme.tertiaryText:"initial"},function(e){return e.theme.tertiaryHover},function(e){return e.width}),s=function(e){var t=e.isSelected,n=(e.onSelect,e.children),a=Object(r.a)(e,["isSelected","onSelect","children"]);return i.a.createElement(l,Object.assign({isSelected:t},a),n)}},1010:function(e,t,n){"use strict";n.d(t,"a",function(){return u});var r=n(15),a=n(34),o=n(0),i=n.n(o),c=n(96);function l(){var e=Object(r.a)(["\n      position: fixed;\n      bottom: 0;\n      width: 100%;\n  "]);return l=function(){return e},e}var s=a.d.div.withConfig({displayName:"StyledButtonStrip",componentId:"sc-4alr49-0"})(["margin:0;margin-bottom:1rem;text-align:center;position:sticky;bottom:1rem;"," div.strip{background-color:#d4d4d4;position:relative;top:3.2rem;z-index:0;height:1.6rem;width:100%;}button{margin:1rem;padding:0.8rem 1.6rem;z-index:1;position:relative;}"],Object(c.d)(l())),u=function(e){var t=e.children;return i.a.createElement(s,null,i.a.createElement("div",{className:"strip"}),t)}},1016:function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return f});var r=n(37),a=n(79),o=n(50),i=n(228),c=n(230),l=n(0),s=n.n(l),u=n(42),d=n(134),m=n(1426),p=[],f=function(){var t=Object(d.a)(),n=Object(c.d)(),l=s.a.useState(v),f=Object(r.a)(l,2),b=f[0],h=f[1],g=Object(o.c)(h,2e3);function v(){var e=n.values,r=e.firstname,a=e.lastname,o=e.phonePrefix,i=e.phone;return{input:{orderId:t.orderId,firstname:r,lastname:a,phone:"".concat(o.trim()).concat(i.trim())}}}s.a.useEffect(function(){return g(v()),function(){return g.clear()}},[n.values,g]);var y=Object(u.G)(b,{skip:!b.input.orderId}),O=y.data,E=y.errors,_=y.loading,j=s.a.useRef(p),w=E&&E.length>0;_||w||(j.current=O.agreements),s.a.useEffect(function(){j.current.length>0&&!t.isVamInitialized&&t.initVam()});var k=Object(i.e)(j.current),C=k.state,I=k.renderVamAgreements;return Object(o.b)(function(){var t=Array.from(C.confirmedAgreements);e(function(){n.setFieldValue("agreements",t)})}),s.a.useEffect(function(){return n.registerField("agreements",{validate:function(){return j.current.some(function(e){return e.isMandatory&&!C.confirmedAgreements.has(e.id)})?"mandatory":""}}),function(){return n.unregisterField("agreements")}},[n,C]),w?s.a.createElement(a.Trans,{id:"Failed retrieving company agreements. Please try again later or contact us."}):I({AgreementBox:m.a})}}).call(this,n(233).setImmediate)},1017:function(e,t,n){"use strict";n.d(t,"a",function(){return o});n(1088);var r=n(230),a=(n(0),n(95),n(134)),o=(n(994),function(){Object(a.a)(),Object(r.d)();return null})},1058:function(e,t,n){"use strict";n.d(t,"a",function(){return p});var r=n(79),a=(n(408),n(58)),o=n(0),i=n.n(o),c=n(902),l=n(899),s=n(900),u=n(901),d=n(227),m=n(24),p=function(){var e=Object(m.b)().order;return Object(a.d)(function(){return i.a.createElement(c.a,{isOpen:e.hasErrors,toggle:e.clearErrors,className:"modal__container"},i.a.createElement(l.a,{toggle:e.clearErrors,tag:s.a,className:"modal__header"},i.a.createElement("span",null,i.a.createElement(r.Trans,{id:"Order can not be completed"}))),i.a.createElement(u.a,{className:"modal__body"},i.a.createElement("div",{className:"modal__body__content"},e.hasErrors&&e.submitErrors.map(function(e,t){return i.a.createElement("div",{key:t},e)})),i.a.createElement("div",{className:"modal__body__button__line"},i.a.createElement("div",{className:"modal__body__button__strip"}),i.a.createElement(d.a,{className:"modal__body__button",color:"primary",onClick:e.clearErrors},i.a.createElement(r.Trans,{id:"I understand"})),"/>")))})}},1059:function(e,t,n){"use strict";n.d(t,"a",function(){return m});var r=n(34),a=n(79),o=n(58),i=n(0),c=n.n(i),l=n(24),s=n(126),u=n(229),d=r.d.div.withConfig({displayName:"TextPadding",componentId:"e8hzje-0"})(["padding-bottom:2rem;"]),m=function(){var e=Object(l.b)().order;return Object(o.d)(function(){return c.a.createElement(s.a,{isOpen:e.isGoPayChecking,headerText:"GoPay platba"},c.a.createElement(d,null,c.a.createElement(a.Trans,{id:"Checking your GoPay payment, please wait..."})),c.a.createElement(u.a,{noMargin:!0}))})}},1060:function(e,t,n){"use strict";n.d(t,"a",function(){return g});var r=n(37),a=n(34),o=n(50),i=n(58),c=n(0),l=n.n(c),s=n(1418),u=n.n(s),d=n(1419),m=n.n(d),p=n(24),f=n(42),b=n(35),h=a.d.div.withConfig({displayName:"StyledOrderFormTipInput",componentId:"yjblkh-0"})(["margin:0.8rem 0 1.4rem 0;"]),g=Object(i.a)(function(){var e=Object(p.b)(),t=e.order,n=e.cart,a=Object(f.r)(),i=Object(r.a)(a,1)[0];return Object(o.e)(function(){return t.usingPaymentMethodWithTips?Number(t.tips):0},function(e){i({tips:e,orderId:t.orderId,withGoods:n.withGoods})}),t.usingPaymentMethodWithTips?l.a.createElement(h,null,l.a.createElement(u.a,null,l.a.createElement(m.a,{type:"select",value:t.tips,onChange:function(e){t.setTips(Number.parseInt(e.target.value,10))},disabled:t.disableInteraction,"data-testid":"orderTipsSelect"},l.a.createElement("option",{value:0},b.b._("Without tips")),l.a.createElement("option",{value:5},b.b._("Tips 5%")),l.a.createElement("option",{value:10},b.b._("Tips 10%")),l.a.createElement("option",{value:15},b.b._("Tips 15%")),l.a.createElement("option",{value:20},b.b._("Tips 20%")),l.a.createElement("option",{value:25},b.b._("Tips 25%"))))):null})},1062:function(e,t,n){"use strict";n.d(t,"a",function(){return E});var r=n(39),a=n.n(r),o=n(67),i=n(37),c=n(34),l=n(228),s=n(58),u=n(0),d=n.n(u),m=n(1435),p=n(1436),f=n(1430),b=n(24),h=n(95),g=n(42),v=n(231),y=n(35),O=c.d.div.withConfig({displayName:"CodesPanel",componentId:"ucwmk-0"})(["margin-top:0.5rem;& button{margin-right:0.5rem;font-size:0.7rem;}"]),E=d.a.memo(function(){var e=Object(b.b)(),t=e.order,n=e.cart,r=Object(v.a)(),c=Object(i.a)(r,2),u=c[0],E=c[1],_=Object(g.H)({orderId:t.orderId},{skip:!t.orderId}),j=_.data,w=_.loading,k=Object(g.p)(),C=Object(i.a)(k,1)[0],I=Object(g.q)(),P=Object(i.a)(I,1)[0],N=d.a.useCallback(function(){var e=Object(o.a)(a.a.mark(function e(r){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.orderId){e.next=2;break}return e.abrupt("return");case 2:return e.abrupt("return",C({code:r,orderId:t.orderId,withGoods:n.withGoods}));case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),[C,n,t]),x=function(){var e=Object(o.a)(a.a.mark(function e(r){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.orderId&&P({codeId:r,orderId:t.orderId,withGoods:n.withGoods});case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),T=Object(l.d)({onCodeAdd:N,onCodeErrors:function(e,t){E(y.b._('Promo code "{code}" is invalid',{code:e}),d.a.createElement("div",null,t.map(function(e){return d.a.createElement("div",{key:e},e)})))},getValidatingMessage:function(e){return y.b._("Validating promo code {code}...",{code:e})}}),S=T.inputProps,M=T.inputRef,D=w?[]:j.order.promoCodes;return Object(s.d)(function(){return d.a.createElement(m.a,null,u,d.a.createElement(p.a,null,d.a.createElement(f.a,Object.assign({innerRef:M,autoComplete:"off",placeholder:y.b._("Promo codes")},S,{disabled:S.disabled||t.disableInteraction}))),d.a.createElement(O,{"data-testid":"promoCodesPanel"},D.map(function(e){var n=e.id,r=e.code;return d.a.createElement(h.b,{key:n,role:"button",disabled:t.disableInteraction,onClick:function(){return x(n)}},"".concat(r," \u2716"))})))})})},1063:function(e,t,n){"use strict";n.d(t,"a",function(){return m});var r=n(50),a=n(230),o=n(0),i=n.n(o),c=n(234),l=n.n(c),s=n(95),u=n(42),d=n(134),m=function(e){var t=e.children,n=Object(a.d)(),o=Object(r.g)().history,c=Object(d.a)(),m=Object(u.F)({orderId:c.orderId},{skip:!c.orderId}),p=m.data,f=m.loading;i.a.useEffect(function(){c.hasOrder&&!f&&p.order.orderStateCategory!==u.e.InCart&&o.replace("/")});var b=!f&&p.order.countWares>0&&c.isVamInitialized;return i.a.createElement(i.a.Fragment,null,i.a.createElement(s.a,{type:"submit",color:"primary",size:"md",disabled:!b||n.isSubmitting,"data-testid":"OrderSubmitButton"},n.isSubmitting?i.a.createElement(l.a,{name:"circle",fadeIn:"none",color:"#ccc"}):t))}},1064:function(e,t,n){"use strict";n.d(t,"a",function(){return d});var r=n(34),a=n(79),o=n(58),i=n(0),c=n.n(i),l=n(95),s=n(134),u=r.d.div.withConfig({displayName:"StyledOrderTimeButtons",componentId:"sc-14ao8bv-0"})(["margin:0 0 1.4rem 0;button{position:relative;padding-top:0.3rem;margin-bottom:0.2rem;height:2.8rem;}button:first-of-type{margin-right:0.8rem;}"]),d=function(){var e=Object(s.a)();return Object(o.d)(function(){if(!e.delayedOrderEnabled)return null;var t=null!==e.deliverAt;return c.a.createElement(u,null,c.a.createElement(l.c,{"data-testid":"orderTimeButtonNow",selected:!t,disabled:e.disableInteraction,onClick:function(){return e.setDeliverAt(null)}},c.a.createElement(a.Trans,{id:"When possible"})),c.a.createElement(l.c,{"data-testid":"orderTimeButtonLater",selected:t,disabled:e.disableInteraction,onClick:e.openTimePicker},t?c.a.createElement(a.DateFormat,{value:e.deliverAt,format:{weekday:"long",hour:"numeric",minute:"numeric"}}):c.a.createElement(a.Trans,{id:"Choose time"})))})}},1065:function(e,t,n){"use strict";n.d(t,"a",function(){return g});var r=n(15),a=n(34),o=n(79),i=n(58),c=n(0),l=n.n(c),s=n(227),u=n(1428),d=n(24),m=n(96);function p(){var e=Object(r.a)(["\n    position: fixed;\n    top: 5rem;\n    font-size: 0.8rem;\n    "]);return p=function(){return e},e}function f(){var e=Object(r.a)(["\n    font-size: 0.9rem;\n    position: sticky;\n    bottom: 0;\n  "]);return f=function(){return e},e}var b=Object(a.d)(s.a).withConfig({displayName:"NoticeButton",componentId:"sc-1i7ezjr-0"})(["font-size:0.9rem;margin:0.2rem 1rem;padding:0.5em 1rem;"]),h=Object(a.d)(u.a).withConfig({displayName:"StorageNotice",componentId:"sc-1i7ezjr-1"})(["width:100%;z-index:5;",";",";padding:0.5rem 1rem;background-color:#d4eddadc;"],Object(m.c)(f()),Object(m.d)(p())),g=function(){var e=Object(d.b)().user;return Object(i.d)(function(){return null!==e.rememberForm?null:l.a.createElement(h,{"data-testid":"OrderFormStorageNotice",className:"animated slideInUp"},l.a.createElement("p",null,l.a.createElement(o.Trans,{id:"This app is using secure storage for keeping filled form data. It's not cookies, these are stored in your browser only."})),l.a.createElement(b,{color:"success",size:"sm",onClick:e.setFormRememberYes,"data-testid":"orderFormStorageNotice__Yes"},l.a.createElement(o.Trans,{id:"Always remember"})),l.a.createElement(b,{color:"secondary",size:"sm",onClick:e.setFormRememberNo,"data-testid":"orderFormStorageNotice__No"},l.a.createElement(o.Trans,{id:"Do not store"})))})}},1066:function(e,t,n){"use strict";var r=n(34),a=n(949),o=n(50),i=n(58),c=n(0),l=n.n(c),s=n(24),u=n(113),d=n(39),m=n.n(d),p=n(98),f=n(67),b=n(37),h=n(42);function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(n,!0).forEach(function(t){Object(p.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var y=n(970),O=n(95),E=n(1005),_=n(35),j=function(e){var t=e.enabled,n=e.onClick;return l.a.createElement(E.a,null,l.a.createElement(O.a,{color:"primary",disabled:!t,onClick:n,"data-testid":"AddressSubmit"},_.b._("Confirm address")))},w=n(15),k=n(79),C=n(1428),I=n(96),P=n(228),N=n(1430),x=n(152),T=n(151),S=n.n(T);var M=Object(i.a)(function(e){var t=e.onSearch,n=e.inputProps,r=e.isVisible,a=Object(s.b)().location,o=l.a.useRef(null);l.a.useEffect(function(){r&&null!==o.current&&o.current.focus()},[r]);var i=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:300,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=l.a.useCallback(S()(e,t),[].concat(Object(x.a)(n),[e,t]));return l.a.useEffect(function(){return function(){r.clear()}},[r]),r}(t,2e3);l.a.useEffect(function(){return function(){return i.clear()}},[i]);return l.a.createElement(N.a,Object.assign({className:Object(P.b)({hidden:!r}),onChange:function(e){var t=e.target.value||"";a.setSearchValue(t),0===t.trim().length&&a.clearAddress(),i()},onKeyPress:function(e){"Enter"===e.key&&(i.clear(),t())},onFocus:function(){o.current.select()},value:a.searchValue,innerRef:o,"data-testid":"SearchInput"},n))}),D=n(231),A=Object(i.a)(function(){var e=Object(s.b)().location,t=Object(D.a)(),n=Object(b.a)(t,2),r=n[0],a=n[1];if(!e.isGeolocationAvailable||e.isResolving)return null;return l.a.createElement(l.a.Fragment,null,r,l.a.createElement("div",{className:"gps",onClick:function(){e.log("geolocating..."),navigator.geolocation.getCurrentPosition(function(t){var n=t.coords,r=n.latitude,a=n.longitude;e.log("geolocated at coords %s, %s (acc: %s)",n.latitude,n.longitude,n.accuracy),e.setGeolocationPoint({latitude:r,longitude:a})},function(t){e.log("failed geolocation",t),e.disableGeolocation(),a(_.b._("Geolocation failed"),_.b._("Your browser does not support geolocation."))},{enableHighAccuracy:!0,maximumAge:6e4})}},l.a.createElement("span",{className:"flaticon-gps"})))}),R=n(234),z=n.n(R),F=function(e){var t=e.address,n=e.isVisible,r=e.isResolving,a=e.onValidClick;return l.a.createElement("div",{"data-testid":"ResolvedAddress",className:Object(P.b)("resolved__address",{wait:r,hidden:!n}),onClick:r?void 0:a},r?l.a.createElement(z.a,{name:"ball-beat",fadeIn:"none"}):t)},L=n(227),G=n(11);function B(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}var V=new Map;function W(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.count,n=void 0===t?1:t,r=e.watchLocation,a=void 0!==r&&r,c=Object(s.b)(),u=c.map,d=c.location,m=Object(i.c)(function(){return{results:null,phrase:d.searchValue,searching:!1,get url(){var e=["count=".concat(n),"lon=".concat(u.longitude),"lat=".concat(u.latitude),"zoom=".concat(u.zoom),"lang=cs,sk,en","enableCategories=1"];return"https://api.mapy.cz/suggest/?".concat(e.join("&"))}}}),f=l.a.useCallback(function(){if(0!==m.phrase.length){d.log("searching phrase: ".concat(m.phrase));var e="".concat(m.url,"&phrase=").concat(m.phrase);V.has(e)?m.results=V.get(e):(m.searching=!0,fetch(e).then(function(e){return e.json()}).then(function(t){var n=t.result.filter(H).map(q);V.set(e,n),m.results=n}).finally(function(){m.searching=!1}))}else m.results=null},[d]),b=l.a.useRef(Object(T.debounce)(f,500)),h=l.a.useCallback(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d.searchValue;d.log("onSearch ".concat(e)),m.phrase=e.trim(),b.current.clear(),f()},[f,d]);return Object(o.e)(function(){return d.searchValue},function(e){0===e.length&&(m.phrase="",m.results=null,b.current.clear())}),l.a.useEffect(function(){return Object(G.reaction)(function(){return m.url},function(){a&&b.current()})},[m.url,a]),function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?B(n,!0).forEach(function(t){Object(p.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):B(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},m,{onSearch:h})}function H(e){var t=e.userData,n=t.latitude,r=t.longitude;return n&&r}function q(e){var t=e.category,n=e.userData,r=n.id,a=n.latitude,o=n.longitude,i=n.suggestFirstRow,c=n.suggestSecondRow,l=[n.municipality,n.district,n.country,c].find(Boolean)||"";return{id:r,category:t,gps:{latitude:a,longitude:o},address:"".concat(i).concat(l?", ".concat(l):"")}}function U(){var e=Object(w.a)(["\n  position: absolute;\n  margin-top: 0.1rem;\n\n  > div,\n  button.hint:hover {\n    background-color: #ffffffaa;\n  }\n\n  > div {\n    display: flex;\n    flex-direction: column;\n    align-items: flex-start;\n    border: 1px solid transparent;\n    border-radius: 0.4rem;\n    padding: 0.375rem 0.75rem;\n    font-size: 1rem;\n    line-height: 1.5;\n    max-width: 25rem;\n    text-align: left;\n\n    & > p {\n      font-size: 0.8rem;\n      color: gray;\n    }\n\n    button {\n      &:hover,\n      &:hover:focus {\n        text-decoration: none;\n      }\n    }\n\n    button.done {\n      color: darkgray;\n    }\n  }\n\n  button.hint {\n    color: coral;\n    text-shadow: 0.5px 0.5px darkgray;\n    &:hover {\n      text-decoration: none;\n      transition: background-color 0.5s ease;\n    }\n  }\n"]);return U=function(){return e},e}var Y=r.d.div(U()),J=Object(i.a)(function(e){var t=Object(s.b)().location,n=Object(i.c)(function(){return{open:!1}}),r=W({count:5,watchLocation:n.open}),a=r.results,c=r.searching,u=r.onSearch;if(Object(o.e)(function(){return n.open},function(e){e&&u()}),Object(o.e)(function(){return t.searchValue},function(){n.open=!1}),!t.hasSearchValue)return null;var d=a&&a.filter(function(e){return e.address!==t.address});return l.a.createElement(Y,{className:Object(P.b)("animated",{bounceInLeft:n.open,bounceIn:!n.open}),key:n.open.toString()},n.open?l.a.createElement("div",null,l.a.createElement("p",null,l.a.createElement(k.Trans,{id:"Hint: Try moving map around and zooming closer to your location to improve these results."})),c&&l.a.createElement("div",null,"..."),d&&d.map(function(e){return l.a.createElement(L.a,{size:"sm",color:"link",key:e.id,onClick:function(){t.setSearchResult(e),n.open=!1}},e.address)}),l.a.createElement(L.a,{size:"sm",color:"link",onClick:function(){n.open=!1},className:"done"},d&&0===d.length?l.a.createElement(k.Trans,{id:"No match for map location"}):l.a.createElement(k.Trans,{id:"I don't see anything useful here."}))):l.a.createElement(L.a,{className:"hint",color:"link",onClick:function(){n.open=!0}},l.a.createElement(k.Trans,{id:"Looking for a different address?"})))});function Z(){var e=Object(w.a)(["\n    height: 2.3rem;\n    "]);return Z=function(){return e},e}var K=r.d.div.withConfig({displayName:"Styled",componentId:"sc-1lgdvur-0"})(["width:90%;min-width:14rem;margin:1rem auto;text-align:center;div.container{display:flex;border-radius:1rem;border:1px solid #d4d4d4;background-color:white;"," input{height:auto;background:transparent;border:none;&:focus{box-shadow:initial;}&.hidden{display:none;}}div.gps{color:",";cursor:pointer;position:relative;top:0.2rem;}div.resolved__address{margin:0.4rem 0.7rem 0.4rem 0.7rem;font-size:1rem;color:green;width:100%;cursor:pointer;&.hidden{display:none;}&.wait{display:flex;justify-content:center;font-size:0.5rem;cursor:wait;}}.alert{pointer-events:none;margin-bottom:0;}"],Object(I.c)(Z()),function(e){return e.theme.secondary}),Q=Object(i.a)(function(){var e=Object(s.b)(),t=e.map,n=e.location,r=W(),a=r.results,o=r.searching,i=r.onSearch;return l.a.useEffect(function(){o&&n.setIsResolving(o)},[n,o]),l.a.useEffect(function(){if(null!==a){if(0===a.length)return n.log("no result from direct geocoder api"),void n.setAsNotResolved();var e=Object(b.a)(a,1)[0],r=e.category,o=e.gps,i=o.latitude,c=o.longitude;if(t.mapRef&&(t.log("panning to result gps ".concat(i," / ").concat(c)),t.mapRef.panTo(Object(u.b)(e.gps))),!r||!r.startsWith("address"))return n.log("result with category %s",r),void n.setAsNotAddress();n.log("found address ".concat(e.address)),n.latitude!==i&&n.longitude!==c&&n.resetResolution(),n.setSearchResult(e)}},[n,t,a]),l.a.createElement(K,null,l.a.createElement("div",{className:"container"},l.a.createElement(F,{address:n.address||"",isVisible:n.hasAddress,isResolving:n.isResolving,onValidClick:n.clearAddress}),l.a.createElement(M,{inputProps:{placeholder:_.b._("Type address or choose it from map"),autoComplete:"shipping street-address"},onSearch:i,isVisible:!(n.hasAddress||n.isResolving)}),l.a.createElement(A,null)),l.a.createElement(X,null),l.a.createElement(J,null))});function X(){var e=Object(s.b)().location;return e.hasResolutionResult?!1===e.isResolved?l.a.createElement(C.a,{color:"danger"},l.a.createElement(k.Trans,{id:"Address was not recognized."})):!1===e.isStreetAddress?l.a.createElement(C.a,{color:"warning"},l.a.createElement(k.Trans,{id:"Please enter address with house number."})):!1===e.inDeliveryLocation?l.a.createElement(C.a,{color:"warning"},l.a.createElement(k.Trans,{id:"Meal can't be delivered to your chosen address by any restaurant."})):null:null}var $=n(1006),ee=n(232);n.d(t,"a",function(){return ne});var te=r.d.div.withConfig({displayName:"StyledDeliveryMap",componentId:"sc-6qnl5t-0"})([".delivery__map__address{position:absolute;top:0;left:2.3rem;right:2.3rem;}.delivery__map__submit{position:absolute;bottom:3rem;width:100%;}"]),ne=Object(i.a)(function(e){var t=e.onConfirm,n=Object(s.b)(),r=n.map,c=n.location,d=n.business,p=function(){var e=Object(s.b)().location,t=Object(h.k)({fetchPolicy:"cache-first"}),n=Object(b.a)(t,1)[0];return l.a.useCallback(function(){var t=Object(f.a)(m.a.mark(function t(r){var a;return m.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.setIsResolving(!0),t.next=3,n(v({},e.resolutionTarget,{},r));case 3:null!==(a=t.sent)&&e.setResolutionResult(a.resolveLocation),e.setIsResolving(!1);case 6:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}(),[e,n])}(),g=function(e){c.resetResolution(),c.setSearchValue(""),c.setLocation(e)};Object(o.i)(function(){return d.isValid},function(){c.hasLocation&&(c.log("resolving initial gps"),p(c.geoPoint))}),Object(o.e)(function(){return c.geoPoint},function(e){e&&(c.log("resolving on gps change"),p(e))}),Object(o.e)(function(){return r.clickPoint},function(e){e&&(c.log("resolve with clickpoint"),g(e),r.clearClickPoint())}),Object(y.a)(c.isDeliveryAddress?c.branchId:null),function(){var e=Object(s.b)().location,t=Object(h.B)({},{fetchPolicy:"cache-first",skip:e.hasAddress}),n=t.data,r=t.loading,a=Object(i.b)({initial:r?null:n.location}),c=Object($.a)();Object(o.b)(function(){e.geoPoint?(e.log("pan to user location",e.geoPoint),c(e.geoPoint)):e.geolocationPoint?(e.log("pan to geolocation",e.geolocationPoint),c(e.geolocationPoint)):a.initial&&a.initial.gpsCoordinates&&(e.log("pan to initial location",a.initial.gpsCoordinates),c(a.initial.gpsCoordinates))}),Object(o.e)(function(){return e.geolocationPoint},function(e){e&&c(e)})}();var O=Object(ee.a)(t).createDeliveryOrder;return l.a.createElement(te,{"data-testid":"DeliverMap"},c.latLng?l.a.createElement(a.b,{position:c.latLng,draggable:!0,onDragEnd:function(e){var t=e.latLng;c.log("resolve with drag"),g(Object(u.c)(t))}}):null,l.a.createElement("div",{className:"delivery__map__address"},l.a.createElement(Q,null)),l.a.createElement("div",{className:"delivery__map__submit"},l.a.createElement(j,{enabled:c.isDeliveryAddress&&!c.isResolving,onClick:O})))})},1067:function(e,t,n){"use strict";var r=n(58),a=n(0),o=n.n(a),i=n(134),c=n(39),l=n.n(c),s=n(67),u=n(42),d=n(1008),m=n(37),p=n(79),f=(n(408),n(52)),b=n(902),h=n(899),g=n(900),v=n(901),y=n(229),O=n(15),E=n(971),_=n(34),j=n(35),w=function(e){var t=e.minCount,n=e.maxCount,r=e.isValid,a="";if(0===t){if(!(n>0))return null;a=j.b._({id:"maximum {maxCount}",values:{maxCount:n}})}else if(0===n)a=j.b._({id:"minimum {minCount}",values:{minCount:t}});else if(t===n){var i=t;a=j.b._({id:"only {count}",values:{count:i}})}else a=j.b._({id:"minimum {minCount} and maximum {maxCount}",values:{minCount:t,maxCount:n}});var c={};return r||(c.color="red"),o.a.createElement("span",{style:c},"(",a,")")},k=n(97),C=n(1009);function I(){var e=Object(O.a)(["\n  position: absolute;\n  left: -0.6rem;\n  top: -0.4rem;\n  width: 2rem;\n  height: 2rem;\n  border-radius: 1rem;\n  background: ",";\n\n  &:hover {\n    background: "," !important;\n  }\n  &:active {\n    background: "," !important;\n  }\n  & .rectangle {\n    width: 45%;\n    position: absolute;\n    top: 45%;\n    left: 30%;\n    height: 4px;\n    background: white;\n  }\n"]);return I=function(){return e},e}var P=_.d.div(I(),function(e){return e.theme.primary},function(e){return e.theme.primaryHover},function(e){return e.theme.primary}),N=function(e){var t=e.onClick,n=Object(k.a)(e,["onClick"]);return o.a.createElement(P,Object.assign({onClick:t,className:"animated bounceIn","data-testid":"SidedishRemoveButton"},n),o.a.createElement("div",{className:"rectangle"}))},x=_.d.div.withConfig({displayName:"StyledSidedishCheckbox",componentId:"jpxm3x-0"})(["display:inline-block;position:relative;& .name{float:left;text-align:left;white-space:normal;max-width:13rem;}& .price{font-weight:bold;float:right;}& .count{display:inline-block;margin-left:0.5rem;}"]),T=o.a.memo(function(e){var t=e.sidedish,n=e.count,r=e.canBeSelected,a=e.canBeRemoved,i=e.className,c=e.onAdd,l=e.onRemove,s=Object(k.a)(e,["sidedish","count","canBeSelected","canBeRemoved","className","onAdd","onRemove"]),u=o.a.useCallback(function(){r&&c()},[r,c]);return o.a.createElement(x,{className:i},o.a.createElement(C.a,Object.assign({onClick:u,disabled:!r,size:"xs",outline:!0,width:"17.5rem","data-testid":"sidedishCheckbox__".concat(t.id)},s),o.a.createElement("div",{className:"name"},t.nameLabel,o.a.createElement("span",{key:n,className:"animated heartBeat count"},n>1&&"".concat(n,"x"))),o.a.createElement("div",{className:"price"},t.price.formattedValue)),a&&o.a.createElement(N,{onClick:l}))});function S(){var e=Object(O.a)(["\n  margin-top: 1rem;\n\n  & .sidedish__picker__checkbox {\n    @media (max-width: 370px) {\n      width: 100%;\n    }\n  }\n\n  & .sidedish__picker__category {\n    font-size: 1rem;\n    font-weight: bold;\n    text-align: left;\n    margin: 0 0 0.2rem 0.2rem;\n  }\n"]);return S=function(){return e},e}var M=_.d.div(S()),D=function(e){var t=e.recipe,n=e.selection,r=e.onAdd,i=e.onRemove,c=Object(E.b)(t.categories,n),l=c.canBeSelected,s=c.isCategoryValid;return o.a.createElement(M,{className:"food__sidedish__picker"},t.categories.map(function(e){return o.a.createElement(a.Fragment,{key:e.id},o.a.createElement("div",{className:"sidedish__picker__category"},e.nameLabel," ",o.a.createElement(w,{minCount:e.minCount,maxCount:e.maxCount,isValid:s(e)})),e.sideDishes.map(function(t){return o.a.createElement(T,{key:"".concat(t.id,"-").concat(e.id),sidedish:t,count:n.filter(function(e){return e===t.id}).length,isSelected:n.includes(t.id),canBeRemoved:n.includes(t.id),canBeSelected:l(e,t),onAdd:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(){return r(t.id)}),onRemove:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(){return i(t.id)}),className:"sidedish__picker__checkbox"})}))}))},A=n(228),R=n(95),z=o.a.memo(function(e){var t=e.selection,n=e.recipe,r=e.onConfirm,a=o.a.useState(!1),i=Object(m.a)(a,2),c=i[0],l=i[1],s=Object(E.b)(n?n.categories:[],t).isCategoryValid;return o.a.createElement(R.a,{className:Object(A.b)("modal__body__button","animated",{heartBeat:c}),disabled:c||!n||!n.categories.every(s),"data-testid":"CartOrderButton",onClick:function(){l(!0),r().catch(function(){l(!1)})}},j.b._("{0, plural, =0 {Order without sidedish} one {Order with this sidedish} other {Order with # sidedishes}}",{0:t.length}))}),F=[],L=function(e){var t=e.recipe,n=e.isLoading,r=e.initialSideDishes,a=void 0===r?F:r,i=e.onConfirm,c=e.onClose,u=o.a.useState([]),d=Object(m.a)(u,2),O=d[0],E=d[1];o.a.useEffect(function(){E(a)},[a]);var _=o.a.useCallback(function(){E([]),c()},[c]),j=function(){var e=Object(s.a)(l.a.mark(function e(){return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i(O);case 2:if(!e.sent){e.next=5;break}return _(),e.abrupt("return",!0);case 5:return e.abrupt("return",!1);case 6:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),w=function(e){E(function(t){return f.RM.append(e,t)})},k=function(e){E(function(t){return f.RM.remove(f.RM.indexOf(e,t),1,t)})};return o.a.createElement(b.a,{isOpen:null!==t,toggle:_,className:"modal__container",autoFocus:!0,backdrop:"static",fade:!1,"data-testid":"CartModal"},o.a.createElement(h.a,{toggle:_,tag:g.a,className:"modal__header"},o.a.createElement("span",null,o.a.createElement(p.Trans,{id:"Do you want to add something?"}))),o.a.createElement(v.a,{className:"modal__body"},o.a.createElement("div",{className:"modal__body__content"},n?o.a.createElement(y.a,null):t?o.a.createElement(o.a.Fragment,null,o.a.createElement("h3",{className:"modal__body__food__name"},t.nameLabel),o.a.createElement("span",{className:"modal__body__food_description"},t.descriptionLabel),o.a.createElement(D,{recipe:t,selection:O,onAdd:w,onRemove:k})):o.a.createElement(p.Trans,{id:"We sorry, but the item is unavailable at this moment."})),o.a.createElement("div",{className:"modal__body__button__line"},o.a.createElement("div",{className:"modal__body__button__strip"}),o.a.createElement(z,{recipe:t,selection:O,onConfirm:j}))))},G=Object(r.a)(function(e){var t=e.orderId,n=Object(i.a)(),r=n.addToCartRecipeId,a=Object(u.y)({recipeId:r},{skip:null===t||null===r,fetchPolicy:"cache-first"}),c=a.data,m=a.loading,p=Object(d.a)(),f=o.a.useCallback(function(){var e=Object(s.a)(l.a.mark(function e(n){var a;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==t&&null!==r){e.next=2;break}return e.abrupt("return",!1);case 2:return e.next=4,p(r,n);case 4:return a=e.sent,e.abrupt("return",Boolean(a));case 6:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),[p,t,r]),b=o.a.useCallback(function(){n.addToCart(null)},[n]);return o.a.createElement(L,{recipe:m?null:c.recipe,onConfirm:f,onClose:b,isLoading:m})}),B=n(1071),V=n(24),W=Object(r.a)(function(e){var t=e.orderId,n=Object(V.b)(),r=n.order,a=n.cart,i=r.changeCartItemId,c=Object(u.x)({itemId:i},{skip:null===t||null===i}),d=c.data,p=c.loading,b=Object(u.m)(),h=Object(m.a)(b,1)[0],g=o.a.useCallback(function(){var e=Object(s.a)(l.a.mark(function e(n){var r;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==t&&null!==i){e.next=2;break}return e.abrupt("return",!1);case 2:return e.next=4,h({itemId:i,sideDishes:n,orderId:t,withGoods:a.withGoods});case 4:return r=e.sent,e.abrupt("return",Boolean(r));case 6:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),[t,i,h]),v=o.a.useCallback(function(){r.changeCartItem(null)},[r]),y=o.a.useMemo(function(){return p?void 0:d.item.sideDishes.map(f.RM.path(["recipe","id"]))},[p,d]);return o.a.createElement(L,{recipe:p?null:d.item.recipe,initialSideDishes:y,onConfirm:g,onClose:v,isLoading:p})});n.d(t,"a",function(){return H});var H=Object(r.a)(function(e){var t=e.isReadonly,n=void 0!==t&&t,r=Object(i.a)(),a=r.orderId;return o.a.createElement(o.a.Fragment,null,o.a.createElement(G,{orderId:a}),o.a.createElement(W,{orderId:a}),o.a.createElement(B.a,{orderId:a,isReadonly:n||r.disableInteraction}))})},1068:function(e,t,n){"use strict";var r=n(50),a=n(58),o=n(0),i=n.n(o),c=n(24),l=n(37),s=n(15),u=n(34),d=n(228),m=n(1011),p=n.n(m),f=n(1015),b=n(96);function h(){var e=Object(s.a)(["\n    flex-wrap: nowrap;\n    overflow-x: auto;\n    overflow-y: hidden;\n    box-shadow: inset -15px -5px 15px -14px rgba(0, 0, 0, 0.6);\n    margin: 0;\n    border-top-left-radius: 0;\n    background-color: #f3f3f3;\n    opacity: 0.94;\n  "]);return h=function(){return e},e}function g(){var e=Object(s.a)(["\n    flex-wrap: wrap;\n  "]);return g=function(){return e},e}var v=u.d.div.withConfig({displayName:"StyledCategoryNavigator",componentId:"wpfto8-0"})(["background-color:#d4d4d4;border-top-left-radius:0.6rem;padding:0.7rem 0.5rem 0 0.2rem;position:sticky;top:0;z-index:1;user-select:none;display:flex;"," "," a.link{text-align:center;color:#595959 !important;display:inline-block;min-width:4rem;cursor:pointer;margin:0 0.2rem;&:hover,&.active{color:#5ca651 !important;border-color:#5ca651;}}div.circle{background-color:white;border:1px solid #595959;border-radius:2rem;width:2.6rem;height:2.6rem;margin:0 auto;padding:0;&:hover,a.link.active > &{border-color:#5ca651;}& span::before,& span::after{margin:0;padding:0;font-size:1.7rem;}}div.description{font-size:0.9rem;margin-top:0.2rem;max-width:5rem;}"],Object(b.c)(g()),Object(b.d)(h())),y=function(e){var t=e.categories,n=Object(o.useState)(0),r=Object(l.a)(n,2),a=r[0],c=r[1];return i.a.createElement(v,{"data-testid":"CategoryNavigator"},0===t.length?null:t.map(function(e,t){return i.a.createElement(p.a.Link,{to:e.nameLabel,key:e.id,className:Object(d.b)("link",{active:a===t}),onSetActive:function(){return c(t)},offset:-168,smooth:!0,spy:!0,title:e.nameLabel},i.a.createElement("div",{className:"circle"},i.a.createElement("span",{className:"flaticon-".concat(e.pictogram)})),i.a.createElement("div",{className:"description"},i.a.createElement(f.a,{lines:2},e.nameLabel)))}))},O=n(79),E=n(229),_=n(1008);function j(){var e=Object(s.a)(["margin: 1rem 0 0.4rem 1rem;"]);return j=function(){return e},e}var w=u.d.div.withConfig({displayName:"FoodCategoryStyled",componentId:"sc-1bpyym5-0"})(["color:#474747;display:block;font-size:1.6rem;& a{text-decoration:none;}"]),k=Object(u.d)("h3").withConfig({displayName:"FoodCategoryTitleStyled",componentId:"sc-1bpyym5-1"})(["",";"],Object(b.d)(j())),C=i.a.memo(function(e){var t=e.category,n=e.children;return i.a.createElement(p.a.Element,{name:t.nameLabel},i.a.createElement(w,null,i.a.createElement(k,null,t.nameLabel),n))}),I=(n(1087),n(42)),P=n(134);function N(){var e=Object(s.a)(["\n    left: -0.6rem;\n    top: -0.7rem;\n  "]);return N=function(){return e},e}var x=u.d.div.withConfig({displayName:"FoodMenuItemStyled",componentId:"sc-1uxwtjp-0"})(["padding:1rem 0.5rem 0.3rem 1.1rem;border:1px solid #d5d5d5 !important;margin:0 0 0.4rem 0;border-radius:0.8rem;cursor:pointer;position:relative;min-height:6rem;user-select:none;&:hover{background-color:#c9e8d7;}background-color:",";h4{font-size:1rem;font-weight:700;color:#404040;margin-bottom:0.1rem;margin-right:6rem;}p{color:#666666;margin:0.6rem 0 0 0;font-size:0.9rem;max-height:2.5rem;-webkit-line-clamp:2;overflow:hidden;}& div.presence{background-color:",";float:left;position:absolute;left:-1.2rem;padding:0.4rem 0.6rem;color:white;border-radius:1.8rem;font-size:0.9rem;",";}"],function(e){return e.isActive?"#b3ebcc":"white"},function(e){return e.theme.secondary},Object(b.d)(N())),T=u.d.img.withConfig({displayName:"FoodMenuItemImage",componentId:"sc-1uxwtjp-1"})(["width:6rem;height:6rem;display:block;float:left;margin:-1.05rem 1rem 0 -1.2rem;border-radius:0.8rem 0 0 0.8rem;object-fit:cover;"]),S=u.d.div.withConfig({displayName:"FoodMenuItemPriceCorner",componentId:"sc-1uxwtjp-2"})(["border-top-width:1.8rem;border-top-style:solid;border-top-color:"," !important;position:absolute;right:4.799rem;top:1rem;width:0;height:0;border-left:1.8rem solid transparent;"],function(e){return e.theme.primary}),M=u.d.div.withConfig({displayName:"FoodMenuItemPrice",componentId:"sc-1uxwtjp-3"})(["background-color:"," !important;position:absolute;right:0;top:1rem;width:4.8rem;height:1.8rem;padding:0.12rem 0.7rem 0.3rem 0rem;font-weight:500;font-size:1.1rem;color:white;text-align:right;overflow:hidden;white-space:nowrap;"],function(e){return e.theme.primary}),D=i.a.memo(function(e){var t=e.recipe,n=e.presence,r=e.onAddToCart,o=Object(P.a)(),c=t.sideDishCount>0,s=i.a.useCallback(function(){r(t.id,c)},[c,r,t.id]),u=Object(I.i)({fetchPolicy:"cache-first"}),m=Object(l.a)(u,1)[0],p=i.a.useCallback(function(){c&&m({recipeId:t.id})},[c,m,t.id]),b=i.a.useRef(-1);return Object(a.d)(function(){return i.a.createElement(x,{onClick:s,onMouseEnter:p,isActive:o.lastActiveRecipeId===t.id,"data-testid":"foodMenuItem__".concat(t.id)},t.image&&i.a.createElement(T,{src:t.image,alt:t.nameLabel}),i.a.createElement(S,null),i.a.createElement(M,{"data-testid":"foodMenuItem__Price__".concat(t.id)},t.price.formattedValue),function(){var e=n.get(t.id);if(!e)return b.current=-1,null;var r=Object(d.b)("presence","animated",{pulse:e>1||b.current>0,zoomIn:1===e&&0===b.current||-1===b.current});return b.current=e,i.a.createElement("div",{key:e,className:r},"".concat(e,"x"))}(),i.a.createElement("h4",{title:t.nameLabel},i.a.createElement(f.a,{lines:2,"data-testid":"foodMenuItem__Name__".concat(t.id)},t.nameLabel)),i.a.createElement("p",null,i.a.createElement(f.a,{lines:2,"data-testid":"foodMenuItem__Description__".concat(t.id)},t.descriptionLabel)))})}),A=n(11);function R(){var e=Object(s.a)(["\n      margin: 0 0.7rem 1rem 0.7rem;\n      padding: 0 0 4rem 0;\n    "]);return R=function(){return e},e}function z(){var e=Object(s.a)(["\n      margin: 0 1.4rem 1rem 1.6rem;\n      padding: 2rem 0 2rem 0;\n    "]);return z=function(){return e},e}function F(){var e=Object(s.a)(["\n    background: #eee9e7;\n    background-size: cover;\n    background-attachment: scroll;\n  "]);return F=function(){return e},e}function L(){var e=Object(s.a)(["background: white;"]);return L=function(){return e},e}var G=u.d.div.withConfig({displayName:"StyledFoodMenu",componentId:"sc-1ynjjri-0"})(["border-radius:0 0 0.6rem 0.6rem;",";",";& > div{",";",";}"],Object(b.c)(L()),Object(b.d)(F()),Object(b.c)(z()),Object(b.d)(R())),B=i.a.memo(function(e){var t=e.orderId,n=e.categories,r=e.isLoading,a=Object(c.b)(),o=a.order,s=a.config,u=a.user,d=function(e){var t=Object(I.A)({orderId:e},{skip:!e,fetchPolicy:"cache-only"}),n=t.data,r=t.loading,a=i.a.useState(function(){return A.observable.map()}),o=Object(l.a)(a,1)[0];return r||Object(A.runInAction)(function(){o.clear(),n.order.presence.forEach(function(e){var t=e.recipe.id;o.has(t)||o.set(t,0),o.set(t,o.get(t)+1)})}),o}(t),m=Object(_.a)(),p=i.a.useCallback(function(e,t){o.disableInteraction||(d.size>=s.orderItemsMax?u.showOrderLimit():t?o.addToCart(e):(o.setUsedRecipeId(e),m(e)))},[s.orderItemsMax,m,o,d,u]);return i.a.createElement(G,{"data-testid":"FoodMenu"},i.a.createElement("div",null,r?i.a.createElement(E.a,{noMargin:!0}):0===n.length?i.a.createElement("h3",null,i.a.createElement(O.Trans,{id:"Food menu is empty. We are sorry."})):i.a.createElement(i.a.Fragment,null,n.map(function(e){return i.a.createElement(C,{key:e.id,category:e},e.recipes.map(function(e){return i.a.createElement(D,{key:e.id,recipe:e,presence:d,onAddToCart:p})}))}))))}),V=n(970),W=n(126),H=n(35),q=function(){var e=Object(c.b)().user;return Object(a.d)(function(){return i.a.createElement(W.a,{isOpen:!e.orderLimitAlertHidden,onClose:e.hideOrderLimit,headerText:H.b._("Limit has been reached")},H.b._("The maximum number of items in the order has been reached"))})};n.d(t,"a",function(){return U});var U=Object(a.a)(function(){var e=Object(c.b)(),t=e.order,n=e.user,a=Object(V.a)(t.branchId),o=a.data,l=a.loading,s=a.refetch;Object(r.e)(function(){return n.language},function(){return s()});var u=i.a.useMemo(function(){return l?[]:o.wareCategories.filter(function(e){return e.recipes.length>0})},[l,o]);return i.a.createElement(i.a.Fragment,null,i.a.createElement(q,null),i.a.createElement(y,{categories:u}),i.a.createElement(B,{orderId:t.orderId,categories:u,isLoading:l}))})},1069:function(e,t,n){"use strict";var r=n(0),a=n.n(r),o=n(1435),i=n(948),c=n(35),l=function(){return a.a.createElement(o.a,null,a.a.createElement(i.a,{name:"email",type:"email",autoComplete:"email",placeholder:c.b._("E-mail")}))},s=n(1436),u=function(){return a.a.createElement(o.a,null,a.a.createElement(s.a,null,a.a.createElement(i.a,{name:"firstname",autoComplete:"given-name",placeholder:c.b._("First name")}),a.a.createElement(i.a,{name:"lastname",autoComplete:"family-name",placeholder:c.b._("Last name")})))},d=n(1437),m=function(){var e=c.b._("eg. ingredients change, company...");return a.a.createElement(o.a,null,a.a.createElement(i.a,{name:"note",type:"textarea",placeholder:c.b._("Note"),title:e,errorForceDisplay:!0}),a.a.createElement(d.a,null,e))},p=n(993),f=function(){var e="Mobile Safari"===new p.UAParser(window.navigator.userAgent).getBrowser().name;return a.a.createElement(o.a,null,a.a.createElement(s.a,null,a.a.createElement(i.a,{name:"phonePrefix",autoComplete:e?"off":"tel-country-code",placeholder:"Prefix"}),a.a.createElement(i.a,{name:"phone",type:"tel",autoComplete:"tel-national",placeholder:c.b._("Phone"),style:{width:"55%"}})))};n.d(t,"a",function(){return b});var b=function(){return a.a.createElement(a.a.Fragment,null,a.a.createElement(u,null),a.a.createElement(f,null),a.a.createElement(l,null),a.a.createElement(m,null))}},1070:function(e,t,n){"use strict";var r=n(37),a=n(79),o=(n(408),n(12)),i=n(52),c=n(135),l=n(58),s=n(0),u=n.n(s),d=n(902),m=n(899),p=n(900),f=n(901),b=n(24),h=n(95),g=n(42),v=n(35),y=n(34),O=n(129);function E(e,t,n){var r=Object(c.startOfMinute)(function(e,t){return Object(c.addMinutes)(function(e,t){return Object(c.subMinutes)(e,Object(c.getMinutes)(e)%t)}(e,t),t)}(e,n)),a=[],o=Object(c.endOfMinute)(Object(c.subMinutes)(t,1));do{a.push(r),r=Object(c.addMinutes)(r,n)}while(r<=o);return a}var _=n(97),j=n(1009),w=n(236),k=y.d.div.withConfig({displayName:"Time",componentId:"c3eeou-0"})(["font-size:1.2rem;"]),C=function(e){var t=e.time,n=Object(_.a)(e,["time"]);return u.a.createElement(j.a,Object.assign({size:"xs",outline:!0,width:"10rem","data-testid":"timePickerButton__".concat(t.getTime())},n),u.a.createElement(k,null,Object(w.b)(t)))},I=y.d.div.withConfig({displayName:"TimePickerContainer",componentId:"sc-1341ije-0"})(["margin-top:1rem;"]),P=y.d.div.withConfig({displayName:"TimePickerDay",componentId:"sc-1341ije-1"})(["font-size:1rem;font-weight:bold;text-align:left;margin:0 0 0.2rem 0.2rem;"]),N=function(e){var t=e.minDate,n=e.maxDate,o=e.minuteStep,i=e.onStepChange,l=e.initialTime,d=e.filterIntervals,m=void 0===d?[]:d,p=u.a.useMemo(function(){var e=E(t,n,o);return m.length?e.filter(function(e){return m.some(Object(O.isWithinInterval)(e))}):e},[t,n,o,m]),f=u.a.useMemo(function(){return Object(c.eachDayOfInterval)({start:t,end:n})},[t,n]),b=u.a.useState(0),h=Object(r.a)(b,2),g=h[0],v=h[1];return u.a.useEffect(function(){l&&v(Object(c.closestIndexTo)(l,p))},[l,p]),u.a.useEffect(function(){i(p[g])},[i,g,p]),u.a.createElement(I,null,f.map(function(e){return u.a.createElement(s.Fragment,{key:e.getDate()},u.a.createElement(P,null,u.a.createElement(a.DateFormat,{value:e,format:{month:"long",day:"numeric",weekday:"long"}})),p.map(function(t,n){return Object(c.isEqual)(e,Object(c.startOfDay)(t))?u.a.createElement(C,{key:t.getTime(),time:t,isSelected:n===g,canBeSelected:!0,onClick:function(){v(n),i(t)}}):null}))}))};n.d(t,"a",function(){return x});var x=Object(l.a)(function(){var e=Object(b.b)(),t=Object(b.b)(),n=t.order,l=t.cart,s=Object(g.I)({branchId:n.branchId},{skip:!e.initialized||!n.branchId}),y=s.data,O=s.loading,E=Object(g.o)(),_=Object(r.a)(E,1)[0],j=u.a.useRef(n.deliverAt),w=function(){var e=j.current;_({orderId:n.orderId,deliverAt:e&&Object(o.isoDate)(e),withGoods:l.withGoods}),n.setDeliverAt(e),n.closeTimePicker()},k=function(){return O?null:{minDate:Object(c.addMinutes)(function(){var e=y.companyBranch;return e.isOpen||!e.willOpenAt?new Date:new Date(e.willOpenAt)}(),function(){var e=y.companyBranch,t=e.defaultDeliveryTime,r=e.defaultPickupTime;return n.usingDeliveryOrderMethod?t:n.usingPickupOrderMethod?r:0}()),maxDate:function(){var e=y.companyBranch;if(e.isOpen&&e.willCloseAt)return new Date(e.willCloseAt);var t=e.businessHours.find(i.RM.propEq("closed",!1));return t?new Date(t.closeAt):null}()}},C=function(e){return!(null===e||null===e.maxDate||Object(c.isAfter)(e.minDate,e.maxDate))},I=u.a.useCallback(function(e){j.current=e},[]);u.a.useEffect(function(){y&&y.companyBranch&&y.companyBranch.delayedDeliveryEnabled&&n.enableDelayedOrder()},[y,n]);var P=n.usingDeliveryOrderMethod?v.b._("Deliver at what time?"):v.b._("When you will pickup the order?");return u.a.createElement(d.a,{isOpen:n.timePickerOpen,toggle:n.closeTimePicker,className:"modal__container",autoFocus:!0,backdrop:"static",fade:!1},u.a.createElement(m.a,{toggle:n.closeTimePicker,tag:p.a,className:"modal__header"},u.a.createElement("span",null,P)),u.a.createElement(f.a,{className:"modal__body"},u.a.createElement("div",{className:"modal__body__content"},function(){var e=k();return null===e?null:C(e)?u.a.createElement(N,{minuteStep:15,minDate:e.minDate,maxDate:e.maxDate,initialTime:j.current,filterIntervals:y.companyBranch.businessHours.filter(i.RM.propEq("closed",!0)).map(function(e){return{start:new Date(e.openAt),end:new Date(e.closeAt)}}),onStepChange:I}):u.a.createElement(a.Trans,{id:"It's not possible to pick a specific order time at this moment."})}()),u.a.createElement("div",{className:"modal__body__button__line"},C(k())?u.a.createElement(u.a.Fragment,null,u.a.createElement("div",{className:"modal__body__button__strip"}),u.a.createElement(h.a,{size:"md",onClick:w,className:"modal__body__button"},u.a.createElement(a.Trans,{id:"Confirm time"}))):null)))})},1071:function(e,t,n){"use strict";var r=n(34),a=n(79),o=(n(1079),n(971)),i=n(11),c=n(58),l=n(0),s=n.n(l),u=n(381),d=n(24),m=n(95),p=n(1010),f=n(96),b=n(42),h=n(98),g=n(37),v=n(12),y=n(50),O=n(52);function E(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function _(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?E(n,!0).forEach(function(t){Object(h.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):E(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}n.d(t,"a",function(){return w});var j=r.d.div.withConfig({displayName:"StyledCartSystem",componentId:"sc-1cbvtgn-0"})(["& .animated{z-index:10;}"]),w=function(e){var t=e.orderId,n=e.isReadonly,r=Object(u.b)(),l=s.a.useMemo(k,[]),h=function(){var e=Object(d.b)(),t=e.order,n=e.cart,r=Object(v.useApolloClient)(),a=Object(y.g)().history,o=s.a.useCallback(function(e){t.changeCartItem(e)},[t]),i=Object(b.t)(),c=Object(g.a)(i,1)[0],l=s.a.useCallback(function(e){var t={itemId:e,withGoods:n.withGoods,withPresence:n.withPresence};c(t,{optimisticResponse:p(t),context:{noBatch:!0}})},[n,p,c]),u=s.a.useCallback(function(){a.push("/confirm")},[a]),m=s.a.useCallback(function(){a.push("/order")},[a]);return{cartModel:n,onItemEdit:o,onItemRemove:l,onPlaceOrder:u,onChangeOrder:m};function p(e){var a=r.readQuery({query:b.h,variables:{orderId:t.orderId,withGoods:n.withGoods,withPresence:n.withPresence}},!0);if(a){var o=O.RM.reject(Object(O.idPropEq)(e.itemId));return{__typename:"Mutation",remove:_({},a.order,{countWares:a.order.countWares-1,totalSum:_({},a.order.totalSum,{value:-1}),items:e.withGoods?o(a.order.items):a.order.items,presence:e.withPresence?o(a.order.presence):a.order.presence})}}}}(),E=h.cartModel,w=h.onItemEdit,C=h.onItemRemove,I=h.onPlaceOrder,P=h.onChangeOrder,N=s.a.useCallback(function(){return s.a.createElement(p.a,null,s.a.createElement(m.a,{onClick:n?P:I},n?s.a.createElement(a.Trans,{id:"Change order"}):s.a.createElement(a.Trans,{id:"Place order"})))},[n,P,I]),x=s.a.useCallback(function(){return s.a.createElement(a.Trans,{id:"Accessing your order"})},[]),T=Object(o.a)({colors:{primary:r.primary,sumRowBg:r.primary,sumRowText:"white",mobileSummaryItemCount:r.secondary},labels:l,isReadonly:n,mobileBreakpoint:f.e,backgroundImage:r.backgroundCart,onItemEdit:w,onItemRemove:C,renderMobileSubmit:N,renderGoodsLoading:x});s.a.useEffect(function(){return Object(i.autorun)(function(){E.updateDisplay(T.store.isMobile,T.store.showGoods)})},[T.store,E]);var S=Object(d.b)();return Object(c.d)(function(){var e=Object(b.w)({orderId:t,withGoods:E.withGoods,withPresence:E.withPresence},{skip:!S.initialized||!t,context:{noBatch:!0}}),n=e.data,r=e.loading;return s.a.useEffect(function(){r||(T.updateSummary(n.order),E.withGoods&&T.updateGoods(n.order))}),s.a.createElement(j,null,T.renderCart())})};function k(){return{noSideDish:s.a.createElement(a.Trans,{id:"Without sidedish"}),noCost:s.a.createElement(a.Trans,{id:"For free"}),cartSumHeader:function(e){return s.a.createElement(a.Trans,{id:"In the cart you have goods for {totalPrice}",values:{totalPrice:e}})},emptyCart:s.a.createElement(a.Trans,{id:"Cart is empty"}),totalDiscount:s.a.createElement(a.Trans,{id:"Total discount"}),coverPrice:s.a.createElement(a.Trans,{id:"Covers"}),transportFee:s.a.createElement(a.Trans,{id:"Delivery"}),totalSum:s.a.createElement(a.Trans,{id:"Total"}),tip:s.a.createElement(a.Trans,{id:"Tip"}),minimalOrderPrice:function(e){return s.a.createElement(a.Trans,{id:"Minimal price of order is {price}",values:{price:e}})}}}},1072:function(e,t,n){"use strict";var r=n(34),a=n(79),o=n(52),i=n(0),c=n.n(i),l=n(42),s=n(58),u=n(95),d=n(134),m=function(e){var t=e.orderMethod,n=e.onChange,r=e.children,a=Object(d.a)();return Object(s.d)(function(){return c.a.createElement(u.c,{selected:a.orderMethod===t,onClick:function(){a.useOrderMethod(t),n(a)},"data-testid":"orderMethod-".concat(t),"data-testselected":a.orderMethod===t},r)})};n.d(t,"a",function(){return f});var p=r.d.div.withConfig({displayName:"StyledOrderMethod",componentId:"lyg5h5-0"})(["padding:0.2rem;& button{font-size:1.3rem;margin:0.3rem 1rem 0.3rem 1rem;padding:0.3rem 1.2rem;height:2.7rem;line-height:1rem;white-space:nowrap;span:before{margin:0 0.8rem 0 0;font-size:2rem;font-weight:initial;}}"]),f=function(e){var t=e.onChange,n=void 0===t?o.RM.identity:t;return c.a.createElement(p,null,c.a.createElement(m,{orderMethod:l.a.Messenger,onChange:n},c.a.createElement("span",{className:"flaticon-transport"}),c.a.createElement(a.Trans,{id:"I want to deliver"})),c.a.createElement(m,{orderMethod:l.a.Pickup,onChange:n},c.a.createElement("span",{className:"flaticon-restaurant"}),c.a.createElement(a.Trans,{id:"I'll pick up"})))}},1073:function(e,t,n){"use strict";var r=n(34),a=n(79),o=n(0),i=n.n(o),c=n(42),l=n(58),s=n(24),u=n(95),d=Object(l.a)(function(e){var t=e.children,n=e.paymentMethod,r=Object(s.b)().order,a=r.paymentMethod===n;return i.a.createElement(u.c,{disabled:r.disableInteraction,selected:a,onClick:function(){r.setPaymentMethod(n)},"data-testid":"orderPaymentMethod-".concat(n)},i.a.createElement(m,{show:a}),t)});function m(e){return e.show?i.a.createElement("span",{className:"flaticon-mark order__payment__method__button__checked"}):i.a.createElement("div",{className:"order__payment__method__button__unchecked"})}n.d(t,"a",function(){return f});var p=r.d.div.withConfig({displayName:"StyledOrderPaymentMethod",componentId:"sc-12kj5sm-0"})(["margin:0 0 1.4rem 0;span::before{margin-left:0;margin-right:0.5rem;}button{position:relative;padding-top:0.3rem;margin-bottom:0.2rem;height:2.8rem;}button:first-of-type{margin-right:0.8rem;}.order__payment__method__button__unchecked{width:1.75rem;height:1.4rem;margin:0;display:inline-block;}"]),f=i.a.memo(function(){return i.a.createElement(p,null,i.a.createElement(d,{paymentMethod:c.f.Gopay},i.a.createElement("span",{className:"flaticon-credit-card"},i.a.createElement(a.Trans,{id:"Pay by card"}))),i.a.createElement(d,{paymentMethod:c.f.Cash},i.a.createElement("span",{className:"flaticon-money"},i.a.createElement(a.Trans,{id:"Pay by cash"}))))})},1074:function(e,t,n){},1076:function(e,t,n){},1079:function(e,t,n){},1087:function(e,t,n){},1426:function(e,t,n){"use strict";var r=n(34),a=n(58),o=n(0),i=n.n(o),c=n(1430),l=n(227),s=n(1431),u=(n(37),n(97),n(228),n(230),r.d.div.withConfig({displayName:"StyledFormCheckbox",componentId:"sc-915kzt-0"})(["display:flex;margin-bottom:0.5rem;input{-webkit-appearance:none;-moz-appearance:none;background-color:white;border:1px solid;border-color:#c5c5c5;width:2rem;height:2rem;min-width:2rem;border-radius:0.25rem;position:relative;margin:0;outline:none;&:checked{background-color:white;}&:checked:after{content:'\\2714';font-size:2rem;position:absolute;top:-0.5rem;left:0.1rem;color:#1d1d1d;overflow:hidden;}&.is-invalid{border-color:red;}}label{margin:0 0 0 0.8rem;vertical-align:top;}"])),d=n(134),m=n(35);n.d(t,"a",function(){return f});var p=r.d.div.withConfig({displayName:"StyledOrderAgreementBox",componentId:"zpwcdo-0"})(["button{padding:0 0.5rem;font-size:0.8rem;min-width:5rem;color:darkgray;}div.description{font-size:0.8rem !important;color:darkgray;margin:0.5rem 0 0.5rem 0;& .row{margin:0;}}"]),f=Object(a.a)(function(e){var t=e.agreement,n=e.isValid,r=e.isCollapsed,a=e.titleNode,o=e.descriptionNode,f=e.inputProps,b=e.buttonProps,h=Object(d.a)(),g="agreement-".concat(t.id);return i.a.createElement(p,null,i.a.createElement(u,null,i.a.createElement(c.a,Object.assign({},f,{id:g,type:"checkbox",disabled:h.disableInteraction,invalid:!n,onInvalid:function(e){n||e.target.setCustomValidity(m.b._("Please check this box if you want to proceed."))},onClick:function(e){e.target.setCustomValidity("")},"data-testid":"OrderAgreement".concat(t.isMandatory?"Mandatory":"")})),i.a.createElement("label",{htmlFor:g},a,t.isMandatory&&" * "),i.a.createElement(l.a,Object.assign({},b,{color:"link"}),r?m.b._("More...").toLocaleLowerCase():m.b._("Less").toLocaleLowerCase())),i.a.createElement(s.a,{isOpen:!r,className:"description"},o))})},938:function(e,t,n){"use strict";n.d(t,"a",function(){return i}),n.d(t,"b",function(){return c}),n.d(t,"c",function(){return l});var r=n(0),a=n.n(r),o=n(1427),i=function(e){var t=e.children;return a.a.createElement(o.a,{className:"pl-sm-0",sm:"12",md:"12",lg:"10",xl:"8"},t)},c=function(e){var t=e.children;return a.a.createElement(o.a,{className:"pl-sm-0",sm:"8",md:"8",lg:"6",xl:"5"},t)},l=function(e){var t=e.children;return a.a.createElement(o.a,{className:"pl-sm-0",sm:"4",md:"4",lg:"4",xl:"3"},t)}},948:function(e,t,n){"use strict";n.d(t,"b",function(){return p}),n.d(t,"a",function(){return f});var r=n(37),a=n(97),o=n(230),i=n(58),c=n(0),l=n.n(c),s=n(1432),u=n(1430),d=n(1433),m=n(134),p="<hidden>",f=Object(i.a)(function(e){var t=e.name,n=e.label,i=e.type,c=void 0===i?"text":i,f=e.errorForceDisplay,b=void 0!==f&&f,h=Object(a.a)(e,["name","label","type","errorForceDisplay"]),g=Object(m.a)(),v=Object(o.b)({name:t,type:c}),y=Object(r.a)(v,2),O=y[0],E=y[1],_=l.a.createElement(s.a,{for:t,hidden:!n},h.placeholder||n),j=b||E.touched;return l.a.createElement(l.a.Fragment,null,_,l.a.createElement(u.a,Object.assign({},h,O,{id:t,type:c,valid:E.touched&&!E.error,invalid:j&&Boolean(E.error),disabled:g.disableInteraction})),j&&E.error!==p?l.a.createElement(d.a,{valid:!1,tooltip:!1},E.error):null)})},950:function(e,t,n){"use strict";n.d(t,"a",function(){return o});var r=n(50),a=n(135);function o(e){var t=e.status,n=e.updateInterval,o=void 0===n?30*r.a:n,c=e.openSoonThresholdInMinutes,l=void 0===c?30:c,s=e.closeSoonThresholdInMinutes,u=void 0===s?30:s,d=Object(r.d)();Object(r.h)({interval:o,enabled:o>0});var m=d(),p=t.isOpen,f=t.willCloseAt,b=t.willOpenAt,h=b?Object(a.differenceInMinutes)(b,m):0,g=f?Object(a.differenceInMinutes)(f,m):0;return{decision:p?f&&g<=0?"Closed":i(f,u,m)?"ClosingSoon":"Open":b&&h<=0?"Open":i(b,l,m)?"OpeningSoon":"Closed",openingIn:h,closingIn:g}}function i(e,t,n){return!!e&&Math.abs(Object(a.differenceInMinutes)(e,n))<=t}},951:function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n(50),a=n(24),o=n(134);function i(){var e=Object(a.b)(),t=Object(o.a)(),n=Object(r.g)().history;Object(r.i)(function(){return e.initialized},function(){t.hasOrder||n.push("/")})}},966:function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n(0),a=n.n(r),o=n(35),i=function(e){var t=e.address;if(!t||!t.location)return a.a.createElement("span",null,o.b._("Unknown address"));var n=t.location;return a.a.createElement("span",null,"".concat(n.street," ").concat(n.houseNumber,",\n ").concat(n.city))}},967:function(e,t,n){"use strict";n.d(t,"a",function(){return c});var r=n(97),a=n(34),o=n(0),i=n.n(o),c=function(e){var t=e.imageName,n=(e.fallbackColor,e.fixed),o=void 0!==n&&n,c=e.size,l=void 0===c?"inherit":c,s=e.children,u=e.component,d=void 0===u?"div":u,m=Object(r.a)(e,["imageName","fallbackColor","fixed","size","children","component"]);return i.a.createElement(Object(a.d)(d).withConfig({displayName:"BackgroundThemed",componentId:"sc-1ju94id-0"})(["background-image:",";background-attachment:",";background-repeat:no-repeat;background-position:left top;background-size:",";"],function(e){return"url(".concat(e.theme[t],")")},function(e){return o?"fixed":"inherit"},function(e){return l}),m,s)};t.b=c},968:function(e,t,n){"use strict";n.d(t,"a",function(){return o});var r=n(24),a=n(42);function o(e){var t=Object(r.b)().business;return Object(a.J)({branchSpecific:!t.isBrand||!!e,brandId:t.brandId,branchId:e||t.branchId},{skip:!t.isValid,fetchPolicy:"cache-first",context:{noBatch:!0}})}},969:function(e,t,n){"use strict";n.d(t,"a",function(){return f});var r=n(79),a=n(949),o=n(22),i=n(58),c=n(0),l=n.n(c),s=n(24),u=n(40),d=n(229),m=function(e){return{streetViewControl:!1,mapTypeControl:!1,fullscreenControl:!1,clickableIcons:!1,draggableCursor:"default",minZoom:10,zoomControlOptions:{position:e?google.maps.ControlPosition.RIGHT_CENTER:google.maps.ControlPosition.RIGHT_TOP}}},p=["places"],f=Object(i.a)(function(e){var t=e.model,n=e.isMobile,i=void 0!==n&&n,c=e.children,f=Object(s.b)().user,b=Object(a.e)({id:"script-loader",version:"weekly",googleMapsApiKey:u.a.googleMapsApi,libraries:p,language:f.language}),h=b.isLoaded,g=b.loadError,v=b.url,y=Reflect.has(window,"google");return g||h&&!y?(g&&o.a.withScope(function(e){e.setExtras({googleMapUrl:v}),o.a.captureException(g)}),l.a.createElement("h2",null,l.a.createElement(r.Trans,{id:"Cannot load map right now. Please try again later."}))):h?l.a.createElement(a.a,{zoom:t.zoom,center:t.center,onCenterChanged:t.updatePosition,onZoomChanged:t.updateZoom,onClick:t.onClick,onLoad:t.setMapRef,onUnmount:function(){return t.setMapRef(null)},options:m(i),mapContainerStyle:{borderRadius:"0 0 0.5rem 0.5rem",overflow:"hidden",height:i?"100%":"calc(100% - 3.75rem)"}},"function"===typeof c?c():c):l.a.createElement(d.a,{noMargin:!0})})},970:function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n(50),a=n(24),o=n(42);function i(e){var t=Object(a.b)().user,n=Object(o.z)({branchId:e},{skip:!e,fetchPolicy:"cache-first"});return Object(r.e)(function(){return t.language},function(){n.refetch()}),n}},994:function(e,t,n){"use strict";var r=n(39),a=n.n(r),o=n(67),i=n(37),c=n(12),l=n(50),s=n(22),u=n(230),d=n(0),m=n.n(d),p=n(1434),f=n(1287),b=n(948),h=n(42),g=n(134),v=n(35),y=n(1415),O=n(24),E=n(231);var _=n(1058),j=n(380),w=n(1059),k=n(1070);n.d(t,"a",function(){return C}),n.d(t,"b",function(){return I});var C=50,I=function(e){var t=e.children,n=Object(g.a)(),r=Object(l.g)().history,c=function(){var e=Object(O.b)(),t=e.order,n=e.business,r=Object(l.g)().history,c=Object(E.a)(),s=Object(i.a)(c,2),u=s[0],d=s[1],m=Object(h.j)({fetchPolicy:"no-cache"}),p=Object(i.a)(m,1)[0],f=Object(y.a)(Object(o.a)(a.a.mark(function e(){var n,r,o,i=arguments;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>0&&void 0!==i[0]?i[0]:t.orderId,r=i.length>1?i[1]:void 0,n){e.next=4;break}return e.abrupt("return",null);case 4:return t.goPayStatusCheck(!0),e.next=7,p({orderId:n},{context:{invalidateWithToken:r}});case 7:return o=e.sent,t.goPayStatusCheck(!1),e.abrupt("return",o?o.status:null);case 10:case"end":return e.stop()}},e)})),{onError:function(e){var t=n.branch.phone;d(v.b._("Payment status check has failed"),e.length?e.join("<br />"):v.b._("We were unable to verify status of your payment. Please contact operator using number {phone}",{phone:t}))},onFinish:function(){r.replace("/finish")}});return{paymentErrorModal:u,executeGoPayPayment:f.executeGoPayPayment,paymentProcessing:f.paymentLoading}}(),d=c.executeGoPayPayment,I=c.paymentErrorModal,N=Object(h.u)(),x=Object(i.a)(N,1)[0],T=m.a.useMemo(function(){return f.object({firstname:f.string().required(b.b),lastname:f.string().required(b.b),phonePrefix:f.string().required(b.b),phone:f.string().required(b.b).matches(/\d+/,v.b._("Only numbers allowed for phone")),email:f.string().required(b.b).email(v.b._("Invalid email format")),note:f.string().notRequired().max(C,function(e){var t=e.value;return v.b._("Maximum length is {NOTE_MAX_LENGTH, plural, other {# characters}}. Typed {0, plural, one {# character} other {# characters}}",{0:t.length,NOTE_MAX_LENGTH:C})})})},[]),S=m.a.useCallback(function(){var e=Object(o.a)(a.a.mark(function e(t){var o,i,c,l,u;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n.submitStarted(),o=P(t,n),e.next=4,x(o);case 4:if(i=e.sent){e.next=8;break}return n.submitFailed(),e.abrupt("return");case 8:if(c=i.submitOrder,l=c.userErrors,u=c.gopayUrl,!l.length){e.next=12;break}return n.submitFailed(l),e.abrupt("return");case 12:if(n.submitFinished(),n.paymentMethod!==h.f.Cash){e.next=16;break}return r.replace("/finish"),e.abrupt("return");case 16:n.paymentMethod===h.f.Gopay?u?d(u):(s.a.withScope(function(e){e.setExtras({variables:o}),s.a.captureMessage("No gopayUrl received for GoPay payment")}),n.submitFailed()):(s.a.withScope(function(e){e.setExtras({variables:o}),s.a.captureMessage("Unknown payment mode ".concat(n.paymentMethod))}),n.submitFailed());case 17:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),[d,r,n,x]),M=Object(u.c)({initialValues:{firstname:"",lastname:"",email:"",phone:"",phonePrefix:"",note:"",agreements:[]},validationSchema:T,onSubmit:S});return m.a.useEffect(function(){n.root.cart.setOrderSubmitting(M.isSubmitting)},[M.isSubmitting,n.root.cart]),Object(l.b)(function(){var e=n.defaultPhonePrefix;e&&n.root.user.memoryApplied&&0===M.values.phonePrefix.length&&(M.setFieldValue("phonePrefix",e),e&&(M.setFieldTouched("phonePrefix",!0),setTimeout(function(){M.validateForm()},100)))}),m.a.useEffect(function(){console.log(M.values,M.errors)},[M.errors]),m.a.createElement(m.a.Fragment,null,I,m.a.createElement(u.a,{value:M},m.a.createElement(k.a,null),m.a.createElement(w.a,null),m.a.createElement(_.a,null),m.a.createElement(j.a,null),m.a.createElement(p.a,{onSubmit:M.handleSubmit},t)))};function P(e,t){return{orderId:t.orderId,customer:{firstName:e.firstname,lastName:e.lastname,emails:[{email:e.email}],phones:[{phone:"".concat(e.phonePrefix).concat(e.phone)}]},note:e.note,tips:t.tips,paymentGate:t.paymentMethod,deliverAt:t.deliverAt&&Object(c.isoDate)(t.deliverAt),agreements:e.agreements}}},995:function(e,t,n){},997:function(e,t,n){"use strict";n.d(t,"a",function(){return l});var r=n(228),a=n(58),o=n(0),i=n.n(o),c=n(24),l=Object(a.a)(function(e){var t=e.className,n=Object(c.b)(),a=n.business,o=n.user;return a.isValid?i.a.createElement(r.a,{availableLanguages:a.branch.supportedLanguages,selectedLanguage:o.language,onChange:function(e){e!==o.language&&(o.selectLanguage(e),setTimeout(function(){window.location.reload()},300))},className:t,backgroundColor:"white",arrowColor:"#5A5A5A"}):null})},998:function(e,t,n){"use strict";n.d(t,"a",function(){return d});var r=n(79),a=n(58),o=n(0),i=n.n(o),c=n(24),l=n(126),s=n(950),u=n(35),d=function(e){var t=e.status,n=Object(c.b)().user,o=Object(s.a)({status:t,updateInterval:0}),d=o.decision,m=o.openingIn;return Object(a.d)(function(){return i.a.createElement(l.a,{isOpen:("Closed"===d||"OpeningSoon"===d)&&!n.closingTimeAlertHidden,onClose:n.hideClosingTime,headerText:u.b._("We are closed right now")},u.b._("We're sorry, but we do not accept new orders at this time."),"OpeningSoon"===d&&i.a.createElement(r.Trans,{id:"You can prepare your order because we are {openingIn, plural, one {opening in 1 minute} other {opening in # minutes}} !",values:{openingIn:m}}))})}},999:function(e,t,n){"use strict";n.d(t,"a",function(){return i});n(1074);var r=n(382),a=n(0),o=n.n(a),i=function(){return o.a.createElement(o.a.Fragment,null,o.a.createElement("img",{src:Object(r.getLogo)("doveze"),className:"shop__header__icons__doveze","data-testid":"ShopHeaderIcons__AppLogo",alt:"logo Doveze.cz"}),o.a.createElement("img",{src:Object(r.getLogo)("mastercard"),className:"shop__header__icons__commerce",alt:"MasterCard"}),o.a.createElement("img",{src:Object(r.getLogo)("visa"),className:"shop__header__icons__commerce","data-testid":"ShopHeaderIcons__VisaLogo",alt:"VISA"}),o.a.createElement("img",{src:Object(r.getLogo)("gopay"),className:"shop__header__icons__gopay",alt:"GoPay","data-testid":"ShopHeaderIcons__GoPayLogo"}))}}}]);
//# sourceMappingURL=1.5ff198c9.chunk.js.map