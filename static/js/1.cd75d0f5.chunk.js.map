{"version":3,"sources":["common/ColStyle.tsx","hooks/useShopStatus.ts","common/ShopAddress.tsx","common/BackgroundThemed.tsx","common/BaseMap.tsx","segments/map/atoms/MapPanning.tsx","hooks/useOrderModel.ts","segments/shop/ShopClosingTimeModal.tsx","segments/shop/ShopHeaderIcons.tsx","segments/shop/ShopStatusDisplay.tsx","segments/finish/FinishViewFooter.tsx","segments/finish/FinishViewLoader.tsx","segments/finish/FinishViewOrder.tsx","segments/finish/FinishViewSupport.tsx","segments/destination/OrderMethod.tsx","common/ButtonStripe.tsx","hooks/useAddToCart.ts","common/PickerButton.tsx","segments/orderForm/OrderSubmitLine.tsx","segments/orderForm/OrderFormStorageNotice.tsx","segments/orderForm/OrderErrorModal.tsx","segments/orderForm/OrderFormAutoFill.tsx","segments/orderForm/OrderNoteInput.tsx","segments/orderForm/OrderFormSetup.tsx","segments/orderForm/OrderFormTipInput.tsx","segments/orderForm/OrderPaymentButton.tsx","segments/orderForm/OrderGoPayModal.tsx","segments/sidedishPicker/CategoryValidationMessage.tsx","segments/sidedishPicker/SidedishRemoveButton.tsx","segments/sidedishPicker/SidedishCheckbox.tsx","segments/sidedishPicker/SidedishPicker.tsx","segments/cart/CartOrderButton.tsx","segments/cart/CartModal.tsx","segments/cart/AddToCartModal.tsx","segments/cart/ChangeCartModal.tsx","segments/cart/CartView.tsx","segments/foodMenu/CategoryNavigator.tsx","segments/foodMenu/FoodCategory.tsx","segments/foodMenu/FoodMenuItem.tsx","segments/foodMenu/FoodMenu.tsx","segments/foodMenu/hooks/useFoodMenuPresence.ts","segments/foodMenu/OrderLimitModal.tsx","segments/foodMenu/FoodMenuView.tsx","segments/destination/GeolocationButton.tsx","segments/destination/ResolvedAddress.tsx","segments/destination/SearchInput.tsx","segments/destination/AddressInput.tsx","segments/map/AddressSubmit.tsx","segments/map/DeliveryMapPanning.tsx","segments/map/DeliveryMap.tsx","common/FormTextInput.tsx","segments/orderForm/OrderEmailInput.tsx","segments/orderForm/OrderNameInput.tsx","segments/orderForm/OrderPhoneInput.tsx","segments/orderForm/OrderPromoInput.tsx","segments/orderForm/OrderTimeButtons.tsx","segments/orderForm/OrderFormInputs.tsx","segments/timePicker/createTimeSteps.ts","segments/timePicker/TimePickerButton.tsx","segments/timePicker/TimePicker.tsx","segments/orderForm/OrderTimePicker.tsx","common/FormInputCheckbox.tsx","segments/orderForm/OrderAgreements.tsx","segments/cart/CartSystem.tsx","segments/cart/hooks/useCartControl.ts","segments/shop/logo-commerce-01.svg","segments/shop/logo-commerce-02.svg","segments/shop/logo-doveze.svg","segments/shop/logo-gopay.png"],"names":["__webpack_require__","d","__webpack_exports__","ColStyle","ColStyleLeft","ColStyleRight","react__WEBPACK_IMPORTED_MODULE_0__","react__WEBPACK_IMPORTED_MODULE_0___default","n","reactstrap__WEBPACK_IMPORTED_MODULE_1__","_ref","children","a","createElement","className","sm","md","lg","xl","_ref2","_ref3","useShopStatus","_speedlo_hooks__WEBPACK_IMPORTED_MODULE_0__","date_fns__WEBPACK_IMPORTED_MODULE_1__","status","_ref$updateInterval","updateInterval","SECOND","_ref$openSoonThreshol","openSoonThresholdInMinutes","_ref$closeSoonThresho","closeSoonThresholdInMinutes","getNow","useNow","useTimer","interval","enabled","now","isOpen","willCloseAt","willOpenAt","openingIn","differenceInMinutes","closingIn","decision","isSoon","time","threshold","Math","abs","ShopAddress","_i18n__WEBPACK_IMPORTED_MODULE_1__","address","location","_","concat","street","houseNumber","city","BackgroundThemed","imageName","_ref$fixed","fallbackColor","fixed","_ref$size","size","_ref$component","component","otherProps","Object","D_workspace_deepvision_doveze_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectWithoutProperties__WEBPACK_IMPORTED_MODULE_0__","React","styled","withConfig","displayName","componentId","props","theme","libraries","BaseMap","model","_React$useState","useState","_React$useState2","D_workspace_deepvision_doveze_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__","isLoaded","setLoaded","react__WEBPACK_IMPORTED_MODULE_3___default","_react_google_maps_api__WEBPACK_IMPORTED_MODULE_1__","id","googleMapsApiKey","appConfig","googleMapsApi","language","region","version","onLoad","mobx_react_lite__WEBPACK_IMPORTED_MODULE_2__","zoom","center","onCenterChanged","updatePosition","onZoomChanged","updateZoom","onClick","setMapRef","options","streetViewControl","mapTypeControl","fullscreenControl","zoomControlOptions","position","google","maps","ControlPosition","RIGHT_TOP","mapContainerStyle","borderRadius","overflow","height","MapPanning","mobx__WEBPACK_IMPORTED_MODULE_0__","mobx_react_lite__WEBPACK_IMPORTED_MODULE_1__","map","gps","useDisposable","autorun","isReady","panToLocation","useOrderModel","_app_useRoot__WEBPACK_IMPORTED_MODULE_0__","useRoot","order","ShopClosingTimeModal","_lingui_react__WEBPACK_IMPORTED_MODULE_0__","react__WEBPACK_IMPORTED_MODULE_2__","react__WEBPACK_IMPORTED_MODULE_2___default","_app_useRoot__WEBPACK_IMPORTED_MODULE_3__","_common_AlertModal__WEBPACK_IMPORTED_MODULE_4__","_hooks_useShopStatus__WEBPACK_IMPORTED_MODULE_5__","_i18n__WEBPACK_IMPORTED_MODULE_6__","user","_useShopStatus","useObserver","closingTimeAlertHidden","onClose","hideClosingTime","headerText","values","ShopHeaderIcons","react__WEBPACK_IMPORTED_MODULE_1__","react__WEBPACK_IMPORTED_MODULE_1___default","_common_ColStyle__WEBPACK_IMPORTED_MODULE_2__","_logo_commerce_01_svg__WEBPACK_IMPORTED_MODULE_3__","_logo_commerce_01_svg__WEBPACK_IMPORTED_MODULE_3___default","_logo_commerce_02_svg__WEBPACK_IMPORTED_MODULE_4__","_logo_commerce_02_svg__WEBPACK_IMPORTED_MODULE_4___default","_logo_doveze_svg__WEBPACK_IMPORTED_MODULE_5__","_logo_doveze_svg__WEBPACK_IMPORTED_MODULE_5___default","_logo_gopay_png__WEBPACK_IMPORTED_MODULE_6__","_logo_gopay_png__WEBPACK_IMPORTED_MODULE_6___default","src","logoDoveze","data-testid","alt","logoCommerce02","logoCommerce01","logoGoPay","StatusDisplayOpen","span","StatusDisplayClosed","ShopStatusDisplay","deliveryTime","pickupTime","react__WEBPACK_IMPORTED_MODULE_4___default","_lingui_react__WEBPACK_IMPORTED_MODULE_2__","closestBH","businessHours","closedNote","timingDisplay","usingDeliveryOrderMethod","defaultDeliveryTimeEnabled","usingPickupOrderMethod","defaultPickupTimeEnabled","0","formatOpenTime","openAt","openAtDate","Date","nowDate","format","hour","minute","isSameDay","D_workspace_deepvision_doveze_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread__WEBPACK_IMPORTED_MODULE_0__","weekday","value","CenteredButtonContainer","div","FinishViewFooter","_ref$finish","finish","androidApp","iosApp","Fragment","_common_Responsive__WEBPACK_IMPORTED_MODULE_5__","_lingui_react__WEBPACK_IMPORTED_MODULE_1__","href","url","reactstrap__WEBPACK_IMPORTED_MODULE_3__","color","_common_Buttons__WEBPACK_IMPORTED_MODULE_4__","to","toLocaleUpperCase","style","textAlign","FinishViewLoader","react_router_dom__WEBPACK_IMPORTED_MODULE_1__","_app_useRoot__WEBPACK_IMPORTED_MODULE_2__","_common_Pacman__WEBPACK_IMPORTED_MODULE_3__","_graph_generated__WEBPACK_IMPORTED_MODULE_4__","render","hasOrder","_useQOrderFinish","useQOrderFinish","branchId","orderId","data","loading","HeaderThemed","primary","PriceThemed","PriceCornerThemed","FinishViewOrder","_ref4","_ref5","orderPayments","some","hasMethod","PaymentTypeEnum","Cash","_i18n__WEBPACK_IMPORTED_MODULE_5__","Credit","getPaymentInfo","items","item","OrderItem","assign","key","_ref6","totalSum","getPaymentPrice","formattedValue","paymentType","payment","paymentMethod","enum","_ref7","recipe","sideDishes","nameLabel","length","RM","path","join","PhoneNumberLinkStyled","FinishViewSupport","branch","phone","OrderMethod","_graph_generated__WEBPACK_IMPORTED_MODULE_5__","_helpers_ramda__WEBPACK_IMPORTED_MODULE_6__","_i18n__WEBPACK_IMPORTED_MODULE_7__","OrderMethodButton","orderModel","orderMethod","onChange","onPrefetch","selected","onMouseEnter","useOrderMethod","data-testselected","DeliveryTypeEnum","Messenger","identity","Pickup","prefetchPickup","ButtonStripe","counter","NO_SIDEDISHES","useAddToCart","_useRoot","cartModel","cart","client","useApolloClient","_useMAddToCart","useMAddToCart","context","noBatch","addToCart","D_workspace_deepvision_doveze_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_2__","recipeId","arguments","undefined","variables","withGoods","withPresence","optimisticResponse","makeOptimisticResponse","current","readQuery","query","QCartDocument","__typename","add","countWares","readFragment","fragment","FRecipeFragmentDoc","fragmentName","D_workspace_deepvision_doveze_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_1__","automatic","price","addItem","presence","PickerButtonStyled","isSelected","width","tertiary","tertiaryText","tertiaryHover","PickerButton","onSelect","buttonProps","OrderSubmitLine","classnames__WEBPACK_IMPORTED_MODULE_1__","classnames__WEBPACK_IMPORTED_MODULE_1___default","_common_Buttons__WEBPACK_IMPORTED_MODULE_3__","_ref$canSubmit","canSubmit","isSubmitting","classNames","heartBeat","disabled","NoticeButton","Button","StorageNotice","Alert","mediaDesktop","_templateObject","mediaMobile","_templateObject2","OrderFormStorageNotice","observer","_useQOrderForm","useQOrderForm","skip","rememberForm","setFormRememberYes","setFormRememberNo","OrderErrorModal","reactstrap__WEBPACK_IMPORTED_MODULE_4__","hasErrors","toggle","clearErrors","tag","Container","submitErrors","error","idx","OrderFormAutoFill","onFill","OrderNoteInput","react_form__WEBPACK_IMPORTED_MODULE_2__","_i18n__WEBPACK_IMPORTED_MODULE_4__","isTooLong","trim","OrderNoteInputValidator","ingredientsDescription","field","validate","fieldApi","type","placeholder","title","e","setValue","target","onBlur","setTouched","valid","invalid","Boolean","MAX_LENGTH","getDefaultFormValues","firstname","lastname","email","phonePrefix","defaultPhonePrefix","note","tips","agreements","OrderFormSetup","business","history","useRouterContext","isVamInitialized","initVam","_useMSubmitOrder","useMSubmitOrder","_useMSubmitOrder2","D_workspace_deepvision_doveze_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_3__","submitOrder","_useAlertModal","useAlertModal","_useAlertModal2","paymentError","alertPaymentError","_useGoPay","useGoPay","D_workspace_deepvision_doveze_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2__","D_workspace_deepvision_doveze_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default","mark","_callee","result","_args","wrap","_context","prev","next","abrupt","goPayStatusCheck","QOrderPaymentStatusDocument","sent","stop","onError","errors","_i18n__WEBPACK_IMPORTED_MODULE_17__","onFinish","replace","executeGoPayPayment","paymentLoading","useDebounceCallback","_callee2","formState","formApi","_context2","logOrder","updateVam","mergeFormAgreements","_x","_x2","apply","this","onSubmit","useCallback","_callee3","_result$submitOrder","userErrors","gopayUrl","_context3","rememberFormValues","getSubmitVariables","submitFailed","PaymentGateEnum","Gopay","_x3","react__WEBPACK_IMPORTED_MODULE_9___default","react_form__WEBPACK_IMPORTED_MODULE_10__","defaultValues","validateOnMount","reactstrap__WEBPACK_IMPORTED_MODULE_11__","submitForm","formValue","agreement","formAgreement","find","propEq","isConfirmed","TipContainer","OrderFormTipInput","_useMOrderTipUpdate","useMOrderTipUpdate","updateTip","useEffect","usingPaymentMethodWithTips","Number","reactstrap_lib_FormGroup__WEBPACK_IMPORTED_MODULE_6___default","react_form__WEBPACK_IMPORTED_MODULE_5__","reactstrap_lib_Input__WEBPACK_IMPORTED_MODULE_7___default","setTips","_i18n__WEBPACK_IMPORTED_MODULE_10__","OrderPaymentButton","react_form__WEBPACK_IMPORTED_MODULE_1__","method","setPaymentMethod","Checkmark","show","TextPadding","OrderGoPayModal","_common_AlertModal__WEBPACK_IMPORTED_MODULE_5__","isGoPayChecking","_common_Pacman__WEBPACK_IMPORTED_MODULE_6__","noMargin","CategoryValidationMessage","minCount","maxCount","isValid","message","i18n","count","react_default","StyledSidedishRemoveButton","primaryHover","SidedishRemoveButton","objectWithoutProperties","StyledSidedishCheckbox","SidedishCheckbox","memo","sidedish","canBeSelected","canBeRemoved","onAdd","onRemove","outline","SidedishRemoveButton_SidedishRemoveButton","StyledSidedishPicker","SidedishPicker_templateObject","SidedishPicker","selection","_useSideDishValidator","useSideDishValidator","categories","isCategoryValid","category","react","CategoryValidationMessage_CategoryValidationMessage","filter","i","includes","_onAdd","toString","_onRemove","CartOrderButton","onConfirm","slicedToArray","isConfirming","setConfirming","Buttons","every","finally","EMPTY_SELECTION","CartModal","isLoading","_ref$initialSideDishe","initialSideDishes","updateSelection","onCloseModal","onConfirmAndClose","asyncToGenerator","regenerator_default","onAddSidedish","sidedishId","sel","append","onRemoveSidedish","remove","indexOf","reactstrap_es","autoFocus","backdrop","fade","_lingui_react","Pacman","descriptionLabel","SidedishPicker_SidedishPicker","AddToCartModal","addToCartRecipeId","_useQCartRecipe","useQCartRecipe","fetchPolicy","executeAddToCart","CartModal_CartModal","ChangeCartModal","itemId","changeCartItemId","_useQCartItem","useQCartItem","_useMChangeCartItem","useMChangeCartItem","changeItem","changeCartItem","sideDishesSelection","useMemo","CartView","_ref$isReadonly","isReadonly","CartSystem","CategoryNavigatorContainer","CategoryNavigator","_useState","_useState2","activeCategoryIndex","setActiveCategoryIndex","modules_default","Link","active","onSetActive","offset","smooth","spy","pictogram","Truncate","lines","FoodCategoryStyled","FoodCategoryTitleStyled","FoodCategory_templateObject","Element","name","FoodMenuItemStyled","isActive","FoodMenuItemImage","img","FoodMenuItemPriceCorner","FoodMenuItemPrice","FoodMenuItemCount","secondary","FoodMenuItem_templateObject","FoodMenuItem","onAddToCart","hasSideDishes","sideDishCount","prefetchFood","previousPresence","useRef","lastActiveRecipeId","image","recipePresence","get","pulse","zoomIn","renderPresence","FoodMenuStyled","FoodMenu_templateObject","FoodMenu_templateObject2","FoodMenuListStyled","_templateObject3","_templateObject4","config","_useQFoodMenuCartPres","useQFoodMenuCartPresence","observable","runInAction","clear","forEach","has","set","useFoodMenuPresence","hasSideDish","orderItemsMax","showOrderLimit","setUsedRecipeId","foodMenu_FoodCategory","recipes","foodMenu_FoodMenuItem","OrderLimitModal","AlertModal","orderLimitAlertHidden","hideOrderLimit","FoodMenuView","_useQFoodMenu","useQFoodMenu","wareCategories","cat","OrderLimitModal_OrderLimitModal","segments_foodMenu_CategoryNavigator","foodMenu_FoodMenu","GeolocationButton","_ref2$isVisible","isVisible","addonType","ResolvedAddress","isResolving","onValidClick","dist_default","fadeIn","SearchInput","state","onSearch","debounce","_this","ev","setState","onKeyPress","inputRef","onInputMount","ref","setFocus","nextProps","isSearching","focus","inputProps","isHidden","classnames","address__input__hidden","innerRef","Component","AddressInputStyled","AddressInputBoxStyled","AddressInput","destination_ResolvedAddress","hasAddress","clearAddress","destination_SearchInput","autoComplete","withUserAddress","destination_GeolocationButton","attemptGeolocation","isGeolocationAvailable","hasFinishedSearch","isResolved","NoMouseAlert","isStreetAddress","inDeliveryLocation","renderErrorMessage","AddressSubmit","DeliveryMapPanning","useGInitialLocation","reaction","clickPoint","withUserLocation","clearClickPoint","panToGps","useFullComputed","geoPoint","logMap","geolocationPoint","initialLocation","gpsCoordinates","DeliveryMap","setBranch","createDeliveryOrder","when","validateUserLocation","DeliveryMapPanning_DeliveryMapPanning","latLng","lib","draggable","onDragEnd","latLngToGps","AddressInput_AddressInput","AddressSubmit_AddressSubmit","isDeliveryAddress","prefetchFoodMenu","FormTextInput","_ref$showFeedback","showFeedback","es","touched","emailRx","OrderEmailInputValidator","test","OrderEmailInput","FormTextInput_FormTextInput","OrderNameInput","OrderPhoneInputValidator","OrderPhonePrefixInputValidator","OrderPhoneInput","isMobileSafari","UAParser","window","navigator","userAgent","getBrowser","CodesPanel","OrderPromoInputUI","codes","onCodeAdd","onCodeRemove","_ref$autoSubmitAfterT","autoSubmitAfterTimeout","isValidating","setValidating","addCode","code","t0","onKeyDown","preventDefault","onPaste","OrderPromoInput","_useQOrderPromoCodes","useQOrderPromoCodes","_useMOrderPromoAdd","useMOrderPromoAdd","addCodeMutation","addOrderPromoCode","_useMOrderPromoRemove","useMOrderPromoRemove","removeCodeMutation","codeId","promoCodes","OrderTimeButtons","delayedOrderEnabled","deliverAt","setDeliverAt","openTimePicker","OrderFormInputs_OrderFormInputs","OrderFormInputs","OrderNameInput_OrderNameInput","OrderPhoneInput_OrderPhoneInput","OrderEmailInput_OrderEmailInput","OrderTimeButtons_OrderTimeButtons","orderForm_OrderPromoInput","createTimeSteps","start","end","minuteStep","startOfMinute","addMinutes","subMinutes","getMinutes","timeClampDown","timeClampUp","steps","endMinute","endOfMinute","push","Time","TimePickerButton","node_modules_react_default","getTime","formatTime","TimePickerContainer","TimePickerDay","TimePicker","minDate","maxDate","onStepChange","initialTime","_ref$filterIntervals","filterIntervals","allSteps","step","isWithinInterval","days","eachDayOfInterval","stepIdx","setStepIdx","closestIndexTo","day","node_modules_react","getDate","month","isEqual","startOfDay","TimePickerButton_TimePickerButton","OrderTimePicker","_useQOrderTimePicker","useQOrderTimePicker","_useMOrderDeliveryTim","useMOrderDeliveryTime","updateOrder","selectedTime","isoDate","closeTimePicker","renderModalContent","companyBranch","getStartTime","nextBusinessHour","closeAt","getEndTime","isAfter","minuteOffset","_data$companyBranch","defaultDeliveryTime","defaultPickupTime","getMinuteOffset","TimePicker_TimePicker","bhour","delayedDeliveryEnabled","enableDelayedOrder","header","timePickerOpen","CheckboxContainerStyled","CheckboxStyled","Input","LabelStyled","FormInputCheckbox","_ref2$defaultValue","defaultValue","checked","ButtonStyled","GdprAgreementStyled","OrderAgreements","descOpen","array","toggleId","display","hideConfirmed","FormInputCheckbox_FormInputCheckbox","isMandatory","dangerouslySetInnerHTML","__html","description","toLocaleLowerCase","useTheme","labels","getCartLabels","_useCartControl","onItemEdit","_useMRemoveCartItem","useMRemoveCartItem","removeItem","onItemRemove","makeOptimisticRemove","onPlaceOrder","onChangeOrder","rejectItem","reject","idPropEq","objectSpread","useCartControl","renderMobileSubmit","renderGoodsLoading","useCartSystem","colors","sumRowBg","sumRowText","mobileSummaryItemCount","mobileBreakpoint","backgroundImage","backgroundCart","updateDisplay","store","isMobile","showGoods","_useQCart","useQCart","updateSummary","updateGoods","renderCart","noSideDish","noCost","cartSumHeader","totalPrice","emptyCart","totalDiscount","coverPrice","transportFee","tip","minimalOrderPrice","module","exports","p"],"mappings":"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","file":"static/js/1.cd75d0f5.chunk.js","sourcesContent":["import React from 'react'\nimport { Col } from 'reactstrap'\n\nexport const ColStyle = ({ children }) => (\n  <Col className=\"pl-sm-0\" sm=\"12\" md=\"12\" lg=\"10\" xl=\"8\">\n    {children}\n  </Col>\n)\n\nexport const ColStyleLeft = ({ children }) => (\n  <Col className=\"pl-sm-0\" sm=\"8\" md=\"8\" lg=\"6\" xl=\"5\">\n    {children}\n  </Col>\n)\n\nexport const ColStyleRight = ({ children }) => (\n  <Col className=\"pl-sm-0\" sm=\"4\" md=\"4\" lg=\"4\" xl=\"3\">\n    {children}\n  </Col>\n)\n","import { SECOND, useNow, useTimer } from '@speedlo/hooks'\nimport { differenceInMinutes } from 'date-fns'\n\nimport { FCompanyBranchStatusFragment } from '../graph/generated'\n\nexport type TStatus = FCompanyBranchStatusFragment\n\nexport type TStatusDecision = 'Open' | 'Closed' | 'ClosingSoon' | 'OpeningSoon'\n\ninterface IProps {\n  status: TStatus\n  updateInterval?: number\n  openSoonThresholdInMinutes?: number\n  closeSoonThresholdInMinutes?: number\n  onRefresh?(): void\n}\n\nexport interface IShopStatus {\n  decision: TStatusDecision\n  openingIn: number\n  closingIn: number\n}\n\nexport function useShopStatus({\n  status,\n  updateInterval = 30 * SECOND,\n  openSoonThresholdInMinutes = 30,\n  closeSoonThresholdInMinutes = 30,\n}: IProps) {\n  const getNow = useNow()\n\n  useTimer({\n    interval: updateInterval,\n    enabled: updateInterval > 0,\n  })\n\n  const now = getNow()\n  const { isOpen, willCloseAt, willOpenAt } = status\n\n  let decision: TStatusDecision\n\n  const openingIn = willOpenAt ? differenceInMinutes(willOpenAt, now) : 0\n  const closingIn = willCloseAt ? differenceInMinutes(willCloseAt, now) : 0\n\n  if (isOpen) {\n    if (willCloseAt && closingIn <= 0) {\n      decision = 'Closed'\n    } else {\n      decision = isSoon(willCloseAt, closeSoonThresholdInMinutes, now)\n        ? 'ClosingSoon'\n        : 'Open'\n    }\n  } else {\n    if (willOpenAt && openingIn <= 0) {\n      decision = 'Open'\n    } else {\n      decision = isSoon(willOpenAt, openSoonThresholdInMinutes, now)\n        ? 'OpeningSoon'\n        : 'Closed'\n    }\n  }\n\n  const shopStatus: IShopStatus = {\n    decision,\n    openingIn,\n    closingIn,\n  }\n  return shopStatus\n}\n\nfunction isSoon(time: Maybe<string>, threshold: number, now: Date) {\n  return time ? Math.abs(differenceInMinutes(time, now)) <= threshold : false\n}\n","import React from 'react'\n\nimport { FAddressFragment } from '../graph/generated'\nimport { i18n } from '../i18n'\n\ninterface IProps {\n  address?: FAddressFragment\n}\n\nexport const ShopAddress: React.FC<IProps> = ({ address }) => {\n  if (!address || !address.location) {\n    return <span>{i18n.t`Unknown address`}</span>\n  }\n  const { location } = address\n  return (\n    <span>{`${location.street} ${location.houseNumber},\\n ${\n      location.city\n    }`}</span>\n  )\n}\n","import React from 'react'\nimport styled from 'styled-components/macro'\n\ninterface IProps {\n  imageName: string\n  className?: string\n  fallbackColor?: string\n  fixed?: boolean\n  size?: 'cover' | 'contain' | 'inherit'\n  children?: any\n  component?: any\n}\n\nexport const BackgroundThemed: React.FC<IProps> = ({\n  imageName,\n  fallbackColor = '#5b453c',\n  fixed = false,\n  size = 'inherit',\n  children,\n  component = 'div',\n  ...otherProps\n}) =>\n  React.createElement(\n    styled(component)`\n      background-image: ${props => `url(${props.theme[imageName]})`};\n      background-attachment: ${props => (fixed ? 'fixed' : 'inherit')};\n      background-repeat: no-repeat;\n      background-position: left top;\n      background-size: ${props => size};\n    `,\n    otherProps,\n    children,\n  )\n\nexport default BackgroundThemed\n","import { GoogleMap, LoadScript } from '@react-google-maps/api'\nimport { Observer } from 'mobx-react-lite'\nimport React from 'react'\n\nimport { appConfig } from '../config'\nimport { TMapModel } from '../models/MapModel'\n\ninterface IBaseMapProps {\n  model: TMapModel\n}\n\nconst getMapOptions = (): google.maps.MapOptions => {\n  return {\n    streetViewControl: false,\n    mapTypeControl: false,\n    fullscreenControl: false,\n    zoomControlOptions: {\n      position: google.maps.ControlPosition.RIGHT_TOP,\n    },\n  }\n}\n\nconst libraries = ['places']\n\nexport const BaseMap: React.FC<IBaseMapProps> = ({ model, children }) => {\n  const [isLoaded, setLoaded] = React.useState(false)\n\n  const renderMap = () => (\n    <Observer>\n      {() => (\n        <GoogleMap\n          zoom={model.zoom}\n          center={model.center}\n          onCenterChanged={model.updatePosition}\n          onZoomChanged={model.updateZoom}\n          onClick={model.onClick}\n          onLoad={model.setMapRef}\n          options={getMapOptions()}\n          mapContainerStyle={{\n            borderRadius: '0 0 0.5rem 0.5rem',\n            overflow: 'hidden',\n            height: 'calc(100% - 3.75rem)',\n          }}\n        >\n          {children}\n        </GoogleMap>\n      )}\n    </Observer>\n  )\n\n  return (\n    <LoadScript\n      id=\"script-loader\"\n      googleMapsApiKey={appConfig.googleMapsApi}\n      language=\"cz\"\n      region=\"CS\"\n      libraries={libraries}\n      version=\"weekly\"\n      onLoad={() => setLoaded(true)}\n    >\n      {isLoaded ? renderMap() : null}\n    </LoadScript>\n  )\n}\n","import { autorun } from 'mobx'\nimport { useDisposable } from 'mobx-react-lite'\nimport React from 'react'\n\nimport { GeoPoint } from '../../../helpers/gps'\nimport { TMapModel } from '../../../models/MapModel'\n\ninterface IProps {\n  gps?: Maybe<GeoPoint>\n  map: TMapModel\n}\n\nexport const MapPanning: React.FC<IProps> = ({ map, gps }) => {\n  useDisposable(\n    () =>\n      autorun(() => {\n        if (map.isReady && gps) {\n          map.panToLocation(gps)\n        }\n      }),\n    [gps],\n  )\n  return null\n}\n","import { useRoot } from '../app/useRoot'\n\nexport function useOrderModel() {\n  const { order } = useRoot()\n  return order\n}\n","import { Plural, Trans } from '@lingui/react'\nimport { useObserver } from 'mobx-react-lite'\nimport React from 'react'\n\nimport { useRoot } from '../../app/useRoot'\nimport { AlertModal } from '../../common/AlertModal'\nimport { FCompanyBranchStatus } from '../../graph/types'\nimport { useShopStatus } from '../../hooks/useShopStatus'\nimport { i18n } from '../../i18n'\n\ninterface IProps {\n  status: FCompanyBranchStatus.Fragment\n}\n\nexport const ShopClosingTimeModal: React.FC<IProps> = ({ status }) => {\n  const { user } = useRoot()\n  const { decision, openingIn } = useShopStatus({\n    status,\n    // Do not want update here as it would be showing modal every time :)\n    updateInterval: 0,\n  })\n  return useObserver(() => (\n    <AlertModal\n      isOpen={\n        (decision === 'Closed' || decision === 'OpeningSoon') &&\n        !user.closingTimeAlertHidden\n      }\n      onClose={user.hideClosingTime}\n      headerText={i18n.t`We are closed right now`}\n    >\n      {i18n.t`We're sorry, but we do not accept new orders at this time.`}\n      {decision === 'OpeningSoon' && (\n        <Trans>\n          You can prepare your order because we are{' '}\n          <Plural\n            value={openingIn}\n            one=\"opening in 1 minute\"\n            other=\"opening in # minutes\"\n          />\n          !\n        </Trans>\n      )}\n    </AlertModal>\n  ))\n}\n","import './ShopHeaderIcons.css'\n\nimport React from 'react'\n\nimport { ColStyle } from '../../common/ColStyle'\n\nimport logoCommerce01 from './logo-commerce-01.svg'\nimport logoCommerce02 from './logo-commerce-02.svg'\nimport logoDoveze from './logo-doveze.svg'\nimport logoGoPay from './logo-gopay.png'\n\nexport const ShopHeaderIcons = () => (\n  <ColStyle>\n    <img\n      src={logoDoveze}\n      className=\"shop__header__icons__doveze\"\n      data-testid=\"ShopHeaderIcons__AppLogo\"\n      alt=\"logo Doveze.cz\"\n    />\n    <img\n      src={logoCommerce02}\n      className=\"shop__header__icons__commerce\"\n      alt=\"MasterCard\"\n    />\n    <img\n      src={logoCommerce01}\n      className=\"shop__header__icons__commerce\"\n      data-testid=\"ShopHeaderIcons__VisaLogo\"\n      alt=\"VISA\"\n    />\n    <img\n      src={logoGoPay}\n      className=\"shop__header__icons__gopay\"\n      alt=\"GoPay\"\n      data-testid=\"ShopHeaderIcons__GoPayLogo\"\n    />\n  </ColStyle>\n)\n","import { DateFormat, Plural, Trans } from '@lingui/react'\nimport { isSameDay } from 'date-fns'\nimport React from 'react'\nimport styled from 'styled-components/macro'\n\nimport { useRoot } from '../../app/useRoot'\nimport { FCompanyBranchStatusFragment } from '../../graph/generated'\nimport { useShopStatus } from '../../hooks/useShopStatus'\n\ninterface IProps {\n  status: FCompanyBranchStatusFragment\n  deliveryTime: number\n  pickupTime: number\n}\n\nexport const StatusDisplayOpen = styled.span`\n  font-style: italic;\n  color: #0f9849;\n`\n\nexport const StatusDisplayClosed = styled.span`\n  font-style: italic;\n  color: #b40000;\n`\n\nexport const ShopStatusDisplay: React.FC<IProps> = ({\n  status,\n  deliveryTime,\n  pickupTime,\n}) => {\n  const { order } = useRoot()\n  const { decision, openingIn, closingIn } = useShopStatus({\n    status,\n  })\n\n  if (!status) {\n    return null\n  }\n\n  if (status.isOpen === false) {\n    if (!status.willOpenAt) {\n      return (\n        <StatusDisplayClosed>\n          <Trans>We are closed until further notice</Trans>\n        </StatusDisplayClosed>\n      )\n    }\n    const closestBH = status.businessHours[0]\n    if (closestBH && closestBH.closedNote) {\n      return <StatusDisplayClosed>{closestBH.closedNote}</StatusDisplayClosed>\n    }\n  }\n\n  switch (decision) {\n    case 'Open':\n      let timingDisplay\n      if (order.usingDeliveryOrderMethod && status.defaultDeliveryTimeEnabled) {\n        timingDisplay = (\n          <Trans>We are delivering in {deliveryTime} minutes</Trans>\n        )\n      }\n      if (order.usingPickupOrderMethod && status.defaultPickupTimeEnabled) {\n        timingDisplay = (\n          <Trans>We can prepare your order in {pickupTime} minutes</Trans>\n        )\n      }\n      return (\n        <StatusDisplayOpen data-testid=\"statusDisplayOpen\">\n          {timingDisplay}\n        </StatusDisplayOpen>\n      )\n    case 'OpeningSoon':\n      return (\n        <StatusDisplayClosed>\n          <Plural\n            value={openingIn}\n            one=\"Opening in 1 minute\"\n            other=\"Opening in # minutes\"\n          />\n        </StatusDisplayClosed>\n      )\n    case 'ClosingSoon':\n      return (\n        <StatusDisplayOpen>\n          <Plural\n            value={closingIn}\n            one=\"Closing in 1 minute\"\n            other=\"Closing in # minutes\"\n          />\n        </StatusDisplayOpen>\n      )\n    case 'Closed':\n      return (\n        <StatusDisplayClosed>\n          {status.willOpenAt ? (\n            <Trans>We will open at {formatOpenTime(status.willOpenAt)}</Trans>\n          ) : (\n            <Trans>Closed</Trans>\n          )}\n        </StatusDisplayClosed>\n      )\n  }\n}\n\nexport function formatOpenTime(openAt: string) {\n  const openAtDate = new Date(openAt)\n  const nowDate = new Date()\n  let format: Intl.DateTimeFormatOptions = {\n    hour: 'numeric',\n    minute: 'numeric',\n  }\n  if (!isSameDay(openAtDate, nowDate)) {\n    format = {\n      ...format,\n      weekday: 'long',\n    }\n  }\n  return <DateFormat value={openAtDate} format={format} />\n}\n","import { Trans } from '@lingui/macro'\nimport React from 'react'\nimport { Button } from 'reactstrap'\nimport styled from 'styled-components/macro'\n\nimport { PrimaryRoutedButton } from '../../common/Buttons'\nimport { Desktop, Mobile } from '../../common/Responsive'\nimport { QOrderFinishQuery } from '../../graph/generated'\nimport { i18n } from '../../i18n'\n\ninterface IProps {\n  finish: QOrderFinishQuery\n}\nconst CenteredButtonContainer = styled.div`\n  text-align: center;\n`\n\nexport const FinishViewFooter: React.FC<IProps> = ({\n  finish: { androidApp, iosApp },\n}) => (\n  <>\n    <Desktop>\n      {(androidApp || iosApp) && (\n        <div className=\"finish__view__apps__propagation\">\n          <div className=\"finish__view__apps__propagation__header\">\n            <Trans>What about mobile app?</Trans>\n          </div>\n          <div className=\"finish__view__apps__propagation__description\">\n            <Trans>\n              We have prepared mobile app, so you could order from anywhere!\n            </Trans>\n          </div>\n\n          {androidApp && (\n            <a href={androidApp.url}>\n              <Button\n                className=\"finish__view__apps__propagation__button\"\n                color=\"secondary\"\n              >\n                Google Play\n              </Button>\n            </a>\n          )}\n\n          {iosApp && (\n            <a href={iosApp.url}>\n              <Button\n                className=\"finish__view__apps__propagation__button\"\n                color=\"secondary\"\n              >\n                App Store\n              </Button>\n            </a>\n          )}\n        </div>\n      )}\n      <CenteredButtonContainer>\n        <PrimaryRoutedButton\n          to=\"/\"\n          className=\"finish__view__submit__line__button\"\n          data-testid=\"finishViewFooterBackButton\"\n        >\n          {i18n.t`Back to home page`.toLocaleUpperCase()}\n        </PrimaryRoutedButton>\n      </CenteredButtonContainer>\n    </Desktop>\n\n    <Mobile>\n      <div\n        className=\"finish__view__submit__line\"\n        style={{ textAlign: 'center' }}\n      >\n        <div className=\"finish__view__submit__line__strip\" />\n        <PrimaryRoutedButton\n          to=\"/\"\n          className=\"finish__view__submit__line__button\"\n          data-testid=\"finishViewFooterBackButton\"\n        >\n          {i18n.t`Back to home page`.toLocaleUpperCase()}\n        </PrimaryRoutedButton>\n      </div>\n    </Mobile>\n  </>\n)\n","import React from 'react'\nimport { Redirect } from 'react-router-dom'\n\nimport { useRoot } from '../../app/useRoot'\nimport Pacman from '../../common/Pacman'\nimport { QOrderFinishQuery, useQOrderFinish } from '../../graph/generated'\n\ninterface IProps {\n  render(result: QOrderFinishQuery): ReactNode\n}\n\nexport const FinishViewLoader: React.FC<IProps> = ({ render }) => {\n  const { order } = useRoot()\n  if (!order.hasOrder) {\n    return <Redirect to=\"/\" />\n  }\n\n  const { data, loading } = useQOrderFinish({\n    branchId: order.branchId!,\n    orderId: order.orderId!,\n  })\n\n  if (loading) {\n    return <Pacman />\n  }\n\n  return render(data)\n}\n","import { Trans } from '@lingui/macro'\nimport { RM } from '@speedlo/tools'\nimport React from 'react'\nimport styled from 'styled-components/macro'\n\nimport {\n  FOrderFinishedFragment,\n  FOrderFinishedItems,\n  FOrderFinishedOrderPayments,\n  PaymentTypeEnum,\n} from '../../graph/generated'\nimport { i18n } from '../../i18n'\n\ninterface IProps {\n  order: FOrderFinishedFragment\n}\n\nconst HeaderThemed = styled.div`\n  background-color: ${({ theme }) => theme.primary};\n`\n\nconst PriceThemed = styled.div`\n  background-color: ${({ theme }) => theme.primary};\n`\n\nconst PriceCornerThemed = styled.div`\n  border-top-color: ${({ theme }) => theme.primary} !important;\n`\n\nexport const FinishViewOrder: React.FC<IProps> = ({ order }) => (\n  <>\n    <HeaderThemed className=\"finish__view__header\">\n      <div className=\"finish__view__header__inner\">\n        <span className=\"flaticon-transport-1 finish__view__header__icon\" />\n        <h3>\n          <Trans>It's done! Thank you :-)</Trans>\n        </h3>\n      </div>\n    </HeaderThemed>\n    <h4>\n      <Trans>Your order was successfully accepted!</Trans>{' '}\n      {getPaymentInfo(order)}\n    </h4>\n    <div className=\"finish__view__items\">\n      <div className=\"finish__view__items__look__to\">\n        <Trans>You can look forward to:</Trans>\n      </div>\n      {order.items.map(item => (\n        <OrderItem key={item.id} {...item} />\n      ))}\n      <PriceCornerThemed className=\"finish__view__items__price__corner\" />\n      <PriceThemed className=\"finish__view__items__price\">\n        {getPaymentPrice(order)} <b>{order.totalSum.formattedValue}</b>\n      </PriceThemed>\n    </div>\n  </>\n)\n\nconst hasMethod = (paymentType: PaymentTypeEnum) => (\n  payment: FOrderFinishedOrderPayments,\n) => payment.paymentMethod.paymentType.enum === paymentType\n\nfunction getPaymentInfo({ orderPayments }: FOrderFinishedFragment) {\n  if (orderPayments.some(hasMethod(PaymentTypeEnum.Cash))) {\n    return i18n.t`You will pay at pickup.`\n  }\n  if (orderPayments.some(hasMethod(PaymentTypeEnum.Credit))) {\n    return i18n.t`You have payed.`\n  }\n  return null\n}\n\nfunction getPaymentPrice({ orderPayments, totalSum }: FOrderFinishedFragment) {\n  if (orderPayments.some(hasMethod(PaymentTypeEnum.Cash))) {\n    return i18n.t`Total cost to be payed:`\n  }\n  if (orderPayments.some(hasMethod(PaymentTypeEnum.Credit))) {\n    return i18n.t`Total cost payed:`\n  }\n  return null\n}\n\nfunction OrderItem({ recipe, sideDishes }: FOrderFinishedItems) {\n  return (\n    <div>\n      <b>{recipe.nameLabel}</b>\n      {sideDishes.length\n        ? ` + ${sideDishes.map(RM.path(['recipe', 'nameLabel'])).join(',')}`\n        : null}\n    </div>\n  )\n}\n","import { Trans } from '@lingui/macro'\nimport React from 'react'\nimport styled from 'styled-components/macro'\n\nimport { QOrderFinishCompanyBranch } from '../../graph/generated'\n\ninterface IProps {\n  branch: QOrderFinishCompanyBranch\n}\n\nconst PhoneNumberLinkStyled = styled.a`\n  color: inherit;\n  text-decoration: none;\n  &:hover {\n    text-decoration: underline;\n  }\n`\n\nexport const FinishViewSupport: React.FC<IProps> = ({ branch }) => (\n  <div className=\"finish__view__support\">\n    <h4>\n      <Trans>Any question? Do you have a problem? Call:</Trans>\n    </h4>\n    <span className=\"flaticon-technology finish__view__support__icon\" />\n    <span className=\"finish__view__support__phone\">\n      <PhoneNumberLinkStyled href={`tel:${branch.phone}`}>\n        {branch.phone}\n      </PhoneNumberLinkStyled>\n    </span>\n  </div>\n)\n","import './OrderMethod.css'\n\nimport { useObserver } from 'mobx-react-lite'\nimport React from 'react'\n\nimport { useRoot } from '../../app/useRoot'\nimport { SelectButtonThemed } from '../../common/Buttons'\nimport { DeliveryTypeEnum } from '../../graph/generated'\nimport { RM } from '../../helpers/ramda'\nimport { i18n } from '../../i18n'\nimport { TOrderModel } from '../../models/OrderModel'\n\ninterface IProps {\n  onChange?(order: TOrderModel): void\n}\n\ninterface IButtonProps {\n  orderModel: TOrderModel\n  orderMethod: DeliveryTypeEnum\n  onChange(order: TOrderModel): void\n  onPrefetch?(): void\n}\n\nconst OrderMethodButton: React.FC<IButtonProps> = ({\n  orderModel,\n  orderMethod,\n  onChange,\n  onPrefetch,\n  children,\n}) => {\n  return useObserver(() => (\n    <SelectButtonThemed\n      selected={orderModel.orderMethod === orderMethod}\n      onMouseEnter={onPrefetch}\n      onClick={() => {\n        orderModel.useOrderMethod(orderMethod)\n        onChange(orderModel)\n      }}\n      data-testid={`orderMethod-${orderMethod}`}\n      data-testselected={orderModel.orderMethod === orderMethod}\n    >\n      {children}\n    </SelectButtonThemed>\n  ))\n}\n\nexport const OrderMethod: React.FC<IProps> = ({ onChange }) => {\n  const { order } = useRoot()\n  return (\n    <div className=\"order__method\">\n      <OrderMethodButton\n        orderModel={order}\n        orderMethod={DeliveryTypeEnum.Messenger}\n        onChange={onChange || RM.identity}\n      >\n        <span className=\"flaticon-transport\" />\n        {i18n.t`I want to deliver`.toLocaleUpperCase()}\n      </OrderMethodButton>\n      <OrderMethodButton\n        orderModel={order}\n        orderMethod={DeliveryTypeEnum.Pickup}\n        onChange={onChange || RM.identity}\n        onPrefetch={order.prefetchPickup}\n      >\n        <span className=\"flaticon-restaurant\" />\n        {i18n.t`I'll pick up`.toLocaleUpperCase()}\n      </OrderMethodButton>\n    </div>\n  )\n}\n","import './ButtonStripe.css'\n\nimport React from 'react'\n\nconst ButtonStripe: React.FC = ({ children }) => (\n  <div className=\"button__stripe\">\n    <div className=\"button__stripe__bar\" />\n    <div className=\"button__stripe__button\">{children}</div>\n  </div>\n)\n\nexport default ButtonStripe\n","import { useApolloClient } from '@speedlo/graphql'\n\nimport { useRoot } from '../app/useRoot'\nimport {\n  FCartGoodsItems,\n  FCartPresencePresence,\n  FRecipeFragment,\n  FRecipeFragmentDoc,\n  MAddToCartMutation,\n  MAddToCartVariables,\n  QCartDocument,\n  QCartQuery,\n  QCartVariables,\n  useMAddToCart,\n} from '../graph/generated'\n\nlet counter = 1\n\nconst NO_SIDEDISHES = []\n\nexport function useAddToCart() {\n  const { order, cart: cartModel } = useRoot()\n  const client = useApolloClient()\n\n  const [addToCart] = useMAddToCart({\n    context: { noBatch: true },\n  })\n\n  const executeAddToCart = (\n    recipeId: ID,\n    sideDishes: RoA<ID> = NO_SIDEDISHES,\n  ) => {\n    const variables: MAddToCartVariables = {\n      orderId: order.orderId!,\n      recipeId,\n      sideDishes,\n      withGoods: cartModel.withGoods,\n      withPresence: cartModel.withPresence,\n    }\n    return addToCart(variables, {\n      optimisticResponse: makeOptimisticResponse(variables),\n    })\n  }\n\n  return executeAddToCart\n\n  function makeOptimisticResponse(\n    variables: MAddToCartVariables,\n  ): MAddToCartMutation | undefined {\n    const current = client.readQuery<QCartQuery, QCartVariables>(\n      {\n        query: QCartDocument,\n        variables: {\n          orderId: variables.orderId,\n          withGoods: cartModel.withGoods,\n          withPresence: cartModel.withPresence,\n        },\n      },\n      true,\n    )\n    if (!current) {\n      return undefined\n    }\n    const id = `-${counter++}`\n    const addPresence = (): RoA<FCartPresencePresence> => {\n      if (!cartModel.withPresence) {\n        return current.order.presence\n      }\n      return [\n        ...current.order.presence,\n        {\n          __typename: 'OrderRecipe',\n          id,\n          recipe: {\n            __typename: 'Recipe',\n            id: variables.recipeId,\n          },\n        },\n      ]\n    }\n    const addItem = (): RoA<FCartGoodsItems> => {\n      if (!cartModel.withGoods) {\n        return current.order.items\n      }\n      const recipe = client.readFragment<FRecipeFragment>(\n        {\n          id: `Recipe-${variables.recipeId}`,\n          fragment: FRecipeFragmentDoc,\n          fragmentName: 'FRecipe',\n        },\n        true,\n      )\n      if (!recipe) {\n        return current.order.items\n      }\n      return [\n        ...current.order.items,\n        {\n          __typename: 'OrderRecipe',\n          automatic: false,\n          id,\n          price: {\n            __typename: 'PriceConverted',\n            formattedValue: '???',\n            value: -1,\n          },\n          recipe,\n          sideDishes: [],\n        },\n      ]\n    }\n    return {\n      __typename: 'Mutation',\n      add: {\n        ...current.order,\n        countWares: current.order.countWares + 1,\n        totalSum: {\n          ...current.order.totalSum,\n          value: -1,\n        },\n        items: addItem(),\n        presence: addPresence(),\n      },\n    }\n  }\n}\n","import React from 'react'\nimport { Button, ButtonProps } from 'reactstrap'\nimport styled from 'styled-components/macro'\n\ninterface IProps extends ButtonProps {\n  isSelected: boolean\n  width: string\n}\n\nconst PickerButtonStyled = styled(({ isSelected, width, ...props }) => (\n  <Button {...props} />\n))`\n  border-radius: 0.6rem;\n  margin: 0.5rem;\n  background-color: ${props =>\n    props.isSelected ? props.theme.tertiary : 'transparent'} !important;\n  color: ${props =>\n    props.isSelected ? props.theme.tertiaryText : 'initial'} !important;\n  &:hover {\n    border-color: ${({ theme }) => theme.tertiaryHover} !important;\n  }\n  width: ${props => props.width};\n  @media (max-width: 370px) {\n    width: 100%;\n  }\n  &.btn-outline-secondary {\n    color: #2e2e2e;\n    border-color: #d4d4d4;\n  }\n  &.btn-outline-secondary.active {\n    color: white;\n  }\n`\n\nexport const PickerButton: React.FC<IProps> = ({\n  isSelected,\n  onSelect,\n  children,\n  ...buttonProps\n}) => {\n  return (\n    <PickerButtonStyled isSelected={isSelected} {...buttonProps}>\n      {children}\n    </PickerButtonStyled>\n  )\n}\n","import './OrderSubmitLine.css'\n\nimport classNames from 'classnames'\nimport React from 'react'\n\nimport { PrimaryButton } from '../../common/Buttons'\n\ninterface IProps {\n  onClick(): void\n  canSubmit: boolean\n  isSubmitting: boolean\n  children: ReactNode\n}\n\nexport const OrderSubmitLine: React.FC<IProps> = ({\n  onClick,\n  canSubmit = false,\n  isSubmitting,\n  children,\n}) => {\n  const className = classNames(\n    'order__form__submit__line__button',\n    'animated',\n    'infinite',\n    { heartBeat: isSubmitting },\n  )\n  return (\n    <div className=\"order__form__submit__line\">\n      <div className=\"order__form__submit__line__strip\" />\n      <PrimaryButton\n        className={className}\n        color=\"primary\"\n        size=\"md\"\n        onClick={onClick}\n        disabled={!canSubmit || isSubmitting}\n        data-testid=\"orderSubmitButton\"\n      >\n        {children}\n      </PrimaryButton>\n    </div>\n  )\n}\n","import { Trans } from '@lingui/macro'\nimport { observer } from 'mobx-react-lite'\nimport React from 'react'\nimport { Alert, Button } from 'reactstrap'\nimport styled from 'styled-components/macro'\n\nimport { useRoot } from '../../app/useRoot'\nimport { mediaDesktop, mediaMobile } from '../../common/Responsive'\nimport { useQOrderForm } from '../../graph/generated'\n\ninterface IProps {}\n\nconst NoticeButton = styled(Button)`\n  font-size: 0.9rem;\n  margin: 0.2rem 1rem;\n  padding: 0.5em 1rem;\n`\n\nconst StorageNotice = styled(Alert)`\n  width: 100%;\n  z-index: 5;\n  ${mediaDesktop`\n    font-size: 0.9rem;\n    position: sticky;\n    bottom: 0;\n  `};\n  ${mediaMobile`\n    position: fixed;\n    top: 5rem;\n    font-size: 0.8rem;\n    `};\n  padding: 0.5rem 1rem;\n  background-color: #d4eddadc;\n`\n\nexport const OrderFormStorageNotice: React.FC<IProps> = observer(() => {\n  const { order: orderModel, user } = useRoot()\n  const { data, loading } = useQOrderForm(\n    {\n      orderId: orderModel.orderId!,\n    },\n    {\n      skip: !orderModel.hasOrder || user.rememberForm !== null,\n    },\n  )\n\n  if (loading) {\n    return null\n  }\n\n  if (data.order.countWares === 0 || user.rememberForm !== null) {\n    return null\n  }\n\n  return (\n    <StorageNotice data-testid=\"orderFormStorageNotice\">\n      <p>\n        <Trans>\n          This app is using secure storage for keeping filled form data. It's\n          not cookies, these are stored in your browser only.\n        </Trans>\n      </p>\n\n      <NoticeButton\n        color=\"success\"\n        size=\"sm\"\n        onClick={user.setFormRememberYes}\n        data-testid=\"orderFormStorageNotice__Yes\"\n      >\n        <Trans>Always remember</Trans>\n      </NoticeButton>\n      <NoticeButton\n        color=\"secondary\"\n        size=\"sm\"\n        onClick={user.setFormRememberNo}\n        data-testid=\"orderFormStorageNotice__No\"\n      >\n        <Trans>Do not store</Trans>\n      </NoticeButton>\n    </StorageNotice>\n  )\n})\n","import '../../common/Modal.css'\n\nimport { Trans } from '@lingui/macro'\nimport { useObserver } from 'mobx-react-lite'\nimport React from 'react'\nimport { Button, Container, Modal, ModalBody, ModalHeader } from 'reactstrap'\n\nimport { useRoot } from '../../app/useRoot'\n\nexport const OrderErrorModal: React.FC = () => {\n  const { order } = useRoot()\n  return useObserver(() => (\n    <Modal\n      isOpen={order.hasErrors}\n      toggle={order.clearErrors}\n      className=\"modal__container\"\n    >\n      <ModalHeader\n        toggle={order.clearErrors}\n        tag={Container}\n        className=\"modal__header\"\n      >\n        <span>\n          <Trans>Order can not be completed</Trans>\n        </span>\n      </ModalHeader>\n      <ModalBody className=\"modal__body\">\n        <div className=\"modal__body__content\">\n          {order.hasErrors &&\n            order.submitErrors!.map((error, idx) => (\n              <div key={idx}>{error}</div>\n            ))}\n        </div>\n        <div className=\"modal__body__button__line\">\n          <div className=\"modal__body__button__strip\" />\n          <Button\n            className=\"modal__body__button\"\n            color=\"primary\"\n            onClick={order.clearErrors}\n          >\n            <Trans>I understand</Trans>\n          </Button>\n          />\n        </div>\n      </ModalBody>\n    </Modal>\n  ))\n}\n","import React from 'react'\n\nimport { SecondaryButton } from '../../common/Buttons'\nimport { PaymentGateEnum } from '../../graph/generated'\nimport { IOrderFormState } from './OrderFormSetup'\nimport { MAX_LENGTH } from './OrderNoteInput'\n\ninterface IProps {\n  onFill(values: IOrderFormState): void\n}\n\nexport const OrderFormAutoFill: React.FC<IProps> = ({ onFill }) =>\n  process.env.REACT_APP_STAGE !== 'prod' ? (\n    <SecondaryButton\n      style={{ marginBottom: '0.5rem' }}\n      onClick={() => {\n        const faker: Faker.FakerStatic = require('faker')\n        faker.locale = 'cz'\n        onFill({\n          firstname: faker.name.firstName(),\n          lastname: faker.name.lastName(),\n          email: faker.internet.email(),\n          phone: faker.phone.phoneNumberFormat(0).replace(/\\s/g, ''),\n          phonePrefix: '+420',\n          note: faker.lorem.sentence().slice(0, MAX_LENGTH - 1),\n          tips: '',\n          payment: PaymentGateEnum.Gopay,\n          agreements: [],\n        })\n      }}\n    >\n      Autofill form [DEV ONLY]\n    </SecondaryButton>\n  ) : null\n","import { Plural, Trans } from '@lingui/react'\nimport React from 'react'\nimport { Field } from 'react-form'\nimport { FormFeedback, FormGroup, FormText, Input } from 'reactstrap'\n\nimport { i18n } from '../../i18n'\n\nexport const MAX_LENGTH = 50\nconst isTooLong = value => value && value.trim().length > MAX_LENGTH\n\nconst OrderNoteInputValidator = value =>\n  isTooLong(value) ? i18n.t`Note is too long` : null\n\nexport const OrderNoteInput: React.FC = () => {\n  const ingredientsDescription = i18n.t`eg. ingredients change, company...`\n  return (\n    <Field\n      field=\"note\"\n      validate={OrderNoteInputValidator}\n      render={fieldApi => (\n        <FormGroup>\n          <Input\n            type=\"textarea\"\n            placeholder={i18n.t`Note`}\n            title={ingredientsDescription}\n            value={fieldApi.value}\n            onChange={e => fieldApi.setValue(e.target.value)}\n            onBlur={() => fieldApi.setTouched(true)}\n            valid={!fieldApi.error}\n            invalid={Boolean(fieldApi.error)}\n            data-testid=\"orderNoteInput\"\n          />\n          <FormText>{ingredientsDescription}</FormText>\n          {isTooLong(fieldApi.value) ? (\n            <FormFeedback>\n              <Trans>\n                Maximum length is{' '}\n                <Plural value={MAX_LENGTH} other=\"# characters\" />. Typed{' '}\n                <Plural\n                  value={fieldApi.value.length}\n                  one=\"# char\"\n                  other=\"# chars\"\n                />\n              </Trans>\n            </FormFeedback>\n          ) : null}\n        </FormGroup>\n      )}\n    />\n  )\n}\n","import { useApolloClient } from '@speedlo/graphql'\nimport { useDebounceCallback, useRouterContext } from '@speedlo/hooks'\nimport { useGoPay } from '@speedlo/payments'\nimport { autorun } from 'mobx'\nimport { useDisposable } from 'mobx-react-lite'\nimport React from 'react'\nimport { Form, IFormApi, IFormState } from 'react-form'\nimport { Form as StrapForm } from 'reactstrap'\n\nimport { useRoot } from '../../app/useRoot'\nimport {\n  PaymentGateEnum,\n  QOrderPaymentStatusDocument,\n  QOrderPaymentStatusQuery,\n  QOrderPaymentStatusVariables,\n  useMSubmitOrder,\n} from '../../graph/generated'\nimport { logOrder } from '../../helpers/logger'\nimport { RM } from '../../helpers/ramda'\nimport { useAlertModal } from '../../hooks/useAlertModal'\nimport { i18n } from '../../i18n'\nimport { TAgreement, TOrderModel } from '../../models/OrderModel'\n\ninterface IProps {\n  render(\n    formApi: IFormApi & IFormState<IOrderFormState>,\n    isSubmitting: boolean,\n  ): ReactNode\n}\n\nexport interface IOrderFormState {\n  firstname: string\n  lastname: string\n  email: string\n  phonePrefix: string\n  phone: string\n  note: string\n  tips: string\n  payment: PaymentGateEnum\n  agreements: TAgreement[]\n}\n\nfunction getDefaultFormValues(orderModel: TOrderModel): IOrderFormState {\n  return {\n    firstname: orderModel.firstname,\n    lastname: orderModel.lastname,\n    email: orderModel.email,\n    phone: orderModel.phone,\n    phonePrefix: orderModel.phonePrefix || orderModel.defaultPhonePrefix,\n    note: orderModel.note,\n    tips: orderModel.tips,\n    payment: orderModel.payment as PaymentGateEnum,\n    agreements: [],\n  }\n}\n\nconst debounceInterval = 1500\n\nexport const OrderFormSetup: React.FC<IProps> = ({ render }) => {\n  const client = useApolloClient()\n  const { order: orderModel, business } = useRoot()\n  const { history } = useRouterContext()\n\n  useDisposable(() =>\n    autorun(() => {\n      if (!orderModel.isVamInitialized) {\n        orderModel.initVam()\n      }\n    }),\n  )\n\n  const [submitOrder, { loading: isSubmitting }] = useMSubmitOrder()\n\n  const [paymentError, alertPaymentError] = useAlertModal()\n\n  const { executeGoPayPayment, paymentLoading } = useGoPay(\n    async (orderId = orderModel.orderId!) => {\n      if (!orderId) {\n        return null\n      }\n      orderModel.goPayStatusCheck(true)\n      const result = await client.query<\n        QOrderPaymentStatusQuery,\n        QOrderPaymentStatusVariables\n      >({\n        query: QOrderPaymentStatusDocument,\n        variables: {\n          orderId,\n        },\n      })\n      orderModel.goPayStatusCheck(false)\n      return result.data.status\n    },\n    {\n      onError(errors) {\n        const phone = business.branch!.phone\n        alertPaymentError(\n          i18n.t`Payment status check has failed`,\n          errors.length\n            ? errors.join('<br />')\n            : i18n.t`We were unable to verify status of your payment. Please contact operator using number ${phone}`,\n        )\n      },\n      onFinish() {\n        history.replace('/finish')\n      },\n    },\n  )\n\n  const onChange = useDebounceCallback(\n    async (formState: IFormState<IOrderFormState>, formApi: IFormApi) => {\n      logOrder('onChange', formState)\n      await orderModel.updateVam(formState.values)\n      formApi.setValue(\n        'agreements',\n        mergeFormAgreements(formState.values.agreements, orderModel.agreements),\n      )\n    },\n    debounceInterval,\n  )\n\n  const onSubmit = React.useCallback(async (formState: IOrderFormState) => {\n    orderModel.rememberFormValues(formState)\n\n    const result = await submitOrder(orderModel.getSubmitVariables(formState))\n    if (result) {\n      const { userErrors, gopayUrl } = result.submitOrder\n      if (userErrors.length) {\n        orderModel.submitFailed(userErrors)\n        return\n      }\n      if (orderModel.payment === PaymentGateEnum.Gopay && gopayUrl) {\n        executeGoPayPayment(gopayUrl)\n      } else {\n        history.replace(`/finish`)\n      }\n    } else {\n      orderModel.submitFailed()\n    }\n  }, [])\n\n  return (\n    <>\n      {paymentError}\n      <Form\n        defaultValues={getDefaultFormValues(orderModel)}\n        validateOnMount={true}\n        onChange={onChange}\n        onSubmit={onSubmit}\n      >\n        {formApi => (\n          <StrapForm onSubmit={formApi.submitForm}>\n            {render(formApi, isSubmitting || paymentLoading)}\n          </StrapForm>\n        )}\n      </Form>\n    </>\n  )\n}\n\nfunction mergeFormAgreements(\n  formValue: TAgreement[],\n  agreements: TAgreement[],\n) {\n  return agreements.map(agreement => {\n    const formAgreement = formValue.find(RM.propEq('id', agreement.id))\n    if (formAgreement) {\n      return { ...agreement, isConfirmed: formAgreement.isConfirmed }\n    }\n    return agreement\n  })\n}\n","import { autorun } from 'mobx'\nimport { useObserver } from 'mobx-react-lite'\nimport React from 'react'\nimport { Field } from 'react-form'\nimport FormGroup from 'reactstrap/lib/FormGroup'\nimport Input from 'reactstrap/lib/Input'\nimport styled from 'styled-components/macro'\n\nimport { useRoot } from '../../app/useRoot'\nimport { useMOrderTipUpdate } from '../../graph/generated'\nimport { i18n } from '../../i18n'\n\nconst TipContainer = styled.div`\n  margin-top: 0.8rem;\n`\n\nexport const OrderFormTipInput = () => {\n  const { order, cart } = useRoot()\n  const [updateTip] = useMOrderTipUpdate()\n\n  React.useEffect(\n    () =>\n      autorun(() => {\n        const tips = order.usingPaymentMethodWithTips ? Number(order.tips) : 0\n        updateTip({\n          tips,\n          orderId: order.orderId!,\n          withGoods: cart.withGoods,\n        })\n      }),\n    [],\n  )\n\n  return useObserver(() => {\n    if (!order.usingPaymentMethodWithTips) {\n      return null\n    }\n    return (\n      <TipContainer>\n        <FormGroup>\n          <Field\n            field=\"tips\"\n            render={fieldApi => (\n              <Input\n                type=\"select\"\n                value={fieldApi.value}\n                onChange={e => {\n                  const { value } = e.target\n                  fieldApi.setValue(value)\n                  order.setTips(value)\n                }}\n                onBlur={() => {\n                  fieldApi.setTouched(true)\n                }}\n                id=\"orderTips\"\n              >\n                <option value=\"\">{i18n.t`Without tips`}</option>\n                <option value=\"5\">{i18n.t`Tips 5%`}</option>\n                <option value=\"10\">{i18n.t`Tips 10%`}</option>\n                <option value=\"15\">{i18n.t`Tips 15%`}</option>\n                <option value=\"20\">{i18n.t`Tips 20%`}</option>\n                <option value=\"25\">{i18n.t`Tips 25%`}</option>\n              </Input>\n            )}\n          />\n        </FormGroup>\n      </TipContainer>\n    )\n  })\n}\n","import React from 'react'\nimport { Field } from 'react-form'\n\nimport { useRoot } from '../../app/useRoot'\nimport { SelectButtonThemed } from '../../common/Buttons'\nimport { PaymentGateEnum } from '../../graph/types'\n\nexport interface IPaymentButtonProps {\n  method: PaymentGateEnum\n  disabled?: boolean\n}\n\nexport const OrderPaymentButton: React.FC<IPaymentButtonProps> = ({\n  children,\n  disabled,\n  method,\n}) => {\n  const { order: orderModel } = useRoot()\n  return (\n    <Field\n      field=\"payment\"\n      render={fieldApi => (\n        <SelectButtonThemed\n          disabled={disabled}\n          selected={fieldApi.value === method}\n          onClick={() => {\n            fieldApi.setValue(method)\n            orderModel.setPaymentMethod(method)\n          }}\n        >\n          <Checkmark show={fieldApi.value === method} />\n          {children}\n        </SelectButtonThemed>\n      )}\n    />\n  )\n}\n\nfunction Checkmark({ show }: { show: boolean }) {\n  return show ? (\n    <span className=\"flaticon-mark order__payment__method__button__checked\" />\n  ) : (\n    <div className=\"order__payment__method__button__unchecked\" />\n  )\n}\n","import { Trans } from '@lingui/macro'\nimport { useObserver } from 'mobx-react-lite'\nimport React from 'react'\nimport styled from 'styled-components/macro'\n\nimport { useRoot } from '../../app/useRoot'\nimport { AlertModal } from '../../common/AlertModal'\nimport Pacman from '../../common/Pacman'\n\nconst TextPadding = styled.div`\n  padding-bottom: 2rem;\n`\n\nexport const OrderGoPayModal: React.FC = () => {\n  const { order: orderModel } = useRoot()\n  return useObserver(() => (\n    <AlertModal isOpen={orderModel.isGoPayChecking} headerText=\"GoPay platba\">\n      <TextPadding>\n        <Trans>Checking your GoPay payment, please wait...</Trans>\n      </TextPadding>\n      <Pacman noMargin={true} />\n    </AlertModal>\n  ))\n}\n","import { t } from '@lingui/macro'\nimport React, { CSSProperties } from 'react'\n\nimport { i18n } from '../../i18n'\n\ninterface IProps {\n  minCount: number\n  maxCount: number\n  isValid: boolean\n}\n\nexport const CategoryValidationMessage: React.FC<IProps> = ({\n  minCount,\n  maxCount,\n  isValid,\n}) => {\n  let message = ''\n  if (minCount === 0) {\n    if (maxCount > 0) {\n      message = i18n._(t`maximum ${maxCount}`)\n    } else {\n      return null\n    }\n  } else if (maxCount === 0) {\n    message = i18n._(t`minimum ${minCount}`)\n  } else if (minCount === maxCount) {\n    const count = minCount\n    message = i18n._(t`only ${count}`)\n  } else {\n    message = i18n._(t`minimum ${minCount} and maximum ${maxCount}`)\n  }\n  const style: CSSProperties = {}\n  if (!isValid) {\n    style.color = 'red'\n  }\n  return (\n    <span style={style}>\n      {'('}\n      {message}\n      {')'}\n    </span>\n  )\n}\n","import React from 'react'\nimport styled from 'styled-components'\n\ninterface IProps {\n  onClick(): void\n}\n\nconst StyledSidedishRemoveButton = styled.div`\n  position: absolute;\n  left: -0.6rem;\n  top: -0.4rem;\n  width: 2rem;\n  height: 2rem;\n  border-radius: 1rem;\n  background: ${({ theme }) => theme.primary};\n\n  &:hover {\n    background: ${({ theme }) => theme.primaryHover} !important;\n  }\n  &:active {\n    background: ${({ theme }) => theme.primary} !important;\n  }\n  & .rectangle {\n    width: 45%;\n    position: absolute;\n    top: 45%;\n    left: 30%;\n    height: 4px;\n    background: white;\n  }\n`\nexport const SidedishRemoveButton: React.FC<IProps> = ({\n  onClick,\n  ...props\n}) => {\n  return (\n    <StyledSidedishRemoveButton\n      onClick={onClick}\n      className=\"animated bounceIn\"\n      {...props}\n    >\n      <div className=\"rectangle\" />\n    </StyledSidedishRemoveButton>\n  )\n}\n","import React from 'react'\nimport { ButtonProps } from 'reactstrap'\nimport styled from 'styled-components/macro'\n\nimport { PickerButton } from '../../common/PickerButton'\nimport { FRecipeDetailSideDishes } from '../../graph/generated'\nimport { SidedishRemoveButton } from './SidedishRemoveButton'\n\ninterface IProps extends ButtonProps {\n  sidedish: FRecipeDetailSideDishes\n  count: number\n  isSelected: boolean\n  canBeSelected: boolean\n  canBeRemoved: boolean\n  onAdd(): void\n  onRemove(): void\n}\n\nconst StyledSidedishCheckbox = styled.div`\n  display: inline-block;\n  position: relative;\n\n  & .name {\n    float: left;\n    text-align: left;\n    white-space: normal;\n    max-width: 13rem;\n  }\n\n  & .price {\n    font-weight: bold;\n    float: right;\n  }\n\n  & .count {\n    display: inline-block;\n    margin-left: 0.5rem;\n  }\n`\n\nexport const SidedishCheckbox = React.memo<IProps>(\n  ({\n    sidedish,\n    count,\n    canBeSelected,\n    canBeRemoved,\n    className,\n    onAdd,\n    onRemove,\n    ...buttonProps\n  }) => {\n    const onClick = React.useCallback(() => {\n      if (canBeSelected) {\n        onAdd()\n      }\n    }, [canBeSelected, onAdd])\n    return (\n      <StyledSidedishCheckbox className={className}>\n        <PickerButton\n          onClick={onClick}\n          disabled={!canBeSelected}\n          size=\"xs\"\n          outline={true}\n          width=\"17.5rem\"\n          data-testid={`sidedishCheckbox__${sidedish.id}`}\n          {...buttonProps}\n        >\n          <div className=\"name\">\n            {sidedish.nameLabel}\n            <span key={count} className=\"animated heartBeat count\">\n              {count > 1 && `${count}x`}\n            </span>\n          </div>\n          <div className=\"price\">{sidedish.price.formattedValue}</div>\n        </PickerButton>\n        {canBeRemoved && <SidedishRemoveButton onClick={onRemove} />}\n      </StyledSidedishCheckbox>\n    )\n  },\n)\n","import { useSideDishValidator } from '@speedlo/cart'\nimport React, { Fragment } from 'react'\nimport styled from 'styled-components'\n\nimport { FRecipeDetailFragment } from '../../graph/generated'\nimport { CategoryValidationMessage } from './CategoryValidationMessage'\nimport { SidedishCheckbox } from './SidedishCheckbox'\n\ninterface IProps {\n  recipe: FRecipeDetailFragment\n  selection: ReadonlyArray<ID>\n  onAdd(item: ID): void\n  onRemove(item: ID): void\n}\n\nconst StyledSidedishPicker = styled.div`\n  margin-top: 1rem;\n\n  & .sidedish__picker__checkbox {\n    @media (max-width: 370px) {\n      width: 100%;\n    }\n  }\n\n  & .sidedish__picker__category {\n    font-size: 1rem;\n    font-weight: bold;\n    text-align: left;\n    margin: 0 0 0.2rem 0.2rem;\n  }\n`\n\nexport const SidedishPicker: React.FC<IProps> = ({\n  recipe,\n  selection,\n  onAdd,\n  onRemove,\n}) => {\n  const { canBeSelected, isCategoryValid } = useSideDishValidator(\n    recipe.categories,\n    selection,\n  )\n\n  return (\n    <StyledSidedishPicker className=\"food__sidedish__picker\">\n      {recipe.categories.map(category => (\n        <Fragment key={category.id}>\n          <div className=\"sidedish__picker__category\">\n            {category.nameLabel}{' '}\n            <CategoryValidationMessage\n              minCount={category.minCount}\n              maxCount={category.maxCount}\n              isValid={isCategoryValid(category)}\n            />\n          </div>\n          {category.sideDishes.map(sidedish => (\n            <SidedishCheckbox\n              key={`${sidedish.id}-${category.id}`}\n              sidedish={sidedish}\n              count={selection.filter(i => i === sidedish.id).length}\n              isSelected={selection.includes(sidedish.id)}\n              canBeRemoved={selection.includes(sidedish.id)}\n              canBeSelected={canBeSelected(category, sidedish)}\n              onAdd={() => onAdd(sidedish.id)}\n              onRemove={() => onRemove(sidedish.id)}\n              className=\"sidedish__picker__checkbox\"\n            />\n          ))}\n        </Fragment>\n      ))}\n    </StyledSidedishPicker>\n  )\n}\n","import { useSideDishValidator } from '@speedlo/cart'\nimport classNames from 'classnames'\nimport React from 'react'\n\nimport { PrimaryButton } from '../../common/Buttons'\nimport { FRecipeDetailFragment } from '../../graph/generated'\nimport { i18n } from '../../i18n'\n\ninterface IProps {\n  selection: ReadonlyArray<ID>\n  recipe: Maybe<FRecipeDetailFragment>\n  onConfirm(): Promise<boolean>\n}\n\nexport const CartOrderButton = React.memo<IProps>(\n  ({ selection, recipe, onConfirm }) => {\n    const [isConfirming, setConfirming] = React.useState(false)\n    const { isCategoryValid } = useSideDishValidator(\n      recipe ? recipe.categories : [],\n      selection,\n    )\n\n    return (\n      <PrimaryButton\n        className={classNames('modal__body__button', 'animated', {\n          heartBeat: isConfirming,\n        })}\n        disabled={\n          isConfirming || !recipe || !recipe.categories.every(isCategoryValid)\n        }\n        data-testid=\"cartOrderButton\"\n        onClick={() => {\n          setConfirming(true)\n          onConfirm().finally(() => {\n            setConfirming(false)\n          })\n        }}\n      >\n        {i18n\n          .plural({\n            value: selection.length,\n            0: 'Order without sidedish',\n            one: 'Order with this sidedish',\n            other: 'Order with # sidedishes',\n          })\n          .toLocaleUpperCase()}\n      </PrimaryButton>\n    )\n  },\n)\n","import '../../common/Modal.css'\n\nimport { Trans } from '@lingui/macro'\nimport React from 'react'\nimport { Container, Modal, ModalBody, ModalHeader } from 'reactstrap'\n\nimport Pacman from '../../common/Pacman'\nimport { FRecipeDetailFragment } from '../../graph/generated'\nimport { RM } from '../../helpers/ramda'\nimport { SidedishPicker } from '../sidedishPicker/SidedishPicker'\nimport { CartOrderButton } from './CartOrderButton'\n\ninterface IProps {\n  recipe: Maybe<FRecipeDetailFragment>\n  isLoading: boolean\n  initialSideDishes?: ID[]\n  onConfirm(selection: ID[]): Promise<boolean>\n  onClose(): void\n}\n\nconst EMPTY_SELECTION = []\n\nexport const CartModal: React.FC<IProps> = ({\n  recipe,\n  isLoading,\n  initialSideDishes = EMPTY_SELECTION,\n  onConfirm,\n  onClose,\n}) => {\n  const [selection, updateSelection] = React.useState([] as string[])\n\n  React.useEffect(() => {\n    updateSelection(initialSideDishes)\n  }, [initialSideDishes])\n\n  const onCloseModal = React.useCallback(() => {\n    updateSelection([])\n    onClose()\n  }, [onClose])\n\n  const onConfirmAndClose = async () => {\n    if (await onConfirm(selection)) {\n      onCloseModal()\n      return true\n    }\n    return false\n  }\n\n  const onAddSidedish = (sidedishId: ID) => {\n    updateSelection(sel => {\n      return RM.append(sidedishId, sel)\n    })\n  }\n\n  const onRemoveSidedish = (sidedishId: ID) => {\n    updateSelection(sel => {\n      return RM.remove(RM.indexOf(sidedishId, sel), 1, sel)\n    })\n  }\n\n  const renderBody = () => {\n    if (isLoading) {\n      return <Pacman />\n    }\n    if (!recipe) {\n      return (\n        <Trans>We sorry, but the item is unavailable at this moment.</Trans>\n      )\n    }\n    return (\n      <>\n        <h3 className=\"modal__body__food__name\">{recipe.nameLabel}</h3>\n        <span className=\"modal__body__food_description\">\n          {recipe.descriptionLabel}\n        </span>\n        <SidedishPicker\n          recipe={recipe}\n          selection={selection}\n          onAdd={onAddSidedish}\n          onRemove={onRemoveSidedish}\n        />\n      </>\n    )\n  }\n\n  return (\n    <Modal\n      isOpen={recipe !== null}\n      toggle={onCloseModal}\n      className=\"modal__container\"\n      autoFocus={true}\n      backdrop=\"static\"\n      fade={false}\n    >\n      <ModalHeader\n        toggle={onCloseModal}\n        tag={Container}\n        className=\"modal__header\"\n      >\n        <span>\n          <Trans>Do you want to add something?</Trans>\n        </span>\n      </ModalHeader>\n      <ModalBody className=\"modal__body\">\n        <div className=\"modal__body__content\">{renderBody()}</div>\n        <div className=\"modal__body__button__line\">\n          <div className=\"modal__body__button__strip\" />\n          <CartOrderButton\n            recipe={recipe}\n            selection={selection}\n            onConfirm={onConfirmAndClose}\n          />\n        </div>\n      </ModalBody>\n    </Modal>\n  )\n}\n","import { observer } from 'mobx-react-lite'\nimport React from 'react'\n\nimport { useQCartRecipe } from '../../graph/generated'\nimport { useAddToCart } from '../../hooks/useAddToCart'\nimport { useOrderModel } from '../../hooks/useOrderModel'\nimport { CartModal } from './CartModal'\n\ninterface IProps {\n  orderId: MaybeID\n}\n\nexport const AddToCartModal = observer<IProps>(({ orderId }) => {\n  const orderModel = useOrderModel()\n\n  const recipeId = orderModel.addToCartRecipeId\n\n  const { data, loading } = useQCartRecipe(\n    {\n      recipeId: recipeId!,\n    },\n    { skip: orderId === null || recipeId === null, fetchPolicy: 'cache-first' },\n  )\n\n  const executeAddToCart = useAddToCart()\n\n  const onConfirm = React.useCallback(\n    async sideDishes => {\n      if (orderId === null || recipeId === null) {\n        return false\n      }\n      const result = await executeAddToCart(recipeId, sideDishes)\n      return Boolean(result)\n    },\n    [orderId, recipeId],\n  )\n\n  const onClose = React.useCallback(() => {\n    orderModel.addToCart(null)\n  }, [history])\n\n  return (\n    <CartModal\n      recipe={loading ? null : data.recipe}\n      onConfirm={onConfirm}\n      onClose={onClose}\n      isLoading={loading}\n    />\n  )\n})\n","import { observer } from 'mobx-react-lite'\nimport React from 'react'\n\nimport { useRoot } from '../../app/useRoot'\nimport { useMChangeCartItem, useQCartItem } from '../../graph/generated'\nimport { RM } from '../../helpers/ramda'\nimport { CartModal } from './CartModal'\n\ninterface IProps {\n  orderId: MaybeID\n}\n\nexport const ChangeCartModal = observer<IProps>(({ orderId }) => {\n  const { order: orderModel, cart: cartModel } = useRoot()\n\n  const itemId = orderModel.changeCartItemId\n\n  const { data, loading } = useQCartItem(\n    {\n      itemId: itemId!,\n    },\n    { skip: orderId === null || itemId === null },\n  )\n\n  const [changeItem] = useMChangeCartItem()\n\n  const onConfirm = React.useCallback(\n    async sideDishes => {\n      if (orderId === null || itemId === null) {\n        return false\n      }\n      const result = await changeItem({\n        itemId,\n        sideDishes,\n        orderId,\n        withGoods: cartModel.withGoods,\n      })\n      return Boolean(result)\n    },\n    [orderId, itemId],\n  )\n\n  const onClose = React.useCallback(() => {\n    orderModel.changeCartItem(null)\n  }, [history])\n\n  const sideDishesSelection = React.useMemo(\n    () =>\n      loading\n        ? undefined\n        : (data.item.sideDishes.map(RM.path(['recipe', 'id'])) as string[]),\n    [loading, data],\n  )\n\n  return (\n    <CartModal\n      recipe={loading ? null : data.item.recipe}\n      initialSideDishes={sideDishesSelection}\n      onConfirm={onConfirm}\n      onClose={onClose}\n      isLoading={loading}\n    />\n  )\n})\n","import { observer } from 'mobx-react-lite'\nimport React from 'react'\n\nimport { useOrderModel } from '../../hooks/useOrderModel'\nimport { AddToCartModal } from './AddToCartModal'\nimport { CartSystem } from './CartSystem'\nimport { ChangeCartModal } from './ChangeCartModal'\n\ninterface IProps {\n  isReadonly?: boolean\n}\n\nexport const CartView = observer<IProps>(({ isReadonly = false }) => {\n  const orderModel = useOrderModel()\n  const orderId = orderModel.orderId\n  return (\n    <>\n      <AddToCartModal orderId={orderId} />\n      <ChangeCartModal orderId={orderId} />\n      <CartSystem orderId={orderId} isReadonly={isReadonly} />\n    </>\n  )\n})\n","import './CategoryNavigator.css'\n\nimport classNames from 'classnames'\nimport React, { useState } from 'react'\nimport Scroll from 'react-scroll'\nimport Truncate from 'react-truncate'\nimport styled from 'styled-components/macro'\n\nimport { mediaDesktop, mediaMobile } from '../../common/Responsive'\nimport { FFoodMenuCategoryFragment } from '../../graph/generated'\n\ninterface IProps {\n  categories: ReadonlyArray<FFoodMenuCategoryFragment>\n}\n\nconst CategoryNavigatorContainer = styled.div`\n  background-color: #d4d4d4;\n  border-top-left-radius: 0.6rem;\n  padding: 0.7rem 0.5rem 0 0.2rem;\n  position: sticky;\n  top: 0;\n  z-index: 1;\n  user-select: none;\n  display: flex;\n  ${mediaDesktop`\n    flex-wrap: wrap;\n  `}\n  ${mediaMobile`\n    flex-wrap: nowrap;\n    overflow-x: auto;\n    overflow-y: hidden;\n    box-shadow: inset -15px -5px 15px -14px rgba(0, 0, 0, 0.6);\n    margin: 0;\n    border-top-left-radius: 0;\n    background-color: #f3f3f3;\n    opacity: 0.94;\n  `}\n`\n\nconst CategoryNavigator: React.FC<IProps> = ({ categories }) => {\n  const [activeCategoryIndex, setActiveCategoryIndex] = useState(0)\n  return (\n    <CategoryNavigatorContainer>\n      {categories.length === 0\n        ? null\n        : categories.map((category, idx) => (\n            <Scroll.Link\n              to={category.nameLabel}\n              key={category.id}\n              className={classNames('category__navigator__scroll__link', {\n                active: activeCategoryIndex === idx,\n              })}\n              onSetActive={() => setActiveCategoryIndex(idx)}\n              offset={-168}\n              smooth={true}\n              spy={true}\n              data-testid={`categoryNavigatorScrollLink__${category.id}`}\n            >\n              <div className=\"category__navigator__scroll__link__circle\">\n                <span className={`flaticon-${category.pictogram}`} />\n              </div>\n              <div className=\"category__navigator__scroll__link__description\">\n                <Truncate lines={2}>{category.nameLabel}</Truncate>\n              </div>\n            </Scroll.Link>\n          ))}\n    </CategoryNavigatorContainer>\n  )\n}\n\nexport default CategoryNavigator\n","import React from 'react'\nimport Scroll from 'react-scroll'\nimport styled from 'styled-components/macro'\n\nimport { mediaMobile } from '../../common/Responsive'\nimport { FFoodMenuCategoryFragment } from '../../graph/generated'\n\ninterface IProps {\n  category: FFoodMenuCategoryFragment\n}\n\nconst FoodCategoryStyled = styled.div`\n  color: #474747;\n  display: block;\n  font-size: 1.6rem;\n  & a {\n    text-decoration: none;\n  }\n`\n\nconst FoodCategoryTitleStyled = styled('h3')`\n  ${mediaMobile`margin: 1rem 0 0.4rem 1rem;`};\n`\n\nconst FoodCategory: React.FC<IProps> = ({ category, children }) => (\n  <Scroll.Element name={category.nameLabel}>\n    <FoodCategoryStyled>\n      <FoodCategoryTitleStyled>{category.nameLabel}</FoodCategoryTitleStyled>\n      {children}\n    </FoodCategoryStyled>\n  </Scroll.Element>\n)\n\nexport default React.memo(FoodCategory)\n","import './FoodMenuItem.css'\n\nimport classNames from 'classnames'\nimport { useObserver } from 'mobx-react-lite'\nimport React from 'react'\nimport Truncate from 'react-truncate'\nimport styled from 'styled-components/macro'\n\nimport { mediaMobile } from '../../common/Responsive'\nimport { FFoodMenuRecipeFragment } from '../../graph/generated'\nimport { useOrderModel } from '../../hooks/useOrderModel'\nimport { TFoodMenuPresence } from './hooks/useFoodMenuPresence'\n\ninterface IProps {\n  recipe: FFoodMenuRecipeFragment\n  presence: TFoodMenuPresence\n  onAddToCart(recipeId: ID, hasSideDish: boolean): void\n}\n\nconst FoodMenuItemStyled = styled.div`\n  padding: 1rem 0.5rem 0.3rem 1.1rem;\n  border: 1px solid #d5d5d5 !important;\n  margin: 0 0 0.4rem 0;\n  border-radius: 0.8rem;\n  cursor: pointer;\n  position: relative;\n  min-height: 6rem;\n  user-select: none;\n  &:hover {\n    background-color: #c9e8d7;\n  }\n  background-color: ${({ isActive }: { isActive: boolean }) =>\n    isActive ? '#b3ebcc' : 'white'};\n  h4 {\n    font-size: 1rem;\n    font-weight: 700;\n    color: #404040;\n    margin-bottom: 0.1rem;\n    margin-right: 6rem;\n  }\n  p {\n    color: #666666;\n    margin: 0.6rem 0 0 0;\n    font-size: 0.9rem;\n    max-height: 2.5rem;\n    -webkit-line-clamp: 2;\n    overflow: hidden;\n  }\n`\nconst FoodMenuItemImage = styled.img`\n  width: 6rem;\n  height: 6rem;\n  display: block;\n  float: left;\n  margin: -1.05rem 1rem 0 -1.2rem;\n  border-radius: 0.8rem 0 0 0.8rem;\n  object-fit: cover;\n`\n\nconst FoodMenuItemPriceCorner = styled.div`\n  border-top-width: 1.8rem;\n  border-top-style: solid;\n  border-top-color: ${({ theme }) => theme.primary} !important;\n  position: absolute;\n  right: 4.799rem;\n  top: 1rem;\n  width: 0;\n  height: 0;\n  border-left: 1.8rem solid transparent;\n`\n\nconst FoodMenuItemPrice = styled.div`\n  background-color: ${({ theme }) => theme.primary} !important;\n  position: absolute;\n  right: 0;\n  top: 1rem;\n  width: 4.8rem;\n  height: 1.8rem;\n  padding: 0.12rem 0.7rem 0.3rem 0rem;\n  font-weight: 500;\n  font-size: 1.1rem;\n  color: white;\n  text-align: right;\n  overflow: hidden;\n  white-space: nowrap;\n`\n\nconst FoodMenuItemCount = styled.div`\n  background-color: ${({ theme }) => theme.secondary};\n  float: left;\n  position: absolute;\n  left: -1.2rem;\n  padding: 0.4rem 0.6rem;\n  color: white;\n  border-radius: 1.8rem;\n  font-size: 0.9rem;\n  ${mediaMobile`\n    left: -0.6rem;\n    top: -0.7rem;\n  `};\n`\n\nconst FoodMenuItem = React.memo<IProps>(({ recipe, presence, onAddToCart }) => {\n  const orderModel = useOrderModel()\n\n  const hasSideDishes = recipe.sideDishCount > 0\n\n  const onClick = React.useCallback(() => {\n    onAddToCart(recipe.id, hasSideDishes)\n  }, [hasSideDishes, onAddToCart])\n\n  const onMouseEnter = React.useCallback(() => {\n    if (hasSideDishes) {\n      orderModel.prefetchFood(recipe.id)\n    }\n  }, [hasSideDishes])\n\n  const previousPresence = React.useRef(-1)\n\n  const renderPresence = () => {\n    const recipePresence = presence.get(recipe.id)\n    if (!recipePresence) {\n      previousPresence.current = -1\n      return null\n    }\n    const className = classNames('animated', {\n      pulse: recipePresence > 1 || previousPresence.current > 0,\n      zoomIn:\n        (recipePresence === 1 && previousPresence.current === 0) ||\n        previousPresence.current === -1,\n    })\n    previousPresence.current = recipePresence\n    return (\n      <FoodMenuItemCount\n        key={recipePresence}\n        className={className}\n      >{`${recipePresence}x`}</FoodMenuItemCount>\n    )\n  }\n\n  return useObserver(() => (\n    <FoodMenuItemStyled\n      onClick={onClick}\n      onMouseEnter={onMouseEnter}\n      isActive={orderModel.lastActiveRecipeId === recipe.id}\n      data-testid={`foodMenuItem__${recipe.id}`}\n    >\n      {recipe.image && (\n        <FoodMenuItemImage src={recipe.image} alt={recipe.nameLabel} />\n      )}\n\n      <FoodMenuItemPriceCorner />\n      <FoodMenuItemPrice data-testid={`foodMenuItem__Price__${recipe.id}`}>\n        {recipe.price.formattedValue}\n      </FoodMenuItemPrice>\n      {renderPresence()}\n      <h4>\n        <Truncate lines={2} data-testid={`foodMenuItem__Name__${recipe.id}`}>\n          {recipe.nameLabel}\n        </Truncate>\n      </h4>\n      <p>\n        <Truncate\n          lines={2}\n          data-testid={`foodMenuItem__Description__${recipe.id}`}\n        >\n          {recipe.descriptionLabel}\n        </Truncate>\n      </p>\n    </FoodMenuItemStyled>\n  ))\n})\n\nexport default FoodMenuItem\n","import { Trans } from '@lingui/macro'\nimport React from 'react'\nimport styled from 'styled-components/macro'\n\nimport { useRoot } from '../../app/useRoot'\nimport Pacman from '../../common/Pacman'\nimport { mediaDesktop, mediaMobile } from '../../common/Responsive'\nimport { QFoodMenuWareCategories } from '../../graph/generated'\nimport { useAddToCart } from '../../hooks/useAddToCart'\nimport FoodCategory from './FoodCategory'\nimport FoodMenuItem from './FoodMenuItem'\nimport { useFoodMenuPresence } from './hooks/useFoodMenuPresence'\n\ninterface IProps {\n  orderId: MaybeID\n  categories: ReadonlyArray<QFoodMenuWareCategories>\n  isLoading: boolean\n}\n\nconst FoodMenuStyled = styled.div`\n  border-radius: 0 0 0.6rem 0.6rem;\n  ${mediaDesktop`background: white;`};\n  ${mediaMobile`\n    background: #eee9e7;\n    background-size: cover;\n    background-attachment: scroll;\n  `};\n`\n\nconst FoodMenuListStyled = styled.div`\n  ${mediaDesktop`\n    margin: 0 1.4rem 1rem 1.6rem;\n    padding: 2rem 0 2rem 0;\n  `};\n  ${mediaMobile`\n    margin: 0 0.7rem 1rem 0.7rem;\n    padding: 0 0 4rem 0;\n  `};\n`\n\nconst FoodMenu: React.FC<IProps> = ({ orderId, categories, isLoading }) => {\n  const { order: orderModel, config, user } = useRoot()\n\n  const presence = useFoodMenuPresence(orderId)\n\n  const executeAddToCart = useAddToCart()\n  const onAddToCart = React.useCallback(\n    (recipeId: ID, hasSideDish: boolean) => {\n      if (presence.size >= config.orderItemsMax) {\n        user.showOrderLimit()\n      } else if (hasSideDish) {\n        // history.push(`/order/add/${recipeId}`)\n        orderModel.addToCart(recipeId)\n      } else {\n        orderModel.setUsedRecipeId(recipeId)\n        executeAddToCart(recipeId)\n      }\n    },\n    [executeAddToCart],\n  )\n\n  const render = () => {\n    if (isLoading) {\n      return <Pacman noMargin={true} />\n    }\n    if (categories.length === 0) {\n      return (\n        <h3>\n          <Trans>Food menu is empty. We are sorry.</Trans>\n        </h3>\n      )\n    }\n    return (\n      <>\n        {categories.map(category => (\n          <FoodCategory key={category.id} category={category}>\n            {category.recipes.map(recipe => (\n              <FoodMenuItem\n                key={recipe.id}\n                recipe={recipe}\n                presence={presence}\n                onAddToCart={onAddToCart}\n              />\n            ))}\n          </FoodCategory>\n        ))}\n      </>\n    )\n  }\n\n  return (\n    <FoodMenuStyled>\n      <FoodMenuListStyled>{render()}</FoodMenuListStyled>\n    </FoodMenuStyled>\n  )\n}\n\nexport default React.memo(FoodMenu)\n","import { observable, ObservableMap, runInAction } from 'mobx'\nimport React from 'react'\n\nimport { useQFoodMenuCartPresence } from '../../../graph/generated'\n\nexport function useFoodMenuPresence(orderId: MaybeID) {\n  const { data, loading } = useQFoodMenuCartPresence(\n    {\n      orderId: orderId!,\n    },\n    {\n      skip: !orderId,\n      fetchPolicy: 'cache-only',\n    },\n  )\n\n  const [presence] = React.useState(() => observable.map<ID, number>())\n\n  if (!loading) {\n    runInAction(() => {\n      presence.clear()\n      data.order.presence.forEach(({ recipe: { id } }) => {\n        if (!presence.has(id)) {\n          presence.set(id, 0)\n        }\n        presence.set(id, presence.get(id)! + 1)\n      })\n    })\n  }\n\n  return presence\n}\n\nexport type TFoodMenuPresence = ObservableMap<ID, number>\n","import { useObserver } from 'mobx-react-lite'\nimport React from 'react'\n\nimport { useRoot } from '../../app/useRoot'\nimport { AlertModal } from '../../common/AlertModal'\nimport { i18n } from '../../i18n'\n\nexport const OrderLimitModal: React.FC = () => {\n  const { user } = useRoot()\n  return useObserver(() => (\n    <AlertModal\n      isOpen={!user.orderLimitAlertHidden}\n      onClose={user.hideOrderLimit}\n      headerText={i18n.t`Limit has been reached`}\n    >\n      {i18n.t`The maximum number of items in the order has been reached`}\n    </AlertModal>\n  ))\n}\n","import { observer } from 'mobx-react-lite'\nimport React from 'react'\n\nimport { useRoot } from '../../app/useRoot'\nimport { useQFoodMenu } from '../../graph/generated'\nimport CategoryNavigator from './CategoryNavigator'\nimport FoodMenu from './FoodMenu'\nimport { OrderLimitModal } from './OrderLimitModal'\n\nexport const FoodMenuView = observer(() => {\n  const { order: orderModel } = useRoot()\n\n  const { data, loading } = useQFoodMenu(\n    {\n      branchId: orderModel.branchId!,\n    },\n    {\n      skip: !orderModel.branchId,\n      fetchPolicy: 'cache-first',\n    },\n  )\n\n  const categories = React.useMemo(\n    () =>\n      loading ? [] : data.wareCategories.filter(cat => cat.recipes.length > 0),\n    [loading, data],\n  )\n\n  return (\n    <>\n      <OrderLimitModal />\n      <CategoryNavigator categories={categories} />\n      <FoodMenu\n        orderId={orderModel.orderId}\n        categories={categories}\n        isLoading={loading}\n      />\n    </>\n  )\n})\n","import React from 'react'\nimport { InputGroupAddon } from 'reactstrap'\nimport styled from 'styled-components/macro'\n\ninterface IProps {\n  isVisible: boolean\n  onClick(): void\n}\n\nconst Container = styled.span`\n  color: ${({ theme }) => theme.secondary};\n  cursor: pointer;\n  position: absolute;\n  right: 0.4rem;\n  top: 0.15rem;\n`\n\nexport const GeolocationButton: React.FC<IProps> = ({\n  onClick,\n  isVisible = false,\n}) =>\n  isVisible ? (\n    <Container>\n      <InputGroupAddon addonType=\"append\" onClick={onClick}>\n        <span className=\"flaticon-gps\" />\n      </InputGroupAddon>\n    </Container>\n  ) : null\n\nexport default GeolocationButton\n","import React from 'react'\nimport Spinner from 'react-spinkit'\n\ninterface IProps {\n  address: string\n  isVisible: boolean\n  isResolving: boolean\n  onValidClick(): void\n}\n\nexport const ResolvedAddress: React.FC<IProps> = ({\n  address,\n  isVisible,\n  isResolving,\n  onValidClick,\n}) => {\n  if (isResolving) {\n    return (\n      <div className=\"address__input__box__resolved wait\">\n        <Spinner name=\"ball-beat\" fadeIn=\"none\" />\n      </div>\n    )\n  }\n  if (!isVisible) {\n    return null\n  }\n  return (\n    <div className=\"address__input__box__resolved\" onClick={onValidClick}>\n      {address}\n    </div>\n  )\n}\n\nexport default ResolvedAddress\n","import classnames from 'classnames'\nimport debounce from 'debounce'\nimport React, { Component } from 'react'\nimport { Input, InputProps } from 'reactstrap'\n\ninterface IProps {\n  onSearch(search: string): void\n  isVisible: boolean\n  isSearching: boolean\n  inputProps: InputProps\n}\n\ninterface IState {\n  value: string\n}\n\nclass SearchInput extends Component<IProps, IState> {\n  state = { value: '' }\n  componentDidMount() {\n    this.setFocus()\n  }\n  componentDidUpdate(nextProps: IProps) {\n    if (nextProps.isVisible !== this.props.isVisible) {\n      this.setFocus()\n    }\n  }\n  onSearch = debounce(this.props.onSearch, 2000)\n  onChange = ev => {\n    const value = ev.target.value || ''\n    this.setState({ value })\n    this.onSearch(value.trim())\n  }\n  onKeyPress = ev => {\n    if (ev.key === 'Enter') {\n      this.onSearch.clear()\n      this.props.onSearch(this.state.value.trim())\n    }\n  }\n  inputRef: Maybe<HTMLInputElement> = null\n  onInputMount = (ref: HTMLInputElement) => {\n    this.inputRef = ref\n  }\n  isVisible() {\n    return this.props.isVisible !== false\n  }\n  isSearching() {\n    return this.props.isSearching !== false\n  }\n  setFocus() {\n    if (this.isVisible() && this.inputRef !== null) {\n      this.inputRef.focus()\n    }\n  }\n  render() {\n    const { inputProps } = this.props\n    const isHidden = !this.isVisible() || this.isSearching()\n    return (\n      <Input\n        className={classnames({ address__input__hidden: isHidden })}\n        onChange={this.onChange}\n        onKeyPress={this.onKeyPress}\n        value={this.state.value}\n        innerRef={this.onInputMount}\n        autoFocus={true}\n        {...inputProps}\n      />\n    )\n  }\n}\n\nexport default SearchInput\n","import './AddressInput.css'\n\nimport { Trans } from '@lingui/macro'\nimport { useObserver } from 'mobx-react-lite'\nimport React from 'react'\nimport { Alert, InputGroup } from 'reactstrap'\nimport styled from 'styled-components/macro'\n\nimport { useRoot } from '../../app/useRoot'\nimport { i18n } from '../../i18n'\nimport { TLocationModel } from '../../models/LocationModel'\nimport GeolocationButton from './GeolocationButton'\nimport ResolvedAddress from './ResolvedAddress'\nimport SearchInput from './SearchInput'\n\nconst AddressInputStyled = styled.div`\n  width: 90%;\n  min-width: 14rem;\n  margin: 1rem auto;\n  text-align: center;\n`\n\nconst AddressInputBoxStyled = styled.div`\n  border-radius: 1rem;\n  border: 1px solid #d4d4d4;\n  background-color: white;\n  height: 2.3rem;\n  overflow: hidden;\n  & input {\n    margin: 0.2rem 2rem 0.5rem 0.7rem;\n    background: transparent;\n    border: none;\n  }\n`\n\nexport const AddressInput: React.FC = () => {\n  const { location } = useRoot()\n  return useObserver(() => (\n    <AddressInputStyled>\n      <AddressInputBoxStyled>\n        <InputGroup size=\"sm\">\n          <ResolvedAddress\n            address={location.address || ''}\n            isVisible={location.hasAddress}\n            isResolving={location.isResolving}\n            onValidClick={location.clearAddress}\n          />\n          <SearchInput\n            inputProps={{\n              placeholder: i18n.t`Type address or choose it from map`,\n              autoComplete: 'shipping street-address',\n            }}\n            onSearch={location.withUserAddress}\n            isVisible={!location.hasAddress}\n            isSearching={location.isResolving}\n          />\n          <GeolocationButton\n            onClick={location.attemptGeolocation}\n            isVisible={location.isGeolocationAvailable && !location.isResolving}\n          />\n        </InputGroup>\n      </AddressInputBoxStyled>\n      {location.hasFinishedSearch ? renderErrorMessage(location) : null}\n    </AddressInputStyled>\n  ))\n}\n\nconst NoMouseAlert = styled(Alert)`\n  pointer-events: none;\n`\n\nfunction renderErrorMessage(location: TLocationModel) {\n  if (location.isResolved === false) {\n    return (\n      <NoMouseAlert color=\"danger\">\n        <Trans>Address was not recognized.</Trans>\n      </NoMouseAlert>\n    )\n  }\n  if (location.isStreetAddress === false) {\n    return (\n      <NoMouseAlert color=\"warning\">\n        <Trans>Please enter address with house number.</Trans>\n      </NoMouseAlert>\n    )\n  }\n  if (location.inDeliveryLocation === false) {\n    return (\n      <NoMouseAlert color=\"warning\">\n        <Trans>\n          Meal can't be delivered to your chosen address by any restaurant.\n        </Trans>\n      </NoMouseAlert>\n    )\n  }\n  return null\n}\n","import React from 'react'\n\nimport { PrimaryButton } from '../../common/Buttons'\nimport ButtonStripe from '../../common/ButtonStripe'\nimport { i18n } from '../../i18n'\n\ninterface IProps {\n  enabled: boolean\n  onClick(): void\n  onPrefetch(): void\n}\n\nexport const AddressSubmit: React.FC<IProps> = ({\n  enabled,\n  onClick,\n  onPrefetch,\n}) => (\n  <ButtonStripe>\n    <PrimaryButton\n      color=\"primary\"\n      disabled={!enabled}\n      onClick={onClick}\n      onMouseEnter={() => {\n        if (enabled) {\n          onPrefetch()\n        }\n      }}\n    >\n      {i18n.t`Confirm address`.toLocaleUpperCase()}\n    </PrimaryButton>\n  </ButtonStripe>\n)\n\nexport default AddressSubmit\n","import { useFullComputed } from '@speedlo/hooks'\nimport { reaction } from 'mobx'\nimport { useDisposable, useObserver } from 'mobx-react-lite'\nimport React from 'react'\n\nimport { useRoot } from '../../app/useRoot'\nimport { useGInitialLocation } from '../../graph/generated'\nimport { GeoPoint } from '../../helpers/gps'\nimport { logMap } from '../../helpers/logger'\nimport { MapPanning } from './atoms/MapPanning'\n\nexport const DeliveryMapPanning: React.FC = () => {\n  const { location, map } = useRoot()\n  const { data } = useGInitialLocation()\n\n  useDisposable(() =>\n    reaction(\n      () => map.clickPoint,\n      clickPoint => {\n        if (clickPoint) {\n          location.withUserLocation(clickPoint)\n          map.clearClickPoint()\n        }\n      },\n    ),\n  )\n\n  const panToGps = useFullComputed(\n    () => {\n      if (location.geoPoint) {\n        logMap('pan to user location', location.geoPoint)\n        return location.geoPoint\n      } else if (location.geolocationPoint) {\n        logMap('pan to geolocation', location.geolocationPoint)\n        return location.geolocationPoint\n      } else if (data && data.initialLocation) {\n        logMap('pan to initial location', data.initialLocation.gpsCoordinates)\n        return data.initialLocation.gpsCoordinates as GeoPoint\n      }\n      logMap('no pan location available')\n      return\n    },\n    [data],\n  )\n\n  return useObserver(() => <MapPanning gps={panToGps.get()} map={map} />)\n}\n","import './DeliveryMap.css'\n\nimport { Marker } from '@react-google-maps/api'\nimport { when } from 'mobx'\nimport { useDisposable, useObserver } from 'mobx-react-lite'\nimport React, { useCallback } from 'react'\n\nimport { useRoot } from '../../app/useRoot'\nimport { latLngToGps } from '../../helpers/gps'\nimport { AddressInput } from '../destination/AddressInput'\nimport { AddressSubmit } from './AddressSubmit'\nimport { DeliveryMapPanning } from './DeliveryMapPanning'\n\ninterface IProps {\n  onConfirm(): void\n}\n\nexport const DeliveryMap: React.FC<IProps> = ({ onConfirm }) => {\n  const { business, order, location } = useRoot()\n\n  const onSubmit = useCallback(async () => {\n    if (location.branchId) {\n      order.setBranch(location.branchId)\n    }\n    await order.createDeliveryOrder()\n    onConfirm()\n  }, [onConfirm])\n\n  useDisposable(() =>\n    when(() => business.isValid, location.validateUserLocation),\n  )\n\n  return useObserver(() => (\n    <>\n      <DeliveryMapPanning />\n      {location.latLng ? (\n        <Marker\n          position={location.latLng}\n          draggable={true}\n          onDragEnd={({ latLng }) => {\n            location.withUserLocation(latLngToGps(latLng))\n          }}\n        />\n      ) : null}\n      <div className=\"delivery__map__address\">\n        <AddressInput />\n      </div>\n      <div className=\"delivery__map__submit\">\n        <AddressSubmit\n          enabled={location.isDeliveryAddress}\n          onClick={onSubmit}\n          onPrefetch={() => {\n            if (location.branchId) {\n              order.prefetchFoodMenu(location.branchId)\n            }\n          }}\n        />\n      </div>\n    </>\n  ))\n}\n","import React from 'react'\nimport { Field, FieldProps } from 'react-form'\nimport { FormFeedback, Input, InputProps } from 'reactstrap'\n\ninterface IProps\n  extends Omit<FieldProps<string>, 'render' | 'children'>,\n    Omit<InputProps, 'defaultValue'> {\n  showFeedback?: boolean\n}\n\nexport const FormTextInput: React.FC<IProps> = ({\n  field,\n  validate,\n  showFeedback = false,\n  ...inputProps\n}) => (\n  <Field\n    field={field}\n    validate={validate}\n    render={fieldApi => (\n      <>\n        <Input\n          {...inputProps}\n          value={fieldApi.value}\n          onChange={e => fieldApi.setValue(e.target.value)}\n          onBlur={() => fieldApi.setTouched(true)}\n          invalid={fieldApi.touched && Boolean(fieldApi.error)}\n        />\n        {showFeedback && <FormFeedback>{fieldApi.error}</FormFeedback>}\n      </>\n    )}\n  />\n)\n","import React from 'react'\nimport { FormGroup } from 'reactstrap'\n\nimport { FormTextInput } from '../../common/FormTextInput'\nimport { i18n } from '../../i18n'\n\nconst emailRx = /^(([^<>()\\[\\]\\.,;:\\s@\\\"]+(\\.[^<>()\\[\\]\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@(([^<>()[\\]\\.,;:\\s@\\\"]+\\.)+[^<>()[\\]\\.,;:\\s@\\\"]{2,})$/i\n\nexport const OrderEmailInputValidator = value => {\n  const email = value.trim()\n  if (email === '') {\n    return i18n.t`E-mail is mandatory`\n  }\n  if (!emailRx.test(email)) {\n    return i18n.t`E-mail format is not valid`\n  }\n  return null\n}\n\nexport const OrderEmailInput: React.FC = () => (\n  <FormGroup>\n    <FormTextInput\n      field=\"email\"\n      type=\"email\"\n      autoComplete=\"email\"\n      placeholder=\"E-mail\"\n      showFeedback={true}\n      validate={OrderEmailInputValidator}\n      data-testid=\"orderEmailInput\"\n    />\n  </FormGroup>\n)\n","import React from 'react'\nimport { FormGroup, InputGroup } from 'reactstrap'\n\nimport { FormTextInput } from '../../common/FormTextInput'\nimport { i18n } from '../../i18n'\n\nexport const OrderNameInput: React.FC = () => (\n  <FormGroup>\n    <InputGroup>\n      <FormTextInput\n        field=\"firstname\"\n        autoComplete=\"given-name\"\n        placeholder={i18n.t`First name`}\n        validate={value =>\n          value.trim() === '' ? i18n.t`First name is mandatory` : null\n        }\n        data-testid=\"orderNameInput__FirstName\"\n      />\n      <FormTextInput\n        field=\"lastname\"\n        autoComplete=\"family-name\"\n        placeholder={i18n.t`Last name`}\n        validate={value =>\n          value.trim() === '' ? i18n.t`Last name is mandatory` : null\n        }\n        data-testid=\"orderNameInput__LastName\"\n      />\n    </InputGroup>\n  </FormGroup>\n)\n","import React from 'react'\nimport { FormGroup, InputGroup } from 'reactstrap'\nimport { UAParser } from 'ua-parser-js'\n\nimport { FormTextInput } from '../../common/FormTextInput'\nimport { i18n } from '../../i18n'\n\nexport const OrderPhoneInputValidator = value =>\n  value.trim() === '' ? i18n.t`Phone is mandatory` : null\n\nexport const OrderPhonePrefixInputValidator = value =>\n  value.trim() === '' ? i18n.t`Phone prefix is mandatory` : null\n\nexport const OrderPhoneInput: React.FC = () => {\n  const agent = new UAParser(window.navigator.userAgent)\n  const isMobileSafari = agent.getBrowser().name === 'Mobile Safari'\n  return (\n    <FormGroup>\n      <InputGroup>\n        <FormTextInput\n          field=\"phonePrefix\"\n          autoComplete={isMobileSafari ? 'off' : 'tel-country-code'}\n          placeholder=\"+\"\n          validate={OrderPhonePrefixInputValidator}\n        />\n        <FormTextInput\n          field=\"phone\"\n          type=\"tel\"\n          autoComplete=\"tel-national\"\n          placeholder={i18n.t`Phone`}\n          validate={OrderPhoneInputValidator}\n          style={{ width: '55%' }}\n          data-testid=\"orderPhoneInput__Phone\"\n        />\n      </InputGroup>\n    </FormGroup>\n  )\n}\n","import { useDebounceCallback } from '@speedlo/hooks'\nimport React, { KeyboardEvent, useCallback, useRef, useState } from 'react'\nimport { FormGroup, Input, InputGroup } from 'reactstrap'\nimport styled from 'styled-components/macro'\n\nimport { useRoot } from '../../app/useRoot'\nimport { SecondaryButton } from '../../common/Buttons'\nimport {\n  useMOrderPromoAdd,\n  useMOrderPromoRemove,\n  useQOrderPromoCodes,\n} from '../../graph/generated'\nimport { FPromoCode } from '../../graph/types'\nimport { i18n } from '../../i18n'\n\ntype TPromoCode = FPromoCode.Fragment\n\ninterface IProps {\n  codes: ReadonlyArray<TPromoCode>\n  onCodeAdd(codeInput: string): Promise<void>\n  onCodeRemove(codeId: ID): void\n  autoSubmitAfterTimeout?: number\n}\n\nconst CodesPanel = styled.div`\n  margin-top: 0.5rem;\n  & button {\n    margin-right: 0.5rem;\n    font-size: 0.7rem;\n  }\n`\n\nexport function OrderPromoInputUI({\n  codes,\n  onCodeAdd,\n  onCodeRemove,\n  autoSubmitAfterTimeout = 2000,\n}: IProps) {\n  const inputRef = useRef<HTMLInputElement>(null)\n  const [isValidating, setValidating] = useState(false)\n\n  const addCode = useCallback(async () => {\n    if (!inputRef.current || inputRef.current.disabled) {\n      return\n    }\n    const code = inputRef.current.value.trim()\n    if (code.length === 0) {\n      return\n    }\n    setValidating(true)\n    inputRef.current.disabled = true\n    inputRef.current.value = i18n.t`Validating promo code ${code}...`\n    try {\n      await onCodeAdd(code)\n      if (inputRef.current) {\n        inputRef.current.value = ''\n      }\n    } catch (err) {\n      if (inputRef.current) {\n        inputRef.current.value = code\n      }\n    } finally {\n      setValidating(false)\n      if (inputRef.current) {\n        inputRef.current.disabled = false\n        inputRef.current.focus()\n      }\n    }\n  }, [onCodeAdd])\n\n  const onChange = useDebounceCallback(addCode, autoSubmitAfterTimeout)\n\n  const onKeyDown = useCallback((ev: KeyboardEvent<HTMLInputElement>) => {\n    if (ev.key === 'Enter') {\n      addCode()\n      ev.preventDefault()\n    }\n  }, [])\n\n  return (\n    <FormGroup>\n      <InputGroup>\n        <Input\n          innerRef={inputRef}\n          autoComplete=\"off\"\n          disabled={isValidating}\n          placeholder={i18n.t`Promo codes`}\n          onChange={onChange}\n          onKeyDown={onKeyDown}\n          onBlur={addCode}\n          onPaste={addCode}\n        />\n      </InputGroup>\n      <CodesPanel>\n        {codes.map(({ id, code }) => (\n          <SecondaryButton key={id} onClick={() => onCodeRemove(id)}>\n            {`${code} `}\n          </SecondaryButton>\n        ))}\n      </CodesPanel>\n    </FormGroup>\n  )\n}\n\nconst OrderPromoInput: React.FC = () => {\n  const { order, cart } = useRoot()\n\n  const { data, loading } = useQOrderPromoCodes({ orderId: order.orderId! })\n\n  const [addCodeMutation] = useMOrderPromoAdd()\n\n  const onCodeAdd = React.useCallback(async (code: string) => {\n    if (!order.orderId) {\n      return\n    }\n    const result = await addCodeMutation({\n      code,\n      orderId: order.orderId,\n      withGoods: cart.withGoods,\n    })\n    if (result) {\n      const { userErrors } = result.addOrderPromoCode\n      if (userErrors.length) {\n        order.submitFailed(userErrors)\n      }\n    }\n  }, [])\n\n  const [removeCodeMutation] = useMOrderPromoRemove()\n\n  const onCodeRemove = React.useCallback((codeId: ID) => {\n    if (order.orderId) {\n      removeCodeMutation({\n        codeId,\n        orderId: order.orderId,\n        withGoods: cart.withGoods,\n      })\n    }\n  }, [])\n\n  return (\n    <OrderPromoInputUI\n      codes={loading ? [] : data.order.promoCodes}\n      onCodeAdd={onCodeAdd}\n      onCodeRemove={onCodeRemove}\n    />\n  )\n}\n\nexport default OrderPromoInput\n","import './OrderPaymentMethod.css'\n\nimport { DateFormat, Trans } from '@lingui/react'\nimport { useObserver } from 'mobx-react-lite'\nimport React from 'react'\n\nimport { useRoot } from '../../app/useRoot'\nimport { SelectButtonThemed } from '../../common/Buttons'\n\nexport const OrderTimeButtons: React.FC = () => {\n  const { order } = useRoot()\n\n  return useObserver(() => {\n    if (!order.delayedOrderEnabled) {\n      return null\n    }\n    return (\n      <div className=\"order__payment__method\">\n        <SelectButtonThemed\n          data-testid=\"orderTimeButtonNow\"\n          selected={order.deliverAt === undefined}\n          onClick={() => order.setDeliverAt(undefined)}\n        >\n          <Trans>When possible</Trans>\n        </SelectButtonThemed>\n        <SelectButtonThemed\n          data-testid=\"orderTimeButtonLater\"\n          selected={order.deliverAt !== undefined}\n          onClick={order.openTimePicker}\n        >\n          {order.deliverAt ? (\n            <DateFormat\n              value={order.deliverAt}\n              format={{ weekday: 'long', hour: 'numeric', minute: 'numeric' }}\n            />\n          ) : (\n            <Trans>Choose time</Trans>\n          )}\n        </SelectButtonThemed>\n      </div>\n    )\n  })\n}\n","import React from 'react'\n\nimport { OrderEmailInput } from './OrderEmailInput'\nimport { OrderNameInput } from './OrderNameInput'\nimport { OrderNoteInput } from './OrderNoteInput'\nimport { OrderPhoneInput } from './OrderPhoneInput'\nimport OrderPromoInput from './OrderPromoInput'\nimport { OrderTimeButtons } from './OrderTimeButtons'\n\nexport const OrderFormInputs = () => (\n  <>\n    <OrderNameInput />\n    <OrderPhoneInput />\n    <OrderEmailInput />\n    <OrderNoteInput />\n    <OrderTimeButtons />\n    <OrderPromoInput />\n  </>\n)\n","import {\n  addMinutes,\n  endOfMinute,\n  getMinutes,\n  startOfMinute,\n  subMinutes,\n} from 'date-fns'\n\nexport function createTimeSteps(start: Date, end: Date, minuteStep: number) {\n  let current = startOfMinute(timeClampUp(start, minuteStep))\n  const steps: Date[] = []\n  const endMinute = endOfMinute(subMinutes(end, 1))\n  do {\n    steps.push(current)\n    current = addMinutes(current, minuteStep)\n  } while (current <= endMinute)\n  return steps\n}\n\nexport function timeClampUp(time: Date, minuteStep: number) {\n  return addMinutes(timeClampDown(time, minuteStep), minuteStep)\n}\n\nexport function timeClampDown(time: Date, minuteStep: number) {\n  return subMinutes(time, getMinutes(time) % minuteStep)\n}\n","import React from 'react'\nimport { ButtonProps } from 'reactstrap'\nimport styled from 'styled-components/macro'\n\nimport { PickerButton } from '../../common/PickerButton'\nimport { formatTime } from '../../helpers/formats'\n\ninterface IProps extends ButtonProps {\n  time: Date\n  isSelected: boolean\n  canBeSelected: boolean\n}\n\nconst Time = styled.div`\n  font-size: 1.2rem;\n`\n\nexport const TimePickerButton: React.FC<IProps> = ({\n  time,\n  ...buttonProps\n}) => (\n  <PickerButton\n    size=\"xs\"\n    outline={true}\n    width=\"10rem\"\n    data-testid={`timePickerButton__${time.getTime()}`}\n    {...buttonProps}\n  >\n    <Time>{formatTime(time)}</Time>\n  </PickerButton>\n)\n","import { DateFormat } from '@lingui/macro'\nimport {\n  closestIndexTo,\n  eachDayOfInterval,\n  isEqual,\n  startOfDay,\n} from 'date-fns'\nimport { isWithinInterval } from 'date-fns/fp'\nimport React, { Fragment } from 'react'\nimport styled from 'styled-components/macro'\n\nimport { createTimeSteps } from './createTimeSteps'\nimport { TimePickerButton } from './TimePickerButton'\n\ninterface IProps {\n  minDate: Date\n  maxDate: Date\n  minuteStep: number\n  onStepChange(step: Date): void\n  initialTime?: Date\n  filterIntervals?: Interval[]\n}\n\nconst TimePickerContainer = styled.div`\n  margin-top: 1rem;\n`\n\nconst TimePickerDay = styled.div`\n  font-size: 1rem;\n  font-weight: bold;\n  text-align: left;\n  margin: 0 0 0.2rem 0.2rem;\n`\n\nexport const TimePicker: React.FC<IProps> = ({\n  minDate,\n  maxDate,\n  minuteStep,\n  onStepChange,\n  initialTime,\n  filterIntervals = [],\n}) => {\n  const steps = React.useMemo(() => {\n    const allSteps = createTimeSteps(minDate, maxDate, minuteStep)\n    if (filterIntervals.length) {\n      return allSteps.filter(step =>\n        filterIntervals.some(isWithinInterval(step)),\n      )\n    }\n    return allSteps\n  }, [minDate, maxDate, minuteStep, filterIntervals])\n\n  const days = React.useMemo(() => {\n    return eachDayOfInterval({ start: minDate, end: maxDate })\n  }, [minDate, maxDate])\n\n  const [stepIdx, setStepIdx] = React.useState(0)\n\n  React.useEffect(() => {\n    if (initialTime) {\n      setStepIdx(closestIndexTo(initialTime, steps))\n    }\n  }, [initialTime])\n\n  React.useEffect(() => {\n    onStepChange(steps[stepIdx])\n  }, [])\n\n  return (\n    <TimePickerContainer>\n      {days.map(day => (\n        <Fragment key={day.getDate()}>\n          <TimePickerDay>\n            <DateFormat\n              value={day}\n              format={{ month: 'long', day: 'numeric', weekday: 'long' }}\n            />\n          </TimePickerDay>\n          {steps.map((step, idx) =>\n            isEqual(day, startOfDay(step)) ? (\n              <TimePickerButton\n                key={step.getTime()}\n                time={step}\n                isSelected={idx === stepIdx}\n                canBeSelected={true}\n                onClick={() => {\n                  setStepIdx(idx)\n                  onStepChange(step)\n                }}\n              />\n            ) : null,\n          )}\n        </Fragment>\n      ))}\n    </TimePickerContainer>\n  )\n}\n","import '../../common/Modal.css'\n\nimport { Trans } from '@lingui/macro'\nimport { isoDate } from '@speedlo/graphql'\nimport { addMinutes, isAfter } from 'date-fns'\nimport { useObserver } from 'mobx-react-lite'\nimport React from 'react'\nimport { Container, Modal, ModalBody, ModalHeader } from 'reactstrap'\n\nimport { useRoot } from '../../app/useRoot'\nimport { PrimaryButton } from '../../common/Buttons'\nimport {\n  useMOrderDeliveryTime,\n  useQOrderTimePicker,\n} from '../../graph/generated'\nimport { RM } from '../../helpers/ramda'\nimport { i18n } from '../../i18n'\nimport { TimePicker } from '../timePicker/TimePicker'\n\nexport const OrderTimePicker: React.FC = () => {\n  const { order, cart } = useRoot()\n\n  const { data, loading } = useQOrderTimePicker({ branchId: order.branchId! })\n\n  const [updateOrder] = useMOrderDeliveryTime()\n\n  const selectedTime = React.useRef<Date | undefined>(order.deliverAt)\n  const onConfirmAndClose = () => {\n    const time = selectedTime.current\n    updateOrder({\n      orderId: order.orderId!,\n      deliverAt: time && isoDate(time),\n      withGoods: cart.withGoods,\n    })\n    order.setDeliverAt(time)\n    order.closeTimePicker()\n  }\n\n  const getStartTime = () => {\n    const { companyBranch } = data\n    const openAt =\n      companyBranch.isOpen || !companyBranch.willOpenAt\n        ? new Date()\n        : new Date(companyBranch.willOpenAt)\n    return openAt\n  }\n\n  const getEndTime = () => {\n    const { companyBranch } = data\n    if (companyBranch.isOpen && companyBranch.willCloseAt) {\n      return new Date(companyBranch.willCloseAt)\n    }\n    const nextBusinessHour = companyBranch.businessHours.find(\n      RM.propEq('closed', false),\n    )\n    return nextBusinessHour ? new Date(nextBusinessHour.closeAt) : null\n  }\n\n  const getFilterIntervals = (): Interval[] => {\n    const { companyBranch } = data\n    return companyBranch.businessHours\n      .filter(RM.propEq('closed', true))\n      .map(bhour => ({\n        start: new Date(bhour.openAt),\n        end: new Date(bhour.closeAt),\n      }))\n  }\n\n  const getMinuteOffset = () => {\n    const { defaultDeliveryTime, defaultPickupTime } = data.companyBranch\n\n    if (order.usingDeliveryOrderMethod) {\n      return defaultDeliveryTime\n    }\n    if (order.usingPickupOrderMethod) {\n      return defaultPickupTime\n    }\n\n    return 0\n  }\n\n  const renderModalContent = () => {\n    if (loading) {\n      return null\n    }\n\n    const minDate = getStartTime()\n    const maxDate = getEndTime()\n    if (maxDate === null || isAfter(minDate, maxDate)) {\n      return (\n        <Trans>\n          It's not possible to pick a specific order time at this moment.\n        </Trans>\n      )\n    }\n\n    const minuteOffset = getMinuteOffset()\n\n    return (\n      <TimePicker\n        minuteStep={15}\n        minDate={addMinutes(minDate, minuteOffset)}\n        maxDate={addMinutes(maxDate, minuteOffset)}\n        initialTime={selectedTime.current}\n        filterIntervals={getFilterIntervals()}\n        onStepChange={time => (selectedTime.current = time)}\n      />\n    )\n  }\n\n  React.useEffect(() => {\n    if (\n      data &&\n      data.companyBranch &&\n      data.companyBranch.delayedDeliveryEnabled\n    ) {\n      order.enableDelayedOrder()\n    }\n  }, [data])\n\n  const header = order.usingDeliveryOrderMethod\n    ? i18n.t`Deliver at what time?`\n    : i18n.t`When you will pickup the order?`\n\n  return useObserver(() => (\n    <Modal\n      isOpen={order.timePickerOpen}\n      toggle={order.closeTimePicker}\n      className=\"modal__container\"\n      autoFocus={true}\n      backdrop=\"static\"\n      fade={false}\n    >\n      <ModalHeader\n        toggle={order.closeTimePicker}\n        tag={Container}\n        className=\"modal__header\"\n      >\n        <span>{header}</span>\n      </ModalHeader>\n      <ModalBody className=\"modal__body\">\n        <div className=\"modal__body__content\">{renderModalContent()}</div>\n        <div className=\"modal__body__button__line\">\n          <div className=\"modal__body__button__strip\" />\n          <PrimaryButton\n            onClick={onConfirmAndClose}\n            size=\"md\"\n            className=\"modal__body__button\"\n          >\n            {i18n.t`Confirm time`.toLocaleUpperCase()}\n          </PrimaryButton>\n        </div>\n      </ModalBody>\n    </Modal>\n  ))\n}\n","import React from 'react'\nimport { Field, FieldType } from 'react-form'\nimport { Input } from 'reactstrap'\nimport styled from 'styled-components/macro'\n\ninterface IProps {\n  field: FieldType\n  defaultValue?: boolean\n  validate?(value: boolean): string | null\n}\n\nconst CheckboxContainerStyled = styled.div`\n  display: flex;\n  margin-bottom: 0.5rem;\n`\n\nconst CheckboxStyled = styled(Input)`\n  -webkit-appearance: none;\n  -moz-appearance: none;\n  background-color: white;\n  border: 1px solid;\n  border-color: ${({ invalid }: { invalid: boolean }) =>\n    invalid ? 'red' : '#c5c5c5'};\n  width: 2rem;\n  height: 2rem;\n  min-width: 2rem;\n  border-radius: 0.25rem;\n  position: relative;\n  margin: 0;\n  outline: none;\n  &:checked {\n    background-color: white;\n  }\n  &:checked:after {\n    content: '\\\\2714';\n    font-size: 2rem;\n    position: absolute;\n    top: -0.5rem;\n    left: 0.1rem;\n    color: #1d1d1d;\n    overflow: hidden;\n  }\n`\n\nconst LabelStyled = styled.div`\n  margin: 0 0 0 0.8rem;\n  vertical-align: top;\n`\n\nexport const FormInputCheckbox: React.FC<IProps> = ({\n  field,\n  defaultValue = false,\n  validate,\n  children,\n  ...props\n}) => (\n  <Field field={field} defaultValue={defaultValue} validate={validate}>\n    {fieldApi => (\n      <CheckboxContainerStyled>\n        <CheckboxStyled\n          type=\"checkbox\"\n          value={fieldApi.value}\n          onChange={checked => fieldApi.setValue(checked.target.checked)}\n          invalid={fieldApi.touched && Boolean(fieldApi.error)}\n          {...props}\n        />\n        <LabelStyled>{children}</LabelStyled>\n      </CheckboxContainerStyled>\n    )}\n  </Field>\n)\n","import { observable } from 'mobx'\nimport { useObserver } from 'mobx-react-lite'\nimport React, { useCallback, useRef } from 'react'\nimport { Button, Collapse } from 'reactstrap'\nimport styled from 'styled-components/macro'\n\nimport { useRoot } from '../../app/useRoot'\nimport { FormInputCheckbox } from '../../common/FormInputCheckbox'\nimport { i18n } from '../../i18n'\nimport { TAgreement } from '../../models/OrderModel'\n\nconst ButtonStyled = styled(Button)`\n  padding: 0 0.5rem;\n  font-size: 0.8rem;\n  color: darkgray;\n`\n\nconst GdprAgreementStyled = styled.div`\n  font-size: 0.8rem !important;\n  color: darkgray;\n  margin: 0.5rem 0 0.5rem 0;\n  & .row {\n    margin: 0;\n  }\n`\n\nconst hideConfirmed = (agreement: TAgreement) => {\n  if (agreement.isConfirmed) {\n    // it's necessary to hide confirmed agreements like this\n    // because react-form already has validation errors stored\n    // for mandatory ones and is unable to forget it by not rendering field\n    return { style: { display: 'none' } }\n  }\n  return {}\n}\n\nexport const OrderAgreements: React.FC = () => {\n  const descOpen = useRef(observable.array<ID>([])).current\n  const toggleId = useCallback(\n    (id: ID) => () => {\n      if (descOpen.includes(id)) {\n        descOpen.remove(id)\n      } else {\n        descOpen.push(id)\n      }\n    },\n    [],\n  )\n  const { order } = useRoot()\n  return useObserver(() => (\n    <>\n      {order.agreements.map((agreement, idx) => (\n        <div key={agreement.id} {...hideConfirmed(agreement)}>\n          <FormInputCheckbox\n            field={['agreements', idx, 'isConfirmed']}\n            validate={checked =>\n              agreement.isMandatory && !(agreement.isConfirmed || checked)\n                ? 'Agreement is mandatory'\n                : null\n            }\n            data-testid={`orderAgreement__Check__${agreement.id}`}\n          >\n            <span dangerouslySetInnerHTML={{ __html: agreement.name }} />\n            {agreement.isMandatory && ' * '}\n            {agreement.description && (\n              <>\n                <ButtonStyled\n                  color=\"link\"\n                  onClick={toggleId(agreement.id)}\n                  data-testid={`orderAgreement__MoreButton__${agreement.id}`}\n                >\n                  {descOpen.includes(agreement.id)\n                    ? i18n.t`Less`.toLocaleLowerCase()\n                    : i18n.t`More...`.toLocaleLowerCase()}\n                </ButtonStyled>\n                <Collapse isOpen={descOpen.includes(agreement.id)}>\n                  <GdprAgreementStyled\n                    data-testid={`orderAgreement__Info__${agreement.id}`}\n                    dangerouslySetInnerHTML={{\n                      __html: agreement.description,\n                    }}\n                  />\n                </Collapse>\n              </>\n            )}\n          </FormInputCheckbox>\n        </div>\n      ))}\n    </>\n  ))\n}\n","import './CartView.css'\n\nimport { Trans } from '@lingui/macro'\nimport { CartLabels, useCartSystem } from '@speedlo/cart'\nimport { autorun } from 'mobx'\nimport { observer } from 'mobx-react-lite'\nimport React from 'react'\n\nimport { useTheme } from '../../app/ThemeSwitchProvider'\nimport { mobileBreakpoint } from '../../common/Responsive'\nimport { useQCart } from '../../graph/generated'\nimport { OrderSubmitLine } from '../orderForm/OrderSubmitLine'\nimport { useCartControl } from './hooks/useCartControl'\n\ninterface IProps {\n  orderId: MaybeID\n  isReadonly: boolean\n}\n\nexport const CartSystem = observer<IProps>(({ orderId, isReadonly }) => {\n  const theme = useTheme()\n  const labels = React.useMemo(getCartLabels, [])\n\n  const {\n    cartModel,\n    onItemEdit,\n    onItemRemove,\n    onPlaceOrder,\n    onChangeOrder,\n  } = useCartControl()\n\n  const renderMobileSubmit = React.useCallback(\n    () => (\n      <OrderSubmitLine\n        canSubmit={true}\n        isSubmitting={false}\n        onClick={isReadonly ? onChangeOrder : onPlaceOrder}\n      >\n        {isReadonly ? <Trans>Change order</Trans> : <Trans>Place order</Trans>}\n      </OrderSubmitLine>\n    ),\n    [onPlaceOrder, isReadonly],\n  )\n\n  const renderGoodsLoading = React.useCallback(\n    () => <Trans>Accessing your order</Trans>,\n    [],\n  )\n\n  const cart = useCartSystem({\n    colors: {\n      primary: theme.primary,\n      sumRowBg: theme.primary,\n      sumRowText: 'white',\n      mobileSummaryItemCount: theme.secondary,\n    },\n    labels,\n    isReadonly,\n    mobileBreakpoint,\n    backgroundImage: theme.backgroundCart,\n    onItemEdit,\n    onItemRemove,\n    renderMobileSubmit,\n    renderGoodsLoading,\n  })\n\n  React.useEffect(\n    () =>\n      autorun(() => {\n        cartModel.updateDisplay(cart.store.isMobile, cart.store.showGoods)\n      }),\n    [],\n  )\n\n  const { data, loading } = useQCart(\n    {\n      orderId: orderId!,\n      withGoods: cartModel.withGoods,\n      withPresence: cartModel.withPresence,\n    },\n    {\n      skip: !orderId,\n      fetchPolicy: 'cache-first',\n      context: {\n        noBatch: true,\n      },\n    },\n  )\n\n  React.useEffect(() => {\n    if (!loading) {\n      cart.updateSummary(data.order)\n      if (cartModel.withGoods) {\n        cart.updateGoods(data.order)\n      }\n    }\n  }, [data])\n\n  return cart.renderCart()\n})\n\nfunction getCartLabels(): CartLabels {\n  return {\n    noSideDish: <Trans>Without sidedish</Trans>,\n    noCost: <Trans>For free</Trans>,\n    cartSumHeader: totalPrice => (\n      <Trans>In the cart you have goods for {totalPrice}</Trans>\n    ),\n    emptyCart: <Trans>Cart is empty</Trans>,\n    totalDiscount: <Trans>Total discount</Trans>,\n    coverPrice: <Trans>Covers</Trans>,\n    transportFee: <Trans>Delivery</Trans>,\n    totalSum: <Trans>Total</Trans>,\n    tip: <Trans>Tip</Trans>,\n    minimalOrderPrice: price => (\n      <Trans>Minimal price of order is {price}</Trans>\n    ),\n  }\n}\n","import { useApolloClient } from '@speedlo/graphql'\nimport { useRouterContext } from '@speedlo/hooks'\nimport { idPropEq, RM } from '@speedlo/tools'\nimport React from 'react'\n\nimport { useRoot } from '../../../app/useRoot'\nimport {\n  MRemoveCartItemMutation,\n  MRemoveCartItemVariables,\n  QCartDocument,\n  QCartQuery,\n  QCartVariables,\n  useMRemoveCartItem,\n} from '../../../graph/generated'\n\nexport function useCartControl() {\n  const { order: orderModel, cart: cartModel } = useRoot()\n  const client = useApolloClient()\n  const { history } = useRouterContext()\n  const onItemEdit = React.useCallback((item: ID) => {\n    orderModel.changeCartItem(item)\n  }, [])\n\n  const [removeItem] = useMRemoveCartItem()\n\n  const onItemRemove = React.useCallback((item: ID) => {\n    const variables: MRemoveCartItemVariables = {\n      itemId: item,\n      withGoods: cartModel.withGoods,\n      withPresence: cartModel.withPresence,\n    }\n    removeItem(variables, {\n      optimisticResponse: makeOptimisticRemove(variables),\n      context: {\n        noBatch: true,\n      },\n    })\n  }, [])\n\n  const onPlaceOrder = React.useCallback(() => {\n    history.push('/confirm')\n  }, [])\n\n  const onChangeOrder = React.useCallback(() => {\n    history.push('/order')\n  }, [])\n\n  return { cartModel, onItemEdit, onItemRemove, onPlaceOrder, onChangeOrder }\n\n  function makeOptimisticRemove(\n    variables: MRemoveCartItemVariables,\n  ): MRemoveCartItemMutation | undefined {\n    const current = client.readQuery<QCartQuery, QCartVariables>(\n      {\n        query: QCartDocument,\n        variables: {\n          orderId: orderModel.orderId!,\n          withGoods: cartModel.withGoods,\n          withPresence: cartModel.withPresence,\n        },\n      },\n      true,\n    )\n    if (!current) {\n      return undefined\n    }\n    const rejectItem = RM.reject(idPropEq(variables.itemId))\n    return {\n      __typename: 'Mutation',\n      remove: {\n        ...current.order,\n        countWares: current.order.countWares - 1,\n        totalSum: {\n          ...current.order.totalSum,\n          value: -1,\n        },\n        items: variables.withGoods\n          ? rejectItem(current.order.items)\n          : current.order.items,\n        presence: variables.withPresence\n          ? rejectItem(current.order.presence)\n          : current.order.presence,\n      },\n    }\n  }\n}\n","module.exports = __webpack_public_path__ + \"static/media/logo-commerce-01.6d4e5108.svg\";","module.exports = __webpack_public_path__ + \"static/media/logo-commerce-02.8afb6c6f.svg\";","module.exports = __webpack_public_path__ + \"static/media/logo-doveze.e13c0122.svg\";","module.exports = __webpack_public_path__ + \"static/media/logo-gopay.48aa4030.png\";"],"sourceRoot":""}