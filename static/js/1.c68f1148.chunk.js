(window.webpackJsonpdoveze=window.webpackJsonpdoveze||[]).push([[1],{1134:function(e,t,n){"use strict";n.d(t,"a",function(){return i}),n.d(t,"b",function(){return c}),n.d(t,"c",function(){return l});var r=n(0),a=n.n(r),o=n(1420),i=function(e){var t=e.children;return a.a.createElement(o.a,{className:"pl-sm-0",sm:"12",md:"12",lg:"10",xl:"8"},t)},c=function(e){var t=e.children;return a.a.createElement(o.a,{className:"pl-sm-0",sm:"8",md:"8",lg:"6",xl:"5"},t)},l=function(e){var t=e.children;return a.a.createElement(o.a,{className:"pl-sm-0",sm:"4",md:"4",lg:"4",xl:"3"},t)}},1135:function(e,t,n){"use strict";n.d(t,"b",function(){return p}),n.d(t,"a",function(){return f});var r=n(39),a=n(105),o=n(284),i=n(54),c=n(0),l=n.n(c),s=n(1425),u=n(1423),d=n(1426),m=n(157),p="<hidden>",f=Object(i.a)(function(e){var t=e.name,n=e.label,i=e.errorForceDisplay,c=void 0!==i&&i,f=Object(a.a)(e,["name","label","errorForceDisplay"]),b=Object(m.a)(),h=Object(o.d)(t),g=Object(r.a)(h,2),v=g[0],y=g[1],O=l.a.createElement(s.a,{for:t,hidden:!n},f.placeholder||n),_=c||v.touched;return l.a.createElement(l.a.Fragment,null,O,l.a.createElement(u.a,Object.assign({},y(),f,{type:"text",valid:v.touched&&!v.error,invalid:_&&Boolean(v.error),disabled:b.disableInteraction})),_&&v.error!==p?l.a.createElement(d.a,{valid:!1,tooltip:!1},v.error):null)})},1137:function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n(49),a=n(59),o=n(158);function i(e){var t=e.status,n=e.updateInterval,i=void 0===n?30*r.a:n,l=e.openSoonThresholdInMinutes,s=void 0===l?30:l,u=e.closeSoonThresholdInMinutes,d=void 0===u?30:u,m=Object(r.d)();Object(r.h)({interval:i,enabled:i>0});var p=m(),f=t.isOpen,b=t.willCloseAt,h=t.willOpenAt,g=h?Object(o.differenceInMinutes)(h,p):0,v=b?Object(o.differenceInMinutes)(b,p):0;return{decision:f?b&&v<=0?"Closed":c(b,d,p)?"ClosingSoon":"Open":h&&g<=0?"Open":c(h,s,p)?"OpeningSoon":"Closed",openingIn:g,closingIn:v,closedNote:t.businessHours.length>0?a.RM.head(t.businessHours).closedNote:null}}function c(e,t,n){return!!e&&Math.abs(Object(o.differenceInMinutes)(e,n))<=t}},1138:function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n(49),a=n(25),o=n(157);function i(){var e=Object(a.b)(),t=Object(o.a)(),n=Object(r.g)().history;Object(r.i)(function(){return e.initialized},function(){t.hasOrder||n.push("/")})}},1142:function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n(0),a=n.n(r),o=n(42),i=function(e){var t=e.address;if(!t||!t.location)return a.a.createElement("span",null,o.b._("Unknown address"));var n=t.location;return a.a.createElement("span",null,"".concat(n.street," ").concat(n.houseNumber,",\n ").concat(n.city))}},1143:function(e,t,n){"use strict";n.d(t,"a",function(){return c});var r=n(105),a=n(38),o=n(0),i=n.n(o),c=function(e){var t=e.imageName,n=(e.fallbackColor,e.fixed),o=void 0!==n&&n,c=e.size,l=void 0===c?"inherit":c,s=e.children,u=e.component,d=void 0===u?"div":u,m=Object(r.a)(e,["imageName","fallbackColor","fixed","size","children","component"]);return i.a.createElement(Object(a.d)(d).withConfig({displayName:"BackgroundThemed",componentId:"sc-1ju94id-0"})(["background-image:",";background-attachment:",";background-repeat:no-repeat;background-position:left top;background-size:",";"],function(e){return"url(".concat(e.theme[t],")")},function(e){return o?"fixed":"inherit"},function(e){return l}),m,s)};t.b=c},1144:function(e,t,n){"use strict";n.d(t,"a",function(){return o});var r=n(25),a=n(48);function o(e){var t=Object(r.b)().business;return Object(a.J)({branchSpecific:!t.isBrand||!!e,brandId:t.brandId,branchId:e||t.branchId},{skip:!t.isValid,fetchPolicy:"cache-first",context:{noBatch:!0}})}},1145:function(e,t,n){"use strict";n.d(t,"a",function(){return f});var r=n(78),a=n(1136),o=n(23),i=n(54),c=n(0),l=n.n(c),s=n(25),u=n(46),d=n(285),m=function(e){return{streetViewControl:!1,mapTypeControl:!1,fullscreenControl:!1,clickableIcons:!1,draggableCursor:"default",minZoom:10,zoomControlOptions:{position:e?google.maps.ControlPosition.RIGHT_CENTER:google.maps.ControlPosition.RIGHT_TOP}}},p=["places"],f=Object(i.a)(function(e){var t=e.model,n=e.isMobile,i=void 0!==n&&n,c=e.children,f=Object(s.b)().user,b=Object(a.e)({id:"script-loader",version:"weekly",googleMapsApiKey:u.a.googleMapsApi,libraries:p,language:f.language}),h=b.isLoaded,g=b.loadError,v=b.url,y=Reflect.has(window,"google");return g||h&&!y?(g&&o.a.withScope(function(e){e.setExtras({googleMapUrl:v}),o.a.captureException(g)}),l.a.createElement("h2",null,l.a.createElement(r.Trans,{id:"Cannot load map right now. Please try again later."}))):h?l.a.createElement(a.a,{zoom:t.zoom,center:t.center,onCenterChanged:t.updatePosition,onZoomChanged:t.updateZoom,onClick:t.onClick,onLoad:t.setMapRef,onUnmount:function(){return t.setMapRef(null)},options:m(i),mapContainerStyle:{borderRadius:"0 0 0.5rem 0.5rem",overflow:"hidden",height:i?"100%":"calc(100% - 3.75rem)"}},"function"===typeof c?c():c):l.a.createElement(d.a,{noMargin:!0})})},1146:function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n(49),a=n(25),o=n(48);function i(e){var t=Object(a.b)().user,n=Object(o.z)({branchId:e},{skip:!e,fetchPolicy:"cache-first"});return Object(r.e)(function(){return t.language},function(){n.refetch()}),n}},1153:function(e,t,n){"use strict";n.d(t,"a",function(){return O}),n.d(t,"b",function(){return _});var r=n(45),a=n.n(r),o=n(70),i=n(39),c=n(11),l=n(49),s=n(23),u=n(284),d=n(0),m=n.n(d),p=n(1427),f=n(1135),b=n(48),h=n(157),g=n(42),v=n(1179),y=n(1180),O=50,_=function(e){var t=e.children,n=Object(h.a)(),r=Object(l.g)().history,c=Object(y.a)(),d=c.executeGoPayPayment,_=c.paymentErrorModal,j=Object(b.u)(),w=Object(i.a)(j,1)[0],C=m.a.useMemo(function(){return Object(u.b)(function(e){return{firstname:e.string().required(f.b),lastname:e.string().required(f.b),phonePrefix:e.string().required(f.b),phone:e.string().required(f.b).matches(/\d+/,g.b._("Only numbers allowed for phone")),email:e.string().required(f.b).email(g.b._("Invalid email format")),note:e.string().notRequired().max(O,function(e){var t=e.value;return g.b._("Maximum length is {NOTE_MAX_LENGTH, plural, other {# characters}}. Typed {0, plural, one {# character} other {# characters}}",{0:t.length,NOTE_MAX_LENGTH:O})})}})},[]),k=Object(v.a)().isOrderInCart;m.a.useEffect(function(){n.hasOrder&&!k&&r.replace("/")});var I=m.a.useCallback(function(){var e=Object(o.a)(a.a.mark(function e(t){var o,i,c,l,u;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n.submitStarted(),o=E(t,n),e.next=4,w(o);case 4:if(i=e.sent){e.next=8;break}return n.submitFailed(),e.abrupt("return");case 8:if(c=i.submitOrder,l=c.userErrors,u=c.gopayUrl,!l.length){e.next=12;break}return n.submitFailed(l),e.abrupt("return");case 12:if(n.paymentMethod!==b.f.Cash){e.next=16;break}return n.submitFinished(),r.replace("/finish"),e.abrupt("return");case 16:n.paymentMethod===b.f.Gopay?u?d(u).finally(function(){n.submitFinished()}):(s.a.withScope(function(e){e.setExtras({variables:o}),s.a.captureMessage("No gopayUrl received for GoPay payment")}),n.submitFailed()):(s.a.withScope(function(e){e.setExtras({variables:o}),s.a.captureMessage("Unknown payment mode ".concat(n.paymentMethod))}),n.submitFailed());case 17:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),[d,r,n,w]),P=Object(u.f)({initialValues:{firstname:"",lastname:"",email:"",phone:"",phonePrefix:"",note:"",agreements:[],deliverAt:null},validationSchema:C,onSubmit:I,onFormChanges:console.log});return m.a.useEffect(function(){n.root.cart.setOrderSubmitting(P.state.isSubmitting)},[P.state,n.root.cart]),m.a.createElement(m.a.Fragment,null,_,m.a.createElement(u.a,{value:P},m.a.createElement(p.a,{onSubmit:P.handlers.handleSubmit},t)))};function E(e,t){return{orderId:t.orderId,customer:{firstName:e.firstname,lastName:e.lastname,emails:[{email:e.email}],phones:[{phone:"".concat(e.phonePrefix).concat(e.phone)}]},note:e.note,tips:t.tips,paymentGate:t.paymentMethod,deliverAt:e.deliverAt&&Object(c.isoDate)(e.deliverAt),agreements:e.agreements}}},1155:function(e,t,n){},1157:function(e,t,n){"use strict";n.d(t,"a",function(){return l});var r=n(283),a=n(54),o=n(0),i=n.n(o),c=n(25),l=Object(a.a)(function(e){var t=e.className,n=Object(c.b)(),a=n.business,o=n.user;return a.isValid?i.a.createElement(r.a,{availableLanguages:a.branch.supportedLanguages,selectedLanguage:o.language,onChange:function(e){e!==o.language&&(o.selectLanguage(e),setTimeout(function(){window.location.reload()},300))},className:t,backgroundColor:"white",arrowColor:"#5A5A5A"}):null})},1158:function(e,t,n){"use strict";n.d(t,"a",function(){return d});var r=n(78),a=n(54),o=n(0),i=n.n(o),c=n(25),l=n(143),s=n(1137),u=n(42),d=function(e){var t=e.status,n=Object(c.b)().user,o=Object(s.a)({status:t,updateInterval:0}),d=o.decision,m=o.openingIn,p=o.closedNote;return Object(a.d)(function(){return i.a.createElement(l.a,{isOpen:("Closed"===d||"OpeningSoon"===d)&&!n.closingTimeAlertHidden,onClose:n.hideClosingTime,headerText:u.b._("We are closed right now")},p||u.b._("We're sorry, but we do not accept new orders at this time."),"OpeningSoon"===d&&i.a.createElement(r.Trans,{id:"You can prepare your order because we are {openingIn, plural, one {opening in 1 minute} other {opening in # minutes}} !",values:{openingIn:m}}))})}},1159:function(e,t,n){"use strict";n.d(t,"a",function(){return i});n(1197);var r=n(478),a=n(0),o=n.n(a),i=function(){return o.a.createElement(o.a.Fragment,null,o.a.createElement("img",{src:Object(r.getLogo)("doveze"),className:"shop__header__icons__doveze","data-testid":"ShopHeaderIcons__AppLogo",alt:"logo Doveze.cz"}),o.a.createElement("img",{src:Object(r.getLogo)("mastercard"),className:"shop__header__icons__commerce",alt:"MasterCard"}),o.a.createElement("img",{src:Object(r.getLogo)("visa"),className:"shop__header__icons__commerce","data-testid":"ShopHeaderIcons__VisaLogo",alt:"VISA"}),o.a.createElement("img",{src:Object(r.getLogo)("gopay"),className:"shop__header__icons__gopay",alt:"GoPay","data-testid":"ShopHeaderIcons__GoPayLogo"}))}},1160:function(e,t,n){"use strict";n.d(t,"a",function(){return b});var r=n(79),a=n(38),o=n(78),i=n(158),c=n(0),l=n.n(c),s=n(68),u=n(25),d=n(1137);function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}var p=a.d.span.withConfig({displayName:"StyledStatusDisplayOpen",componentId:"ul92ph-0"})(["font-style:italic;color:#0f9849;"]),f=a.d.span.withConfig({displayName:"StyledStatusDisplayClosed",componentId:"ul92ph-1"})(["font-style:italic;color:#b40000;"]),b=function(e){var t=e.status,n=e.deliveryTime,r=e.pickupTime,a=Object(u.b)().order,i=Object(d.a)({status:t}),c=i.decision,m=i.openingIn,b=i.closingIn;if(!t)return null;if(!1===t.isOpen){if(!t.willOpenAt)return l.a.createElement(f,null,l.a.createElement(o.Trans,{id:"We are closed until further notice"}));var g=t.businessHours[0];if(g&&g.closedNote)return l.a.createElement(f,null,g.closedNote)}switch(c){case"Open":var v;return a.usingDeliveryOrderMethod&&t.defaultDeliveryTimeEnabled&&(v=l.a.createElement(o.Trans,{id:"We are delivering in {deliveryTime} minutes",values:{deliveryTime:n}})),a.usingPickupOrderMethod&&t.defaultPickupTimeEnabled&&(v=l.a.createElement(o.Trans,{id:"We can prepare your order in {pickupTime} minutes",values:{pickupTime:r}})),l.a.createElement(s.a,{path:"/order",render:function(){return l.a.createElement(p,{"data-testid":"statusDisplayOpen"},v)}});case"OpeningSoon":return l.a.createElement(f,null,l.a.createElement(o.Trans,{id:"{openingIn, plural, one {Opening in 1 minute} other {Opening in # minutes}}",values:{openingIn:m}}));case"ClosingSoon":return l.a.createElement(p,null,l.a.createElement(o.Trans,{id:"{closingIn, plural, one {Closing in 1 minute} other {Closing in # minutes}}",values:{closingIn:b}}));case"Closed":return l.a.createElement(f,null,t.willOpenAt?l.a.createElement(o.Trans,{id:"We will open at {0}",values:{0:h(t.willOpenAt)}}):l.a.createElement(o.Trans,{id:"Closed"}))}};function h(e){var t=new Date(e),n=new Date,a={hour:"numeric",minute:"numeric"};return Object(i.isSameDay)(t,n)||(a=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(n,!0).forEach(function(t){Object(r.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},a,{weekday:"long"})),l.a.createElement(o.DateFormat,{value:t,format:a})}},1161:function(e,t,n){"use strict";n.d(t,"a",function(){return m});var r=n(38),a=n(78),o=n(0),i=n.n(o),c=n(191),l=n(282),s=n(103),u=n(104),d=r.d.div.withConfig({displayName:"CenteredButtonContainer",componentId:"sc-1yzqtn3-0"})(["text-align:center;"]),m=function(e){var t=e.finish,n=t.androidApp,r=t.iosApp,o=function(){return i.a.createElement(c.b,{to:"/"},i.a.createElement(s.a,{className:"finish__view__submit__line__button"},i.a.createElement(a.Trans,{id:"Back to home page"})))};return i.a.createElement(i.a.Fragment,null,i.a.createElement(u.a,null,(n||r)&&i.a.createElement("div",{className:"finish__view__apps__propagation"},i.a.createElement("div",{className:"finish__view__apps__propagation__header"},i.a.createElement(a.Trans,{id:"What about mobile app?"})),i.a.createElement("div",{className:"finish__view__apps__propagation__description"},i.a.createElement(a.Trans,{id:"We have prepared mobile app, so you could order from anywhere!"})),n&&i.a.createElement("a",{href:n.url},i.a.createElement(l.a,{className:"finish__view__apps__propagation__button",color:"secondary"},"Google Play")),r&&i.a.createElement("a",{href:r.url},i.a.createElement(l.a,{className:"finish__view__apps__propagation__button",color:"secondary"},"App Store"))),i.a.createElement(d,null,o())),i.a.createElement(u.b,null,i.a.createElement("div",{className:"finish__view__submit__line",style:{textAlign:"center"}},i.a.createElement("div",{className:"finish__view__submit__line__strip"}),o())))}},1162:function(e,t,n){"use strict";n.d(t,"a",function(){return s});var r=n(0),a=n.n(r),o=n(25),i=n(285),c=n(48),l=n(1138),s=function(e){var t=e.render,n=Object(o.b)().order;Object(l.a)();var r=Object(c.E)({branchId:n.branchId,orderId:n.orderId}),s=r.data;return r.loading?a.a.createElement(i.a,null):t(s)}},1163:function(e,t,n){"use strict";n.d(t,"a",function(){return p});var r=n(38),a=n(78),o=n(59),i=n(0),c=n.n(i),l=n(48),s=n(42),u=r.d.div.withConfig({displayName:"HeaderThemed",componentId:"s65dzo-0"})(["background-color:",";"],function(e){return e.theme.primary}),d=r.d.div.withConfig({displayName:"PriceThemed",componentId:"s65dzo-1"})(["background-color:",";"],function(e){return e.theme.primary}),m=r.d.div.withConfig({displayName:"PriceCornerThemed",componentId:"s65dzo-2"})(["border-top-color:"," !important;"],function(e){return e.theme.primary}),p=function(e){var t=e.order;return c.a.createElement(c.a.Fragment,null,c.a.createElement(u,{className:"finish__view__header"},c.a.createElement("div",{className:"finish__view__header__inner"},c.a.createElement("span",{className:"flaticon-transport-1 finish__view__header__icon"}),c.a.createElement("h3",null,c.a.createElement(a.Trans,{id:"It's done! Thank you :-)"})))),c.a.createElement("h4",null,c.a.createElement(a.Trans,{id:"Your order was successfully accepted!"})," ",function(e){var t=e.orderPayments;if(t.some(f(l.g.Cash)))return s.b._("You will pay at pickup.");if(t.some(f(l.g.Credit)))return s.b._("You have payed.");return null}(t)),c.a.createElement("div",{className:"finish__view__items"},c.a.createElement("div",{className:"finish__view__items__look__to"},c.a.createElement(a.Trans,{id:"You can look forward to:"})),t.items.map(function(e){return c.a.createElement(b,Object.assign({key:e.id},e))}),c.a.createElement(m,{className:"finish__view__items__price__corner"}),c.a.createElement(d,{className:"finish__view__items__price"},function(e){var t=e.orderPayments;e.totalSum;if(t.some(f(l.g.Cash)))return s.b._("Total cost to be payed:");if(t.some(f(l.g.Credit)))return s.b._("Total cost payed:");return null}(t)," ",c.a.createElement("b",null,t.totalSum.formattedValue))))},f=function(e){return function(t){return t.paymentMethod.paymentType.enum===e}};function b(e){var t=e.recipe,n=e.sideDishes;return c.a.createElement("div",null,c.a.createElement("b",null,t.nameLabel),n.length?" + ".concat(n.map(o.RM.path(["recipe","nameLabel"])).join(",")):null)}},1164:function(e,t,n){"use strict";n.d(t,"a",function(){return l});var r=n(38),a=n(78),o=n(0),i=n.n(o),c=r.d.a.withConfig({displayName:"PhoneNumberLinkStyled",componentId:"sc-1y14w99-0"})(["color:inherit;text-decoration:none;&:hover{text-decoration:underline;}"]),l=function(e){var t=e.branch;return i.a.createElement("div",{className:"finish__view__support"},i.a.createElement("h4",null,i.a.createElement(a.Trans,{id:"Any question? Do you have a problem? Call:"})),i.a.createElement("span",{className:"flaticon-technology finish__view__support__icon"}),i.a.createElement("span",{className:"finish__view__support__phone"},i.a.createElement(c,{href:"tel:".concat(t.phone)},t.phone)))}},1165:function(e,t,n){"use strict";n(1199);var r=n(0),a=n.n(r);t.a=function(e){var t=e.children;return a.a.createElement("div",{className:"button__stripe"},a.a.createElement("div",{className:"button__stripe__bar"}),a.a.createElement("div",{className:"button__stripe__button"},t))}},1166:function(e,t,n){"use strict";n.d(t,"a",function(){return l});var r=n(1136),a=n(0),o=n.n(a),i=n(25),c=n(133);function l(){var e=Object(i.b)().map,t=Object(r.d)(),n=o.a.useRef(null);return function(r){var a=n.current;(!a||a.latitude!==r.latitude&&a.longitude!==r.longitude)&&function(r){if(t){var a=Object(c.b)(r);e.log("panning to %j",a),t.panTo(a),n.current=r}else e.log("cannot pan map as ref is not available")}(r)}}},1167:function(e,t,n){"use strict";n.d(t,"a",function(){return s});var r=n(38),a=n(1136),o=n(0),i=n.n(o),c=n(133),l=r.d.div.withConfig({displayName:"StyledPickupMapMarker",componentId:"sc-18o5u5p-0"})(["cursor:pointer;color:white;opacity:0.5;&::before{font-size:1.3rem;margin:0;padding:0.5rem;background-color:#ff0000;border-radius:1rem;}"]),s=function(e){var t=e.branch,n=e.onClick;return i.a.createElement(a.c,{position:Object(c.a)(t.gps),mapPaneName:a.c.OVERLAY_MOUSE_TARGET,getPixelPositionOffset:function(e,t){return{x:0===e?-12:-e/2,y:0===t?-12:-t/2}}},i.a.createElement(l,{className:"flaticon-restaurant","data-testid":"PickupMapMarker",title:t.name,onClick:n}))}},1168:function(e,t,n){"use strict";n.d(t,"a",function(){return p});var r=n(79),a=n(186),o=n(39),i=n(11),c=n(25),l=n(48);function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(n,!0).forEach(function(t){Object(r.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var d=1,m=[];function p(){var e=Object(c.b)(),t=e.order,n=e.cart,r=Object(i.useApolloClient)(),s=Object(l.l)({context:{noBatch:!0}}),p=Object(o.a)(s,1)[0];return function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:m,a={orderId:t.orderId,recipeId:e,sideDishes:r,withGoods:n.withGoods,withPresence:n.withPresence};return p(a,{optimisticResponse:f(a)})};function f(e){var t=r.readQuery({query:l.h,variables:{orderId:e.orderId,withGoods:n.withGoods,withPresence:n.withPresence}},!0);if(t){var o="-".concat(d++);return{__typename:"Mutation",add:u({},t.order,{countWares:t.order.countWares+1,totalSum:u({},t.order.totalSum,{value:-1}),items:function(){if(!n.withGoods)return t.order.items;var i=r.readFragment({id:"Recipe-".concat(e.recipeId),fragment:l.b,fragmentName:"FRecipe"},!0);return i?[].concat(Object(a.a)(t.order.items),[{__typename:"OrderRecipe",automatic:!1,id:o,price:{__typename:"PriceConverted",formattedValue:"???",value:-1},recipe:i,sideDishes:[]}]):t.order.items}(),presence:n.withPresence?[].concat(Object(a.a)(t.order.presence),[{__typename:"OrderRecipe",id:o,recipe:{__typename:"Recipe",id:e.recipeId}}]):t.order.presence})}}}}},1169:function(e,t,n){"use strict";n.d(t,"a",function(){return s});var r=n(105),a=n(38),o=n(0),i=n.n(o),c=n(282),l=Object(a.d)(function(e){e.isSelected,e.width;var t=Object(r.a)(e,["isSelected","width"]);return i.a.createElement(c.a,t)}).withConfig({displayName:"PickerButtonStyled",componentId:"sc-19g322n-0"})(["border-radius:0.6rem;margin:0.5rem;background-color:"," !important;color:"," !important;&:hover{border-color:"," !important;}width:",";@media (max-width:370px){width:100%;}&.btn-outline-secondary{color:#2e2e2e;border-color:#d4d4d4;}&.btn-outline-secondary.active{color:white;}"],function(e){return e.isSelected?e.theme.tertiary:"transparent"},function(e){return e.isSelected?e.theme.tertiaryText:"initial"},function(e){return e.theme.tertiaryHover},function(e){return e.width}),s=function(e){var t=e.isSelected,n=(e.onSelect,e.children),a=Object(r.a)(e,["isSelected","onSelect","children"]);return i.a.createElement(l,Object.assign({isSelected:t},a),n)}},1170:function(e,t,n){"use strict";n.d(t,"a",function(){return u});var r=n(14),a=n(38),o=n(0),i=n.n(o),c=n(104);function l(){var e=Object(r.a)(["\n      position: fixed;\n      bottom: 0;\n      width: 100%;\n  "]);return l=function(){return e},e}var s=a.d.div.withConfig({displayName:"StyledButtonStrip",componentId:"sc-4alr49-0"})(["margin:0;margin-bottom:1rem;text-align:center;position:sticky;bottom:1rem;"," div.strip{background-color:#d4d4d4;position:relative;top:3.2rem;z-index:0;height:1.6rem;width:100%;}button{margin:1rem;padding:0.8rem 1.6rem;z-index:1;position:relative;}"],Object(c.d)(l())),u=function(e){var t=e.children;return i.a.createElement(s,null,i.a.createElement("div",{className:"strip"}),t)}},1176:function(e,t,n){"use strict";n.d(t,"a",function(){return p});var r=n(78),a=(n(498),n(54)),o=n(0),i=n.n(o),c=n(1114),l=n(1111),s=n(1112),u=n(1113),d=n(282),m=n(25),p=function(){var e=Object(m.b)().order;return Object(a.d)(function(){return i.a.createElement(c.a,{isOpen:e.hasErrors,toggle:e.clearErrors,className:"modal__container"},i.a.createElement(l.a,{toggle:e.clearErrors,tag:s.a,className:"modal__header"},i.a.createElement("span",null,i.a.createElement(r.Trans,{id:"Order can not be completed"}))),i.a.createElement(u.a,{className:"modal__body"},i.a.createElement("div",{className:"modal__body__content"},e.hasErrors&&e.submitErrors.map(function(e,t){return i.a.createElement("div",{key:t},e)})),i.a.createElement("div",{className:"modal__body__button__line"},i.a.createElement("div",{className:"modal__body__button__strip"}),i.a.createElement(d.a,{className:"modal__body__button",color:"primary",onClick:e.clearErrors},i.a.createElement(r.Trans,{id:"I understand"})),"/>")))})}},1177:function(e,t,n){"use strict";n.d(t,"a",function(){return o});n(1211);var r=n(284),a=(n(0),n(103),n(157)),o=(n(1153),function(){Object(a.a)(),Object(r.g)();return null})},1179:function(e,t,n){"use strict";n.d(t,"a",function(){return o});var r=n(48),a=n(157);function o(){var e=Object(a.a)(),t=Object(r.F)({orderId:e.orderId},{skip:!e.orderId}),n=t.data,o=t.loading;return{isOrderInCart:o||n.order.orderStateCategory===r.e.InCart,hasItemsInCart:!o&&n.order.countWares>0}}},1180:function(e,t,n){"use strict";n.d(t,"a",function(){return m});var r=n(39),a=n(49),o=n(1410),i=n(0),c=n.n(i),l=n(25),s=n(48),u=n(286),d=n(42);function m(){var e=Object(l.b)(),t=e.order,n=e.business,i=Object(a.g)().history,m=Object(u.a)(),p=Object(r.a)(m,2),f=p[0],b=p[1],h=Object(s.j)({fetchPolicy:"no-cache"}),g=Object(r.a)(h,1)[0],v=c.a.useCallback(function(){i.replace("/finish")},[i]),y=c.a.useCallback(function(e){var t=n.branch.phone;b(d.b._("Payment status check has failed"),e.length?e.join("<br />"):d.b._("We were unable to verify status of your payment. Please contact operator using number {phone}",{phone:t}))},[b,n]),O=c.a.useCallback(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t.orderId,n=arguments.length>1?arguments[1]:void 0;return e?(t.goPayStatusCheck(!0),g({orderId:e},{fetchPolicy:"no-cache",context:{invalidateWithToken:n,noBatch:!0}}).then(function(e){return e?e.status:null}).finally(function(){return t.goPayStatusCheck(!1),null})):Promise.resolve(null)},[g,t]),_=Object(o.a)(O,{onError:y,onFinish:v});return{paymentErrorModal:f,executeGoPayPayment:_.executeGoPayPayment,paymentProcessing:_.paymentLoading}}},1181:function(e,t,n){"use strict";n.d(t,"a",function(){return g});var r=n(39),a=n(38),o=n(49),i=n(54),c=n(0),l=n.n(c),s=n(1413),u=n.n(s),d=n(1414),m=n.n(d),p=n(25),f=n(48),b=n(42),h=a.d.div.withConfig({displayName:"StyledOrderFormTipInput",componentId:"yjblkh-0"})(["margin:0.8rem 0 1.4rem 0;"]),g=Object(i.a)(function(){var e=Object(p.b)(),t=e.order,n=e.cart,a=Object(f.r)(),i=Object(r.a)(a,1)[0];return Object(o.e)(function(){return t.usingPaymentMethodWithTips?Number(t.tips):0},function(e){i({tips:e,orderId:t.orderId,withGoods:n.withGoods})}),t.usingPaymentMethodWithTips?l.a.createElement(h,null,l.a.createElement(u.a,null,l.a.createElement(m.a,{type:"select",value:t.tips,onChange:function(e){t.setTips(Number.parseInt(e.target.value,10))},disabled:t.disableInteraction,"data-testid":"orderTipsSelect"},l.a.createElement("option",{value:0},b.b._("Without tips")),l.a.createElement("option",{value:5},b.b._("Tips 5%")),l.a.createElement("option",{value:10},b.b._("Tips 10%")),l.a.createElement("option",{value:15},b.b._("Tips 15%")),l.a.createElement("option",{value:20},b.b._("Tips 20%")),l.a.createElement("option",{value:25},b.b._("Tips 25%"))))):null})},1183:function(e,t,n){"use strict";n.d(t,"a",function(){return m});var r=n(38),a=n(78),o=n(54),i=n(0),c=n.n(i),l=n(25),s=n(143),u=n(285),d=r.d.div.withConfig({displayName:"TextPadding",componentId:"e8hzje-0"})(["padding-bottom:2rem;"]),m=function(){var e=Object(l.b)().order;return Object(o.d)(function(){return c.a.createElement(s.a,{isOpen:e.isGoPayChecking,headerText:"GoPay platba"},c.a.createElement(d,null,c.a.createElement(a.Trans,{id:"Checking your GoPay payment, please wait..."})),c.a.createElement(u.a,{noMargin:!0}))})}},1184:function(e,t,n){"use strict";n.d(t,"a",function(){return _});var r=n(45),a=n.n(r),o=n(70),i=n(39),c=n(38),l=n(283),s=n(54),u=n(0),d=n.n(u),m=n(1428),p=n(1429),f=n(1423),b=n(25),h=n(103),g=n(48),v=n(286),y=n(42),O=c.d.div.withConfig({displayName:"CodesPanel",componentId:"ucwmk-0"})(["margin-top:0.5rem;& button{margin-right:0.5rem;font-size:0.7rem;}"]),_=d.a.memo(function(){var e=Object(b.b)(),t=e.order,n=e.cart,r=Object(v.a)(),c=Object(i.a)(r,2),u=c[0],_=c[1],E=Object(g.H)({orderId:t.orderId},{skip:!t.orderId}),j=E.data,w=E.loading,C=Object(g.p)(),k=Object(i.a)(C,1)[0],I=Object(g.q)(),P=Object(i.a)(I,1)[0],N=d.a.useCallback(function(){var e=Object(o.a)(a.a.mark(function e(r){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.orderId){e.next=2;break}return e.abrupt("return");case 2:return e.abrupt("return",k({code:r,orderId:t.orderId,withGoods:n.withGoods}));case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),[k,n,t]),x=function(){var e=Object(o.a)(a.a.mark(function e(r){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.orderId&&P({codeId:r,orderId:t.orderId,withGoods:n.withGoods});case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),T=Object(l.d)({onCodeAdd:N,onCodeErrors:function(e,t){_(y.b._('Promo code "{code}" is invalid',{code:e}),d.a.createElement("div",null,t.map(function(e){return d.a.createElement("div",{key:e},e)})))},getValidatingMessage:function(e){return y.b._("Validating promo code {code}...",{code:e})}}),S=T.inputProps,M=T.inputRef,D=w?[]:j.order.promoCodes;return Object(s.d)(function(){return d.a.createElement(m.a,null,u,d.a.createElement(p.a,null,d.a.createElement(f.a,Object.assign({innerRef:M,autoComplete:"off",placeholder:y.b._("Promo codes")},S,{disabled:S.disabled||t.disableInteraction}))),d.a.createElement(O,{"data-testid":"promoCodesPanel"},D.map(function(e){var n=e.id,r=e.code;return d.a.createElement(h.b,{key:n,role:"button",disabled:t.disableInteraction,onClick:function(){return x(n)}},"".concat(r," \u2716"))})))})})},1185:function(e,t,n){"use strict";n.d(t,"a",function(){return p});var r=n(284),a=n(54),o=n(0),i=n.n(o),c=n(289),l=n.n(c),s=n(103),u=n(157),d=n(42),m=n(1179),p=Object(a.a)(function(e){var t=e.children,n=Object(r.g)(),a=Object(u.a)(),o=!0,c="";return Object(m.a)().hasItemsInCart?a.isVamInitialized?n.state.isValid?o=!1:c=d.b._("Form validation failed"):c=d.b._("Agreements are not initialized yet"):c=d.b._("Cart is empty"),i.a.createElement(i.a.Fragment,null,i.a.createElement(s.a,{id:"OrderSubmitButton",title:c,type:"submit",color:"primary",size:"md",disabled:o||n.state.isSubmitting},n.state.isSubmitting?i.a.createElement(l.a,{name:"circle",fadeIn:"none",color:"#ccc"}):t))})},1186:function(e,t,n){"use strict";n.d(t,"a",function(){return m});var r=n(38),a=n(78),o=n(284),i=n(54),c=n(0),l=n.n(c),s=n(103),u=n(157),d=r.d.div.withConfig({displayName:"StyledOrderTimeButtons",componentId:"sc-14ao8bv-0"})(["margin:0 0 1.4rem 0;button{position:relative;padding-top:0.3rem;margin-bottom:0.2rem;height:2.8rem;}button:first-of-type{margin-right:0.8rem;}"]),m=function(){var e=Object(u.a)(),t=Object(o.e)("deliverAt");return Object(i.d)(function(){if(!e.delayedOrderEnabled)return null;var n=null!==t.value;return l.a.createElement(d,null,l.a.createElement(s.c,{"data-testid":"orderTimeButtonNow",selected:!n,disabled:e.disableInteraction,onClick:function(){return t.setValue(null)}},l.a.createElement(a.Trans,{id:"When possible"})),l.a.createElement(s.c,{"data-testid":"orderTimeButtonLater",selected:n,disabled:e.disableInteraction,onClick:e.openTimePicker},n?l.a.createElement(a.DateFormat,{value:t.value,format:{weekday:"long",hour:"numeric",minute:"numeric"}}):l.a.createElement(a.Trans,{id:"Choose time"})))})}},1187:function(e,t,n){"use strict";n.d(t,"a",function(){return g});var r=n(14),a=n(38),o=n(78),i=n(54),c=n(0),l=n.n(c),s=n(282),u=n(1421),d=n(25),m=n(104);function p(){var e=Object(r.a)(["\n    position: fixed;\n    top: 5rem;\n    font-size: 0.8rem;\n    "]);return p=function(){return e},e}function f(){var e=Object(r.a)(["\n    font-size: 0.9rem;\n    position: sticky;\n    bottom: 0;\n  "]);return f=function(){return e},e}var b=Object(a.d)(s.a).withConfig({displayName:"NoticeButton",componentId:"sc-1i7ezjr-0"})(["font-size:0.9rem;margin:0.2rem 1rem;padding:0.5em 1rem;"]),h=Object(a.d)(u.a).withConfig({displayName:"StorageNotice",componentId:"sc-1i7ezjr-1"})(["width:100%;z-index:5;",";",";padding:0.5rem 1rem;background-color:#d4eddadc;"],Object(m.c)(f()),Object(m.d)(p())),g=function(){var e=Object(d.b)().user;return Object(i.d)(function(){return null!==e.rememberForm?null:l.a.createElement(h,{"data-testid":"OrderFormStorageNotice",className:"animated slideInUp"},l.a.createElement("p",null,l.a.createElement(o.Trans,{id:"This app is using secure storage for keeping filled form data. It's not cookies, these are stored in your browser only."})),l.a.createElement(b,{color:"success",size:"sm",onClick:e.setFormRememberYes,"data-testid":"orderFormStorageNotice__Yes"},l.a.createElement(o.Trans,{id:"Always remember"})),l.a.createElement(b,{color:"secondary",size:"sm",onClick:e.setFormRememberNo,"data-testid":"orderFormStorageNotice__No"},l.a.createElement(o.Trans,{id:"Do not store"})))})}},1188:function(e,t,n){"use strict";var r=n(38),a=n(1136),o=n(49),i=n(54),c=n(0),l=n.n(c),s=n(25),u=n(133),d=n(45),m=n.n(d),p=n(79),f=n(70),b=n(39),h=n(48);function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(n,!0).forEach(function(t){Object(p.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var y=n(1146),O=n(103),_=n(1165),E=n(42),j=function(e){var t=e.enabled,n=e.onClick;return l.a.createElement(_.a,null,l.a.createElement(O.a,{color:"primary",disabled:!t,onClick:n,"data-testid":"AddressSubmit"},E.b._("Confirm address")))},w=n(14),C=n(78),k=n(1421),I=n(104),P=n(283),N=n(1423),x=n(186),T=n(99),S=n.n(T);var M=Object(i.a)(function(e){var t=e.onSearch,n=e.inputProps,r=e.isVisible,a=Object(s.b)().location,o=l.a.useRef(null);l.a.useEffect(function(){r&&null!==o.current&&o.current.focus()},[r]);var i=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:300,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=l.a.useCallback(S()(e,t),[].concat(Object(x.a)(n),[e,t]));return l.a.useEffect(function(){return function(){r.clear()}},[r]),r}(t,2e3);l.a.useEffect(function(){return function(){return i.clear()}},[i]);return l.a.createElement(N.a,Object.assign({className:Object(P.b)({hidden:!r}),onChange:function(e){var t=e.target.value||"";a.setSearchValue(t),0===t.trim().length&&a.clearAddress(),i()},onKeyPress:function(e){"Enter"===e.key&&(i.clear(),t())},onFocus:function(){o.current.select()},value:a.searchValue,innerRef:o,"data-testid":"SearchInput"},n))}),D=n(286),R=Object(i.a)(function(){var e=Object(s.b)().location,t=Object(D.a)(),n=Object(b.a)(t,2),r=n[0],a=n[1];if(!e.isGeolocationAvailable||e.isResolving)return null;return l.a.createElement(l.a.Fragment,null,r,l.a.createElement("div",{className:"gps",onClick:function(){e.log("geolocating..."),navigator.geolocation.getCurrentPosition(function(t){var n=t.coords,r=n.latitude,a=n.longitude;e.log("geolocated at coords %s, %s (acc: %s)",n.latitude,n.longitude,n.accuracy),e.setGeolocationPoint({latitude:r,longitude:a})},function(t){e.log("failed geolocation",t),e.disableGeolocation(),a(E.b._("Geolocation failed"),E.b._("Your browser does not support geolocation."))},{enableHighAccuracy:!0,maximumAge:6e4})}},l.a.createElement("span",{className:"flaticon-gps"})))}),A=n(289),z=n.n(A),F=function(e){var t=e.address,n=e.isVisible,r=e.isResolving,a=e.onValidClick;return l.a.createElement("div",{"data-testid":"ResolvedAddress",className:Object(P.b)("resolved__address",{wait:r,hidden:!n}),onClick:r?void 0:a},r?l.a.createElement(z.a,{name:"ball-beat",fadeIn:"none"}):t)},L=n(282),G=n(9);function B(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}var V=new Map;function W(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.count,n=void 0===t?1:t,r=e.watchLocation,a=void 0!==r&&r,c=Object(s.b)(),u=c.map,d=c.location,m=Object(i.c)(function(){return{results:null,phrase:d.searchValue,searching:!1,get url(){var e=["count=".concat(n),"lon=".concat(u.longitude),"lat=".concat(u.latitude),"zoom=".concat(u.zoom),"lang=cs,sk,en","enableCategories=1"];return"https://api.mapy.cz/suggest/?".concat(e.join("&"))}}}),f=l.a.useCallback(function(){if(0!==m.phrase.length){d.log("searching phrase: ".concat(m.phrase));var e="".concat(m.url,"&phrase=").concat(m.phrase);V.has(e)?m.results=V.get(e):(m.searching=!0,fetch(e).then(function(e){return e.json()}).then(function(t){var n=t.result.filter(H).map(q);V.set(e,n),m.results=n}).finally(function(){m.searching=!1}))}else m.results=null},[d]),b=l.a.useRef(Object(T.debounce)(f,500)),h=l.a.useCallback(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d.searchValue;d.log("onSearch ".concat(e)),m.phrase=e.trim(),b.current.clear(),f()},[f,d]);return Object(o.e)(function(){return d.searchValue},function(e){0===e.length&&(m.phrase="",m.results=null,b.current.clear())}),l.a.useEffect(function(){return Object(G.reaction)(function(){return m.url},function(){a&&b.current()})},[m.url,a]),function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?B(n,!0).forEach(function(t){Object(p.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):B(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},m,{onSearch:h})}function H(e){var t=e.userData,n=t.latitude,r=t.longitude;return n&&r}function q(e){var t=e.category,n=e.userData,r=n.id,a=n.latitude,o=n.longitude,i=n.suggestFirstRow,c=n.suggestSecondRow,l=[n.municipality,n.district,n.country,c].find(Boolean)||"";return{id:r,category:t,gps:{latitude:a,longitude:o},address:"".concat(i).concat(l?", ".concat(l):"")}}function U(){var e=Object(w.a)(["\n  position: absolute;\n  margin-top: 0.1rem;\n\n  > div,\n  button.hint:hover {\n    background-color: #ffffffaa;\n  }\n\n  > div {\n    display: flex;\n    flex-direction: column;\n    align-items: flex-start;\n    border: 1px solid transparent;\n    border-radius: 0.4rem;\n    padding: 0.375rem 0.75rem;\n    font-size: 1rem;\n    line-height: 1.5;\n    max-width: 25rem;\n    text-align: left;\n\n    & > p {\n      font-size: 0.8rem;\n      color: gray;\n    }\n\n    button {\n      &:hover,\n      &:hover:focus {\n        text-decoration: none;\n      }\n    }\n\n    button.done {\n      color: darkgray;\n    }\n  }\n\n  button.hint {\n    color: coral;\n    text-shadow: 0.5px 0.5px darkgray;\n    &:hover {\n      text-decoration: none;\n      transition: background-color 0.5s ease;\n    }\n  }\n"]);return U=function(){return e},e}var Y=r.d.div(U()),J=Object(i.a)(function(e){var t=Object(s.b)().location,n=Object(i.c)(function(){return{open:!1}}),r=W({count:5,watchLocation:n.open}),a=r.results,c=r.searching,u=r.onSearch;if(Object(o.e)(function(){return n.open},function(e){e&&u()}),Object(o.e)(function(){return t.searchValue},function(){n.open=!1}),!t.hasSearchValue)return null;var d=a&&a.filter(function(e){return e.address!==t.address});return l.a.createElement(Y,{className:Object(P.b)("animated",{bounceInLeft:n.open,bounceIn:!n.open}),key:n.open.toString()},n.open?l.a.createElement("div",null,l.a.createElement("p",null,l.a.createElement(C.Trans,{id:"Hint: Try moving map around and zooming closer to your location to improve these results."})),c&&l.a.createElement("div",null,"..."),d&&d.map(function(e){return l.a.createElement(L.a,{size:"sm",color:"link",key:e.id,onClick:function(){t.setSearchResult(e),n.open=!1}},e.address)}),l.a.createElement(L.a,{size:"sm",color:"link",onClick:function(){n.open=!1},className:"done"},d&&0===d.length?l.a.createElement(C.Trans,{id:"No match for map location"}):l.a.createElement(C.Trans,{id:"I don't see anything useful here."}))):l.a.createElement(L.a,{className:"hint",color:"link",onClick:function(){n.open=!0}},l.a.createElement(C.Trans,{id:"Looking for a different address?"})))});function Z(){var e=Object(w.a)(["\n    height: 2.3rem;\n    "]);return Z=function(){return e},e}var K=r.d.div.withConfig({displayName:"Styled",componentId:"sc-1lgdvur-0"})(["width:90%;min-width:14rem;margin:1rem auto;text-align:center;div.container{display:flex;border-radius:1rem;border:1px solid #d4d4d4;background-color:white;"," input{height:auto;background:transparent;border:none;&:focus{box-shadow:initial;}&.hidden{display:none;}}div.gps{color:",";cursor:pointer;position:relative;top:0.2rem;}div.resolved__address{margin:0.4rem 0.7rem 0.4rem 0.7rem;font-size:1rem;color:green;width:100%;cursor:pointer;&.hidden{display:none;}&.wait{display:flex;justify-content:center;font-size:0.5rem;cursor:wait;}}.alert{pointer-events:none;margin-bottom:0;}"],Object(I.c)(Z()),function(e){return e.theme.secondary}),Q=Object(i.a)(function(){var e=Object(s.b)(),t=e.map,n=e.location,r=W(),a=r.results,o=r.searching,i=r.onSearch;return l.a.useEffect(function(){o&&n.setIsResolving(o)},[n,o]),l.a.useEffect(function(){if(null!==a){if(0===a.length)return n.log("no result from direct geocoder api"),void n.setAsNotResolved();var e=Object(b.a)(a,1)[0],r=e.category,o=e.gps,i=o.latitude,c=o.longitude;if(t.mapRef&&(t.log("panning to result gps ".concat(i," / ").concat(c)),t.mapRef.panTo(Object(u.b)(e.gps))),!r||!r.startsWith("address"))return n.log("result with category %s",r),void n.setAsNotAddress();n.log("found address ".concat(e.address)),n.latitude!==i&&n.longitude!==c&&n.resetResolution(),n.setSearchResult(e)}},[n,t,a]),l.a.createElement(K,null,l.a.createElement("div",{className:"container"},l.a.createElement(F,{address:n.address||"",isVisible:n.hasAddress,isResolving:n.isResolving,onValidClick:n.clearAddress}),l.a.createElement(M,{inputProps:{placeholder:E.b._("Type address or choose it from map"),autoComplete:"shipping street-address"},onSearch:i,isVisible:!(n.hasAddress||n.isResolving)}),l.a.createElement(R,null)),l.a.createElement(X,null),l.a.createElement(J,null))});function X(){var e=Object(s.b)().location;return e.hasResolutionResult?!1===e.isResolved?l.a.createElement(k.a,{color:"danger"},l.a.createElement(C.Trans,{id:"Address was not recognized."})):!1===e.isStreetAddress?l.a.createElement(k.a,{color:"warning"},l.a.createElement(C.Trans,{id:"Please enter address with house number."})):!1===e.inDeliveryLocation?l.a.createElement(k.a,{color:"warning"},l.a.createElement(C.Trans,{id:"Meal can't be delivered to your chosen address by any restaurant."})):null:null}var $=n(1166),ee=n(287);n.d(t,"a",function(){return ne});var te=r.d.div.withConfig({displayName:"StyledDeliveryMap",componentId:"sc-6qnl5t-0"})([".delivery__map__address{position:absolute;top:0;left:2.3rem;right:2.3rem;}.delivery__map__submit{position:absolute;bottom:3rem;width:100%;}"]),ne=Object(i.a)(function(e){var t=e.onConfirm,n=Object(s.b)(),r=n.map,c=n.location,d=n.business,p=function(){var e=Object(s.b)().location,t=Object(h.k)({fetchPolicy:"cache-first"}),n=Object(b.a)(t,1)[0];return l.a.useCallback(function(){var t=Object(f.a)(m.a.mark(function t(r){var a;return m.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.setIsResolving(!0),t.next=3,n(v({},e.resolutionTarget,{},r));case 3:null!==(a=t.sent)&&e.setResolutionResult(a.resolveLocation),e.setIsResolving(!1);case 6:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}(),[e,n])}(),g=function(e){c.resetResolution(),c.setSearchValue(""),c.setLocation(e)};Object(o.i)(function(){return d.isValid},function(){c.hasLocation&&!c.hasResolutionResult&&(c.log("resolving initial gps"),p(c.geoPoint))}),Object(o.e)(function(){return c.geoPoint},function(e){e&&(c.log("resolving on gps change"),p(e))}),Object(o.e)(function(){return r.clickPoint},function(e){e&&(c.log("resolve with clickpoint"),g(e),r.clearClickPoint())}),Object(y.a)(c.isDeliveryAddress?c.branchId:null),function(){var e=Object(s.b)().location,t=Object(h.B)({},{fetchPolicy:"cache-first",skip:e.hasAddress}),n=t.data,r=t.loading,a=Object(i.b)({initial:r?null:n.location}),c=Object($.a)();Object(o.b)(function(){e.geoPoint?(e.log("pan to user location",e.geoPoint),c(e.geoPoint)):e.geolocationPoint?(e.log("pan to geolocation",e.geolocationPoint),c(e.geolocationPoint)):a.initial&&a.initial.gpsCoordinates&&(e.log("pan to initial location",a.initial.gpsCoordinates),c(a.initial.gpsCoordinates))}),Object(o.e)(function(){return e.geolocationPoint},function(e){e&&c(e)})}();var O=Object(ee.a)(t).createDeliveryOrder;return l.a.createElement(te,{"data-testid":"DeliverMap"},c.latLng?l.a.createElement(a.b,{position:c.latLng,draggable:!0,onDragEnd:function(e){var t=e.latLng;c.log("resolve with drag"),g(Object(u.c)(t))}}):null,l.a.createElement("div",{className:"delivery__map__address"},l.a.createElement(Q,null)),l.a.createElement("div",{className:"delivery__map__submit"},l.a.createElement(j,{enabled:c.isDeliveryAddress&&!c.isResolving,onClick:O})))})},1189:function(e,t,n){"use strict";var r=n(54),a=n(0),o=n.n(a),i=n(157),c=n(45),l=n.n(c),s=n(70),u=n(48),d=n(1168),m=n(39),p=n(78),f=(n(498),n(59)),b=n(1114),h=n(1111),g=n(1112),v=n(1113),y=n(285),O=n(14),_=n(1147),E=n(38),j=n(42),w=function(e){var t=e.minCount,n=e.maxCount,r=e.isValid,a="";if(0===t){if(!(n>0))return null;a=j.b._({id:"maximum {maxCount}",values:{maxCount:n}})}else if(0===n)a=j.b._({id:"minimum {minCount}",values:{minCount:t}});else if(t===n){var i=t;a=j.b._({id:"only {count}",values:{count:i}})}else a=j.b._({id:"minimum {minCount} and maximum {maxCount}",values:{minCount:t,maxCount:n}});var c={};return r||(c.color="red"),o.a.createElement("span",{style:c},"(",a,")")},C=n(105),k=n(1169);function I(){var e=Object(O.a)(["\n  position: absolute;\n  left: -0.6rem;\n  top: -0.4rem;\n  width: 2rem;\n  height: 2rem;\n  border-radius: 1rem;\n  background: ",";\n\n  &:hover {\n    background: "," !important;\n  }\n  &:active {\n    background: "," !important;\n  }\n  & .rectangle {\n    width: 45%;\n    position: absolute;\n    top: 45%;\n    left: 30%;\n    height: 4px;\n    background: white;\n  }\n"]);return I=function(){return e},e}var P=E.d.div(I(),function(e){return e.theme.primary},function(e){return e.theme.primaryHover},function(e){return e.theme.primary}),N=function(e){var t=e.onClick,n=Object(C.a)(e,["onClick"]);return o.a.createElement(P,Object.assign({onClick:t,className:"animated bounceIn","data-testid":"SidedishRemoveButton"},n),o.a.createElement("div",{className:"rectangle"}))},x=E.d.div.withConfig({displayName:"StyledSidedishCheckbox",componentId:"jpxm3x-0"})(["display:inline-block;position:relative;& .name{float:left;text-align:left;white-space:normal;max-width:13rem;}& .price{font-weight:bold;float:right;}& .count{display:inline-block;margin-left:0.5rem;}"]),T=o.a.memo(function(e){var t=e.sidedish,n=e.count,r=e.canBeSelected,a=e.canBeRemoved,i=e.className,c=e.onAdd,l=e.onRemove,s=Object(C.a)(e,["sidedish","count","canBeSelected","canBeRemoved","className","onAdd","onRemove"]),u=o.a.useCallback(function(){r&&c()},[r,c]);return o.a.createElement(x,{className:i},o.a.createElement(k.a,Object.assign({onClick:u,disabled:!r,size:"xs",outline:!0,width:"17.5rem","data-testid":"sidedishCheckbox__".concat(t.id)},s),o.a.createElement("div",{className:"name"},t.nameLabel,o.a.createElement("span",{key:n,className:"animated heartBeat count"},n>1&&"".concat(n,"x"))),o.a.createElement("div",{className:"price"},t.price.formattedValue)),a&&o.a.createElement(N,{onClick:l}))});function S(){var e=Object(O.a)(["\n  margin-top: 1rem;\n\n  & .sidedish__picker__checkbox {\n    @media (max-width: 370px) {\n      width: 100%;\n    }\n  }\n\n  & .sidedish__picker__category {\n    font-size: 1rem;\n    font-weight: bold;\n    text-align: left;\n    margin: 0 0 0.2rem 0.2rem;\n  }\n"]);return S=function(){return e},e}var M=E.d.div(S()),D=function(e){var t=e.recipe,n=e.selection,r=e.onAdd,i=e.onRemove,c=Object(_.b)(t.categories,n),l=c.canBeSelected,s=c.isCategoryValid;return o.a.createElement(M,{className:"food__sidedish__picker"},t.categories.map(function(e){return o.a.createElement(a.Fragment,{key:e.id},o.a.createElement("div",{className:"sidedish__picker__category"},e.nameLabel," ",o.a.createElement(w,{minCount:e.minCount,maxCount:e.maxCount,isValid:s(e)})),e.sideDishes.map(function(t){return o.a.createElement(T,{key:"".concat(t.id,"-").concat(e.id),sidedish:t,count:n.filter(function(e){return e===t.id}).length,isSelected:n.includes(t.id),canBeRemoved:n.includes(t.id),canBeSelected:l(e,t),onAdd:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(){return r(t.id)}),onRemove:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(){return i(t.id)}),className:"sidedish__picker__checkbox"})}))}))},R=n(283),A=n(103),z=o.a.memo(function(e){var t=e.selection,n=e.recipe,r=e.onConfirm,a=o.a.useState(!1),i=Object(m.a)(a,2),c=i[0],l=i[1],s=Object(_.b)(n?n.categories:[],t).isCategoryValid;return o.a.createElement(A.a,{className:Object(R.b)("modal__body__button","animated",{heartBeat:c}),disabled:c||!n||!n.categories.every(s),"data-testid":"CartOrderButton",onClick:function(){l(!0),r().catch(function(){l(!1)})}},j.b._("{0, plural, =0 {Order without sidedish} one {Order with this sidedish} other {Order with # sidedishes}}",{0:t.length}))}),F=[],L=function(e){var t=e.recipe,n=e.isLoading,r=e.initialSideDishes,a=void 0===r?F:r,i=e.onConfirm,c=e.onClose,u=o.a.useState([]),d=Object(m.a)(u,2),O=d[0],_=d[1];o.a.useEffect(function(){_(a)},[a]);var E=o.a.useCallback(function(){_([]),c()},[c]),j=function(){var e=Object(s.a)(l.a.mark(function e(){return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i(O);case 2:if(!e.sent){e.next=5;break}return E(),e.abrupt("return",!0);case 5:return e.abrupt("return",!1);case 6:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),w=function(e){_(function(t){return f.RM.append(e,t)})},C=function(e){_(function(t){return f.RM.remove(f.RM.indexOf(e,t),1,t)})};return o.a.createElement(b.a,{isOpen:null!==t,toggle:E,className:"modal__container",autoFocus:!0,backdrop:"static",fade:!1,"data-testid":"CartModal"},o.a.createElement(h.a,{toggle:E,tag:g.a,className:"modal__header"},o.a.createElement("span",null,o.a.createElement(p.Trans,{id:"Do you want to add something?"}))),o.a.createElement(v.a,{className:"modal__body"},o.a.createElement("div",{className:"modal__body__content"},n?o.a.createElement(y.a,null):t?o.a.createElement(o.a.Fragment,null,o.a.createElement("h3",{className:"modal__body__food__name"},t.nameLabel),o.a.createElement("span",{className:"modal__body__food_description"},t.descriptionLabel),o.a.createElement(D,{recipe:t,selection:O,onAdd:w,onRemove:C})):o.a.createElement(p.Trans,{id:"We sorry, but the item is unavailable at this moment."})),o.a.createElement("div",{className:"modal__body__button__line"},o.a.createElement("div",{className:"modal__body__button__strip"}),o.a.createElement(z,{recipe:t,selection:O,onConfirm:j}))))},G=Object(r.a)(function(e){var t=e.orderId,n=Object(i.a)(),r=n.addToCartRecipeId,a=Object(u.y)({recipeId:r},{skip:null===t||null===r,fetchPolicy:"cache-first"}),c=a.data,m=a.loading,p=Object(d.a)(),f=o.a.useCallback(function(){var e=Object(s.a)(l.a.mark(function e(n){var a;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==t&&null!==r){e.next=2;break}return e.abrupt("return",!1);case 2:return e.next=4,p(r,n);case 4:return a=e.sent,e.abrupt("return",Boolean(a));case 6:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),[p,t,r]),b=o.a.useCallback(function(){n.addToCart(null)},[n]);return o.a.createElement(L,{recipe:m?null:c.recipe,onConfirm:f,onClose:b,isLoading:m})}),B=n(1195),V=n(25),W=Object(r.a)(function(e){var t=e.orderId,n=Object(V.b)(),r=n.order,a=n.cart,i=r.changeCartItemId,c=Object(u.x)({itemId:i},{skip:null===t||null===i}),d=c.data,p=c.loading,b=Object(u.m)(),h=Object(m.a)(b,1)[0],g=o.a.useCallback(function(){var e=Object(s.a)(l.a.mark(function e(n){var r;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==t&&null!==i){e.next=2;break}return e.abrupt("return",!1);case 2:return e.next=4,h({itemId:i,sideDishes:n,orderId:t,withGoods:a.withGoods});case 4:return r=e.sent,e.abrupt("return",Boolean(r));case 6:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),[t,i,h]),v=o.a.useCallback(function(){r.changeCartItem(null)},[r]),y=o.a.useMemo(function(){return p?void 0:d.item.sideDishes.map(f.RM.path(["recipe","id"]))},[p,d]);return o.a.createElement(L,{recipe:p?null:d.item.recipe,initialSideDishes:y,onConfirm:g,onClose:v,isLoading:p})});n.d(t,"a",function(){return H});var H=Object(r.a)(function(e){var t=e.isReadonly,n=void 0!==t&&t,r=Object(i.a)(),a=r.orderId;return o.a.createElement(o.a.Fragment,null,o.a.createElement(G,{orderId:a}),o.a.createElement(W,{orderId:a}),o.a.createElement(B.a,{orderId:a,isReadonly:n||r.disableInteraction}))})},1190:function(e,t,n){"use strict";var r=n(38),a=n(49),o=n(54),i=n(0),c=n.n(i),l=n(25),s=n(39),u=n(14),d=n(283),m=n(1171),p=n.n(m),f=n(1175),b=n(104);function h(){var e=Object(u.a)(["\n    flex-wrap: nowrap;\n    overflow-x: auto;\n    overflow-y: hidden;\n    box-shadow: inset -15px -5px 15px -14px rgba(0, 0, 0, 0.6);\n    margin: 0;\n    border-top-left-radius: 0;\n    background-color: #f3f3f3;\n    opacity: 0.94;\n  "]);return h=function(){return e},e}function g(){var e=Object(u.a)(["\n    flex-wrap: wrap;\n  "]);return g=function(){return e},e}var v=r.d.div.withConfig({displayName:"StyledCategoryNavigator",componentId:"wpfto8-0"})(["background-color:#d4d4d4;border-top-left-radius:0.6rem;padding:0.7rem 0.5rem 0 0.2rem;position:sticky;top:0;z-index:1;user-select:none;display:flex;"," "," a.link{text-align:center;color:#595959 !important;display:inline-block;min-width:4rem;cursor:pointer;margin:0 0.2rem;&:hover,&.active{color:#5ca651 !important;border-color:#5ca651;}}div.circle{background-color:white;border:1px solid #595959;border-radius:2rem;width:2.6rem;height:2.6rem;margin:0 auto;padding:0;&:hover,a.link.active > &{border-color:#5ca651;}& span::before,& span::after{margin:0;padding:0;font-size:1.7rem;}}div.description{font-size:0.9rem;margin-top:0.2rem;max-width:5rem;}"],Object(b.c)(g()),Object(b.d)(h())),y=function(e){var t=e.categories,n=Object(i.useState)(0),r=Object(s.a)(n,2),a=r[0],o=r[1];return c.a.createElement(v,{"data-testid":"CategoryNavigator"},0===t.length?null:t.map(function(e,t){return c.a.createElement(p.a.Link,{to:e.nameLabel,key:e.id,className:Object(d.b)("link",{active:a===t}),onSetActive:function(){return o(t)},offset:-168,smooth:!0,spy:!0,title:e.nameLabel},c.a.createElement("div",{className:"circle"},c.a.createElement("span",{className:"flaticon-".concat(e.pictogram)})),c.a.createElement("div",{className:"description"},c.a.createElement(f.a,{lines:2},e.nameLabel)))}))},O=n(78),_=n(285),E=n(1168);function j(){var e=Object(u.a)(["margin: 1rem 0 0.4rem 1rem;"]);return j=function(){return e},e}var w=r.d.div.withConfig({displayName:"FoodCategoryStyled",componentId:"sc-1bpyym5-0"})(["color:#474747;display:block;font-size:1.6rem;& a{text-decoration:none;}"]),C=Object(r.d)("h3").withConfig({displayName:"FoodCategoryTitleStyled",componentId:"sc-1bpyym5-1"})(["",";"],Object(b.d)(j())),k=c.a.memo(function(e){var t=e.category,n=e.children;return c.a.createElement(p.a.Element,{name:t.nameLabel},c.a.createElement(w,null,c.a.createElement(C,null,t.nameLabel),n))}),I=(n(1210),n(48)),P=n(157);function N(){var e=Object(u.a)(["\n    left: -0.6rem;\n    top: -0.7rem;\n  "]);return N=function(){return e},e}var x=r.d.div.withConfig({displayName:"StyledFoodMenuItem",componentId:"sc-1uxwtjp-0"})(["padding:1rem 0.5rem 0.3rem 1.1rem;border:1px solid #d5d5d5 !important;margin:0 0 0.4rem 0;border-radius:0.8rem;position:relative;min-height:6rem;user-select:none;&:hover:not(.disabled){cursor:pointer;background-color:#c9e8d7;}&.active{background-color:#b3ebcc;}h4{font-size:1rem;font-weight:700;color:#404040;margin-bottom:0.1rem;margin-right:6rem;}p{color:#666666;margin:0.6rem 0 0 0;font-size:0.9rem;max-height:2.5rem;-webkit-line-clamp:2;overflow:hidden;}& div.presence{background-color:",";float:left;position:absolute;left:-1.2rem;padding:0.4rem 0.6rem;color:white;border-radius:1.8rem;font-size:0.9rem;",";}"],function(e){return e.theme.secondary},Object(b.d)(N())),T=r.d.img.withConfig({displayName:"FoodMenuItemImage",componentId:"sc-1uxwtjp-1"})(["width:6rem;height:6rem;display:block;float:left;margin:-1.05rem 1rem 0 -1.2rem;border-radius:0.8rem 0 0 0.8rem;object-fit:cover;"]),S=r.d.div.withConfig({displayName:"FoodMenuItemPriceCorner",componentId:"sc-1uxwtjp-2"})(["border-top-width:1.8rem;border-top-style:solid;border-top-color:"," !important;position:absolute;right:4.799rem;top:1rem;width:0;height:0;border-left:1.8rem solid transparent;"],function(e){return e.theme.primary}),M=r.d.div.withConfig({displayName:"FoodMenuItemPrice",componentId:"sc-1uxwtjp-3"})(["background-color:"," !important;position:absolute;right:0;top:1rem;width:4.8rem;height:1.8rem;padding:0.12rem 0.7rem 0.3rem 0rem;font-weight:500;font-size:1.1rem;color:white;text-align:right;overflow:hidden;white-space:nowrap;"],function(e){return e.theme.primary}),D=c.a.memo(function(e){var t=e.recipe,n=e.presence,r=e.onAddToCart,a=Object(P.a)(),i=t.sideDishCount>0,l=c.a.useCallback(function(){r(t.id,i)},[i,r,t.id]),u=Object(I.i)({fetchPolicy:"cache-first"}),m=Object(s.a)(u,1)[0],p=c.a.useCallback(function(){i&&m({recipeId:t.id})},[i,m,t.id]),b=c.a.useRef(-1);return Object(o.d)(function(){return c.a.createElement(x,{onClick:l,onMouseEnter:p,className:Object(d.b)({active:a.lastActiveRecipeId===t.id,disabled:a.disableInteraction}),"data-testid":"foodMenuItem__".concat(t.id)},t.image&&c.a.createElement(T,{src:t.image,alt:t.nameLabel}),c.a.createElement(S,null),c.a.createElement(M,{"data-testid":"foodMenuItem__Price__".concat(t.id)},t.price.formattedValue),function(){var e=n.get(t.id);if(!e)return b.current=-1,null;var r=Object(d.b)("presence","animated",{pulse:e>1||b.current>0,zoomIn:1===e&&0===b.current||-1===b.current});return b.current=e,c.a.createElement("div",{key:e,className:r},"".concat(e,"x"))}(),c.a.createElement("h4",{title:t.nameLabel},c.a.createElement(f.a,{lines:2,"data-testid":"foodMenuItem__Name__".concat(t.id)},t.nameLabel)),c.a.createElement("p",null,c.a.createElement(f.a,{lines:2,"data-testid":"foodMenuItem__Description__".concat(t.id)},t.descriptionLabel)))})}),R=n(9);function A(){var e=Object(u.a)(["\n      margin: 0 0.7rem 1rem 0.7rem;\n      padding: 0 0 4rem 0;\n    "]);return A=function(){return e},e}function z(){var e=Object(u.a)(["\n      margin: 0 1.4rem 1rem 1.6rem;\n      padding: 2rem 0 2rem 0;\n    "]);return z=function(){return e},e}function F(){var e=Object(u.a)(["\n    background: #eee9e7;\n    background-size: cover;\n    background-attachment: scroll;\n  "]);return F=function(){return e},e}function L(){var e=Object(u.a)(["background: white;"]);return L=function(){return e},e}var G=r.d.div.withConfig({displayName:"StyledFoodMenu",componentId:"sc-1ynjjri-0"})(["border-radius:0 0 0.6rem 0.6rem;",";",";& > div{",";",";}"],Object(b.c)(L()),Object(b.d)(F()),Object(b.c)(z()),Object(b.d)(A())),B=c.a.memo(function(e){var t=e.orderId,n=e.categories,r=e.isLoading,a=Object(l.b)(),o=a.order,i=a.config,u=a.user,d=function(e){var t=Object(I.A)({orderId:e},{skip:!e,fetchPolicy:"cache-only"}),n=t.data,r=t.loading,a=c.a.useState(function(){return R.observable.map()}),o=Object(s.a)(a,1)[0];return r||Object(R.runInAction)(function(){o.clear(),n.order.presence.forEach(function(e){var t=e.recipe.id;o.has(t)||o.set(t,0),o.set(t,o.get(t)+1)})}),o}(t),m=Object(E.a)(),p=c.a.useCallback(function(e,t){o.disableInteraction||(d.size>=i.orderItemsMax?u.showOrderLimit():t?o.addToCart(e):(o.setUsedRecipeId(e),m(e)))},[i.orderItemsMax,m,o,d,u]);return c.a.createElement(G,{"data-testid":"FoodMenu"},c.a.createElement("div",null,r?c.a.createElement(_.a,{noMargin:!0}):0===n.length?c.a.createElement("h3",null,c.a.createElement(O.Trans,{id:"Food menu is empty. We are sorry."})):c.a.createElement(c.a.Fragment,null,n.map(function(e){return c.a.createElement(k,{key:e.id,category:e},e.recipes.map(function(e){return c.a.createElement(D,{key:e.id,recipe:e,presence:d,onAddToCart:p})}))}))))}),V=n(1146),W=n(143),H=n(42),q=function(){var e=Object(l.b)().user;return Object(o.d)(function(){return c.a.createElement(W.a,{isOpen:!e.orderLimitAlertHidden,onClose:e.hideOrderLimit,headerText:H.b._("Limit has been reached")},H.b._("The maximum number of items in the order has been reached"))})},U=n(191),Y=n(1421),J=n(103);function Z(){var e=Object(u.a)(["\n  font-weight: bold;\n  margin-bottom: 0;\n  padding: 0.5rem 1rem;\n\n  & button {\n    margin: 0.5rem;\n  }\n"]);return Z=function(){return e},e}var K=Object(r.d)(Y.a)(Z()),Q=function(){var e=Object(P.a)();return Object(o.d)(function(){return e.disableInteraction?c.a.createElement(K,{color:"warning"},c.a.createElement(O.Trans,{id:"Order is locked for further changes."}),c.a.createElement(U.b,{to:"/"},c.a.createElement(J.b,null,c.a.createElement(O.Trans,{id:"Create new order"})))):null})};n.d(t,"a",function(){return $});var X=r.d.div.withConfig({displayName:"StyledMobileHeader",componentId:"sc-1yczho6-0"})(["position:sticky;top:0;z-index:4;"]),$=Object(o.a)(function(){var e=Object(l.b)(),t=e.order,n=e.user,r=Object(V.a)(t.branchId),o=r.data,i=r.loading,s=r.refetch;Object(a.e)(function(){return n.language},function(){return s()});var u=c.a.useMemo(function(){return i?[]:o.wareCategories.filter(function(e){return e.recipes.length>0})},[i,o]);return c.a.createElement(c.a.Fragment,null,c.a.createElement(q,null),c.a.createElement(X,null,c.a.createElement(Q,null),c.a.createElement(y,{categories:u})),c.a.createElement(B,{orderId:t.orderId,categories:u,isLoading:i}))})},1191:function(e,t,n){"use strict";var r=n(0),a=n.n(r),o=n(1428),i=n(1135),c=n(42),l=function(){return a.a.createElement(o.a,null,a.a.createElement(i.a,{name:"email",type:"email",autoComplete:"email",placeholder:c.b._("E-mail")}))},s=n(1429),u=function(){return a.a.createElement(o.a,null,a.a.createElement(s.a,null,a.a.createElement(i.a,{name:"firstname",autoComplete:"given-name",placeholder:c.b._("First name")}),a.a.createElement(i.a,{name:"lastname",autoComplete:"family-name",placeholder:c.b._("Last name")})))},d=n(1430),m=function(){var e=c.b._("eg. ingredients change, company...");return a.a.createElement(o.a,null,a.a.createElement(i.a,{name:"note",type:"textarea",placeholder:c.b._("Note"),title:e,errorForceDisplay:!0}),a.a.createElement(d.a,null,e))},p=n(49),f=n(284),b=n(1154),h=n(157),g=function(){var e="Mobile Safari"===new b.UAParser(window.navigator.userAgent).getBrowser().name,t=Object(h.a)(),n=Object(f.e)("phonePrefix");return Object(p.b)(function(){var e=t.defaultPhonePrefix;e&&t.root.user.memoryApplied&&0===n.value.length&&(n.setValue(e),e&&n.setTouched())}),a.a.createElement(o.a,null,a.a.createElement(s.a,null,a.a.createElement(i.a,{name:"phonePrefix",autoComplete:e?"off":"tel-country-code",placeholder:"Prefix"}),a.a.createElement(i.a,{name:"phone",type:"tel",autoComplete:"tel-national",placeholder:c.b._("Phone"),style:{width:"55%"}})))};n.d(t,"a",function(){return v});var v=function(){return a.a.createElement(a.a.Fragment,null,a.a.createElement(u,null),a.a.createElement(g,null),a.a.createElement(l,null),a.a.createElement(m,null))}},1192:function(e,t,n){"use strict";var r=n(39),a=n(78),o=(n(498),n(11)),i=n(59),c=n(284),l=n(158),s=n(54),u=n(0),d=n.n(u),m=n(1114),p=n(1111),f=n(1112),b=n(1113),h=n(25),g=n(103),v=n(48),y=n(42),O=n(38);function _(e,t,n){var r=Object(l.startOfMinute)(function(e,t){return Object(l.addMinutes)(function(e,t){return Object(l.subMinutes)(e,Object(l.getMinutes)(e)%t)}(e,t),t)}(e,n)),a=[],o=Object(l.endOfMinute)(Object(l.subMinutes)(t,1));do{a.push(r),r=Object(l.addMinutes)(r,n)}while(r<=o);return a}var E=n(105),j=n(1169),w=n(291),C=O.d.div.withConfig({displayName:"Time",componentId:"c3eeou-0"})(["font-size:1.2rem;"]),k=function(e){var t=e.time,n=Object(E.a)(e,["time"]);return d.a.createElement(j.a,Object.assign({size:"xs",outline:!0,width:"10rem","data-testid":"timePickerButton__".concat(t.getTime())},n),d.a.createElement(C,null,Object(w.b)(t)))},I=O.d.div.withConfig({displayName:"TimePickerContainer",componentId:"sc-1341ije-0"})(["margin-top:1rem;"]),P=O.d.div.withConfig({displayName:"TimePickerDay",componentId:"sc-1341ije-1"})(["font-size:1rem;font-weight:bold;text-align:left;margin:0 0 0.2rem 0.2rem;"]),N=function(e){var t=e.minDate,n=e.maxDate,o=e.minuteStep,c=e.onStepChange,l=e.initialTime,s=e.filterIntervals,m=void 0===s?[]:s,p=d.a.useMemo(function(){var e=_(t,n,o);return m.length?i.RM.reject(function(e){return m.some(function(t){return i.DF.isWithinInterval(e,t)})},e):e},[t,n,o,m]),f=d.a.useMemo(function(){return i.DF.eachDayOfInterval({start:t,end:n})},[t,n]),b=d.a.useState(0),h=Object(r.a)(b,2),g=h[0],v=h[1];return d.a.useEffect(function(){l&&v(i.DF.closestIndexTo(l,p))},[l,p]),d.a.useEffect(function(){c(p[g])},[c,g,p]),d.a.createElement(I,null,f.map(function(e){return d.a.createElement(u.Fragment,{key:e.getDate()},d.a.createElement(P,null,d.a.createElement(a.DateFormat,{value:e,format:{month:"long",day:"numeric",weekday:"long"}})),p.map(function(t,n){return i.DF.isEqual(e,i.DF.startOfDay(t))?d.a.createElement(k,{key:t.getTime(),time:t,isSelected:n===g,canBeSelected:!0,onClick:function(){v(n),c(t)}}):null}))}))};n.d(t,"a",function(){return x});var x=Object(s.a)(function(){var e=Object(h.b)(),t=Object(h.b)(),n=t.order,s=t.cart,u=Object(v.I)({branchId:n.branchId},{skip:!e.initialized||!n.branchId}),O=u.data,_=u.loading,E=Object(v.o)(),j=Object(r.a)(E,1)[0],w=Object(c.c)("deliverAt"),C=d.a.useRef(w.value),k=d.a.useCallback(function(e){C.current=e},[]),I=function(){var e=C.current;j({orderId:n.orderId,deliverAt:e&&Object(o.isoDate)(e),withGoods:s.withGoods}),w.setValue(e),n.closeTimePicker()},P=function(){return _?null:{minDate:Object(l.addMinutes)(function(){var e=O.companyBranch;return e.isOpen||!e.willOpenAt?new Date:new Date(e.willOpenAt)}(),function(){var e=O.companyBranch,t=e.defaultDeliveryTime,r=e.defaultPickupTime;return n.usingDeliveryOrderMethod?t:n.usingPickupOrderMethod?r:0}()),maxDate:function(){var e=O.companyBranch;if(e.isOpen&&e.willCloseAt)return new Date(e.willCloseAt);var t=e.businessHours.find(i.RM.propEq("closed",!1));return t?new Date(t.closeAt):null}()}},x=function(e){return!(null===e||null===e.maxDate||Object(l.isAfter)(e.minDate,e.maxDate))};d.a.useEffect(function(){O&&O.companyBranch&&O.companyBranch.delayedDeliveryEnabled&&n.enableDelayedOrder()},[O,n]);var T=n.usingDeliveryOrderMethod?y.b._("Deliver at what time?"):y.b._("When you will pickup the order?");return d.a.createElement(m.a,{isOpen:n.timePickerOpen,toggle:n.closeTimePicker,className:"modal__container",autoFocus:!0,backdrop:"static",fade:!1},d.a.createElement(p.a,{toggle:n.closeTimePicker,tag:f.a,className:"modal__header"},d.a.createElement("span",null,T)),d.a.createElement(b.a,{className:"modal__body"},d.a.createElement("div",{className:"modal__body__content"},function(){var e=P();return null===e?null:x(e)?d.a.createElement(N,{minuteStep:15,minDate:e.minDate,maxDate:e.maxDate,initialTime:C.current,filterIntervals:O.companyBranch.businessHours.filter(i.RM.propEq("closed",!0)).map(function(e){return{start:new Date(e.openAt),end:new Date(e.closeAt)}}),onStepChange:k}):d.a.createElement(a.Trans,{id:"It's not possible to pick a specific order time at this moment."})}()),d.a.createElement("div",{className:"modal__body__button__line"},x(P())?d.a.createElement(d.a.Fragment,null,d.a.createElement("div",{className:"modal__body__button__strip"}),d.a.createElement(g.a,{size:"md",onClick:I,className:"modal__body__button"},d.a.createElement(a.Trans,{id:"Confirm time"}))):null)))})},1193:function(e,t,n){"use strict";var r=n(39),a=n(78),o=n(49),i=n(283),c=n(284),l=n(99),s=n(9),u=n(0),d=n.n(u),m=n(48),p=n(157),f=n(38),b=n(54),h=n(1423),g=n(282),v=n(1424),y=(n(105),f.d.div.withConfig({displayName:"StyledFormCheckbox",componentId:"sc-915kzt-0"})(["display:flex;margin-bottom:0.5rem;input{-webkit-appearance:none;-moz-appearance:none;background-color:white;border:1px solid;border-color:#c5c5c5;width:2rem;height:2rem;min-width:2rem;border-radius:0.25rem;position:relative;margin:0;outline:none;&:checked{background-color:white;}&:checked:after{content:'\\2714';font-size:2rem;position:absolute;top:-0.5rem;left:0.1rem;color:#1d1d1d;overflow:hidden;}&.is-invalid{border-color:red;}}label{margin:0 0 0 0.8rem;vertical-align:top;}"])),O=n(42),_=f.d.div.withConfig({displayName:"StyledOrderAgreementBox",componentId:"zpwcdo-0"})(["button{padding:0 0.5rem;font-size:0.8rem;min-width:5rem;color:darkgray;}div.description{font-size:0.8rem !important;color:darkgray;margin:0.5rem 0 0.5rem 0;& .row{margin:0;}}"]),E=Object(b.a)(function(e){var t=e.agreement,n=e.isValid,r=e.isCollapsed,a=e.titleNode,o=e.descriptionNode,i=e.inputProps,c=e.buttonProps,l=Object(p.a)(),s="agreement-".concat(t.id);return d.a.createElement(_,null,d.a.createElement(y,null,d.a.createElement(h.a,Object.assign({},i,{id:s,type:"checkbox",disabled:l.disableInteraction,invalid:!n,onInvalid:function(e){n||e.target.setCustomValidity(O.b._("Please check this box if you want to proceed."))},onClick:function(e){e.target.setCustomValidity("")},"data-testid":"OrderAgreement".concat(t.isMandatory?"Mandatory":"")})),d.a.createElement("label",{htmlFor:s},a,t.isMandatory&&" * "),d.a.createElement(g.a,Object.assign({},c,{color:"link"}),r?O.b._("More...").toLocaleLowerCase():O.b._("Less").toLocaleLowerCase())),d.a.createElement(v.a,{isOpen:!r,className:"description"},o))});n.d(t,"a",function(){return w});var j=[],w=function(){var e=Object(p.a)(),t=Object(c.h)(),n=d.a.useState(),u=Object(r.a)(n,2),f=u[0],b=u[1];d.a.useEffect(function(){var n=Object(l.debounce)(b,2e3);var r=Object(s.autorun)(function(){n(function(){var n=t.values,r=n.firstname,a=n.lastname,o=n.phonePrefix,i=n.phone;return{input:{orderId:e.orderId,firstname:r,lastname:a,phone:"".concat(o.trim()).concat(i.trim())}}}())});return function(){r(),n.clear()}},[t,e]);var h=Object(m.G)(f,{skip:!f}),g=h.data,v=h.errors,y=h.loading,O=d.a.useRef(j),_=v&&v.length>0;y||_||(O.current=g.agreements),d.a.useEffect(function(){O.current.length>0&&!e.isVamInitialized&&e.initVam()});var w=Object(i.e)(O.current),C=w.state,k=w.renderVamAgreements,I=d.a.useCallback(function(){return O.current.some(function(e){return e.isMandatory&&!C.confirmedAgreements.has(e.id)})?"mandatory":void 0},[C]),P=Object(c.c)("agreements",{validate:I});return Object(o.b)(function(){var e=Array.from(C.confirmedAgreements);P.setValue(e)}),_?d.a.createElement(a.Trans,{id:"Failed retrieving company agreements. Please try again later or contact us."}):k({AgreementBox:E})}},1194:function(e,t,n){"use strict";var r=n(38),a=n(78),o=n(0),i=n.n(o),c=n(48),l=n(54),s=n(25),u=n(103),d=Object(l.a)(function(e){var t=e.children,n=e.paymentMethod,r=Object(s.b)().order,a=r.paymentMethod===n;return i.a.createElement(u.c,{disabled:r.disableInteraction,selected:a,onClick:function(){r.setPaymentMethod(n)},"data-testid":"orderPaymentMethod-".concat(n)},i.a.createElement(m,{show:a}),t)});function m(e){return e.show?i.a.createElement("span",{className:"flaticon-mark order__payment__method__button__checked"}):i.a.createElement("div",{className:"order__payment__method__button__unchecked"})}n.d(t,"a",function(){return f});var p=r.d.div.withConfig({displayName:"StyledOrderPaymentMethod",componentId:"sc-12kj5sm-0"})(["margin:0 0 1.4rem 0;span::before{margin-left:0;margin-right:0.5rem;}button{position:relative;padding-top:0.3rem;margin-bottom:0.2rem;height:2.8rem;}button:first-of-type{margin-right:0.8rem;}.order__payment__method__button__unchecked{width:1.75rem;height:1.4rem;margin:0;display:inline-block;}"]),f=i.a.memo(function(){return i.a.createElement(p,null,i.a.createElement(d,{paymentMethod:c.f.Gopay},i.a.createElement("span",{className:"flaticon-credit-card"},i.a.createElement(a.Trans,{id:"Pay by card"}))),i.a.createElement(d,{paymentMethod:c.f.Cash},i.a.createElement("span",{className:"flaticon-money"},i.a.createElement(a.Trans,{id:"Pay by cash"}))))})},1195:function(e,t,n){"use strict";var r=n(38),a=n(78),o=(n(1202),n(1147)),i=n(9),c=n(54),l=n(0),s=n.n(l),u=n(477),d=n(25),m=n(103),p=n(1170),f=n(104),b=n(48),h=n(157),g=n(79),v=n(39),y=n(11),O=n(49),_=n(59);function E(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function j(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?E(n,!0).forEach(function(t){Object(g.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):E(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}n.d(t,"a",function(){return C});var w=r.d.div.withConfig({displayName:"StyledCartSystem",componentId:"sc-1cbvtgn-0"})(["& .animated{z-index:10;}"]),C=function(e){var t=e.orderId,n=e.isReadonly,r=e.isMobileConfirm,l=void 0!==r&&r,g=Object(u.b)(),E=s.a.useMemo(k,[]),C=Object(h.a)(),I=function(){var e=Object(d.b)(),t=e.order,n=e.cart,r=Object(y.useApolloClient)(),a=Object(O.g)().history,o=s.a.useCallback(function(e){t.changeCartItem(e)},[t]),i=Object(b.t)(),c=Object(v.a)(i,1)[0],l=s.a.useCallback(function(e){var t={itemId:e,withGoods:n.withGoods,withPresence:n.withPresence};c(t,{optimisticResponse:p(t),context:{noBatch:!0}})},[n,p,c]),u=s.a.useCallback(function(){a.push("/confirm")},[a]),m=s.a.useCallback(function(){a.push("/order")},[a]);return{cartModel:n,onItemEdit:o,onItemRemove:l,onPlaceOrder:u,onChangeOrder:m};function p(e){var a=r.readQuery({query:b.h,variables:{orderId:t.orderId,withGoods:n.withGoods,withPresence:n.withPresence}},!0);if(a){var o=_.RM.reject(Object(_.idPropEq)(e.itemId));return{__typename:"Mutation",remove:j({},a.order,{countWares:a.order.countWares-1,totalSum:j({},a.order.totalSum,{value:-1}),items:e.withGoods?o(a.order.items):a.order.items,presence:e.withPresence?o(a.order.presence):a.order.presence})}}}}(),P=I.cartModel,N=I.onItemEdit,x=I.onItemRemove,T=I.onPlaceOrder,S=I.onChangeOrder,M=s.a.useCallback(function(){if(l&&C.disableInteraction)return null;var e=!n||C.disableInteraction;return s.a.createElement(p.a,null,s.a.createElement(m.a,{onClick:e?T:S},e?s.a.createElement(a.Trans,{id:"Place order"}):s.a.createElement(a.Trans,{id:"Change order"})))},[l,n,S,T,C]),D=s.a.useCallback(function(){return s.a.createElement(a.Trans,{id:"Accessing your order"})},[]),R=Object(o.a)({colors:{primary:g.primary,sumRowBg:g.primary,sumRowText:"white",mobileSummaryItemCount:g.secondary},labels:E,isReadonly:n,mobileBreakpoint:f.e,backgroundImage:g.backgroundCart,onItemEdit:N,onItemRemove:x,renderMobileSubmit:M,renderGoodsLoading:D});s.a.useEffect(function(){return Object(i.autorun)(function(){P.updateDisplay(R.store.isMobile,R.store.showGoods)})},[R.store,P]);var A=Object(d.b)();return Object(c.d)(function(){var e=Object(b.w)({orderId:t,withGoods:P.withGoods,withPresence:P.withPresence},{skip:!A.initialized||!t,context:{noBatch:!0}}),n=e.data,r=e.loading;return s.a.useEffect(function(){r||(R.updateSummary(n.order),P.withGoods&&R.updateGoods(n.order))}),s.a.createElement(w,null,R.renderCart())})};function k(){return{noSideDish:s.a.createElement(a.Trans,{id:"Without sidedish"}),noCost:s.a.createElement(a.Trans,{id:"For free"}),cartSumHeader:function(e){return s.a.createElement(a.Trans,{id:"In the cart you have goods for {totalPrice}",values:{totalPrice:e}})},emptyCart:s.a.createElement(a.Trans,{id:"Cart is empty"}),totalDiscount:s.a.createElement(a.Trans,{id:"Total discount"}),coverPrice:s.a.createElement(a.Trans,{id:"Covers"}),transportFee:s.a.createElement(a.Trans,{id:"Delivery"}),totalSum:s.a.createElement(a.Trans,{id:"Total"}),tip:s.a.createElement(a.Trans,{id:"Tip"}),minimalOrderPrice:function(e){return s.a.createElement(a.Trans,{id:"Minimal price of order is {price}",values:{price:e}})}}}},1196:function(e,t,n){"use strict";var r=n(38),a=n(78),o=n(59),i=n(0),c=n.n(i),l=n(48),s=n(54),u=n(103),d=n(157),m=function(e){var t=e.orderMethod,n=e.onChange,r=e.children,a=Object(d.a)();return Object(s.d)(function(){return c.a.createElement(u.c,{selected:a.orderMethod===t,onClick:function(){a.useOrderMethod(t),n(a)},"data-testid":"orderMethod-".concat(t),"data-testselected":a.orderMethod===t},r)})};n.d(t,"a",function(){return f});var p=r.d.div.withConfig({displayName:"StyledOrderMethod",componentId:"lyg5h5-0"})(["padding:0.2rem;& button{font-size:1.3rem;margin:0.3rem 1rem 0.3rem 1rem;padding:0.3rem 1.2rem;height:2.7rem;line-height:1rem;white-space:nowrap;span:before{margin:0 0.8rem 0 0;font-size:2rem;font-weight:initial;}}"]),f=function(e){var t=e.onChange,n=void 0===t?o.RM.identity:t;return c.a.createElement(p,null,c.a.createElement(m,{orderMethod:l.a.Messenger,onChange:n},c.a.createElement("span",{className:"flaticon-transport"}),c.a.createElement(a.Trans,{id:"I want to deliver"})),c.a.createElement(m,{orderMethod:l.a.Pickup,onChange:n},c.a.createElement("span",{className:"flaticon-restaurant"}),c.a.createElement(a.Trans,{id:"I'll pick up"})))}},1197:function(e,t,n){},1199:function(e,t,n){},1202:function(e,t,n){},1210:function(e,t,n){}}]);
//# sourceMappingURL=1.c68f1148.chunk.js.map